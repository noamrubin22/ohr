/*! For license information please see main.210e6334.js.LICENSE.txt */
!function(){var e={52600:function(e,t,n){"use strict";n.r(t),n.d(t,{AccountNameRequiredError:function(){return p},AccountNotSupported:function(){return y},AmountRequired:function(){return m},BluetoothRequired:function(){return g},BtcUnmatchedApp:function(){return v},CantOpenDevice:function(){return b},CantScanQRCode:function(){return qe},CashAddrNotSupported:function(){return _},CurrencyNotSupported:function(){return w},DBNotReset:function(){return ct},DBWrongPassword:function(){return ut},DeviceAppVerifyNotSupported:function(){return x},DeviceExtractOnboardingStateError:function(){return R},DeviceGenuineSocketEarlyClose:function(){return k},DeviceHalted:function(){return T},DeviceInOSUExpected:function(){return S},DeviceNameInvalid:function(){return M},DeviceNotGenuineError:function(){return A},DeviceOnDashboardExpected:function(){return E},DeviceOnDashboardUnexpected:function(){return I},DeviceOnboardingStatePollingError:function(){return L},DeviceShouldStayInApp:function(){return je},DeviceSocketFail:function(){return P},DeviceSocketNoBulkStatus:function(){return B},DisconnectedDevice:function(){return O},DisconnectedDeviceDuringOperation:function(){return D},DustLimit:function(){return $e},ETHAddressNonEIP:function(){return He},EnpointConfigError:function(){return z},EthAppPleaseEnableContractData:function(){return Z},FeeEstimationFailed:function(){return N},FeeNotLoaded:function(){return Ye},FeeRequired:function(){return Xe},FeeTooHigh:function(){return Qe},FirmwareNotRecognized:function(){return U},FirmwareOrAppUpdateRequired:function(){return ot},GasLessThanEstimate:function(){return pe},GenuineCheckFailed:function(){return nt},HardResetFail:function(){return F},HwTransportError:function(){return lt},HwTransportErrorType:function(){return h},InvalidAddress:function(){return W},InvalidAddressBecauseDestinationIsAlsoSource:function(){return V},InvalidXRPTag:function(){return j},LanguageNotFound:function(){return at},LatestMCUInstalledError:function(){return K},LedgerAPI4xx:function(){return rt},LedgerAPI5xx:function(){return it},LedgerAPIError:function(){return H},LedgerAPIErrorWithMessage:function(){return q},LedgerAPINotAvailable:function(){return Y},LockedDeviceError:function(){return C},MCUNotGenuineToDashboard:function(){return Ee},ManagerAppAlreadyInstalledError:function(){return X},ManagerAppDepInstallRequired:function(){return $},ManagerAppDepUninstallRequired:function(){return J},ManagerAppRelyOnBTCError:function(){return Q},ManagerDeviceLockedError:function(){return ee},ManagerFirmwareNotEnoughSpaceError:function(){return te},ManagerNotEnoughSpaceError:function(){return ne},ManagerUninstallBTCDep:function(){return re},MaxFeeTooLow:function(){return ve},NetworkDown:function(){return ie},NoAccessToCamera:function(){return fe},NoAddressesFound:function(){return oe},NoDBPathGiven:function(){return st},NotEnoughBalance:function(){return ae},NotEnoughBalanceBecauseDestinationNotCreated:function(){return le},NotEnoughBalanceInParentAccount:function(){return ue},NotEnoughBalanceToDelegate:function(){return se},NotEnoughGas:function(){return he},NotEnoughSpendableBalance:function(){return ce},NotSupportedLegacyAddress:function(){return de},PairingFailed:function(){return tt},PasswordIncorrectError:function(){return _e},PasswordsDontMatchError:function(){return be},PendingOperation:function(){return Je},PriorityFeeHigherThanMaxFee:function(){return ge},PriorityFeeTooHigh:function(){return me},PriorityFeeTooLow:function(){return ye},RecipientRequired:function(){return Ie},RecommendSubAccountsToEmpty:function(){return we},RecommendUndelegation:function(){return xe},StatusCodes:function(){return ht},SyncError:function(){return et},TimeoutTagged:function(){return ke},TransportError:function(){return ft},TransportInterfaceNotAvailable:function(){return Ne},TransportOpenUserCancelled:function(){return Ze},TransportRaceCondition:function(){return Ue},TransportStatusError:function(){return pt},TransportWebUSBGestureRequired:function(){return Fe},UnavailableTezosOriginatedAccountReceive:function(){return Se},UnavailableTezosOriginatedAccountSend:function(){return Te},UnexpectedBootloader:function(){return Ae},UnknownMCU:function(){return G},UpdateFetchFileFail:function(){return Me},UpdateIncorrectHash:function(){return Pe},UpdateIncorrectSig:function(){return Be},UpdateYourApp:function(){return Ce},UserRefusedAddress:function(){return De},UserRefusedAllowManager:function(){return Le},UserRefusedDeviceNameChange:function(){return Oe},UserRefusedFirmwareUpdate:function(){return Re},UserRefusedOnDevice:function(){return ze},WebsocketConnectionError:function(){return We},WebsocketConnectionFailed:function(){return Ve},WrongAppForCurrency:function(){return Ge},WrongDeviceForAccount:function(){return Ke},addCustomErrorDeserializer:function(){return s},createCustomErrorClass:function(){return u},deserializeError:function(){return c},getAltStatusMessage:function(){return dt},serializeError:function(){return l}});var r=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},o={},a={},s=function(e,t){a[e]=t},u=function(e){var t=function(t){function n(r,i,o){var a=t.call(this,r||e,o)||this;if(Object.setPrototypeOf(a,n.prototype),a.name=e,i)for(var s in i)a[s]=i[s];if(o&&"object"===typeof o&&"cause"in o&&!("cause"in a)){var u=o.cause;a.cause=u,"stack"in u&&(a.stack=a.stack+"\nCAUSE: "+u.stack)}return a}return r(n,t),n}(Error);return o[e]=t,t};var c=function e(t){if(t&&"object"===typeof t){try{if("string"===typeof t.message){var n=JSON.parse(t.message);n.message&&n.name&&(t=n)}}catch(f){}var r=void 0;if("string"===typeof t.name){var i=t.name,s=a[i];if(s)r=s(t);else{var c="Error"===i?Error:o[i];c||(console.warn("deserializing an unknown class '"+i+"'"),c=u(i)),r=Object.create(c.prototype);try{for(var l in t)t.hasOwnProperty(l)&&(r[l]=t[l])}catch(f){}}}else"string"===typeof t.message&&(r=new Error(t.message));return r&&!r.stack&&Error.captureStackTrace&&Error.captureStackTrace(r,e),r}return new Error(String(t))},l=function(e){return e?"object"===typeof e?f(e,[]):"function"===typeof e?"[Function: ".concat(e.name||"anonymous","]"):e:e};function f(e,t){var n,r,o={};t.push(e);try{for(var a=i(Object.keys(e)),s=a.next();!s.done;s=a.next()){var u=s.value,c=e[u];"function"!==typeof c&&(c&&"object"===typeof c?-1!==t.indexOf(e[u])?o[u]="[Circular]":o[u]=f(e[u],t.slice(0)):o[u]=c)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return"string"===typeof e.name&&(o.name=e.name),"string"===typeof e.message&&(o.message=e.message),"string"===typeof e.stack&&(o.stack=e.stack),o}var h,d=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=u("AccountNameRequired"),y=u("AccountNotSupported"),m=u("AmountRequired"),g=u("BluetoothRequired"),v=u("BtcUnmatchedApp"),b=u("CantOpenDevice"),_=u("CashAddrNotSupported"),w=u("CurrencyNotSupported"),x=u("DeviceAppVerifyNotSupported"),k=u("DeviceGenuineSocketEarlyClose"),A=u("DeviceNotGenuine"),E=u("DeviceOnDashboardExpected"),I=u("DeviceOnDashboardUnexpected"),S=u("DeviceInOSUExpected"),T=u("DeviceHalted"),M=u("DeviceNameInvalid"),P=u("DeviceSocketFail"),B=u("DeviceSocketNoBulkStatus"),C=u("LockedDeviceError"),O=u("DisconnectedDevice"),D=u("DisconnectedDeviceDuringOperation"),R=u("DeviceExtractOnboardingStateError"),L=u("DeviceOnboardingStatePollingError"),z=u("EnpointConfig"),Z=u("EthAppPleaseEnableContractData"),N=u("FeeEstimationFailed"),U=u("FirmwareNotRecognized"),F=u("HardResetFail"),j=u("InvalidXRPTag"),W=u("InvalidAddress"),V=u("InvalidAddressBecauseDestinationIsAlsoSource"),K=u("LatestMCUInstalledError"),G=u("UnknownMCU"),H=u("LedgerAPIError"),q=u("LedgerAPIErrorWithMessage"),Y=u("LedgerAPINotAvailable"),X=u("ManagerAppAlreadyInstalled"),Q=u("ManagerAppRelyOnBTC"),$=u("ManagerAppDepInstallRequired"),J=u("ManagerAppDepUninstallRequired"),ee=u("ManagerDeviceLocked"),te=u("ManagerFirmwareNotEnoughSpace"),ne=u("ManagerNotEnoughSpace"),re=u("ManagerUninstallBTCDep"),ie=u("NetworkDown"),oe=u("NoAddressesFound"),ae=u("NotEnoughBalance"),se=u("NotEnoughBalanceToDelegate"),ue=u("NotEnoughBalanceInParentAccount"),ce=u("NotEnoughSpendableBalance"),le=u("NotEnoughBalanceBecauseDestinationNotCreated"),fe=u("NoAccessToCamera"),he=u("NotEnoughGas"),de=u("NotSupportedLegacyAddress"),pe=u("GasLessThanEstimate"),ye=u("PriorityFeeTooLow"),me=u("PriorityFeeTooHigh"),ge=u("PriorityFeeHigherThanMaxFee"),ve=u("MaxFeeTooLow"),be=u("PasswordsDontMatch"),_e=u("PasswordIncorrect"),we=u("RecommendSubAccountsToEmpty"),xe=u("RecommendUndelegation"),ke=u("TimeoutTagged"),Ae=u("UnexpectedBootloader"),Ee=u("MCUNotGenuineToDashboard"),Ie=u("RecipientRequired"),Se=u("UnavailableTezosOriginatedAccountReceive"),Te=u("UnavailableTezosOriginatedAccountSend"),Me=u("UpdateFetchFileFail"),Pe=u("UpdateIncorrectHash"),Be=u("UpdateIncorrectSig"),Ce=u("UpdateYourApp"),Oe=u("UserRefusedDeviceNameChange"),De=u("UserRefusedAddress"),Re=u("UserRefusedFirmwareUpdate"),Le=u("UserRefusedAllowManager"),ze=u("UserRefusedOnDevice"),Ze=u("TransportOpenUserCancelled"),Ne=u("TransportInterfaceNotAvailable"),Ue=u("TransportRaceCondition"),Fe=u("TransportWebUSBGestureRequired"),je=u("DeviceShouldStayInApp"),We=u("WebsocketConnectionError"),Ve=u("WebsocketConnectionFailed"),Ke=u("WrongDeviceForAccount"),Ge=u("WrongAppForCurrency"),He=u("ETHAddressNonEIP"),qe=u("CantScanQRCode"),Ye=u("FeeNotLoaded"),Xe=u("FeeRequired"),Qe=u("FeeTooHigh"),$e=u("DustLimit"),Je=u("PendingOperation"),et=u("SyncError"),tt=u("PairingFailed"),nt=u("GenuineCheckFailed"),rt=u("LedgerAPI4xx"),it=u("LedgerAPI5xx"),ot=u("FirmwareOrAppUpdateRequired"),at=u("LanguageNotFound"),st=u("NoDBPathGiven"),ut=u("DBWrongPassword"),ct=u("DBNotReset");!function(e){e[e.Unknown=0]="Unknown",e[e.BleLocationServicesDisabled=1]="BleLocationServicesDisabled",e[e.BleBluetoothUnauthorized=2]="BleBluetoothUnauthorized",e[e.BleScanStartFailed=3]="BleScanStartFailed"}(h||(h={}));var lt=function(e){function t(n,r){var i=e.call(this,r)||this;return i.name="HwTransportError",i.type=n,Object.setPrototypeOf(i,t.prototype),i}return d(t,e),t}(Error),ft=function(e){function t(t,n){var r=this,i="TransportError";return(r=e.call(this,t||i)||this).name=i,r.message=t,r.stack=(new Error).stack,r.id=n,r}return d(t,e),t}(Error);s("TransportError",(function(e){return new ft(e.message,e.id)}));var ht={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761};function dt(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}function pt(e){var t=Object.keys(ht).find((function(t){return ht[t]===e}))||"UNKNOWN_ERROR",n=dt(e)||t,r=e.toString(16),i="Ledger device: ".concat(n," (0x").concat(r,")");if(e===ht.LOCKED_DEVICE)throw new C(i);this.name="TransportStatusError",this.message=i,this.stack=(new Error).stack,this.statusCode=e,this.statusText=t}pt.prototype=new Error,s("TransportStatusError",(function(e){return new pt(e.statusCode)}))},10670:function(e,t,n){"use strict";n.d(t,{WC:function(){return o.StatusCodes},rZ:function(){return o.TransportStatusError}});var r=n(47465),i=n.n(r),o=n(52600),a=n(19778).Buffer,s=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},u=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},c=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},l=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},f=function(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},h=function(){function e(){var e=this;this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(i()),this.send=function(t,n,r,i,c,l){return void 0===c&&(c=a.alloc(0)),void 0===l&&(l=[o.StatusCodes.OK]),s(e,void 0,void 0,(function(){var e,s;return u(this,(function(u){switch(u.label){case 0:if(c.length>=256)throw new o.TransportError("data.length exceed 256 bytes limit. Got: "+c.length,"DataLengthTooBig");return[4,this.exchange(a.concat([a.from([t,n,r,i]),a.from([c.length]),c]))];case 1:if(e=u.sent(),s=e.readUInt16BE(e.length-2),!l.some((function(e){return e===s})))throw new o.TransportStatusError(s);return[2,e]}}))}))},this.exchangeAtomicImpl=function(t){return s(e,void 0,void 0,(function(){var e,n,r,i,a,s=this;return u(this,(function(u){switch(u.label){case 0:if(this.exchangeBusyPromise)throw new o.TransportRaceCondition("An action was already pending on the Ledger device. Please deny or reconnect.");n=new Promise((function(t){e=t})),this.exchangeBusyPromise=n,r=!1,i=setTimeout((function(){r=!0,s.emit("unresponsive")}),this.unresponsiveTimeout),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,t()];case 2:return a=u.sent(),r&&this.emit("responsive"),[2,a];case 3:return clearTimeout(i),e&&e(),this.exchangeBusyPromise=null,[7];case 4:return[2]}}))}))},this._appAPIlock=null}return e.prototype.exchange=function(e){throw new Error("exchange not implemented")},e.prototype.setScrambleKey=function(e){},e.prototype.close=function(){return Promise.resolve()},e.prototype.on=function(e,t){this._events.on(e,t)},e.prototype.off=function(e,t){this._events.removeListener(e,t)},e.prototype.emit=function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];(t=this._events).emit.apply(t,l([e],c(n),!1))},e.prototype.setDebugMode=function(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")},e.prototype.setExchangeTimeout=function(e){this.exchangeTimeout=e},e.prototype.setExchangeUnresponsiveTimeout=function(e){this.unresponsiveTimeout=e},e.create=function(e,t){var n=this;return void 0===e&&(e=3e3),new Promise((function(r,i){var a=!1,s=n.listen({next:function(t){a=!0,s&&s.unsubscribe(),u&&clearTimeout(u),n.open(t.descriptor,e).then(r,i)},error:function(e){u&&clearTimeout(u),i(e)},complete:function(){u&&clearTimeout(u),a||i(new o.TransportError(n.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),u=t?setTimeout((function(){s.unsubscribe(),i(new o.TransportError(n.ErrorMessage_ListenTimeout,"ListenTimeout"))}),t):null}))},e.prototype.decorateAppAPIMethods=function(e,t,n){var r,i;try{for(var o=f(t),a=o.next();!a.done;a=o.next()){var s=a.value;e[s]=this.decorateAppAPIMethod(s,e[s],e,n)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.decorateAppAPIMethod=function(e,t,n,r){var i=this;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return s(i,void 0,void 0,(function(){var i;return u(this,(function(s){switch(s.label){case 0:if(i=this._appAPIlock)return[2,Promise.reject(new o.TransportError("Ledger Device is busy (lock "+i+")","TransportLocked"))];s.label=1;case 1:return s.trys.push([1,,3,4]),this._appAPIlock=e,this.setScrambleKey(r),[4,t.apply(n,a)];case 2:return[2,s.sent()];case 3:return this._appAPIlock=null,[7];case 4:return[2]}}))}))}},e.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",e.ErrorMessage_NoDeviceFound="No Ledger device found",e}();t.ZP=h},89458:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionProgram=void 0;var s=n(96322),u=n(73340),c=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(u.Program);t.AuctionProgram=c,c.PREFIX="auction",c.EXTENDED="extended",c.PUBKEY=new s.PublicKey(u.config.programs.auction)},69330:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Auction=t.AuctionData=t.PriceFloor=t.BidState=t.Bid=t.PriceFloorType=t.BidStateType=t.AuctionState=void 0;var f,h=n(73340),d=n(96322),p=l(n(80518)),y=n(19778),m=n(89458),g=n(23413),v=n(75581);!function(e){e[e.Created=0]="Created",e[e.Started=1]="Started",e[e.Ended=2]="Ended"}(t.AuctionState||(t.AuctionState={})),function(e){e[e.EnglishAuction=0]="EnglishAuction",e[e.OpenEdition=1]="OpenEdition"}(t.BidStateType||(t.BidStateType={})),function(e){e[e.None=0]="None",e[e.Minimum=1]="Minimum",e[e.BlindedPrice=2]="BlindedPrice"}(f=t.PriceFloorType||(t.PriceFloorType={}));var b=function(e){s(n,e);var t=u(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n)}(h.Borsh.Data);t.Bid=b,b.SCHEMA=b.struct([["key","pubkeyAsString"],["amount","u64"]]);var _=function(e){s(n,e);var t=u(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n,[{key:"getWinnerAt",value:function(e){var t=this.bids.length-e-1;return t>=0&&t<this.bids.length?this.bids[t].key:null}},{key:"getAmountAt",value:function(e){var t=this.bids.length-e-1;return t>=0&&t<this.bids.length?this.bids[t].amount:null}},{key:"getWinnerIndex",value:function(e){if(!this.bids)return null;var t=this.bids.findIndex((function(t){return t.key===e}));if(-1!==t){var n=this.bids.length-t-1;return n<this.max.toNumber()?n:null}return null}}]),n}(h.Borsh.Data);t.BidState=_,_.SCHEMA=new Map([].concat(i(b.SCHEMA),i(_.struct([["type","u8"],["bids",[b]],["max","u64"]]))));var w=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this)).type=e.type,r.hash=e.hash||new Uint8Array(32),r.type===f.Minimum&&(e.minPrice?r.hash.set(e.minPrice.toArrayLike(y.Buffer,"le",8),0):r.minPrice=new p.default((e.hash||new Uint8Array(0)).slice(0,8),"le")),r}return o(n)}(h.Borsh.Data);t.PriceFloor=w,w.SCHEMA=w.struct([["type","u8"],["hash",[32]]]);var x=function(e){s(n,e);var t=u(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n)}(h.Borsh.Data);t.AuctionData=x,x.SCHEMA=new Map([].concat(i(_.SCHEMA),i(w.SCHEMA),i(x.struct([["authority","pubkeyAsString"],["tokenMint","pubkeyAsString"],["lastBid",{kind:"option",type:"u64"}],["endedAt",{kind:"option",type:"u64"}],["endAuctionAt",{kind:"option",type:"u64"}],["auctionGap",{kind:"option",type:"u64"}],["priceFloor",w],["state","u8"],["bidState",_]]))));var k=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(m.AuctionProgram.PUBKEY))throw(0,h.ERROR_INVALID_OWNER)();return i.data=x.deserialize(i.info.data),i}return o(n,[{key:"getBidderPots",value:function(e){return c(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.AuctionProgram.getProgramAccounts(e,{filters:[{dataSize:v.BidderPot.DATA_SIZE},{memcmp:{offset:64,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return v.BidderPot.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getBidderMetadata",value:function(e){return c(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.AuctionProgram.getProgramAccounts(e,{filters:[{dataSize:g.BidderMetadata.DATA_SIZE},{memcmp:{offset:32,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return g.BidderMetadata.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}}],[{key:"getPDA",value:function(e){return m.AuctionProgram.findProgramAddress([y.Buffer.from(m.AuctionProgram.PREFIX),m.AuctionProgram.PUBKEY.toBuffer(),new d.PublicKey(e).toBuffer()])}},{key:"findMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,m.AuctionProgram.getProgramAccounts(e,{filters:[t.authority&&{memcmp:{offset:0,bytes:new d.PublicKey(t.authority).toBase58()}}].filter(Boolean)});case 2:return r.abrupt("return",r.sent.map((function(e){try{return n.from(e)}catch(t){}})).filter(Boolean));case 3:case"end":return r.stop()}}),i)})))}}]),n}(h.Account);t.Auction=k,k.EXTENDED_DATA_SIZE=219},42634:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionExtended=t.AuctionDataExtended=void 0;var s=n(73340),u=n(89458),c=n(19778),l=n(96322),f=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(s.Borsh.Data);t.AuctionDataExtended=f,f.SCHEMA=f.struct([["totalUncancelledBids","u64"],["tickSize",{kind:"option",type:"u64"}],["gapTickSizePercentage",{kind:"option",type:"u8"}],["instantSalePrice",{kind:"option",type:"u64"}],["name",{kind:"option",type:[32]}]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(u.AuctionProgram.PUBKEY))throw(0,s.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,s.ERROR_INVALID_ACCOUNT_DATA)();return o.data=f.deserialize(o.info.data),o}return r(n,null,[{key:"isCompatible",value:function(e){return e.length===n.DATA_SIZE}},{key:"getPDA",value:function(e){return u.AuctionProgram.findProgramAddress([c.Buffer.from(u.AuctionProgram.PREFIX),u.AuctionProgram.PUBKEY.toBuffer(),new l.PublicKey(e).toBuffer(),c.Buffer.from(u.AuctionProgram.EXTENDED)])}}]),n}(s.Account);t.AuctionExtended=h,h.DATA_SIZE=219},23413:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BidderMetadata=t.BidderMetadataData=void 0;var s=n(73340),u=n(96322),c=n(89458),l=n(19778),f=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(s.Borsh.Data);t.BidderMetadataData=f,f.SCHEMA=f.struct([["bidderPubkey","pubkeyAsString"],["auctionPubkey","pubkeyAsString"],["lastBid","u64"],["lastBidTimestamp","u64"],["cancelled","u8"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(c.AuctionProgram.PUBKEY))throw(0,s.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,s.ERROR_INVALID_ACCOUNT_DATA)();return o.data=f.deserialize(o.info.data),o}return r(n,null,[{key:"isCompatible",value:function(e){return e.length===n.DATA_SIZE}},{key:"getPDA",value:function(e,t){return c.AuctionProgram.findProgramAddress([l.Buffer.from(c.AuctionProgram.PREFIX),c.AuctionProgram.PUBKEY.toBuffer(),new u.PublicKey(e).toBuffer(),new u.PublicKey(t).toBuffer(),l.Buffer.from("metadata")])}}]),n}(s.Account);t.BidderMetadata=h,h.DATA_SIZE=81},75581:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.BidderPot=t.BidderPotData=void 0;var s=n(73340),u=n(89458),c=n(96322),l=n(19778),f=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(s.Borsh.Data);t.BidderPotData=f,f.SCHEMA=f.struct([["bidderPot","pubkeyAsString"],["bidderAct","pubkeyAsString"],["auctionAct","pubkeyAsString"],["emptied","u8"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(u.AuctionProgram.PUBKEY))throw(0,s.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,s.ERROR_INVALID_ACCOUNT_DATA)();return o.data=f.deserialize(o.info.data),o}return r(n,null,[{key:"isCompatible",value:function(e){return e.length===n.DATA_SIZE}},{key:"getPDA",value:function(e,t){return u.AuctionProgram.findProgramAddress([l.Buffer.from(u.AuctionProgram.PREFIX),u.AuctionProgram.PUBKEY.toBuffer(),new c.PublicKey(e).toBuffer(),new c.PublicKey(t).toBuffer()])}}]),n}(s.Account);t.BidderPot=h,h.DATA_SIZE=97},33258:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(69330),t),i(n(42634),t),i(n(23413),t),i(n(75581),t),i(n(89458),t),i(n(42578),t)},78563:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CancelBid=t.CancelBidArgs=void 0;var s=n(73340),u=n(67033),c=n(96322),l=n(89458),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=0,e}return r(n)}(s.Borsh.Data);t.CancelBidArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["resource","pubkeyAsString"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.auction,s=r.auctionExtended,h=r.bidderPot,d=r.bidderMeta,p=r.bidder,y=r.bidderToken,m=r.bidderPotToken,g=r.tokenMint,v=r.resource,b=f.serialize({resource:v.toString()});return o.add(new c.TransactionInstruction({keys:[{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:c.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:l.AuctionProgram.PUBKEY,data:b})),o}return r(n)}(s.Transaction);t.CancelBid=h},69885:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAuction=t.CreateAuctionArgs=t.WinnerLimit=t.WinnerLimitType=void 0;var u=n(73340),c=n(96322),l=n(89458),f=n(69330);!function(e){e[e.Unlimited=0]="Unlimited",e[e.Capped=1]="Capped"}(t.WinnerLimitType||(t.WinnerLimitType={}));var h=function(e){a(n,e);var t=s(n);function n(){return o(this,n),t.apply(this,arguments)}return i(n)}(u.Borsh.Data);t.WinnerLimit=h,h.SCHEMA=h.struct([["type","u8"],["usize","u64"]]);var d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=1,e}return i(n)}(u.Borsh.Data);t.CreateAuctionArgs=d,d.SCHEMA=new Map([].concat(r(h.SCHEMA),r(f.PriceFloor.SCHEMA),r(d.struct([["instruction","u8"],["winners",h],["endAuctionAt",{kind:"option",type:"u64"}],["auctionGap",{kind:"option",type:"u64"}],["tokenMint","pubkeyAsString"],["authority","pubkeyAsString"],["resource","pubkeyAsString"],["priceFloor",f.PriceFloor],["tickSize",{kind:"option",type:"u64"}],["gapTickSizePercentage",{kind:"option",type:"u8"}]]))));var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.args,s=r.auction,u=r.auctionExtended,f=r.creator,h=d.serialize(a);return i.add(new c.TransactionInstruction({keys:[{pubkey:f,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:l.AuctionProgram.PUBKEY,data:h})),i}return i(n)}(u.Transaction);t.CreateAuction=p},16774:function(e,t,n){"use strict";var r,i=n(861).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAuctionV2=t.CreateAuctionV2Args=void 0;var c=n(73340),l=n(96322),f=n(89458),h=n(69330),d=n(69885),p=function(e){s(n,e);var t=u(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).instruction=7,e}return o(n)}(c.Borsh.Data);t.CreateAuctionV2Args=p,r=p,p.SCHEMA=new Map([].concat(i(d.WinnerLimit.SCHEMA),i(h.PriceFloor.SCHEMA),i(r.struct([["instruction","u8"],["winners",d.WinnerLimit],["endAuctionAt",{kind:"option",type:"u64"}],["auctionGap",{kind:"option",type:"u64"}],["tokenMint","pubkeyAsString"],["authority","pubkeyAsString"],["resource","pubkeyAsString"],["priceFloor",h.PriceFloor],["tickSize",{kind:"option",type:"u64"}],["gapTickSizePercentage",{kind:"option",type:"u8"}],["instantSalePrice",{kind:"option",type:"u64"}],["name",{kind:"option",type:[32]}]]))));var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;a(this,n),i=t.call(this,e);var o=r.args,s=r.auction,u=r.auctionExtended,c=r.creator,h=p.serialize(o);return i.add(new l.TransactionInstruction({keys:[{pubkey:c,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:f.AuctionProgram.PUBKEY,data:h})),i}return o(n)}(c.Transaction);t.CreateAuctionV2=y},54065:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.PlaceBid=t.PlaceBidArgs=void 0;var s=n(73340),u=n(96322),c=n(89458),l=n(67033),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=6,e}return r(n)}(s.Borsh.Data);t.PlaceBidArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["amount","u64"],["resource","pubkeyAsString"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.auction,h=r.auctionExtended,d=r.bidderPot,p=r.bidderMeta,y=r.bidder,m=r.bidderToken,g=r.bidderPotToken,v=r.tokenMint,b=r.transferAuthority,_=r.resource,w=r.amount,x=f.serialize({resource:_.toString(),amount:w});return o.add(new u.TransactionInstruction({keys:[{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:u.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:u.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:u.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:c.AuctionProgram.PUBKEY,data:x})),o}return r(n)}(s.Transaction);t.PlaceBid=h},42900:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetAuctionAuthority=t.SetAuctionAuthorityArgs=void 0;var s=n(73340),u=n(96322),c=n(89458),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=5,e}return r(n)}(s.Borsh.Data);t.SetAuctionAuthorityArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.auction,s=r.currentAuthority,f=r.newAuthority,h=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1}],programId:c.AuctionProgram.PUBKEY,data:h})),o}return r(n)}(s.Transaction);t.SetAuctionAuthority=f},42578:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(78563),t),i(n(69885),t),i(n(16774),t),i(n(54065),t),i(n(42900),t)},67033:function(e,t,n){"use strict";n.r(t),n.d(t,{ASSOCIATED_TOKEN_PROGRAM_ID:function(){return it},AccountLayout:function(){return dt},MintLayout:function(){return ht},NATIVE_MINT:function(){return ft},TOKEN_PROGRAM_ID:function(){return rt},Token:function(){return yt},u64:function(){return ut}});for(var r=n(74165),i=n(15861),o=n(93433),a=n(11752),s=n(61120),u=n(37762),c=n(15671),l=n(43144),f=n(97326),h=n(60136),d=n(29388),p=n(4942),y=n(80518),m=n.n(y),g=n(96322),v={},b={byteLength:function(e){var t=I(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=I(e),i=r[0],o=r[1],a=new x(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=w[e.charCodeAt(n)]<<18|w[e.charCodeAt(n+1)]<<12|w[e.charCodeAt(n+2)]<<6|w[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=w[e.charCodeAt(n)]<<2|w[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=w[e.charCodeAt(n)]<<10|w[e.charCodeAt(n+1)]<<4|w[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(S(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(_[t>>2]+_[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(_[t>>10]+_[t>>4&63]+_[t<<2&63]+"="));return i.join("")}},_=[],w=[],x="undefined"!==typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,E=k.length;A<E;++A)_[A]=k[A],w[k.charCodeAt(A)]=A;function I(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function S(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(_[(i=r)>>18&63]+_[i>>12&63]+_[i>>6&63]+_[63&i]);return o.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;var T={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}};!function(e){var t=b,n=T,r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|g(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?o(0):y(e);if("Buffer"===e.type&&Array.isArray(e.data))return y(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),o(e<0?0:0|g(e))}function y(e){for(var t=e.length<0?0:0|g(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function v(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:k(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):k(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function A(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function E(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function I(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return p(e)},a.allocUnsafeSlow=function(e){return p(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(a.isBuffer(o)||(o=a.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function W(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),a.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var V={};function K(e,t,n){V[e]=function(n){(0,h.Z)(i,n);var r=(0,d.Z)(i);function i(){var n;return(0,c.Z)(this,i),n=r.call(this),Object.defineProperty((0,f.Z)(n),"message",{value:t.apply((0,f.Z)(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return(0,l.Z)(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}}(v);var M="undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},P="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function B(e,t){var n={seen:[],stylize:O};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),z(t)?n.showHidden=t:t&&function(e,t){if(!t||!j(t))return e;var n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),U(n.showHidden)&&(n.showHidden=!1),U(n.depth)&&(n.depth=2),U(n.colors)&&(n.colors=!1),U(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=C),D(n,e,n.depth)}function C(e,t){var n=B.styles[t];return n?"\x1b["+B.colors[n][0]+"m"+e+"\x1b["+B.colors[n][1]+"m":e}function O(e,t){return e}function D(e,t,n){if(e.customInspect&&t&&K(t.inspect)&&t.inspect!==B&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return N(r)||(r=D(e,r,n)),r}var i=function(e,t){if(U(t))return e.stylize("undefined","undefined");if(N(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"===typeof r)return e.stylize(""+t,"number");var r;if(z(t))return e.stylize(""+t,"boolean");if(Z(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),V(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return R(t);if(0===o.length){if(K(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(F(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(W(t))return e.stylize(Date.prototype.toString.call(t),"date");if(V(t))return R(t)}var u,c,l="",f=!1,h=["{","}"];(u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),K(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return F(t)&&(l=" "+RegExp.prototype.toString.call(t)),W(t)&&(l=" "+Date.prototype.toUTCString.call(t)),V(t)&&(l=" "+R(t)),0!==o.length||f&&0!=t.length?n<0?F(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)q(t,String(a))?o.push(L(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(L(e,t,n,r,i,!0))})),o}(e,t,n,a,o):o.map((function(r){return L(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,h)):h[0]+l+h[1]}function R(e){return"["+Error.prototype.toString.call(e)+"]"}function L(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),q(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=Z(n)?D(e,u.value,null):D(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),U(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function z(e){return"boolean"===typeof e}function Z(e){return null===e}function N(e){return"string"===typeof e}function U(e){return void 0===e}function F(e){return j(e)&&"[object RegExp]"===H(e)}function j(e){return"object"===typeof e&&null!==e}function W(e){return j(e)&&"[object Date]"===H(e)}function V(e){return j(e)&&("[object Error]"===H(e)||e instanceof Error)}function K(e){return"function"===typeof e}function G(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function H(e){return Object.prototype.toString.call(e)}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}B.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},B.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var X,Q=Object.prototype.hasOwnProperty,$=Object.keys||function(e){var t=[];for(var n in e)Q.call(e,n)&&t.push(n);return t},J=Array.prototype.slice;function ee(){return"undefined"!==typeof X?X:X="foo"===function(){}.name}function te(e){return Object.prototype.toString.call(e)}function ne(e){return!v.isBuffer(e)&&("function"===typeof M.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function re(e,t){e||ce(e,!0,t,"==",le)}var ie=/\s*function\s+([^\(\s]*)\s*/;function oe(e){if(K(e)){if(ee())return e.name;var t=e.toString().match(ie);return t&&t[1]}}function ae(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return se(ue(e.actual),128)+" "+e.operator+" "+se(ue(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||ce;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=oe(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function se(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function ue(e){if(ee()||!K(e))return B(e);var t=oe(e);return"[Function"+(t?": "+t:"")+"]"}function ce(e,t,n,r,i){throw new ae({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function le(e,t){e||ce(e,!0,t,"==",le)}function fe(e,t,n,r){if(e===t)return!0;if(v.isBuffer(e)&&v.isBuffer(t))return 0===Y(e,t);if(W(e)&&W(t))return e.getTime()===t.getTime();if(F(e)&&F(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(ne(e)&&ne(t)&&te(e)===te(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===Y(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(v.isBuffer(e)!==v.isBuffer(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(G(e)||G(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=he(e),o=he(t);if(i&&!o||!i&&o)return!1;if(i)return fe(e=J.call(e),t=J.call(t),n);var a,s,u=$(e),c=$(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!fe(e[a=u[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function he(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function de(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function pe(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&ce(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&i&&!n;if((!e&&V(i)&&o&&de(i,n)||a)&&ce(i,n,"Got unwanted exception"+r),e&&i&&n&&!de(i,n)||!e&&i)throw i}re.AssertionError=ae,P(ae,Error),re.fail=ce,re.ok=le,re.equal=function e(t,n,r){t!=n&&ce(t,n,r,"==",e)},re.notEqual=function e(t,n,r){t==n&&ce(t,n,r,"!=",e)},re.deepEqual=function e(t,n,r){fe(t,n,!1)||ce(t,n,r,"deepEqual",e)},re.deepStrictEqual=function e(t,n,r){fe(t,n,!0)||ce(t,n,r,"deepStrictEqual",e)},re.notDeepEqual=function e(t,n,r){fe(t,n,!1)&&ce(t,n,r,"notDeepEqual",e)},re.notDeepStrictEqual=function e(t,n,r){fe(t,n,!0)&&ce(t,n,r,"notDeepStrictEqual",e)},re.strictEqual=function e(t,n,r){t!==n&&ce(t,n,r,"===",e)},re.notStrictEqual=function e(t,n,r){t===n&&ce(t,n,r,"!==",e)},re.throws=function(e,t,n){pe(!0,e,t,n)},re.doesNotThrow=function(e,t,n){pe(!1,e,t,n)},re.ifError=function(e){if(e)throw e};var ye={},me=function(){function e(t,n){if((0,c.Z)(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return(0,l.Z)(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"decode",value:function(e,t){throw new Error("Layout is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("Layout is abstract")}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function ge(e,t){return t.property?e+"["+t.property+"]":e}ye.Layout=me,ye.nameWithProperty=ge,ye.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof me))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var ve=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(me),be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return(i=t.call(this,-1,r)).elementSpan=e,i}return(0,l.Z)(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(ve),_e=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return(o=t.call(this,e.span,i||e.property)).layout=e,o.offset=r,o}return(0,l.Z)(n,[{key:"isCount",value:function(){return this.layout instanceof we||this.layout instanceof xe}},{key:"decode",value:function(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}]),n}(ve),we=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}]),n}(me),xe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}]),n}(me),ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}]),n}(me),Ae=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}]),n}(me),Ee=Math.pow(2,32);function Ie(e){var t=Math.floor(e/Ee);return{hi32:t,lo32:e-t*Ee}}function Se(e,t){return e*Ee+t}var Te=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}]),n}(me),Me=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readUInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Pe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}]),n}(me),Be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Ce=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}]),n}(me),Oe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}]),n}(me),De=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}]),n}(me),Re=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}]),n}(me),Le=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ve&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof ve)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0,r=this.count;if(r instanceof ve&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=[],r=0,i=this.count;for(i instanceof ve&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof ve&&this.count.encode(e.length,t,n),i}}]),n}(me),ze=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof me}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var a,s=(0,u.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){s.e(h)}finally{s.f()}var f=-1;try{f=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(o=t.call(this,f,r)).fields=e,o.decodePrefixes=!!i,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n,r=this.makeDestinationObject(),i=(0,u.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r,i=n,o=0,a=0,s=(0,u.Z)(this.fields);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.span;if(a=0<l?l:0,void 0!==c.property){var f=e[c.property];void 0!==f&&(a=c.encode(f,t,n),0>l&&(l=c.getSpan(t,n)))}o=n,n+=l}}catch(h){s.e(h)}finally{s.f()}return o+a-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(me),Ze=function(){function e(t){(0,c.Z)(this,e),this.property=t}return(0,l.Z)(e,[{key:"decode",value:function(){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(){throw new Error("UnionDiscriminator is abstract")}}]),e}(),Ne=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(Ze),Ue=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;(0,c.Z)(this,n);var a=e instanceof we||e instanceof xe;if(a)e=new Ne(new _e(e));else if(e instanceof ve&&e.isCount())e=new Ne(e);else if(!(e instanceof Ze))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===r&&(r=null),!(null===r||r instanceof me))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var s=-1;r&&0<=(s=r.span)&&a&&(s+=e.layout.span),(o=t.call(this,s,i)).discriminator=e,o.usesPrefixDiscriminator=a,o.defaultLayout=r,o.registry={};var u=o.defaultGetSourceVariant.bind((0,f.Z)(o));return o.getSourceVariant=function(e){return u(e)},o.configGetSourceVariant=function(e){u=e.bind(this)},o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e,t){var n;void 0===t&&(t=0);var r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){var a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new Fe(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e,t){var n=e;return v.Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}]),n}(me),Fe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i,o){var a;if((0,c.Z)(this,n),!(e instanceof Ue))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof me))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}},{key:"decode",value:function(e,t){var n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(me);function je(e){return 0>e&&(e+=4294967296),e}var We=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof we||e instanceof xe))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=je(e),this},o._packedGetValue=function(){return a},o}return(0,l.Z)(n,[{key:"decode",value:function(e,t){var n=this.makeDestinationObject();void 0===t&&(t=0);var r=this.word.decode(e,t);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;void 0!==a.property&&(n[a.property]=a.decode(r))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.word.decode(t,n);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a.property){var s=e[a.property];void 0!==s&&a.encode(s)}}}catch(c){o.e(c)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new Ve(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new Ke(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(me),Ve=function(){function e(t,n,r){if((0,c.Z)(this,e),!(t instanceof We))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=je(this.valueMask<<this.start),this.property=r}return(0,l.Z)(e,[{key:"decode",value:function(){return je(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if(!Number.isInteger(e)||e!==je(e&this.valueMask))throw new TypeError(ge("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=je(e<<this.start);this.container._packedSetValue(je(t&~this.wordMask)|n)}}]),e}(),Ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){return(0,c.Z)(this,n),t.call(this,e,1,r)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return!!Ve.prototype.decode.call(this,e,t)}},{key:"encode",value:function(e){return"boolean"===typeof e&&(e=+e),Ve.prototype.encode.call(this,e)}}]),n}(Ve),Ge=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof ve||(o=e),(i=t.call(this,o,r)).length=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof ve&&(r=e.length),!v.Buffer.isBuffer(e)||r!==e.length)throw new TypeError(ge("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof ve&&this.length.encode(r,t,n),r}}]),n}(me),He=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,-1,e)}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}]),n}(me),qe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}]),n}(me),Ye=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;return(0,c.Z)(this,n),(i=t.call(this,0,r)).value=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t,n){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(me);ye.ExternalLayout=ve,ye.GreedyCount=be,ye.OffsetLayout=_e,ye.UInt=we,ye.UIntBE=xe,ye.Int=ke,ye.IntBE=Ae,ye.Float=Ce,ye.FloatBE=Oe,ye.Double=De,ye.DoubleBE=Re,ye.Sequence=Le,ye.Structure=ze,ye.UnionDiscriminator=Ze,ye.UnionLayoutDiscriminator=Ne,ye.Union=Ue,ye.VariantLayout=Fe,ye.BitStructure=We,ye.BitField=Ve,ye.Boolean=Ke,ye.Blob=Ge,ye.CString=He,ye.UTF8=qe,ye.Constant=Ye,ye.greedy=function(e,t){return new be(e,t)},ye.offset=function(e,t,n){return new _e(e,t,n)};var Xe=ye.u8=function(e){return new we(1,e)};ye.u16=function(e){return new we(2,e)},ye.u24=function(e){return new we(3,e)};var Qe=ye.u32=function(e){return new we(4,e)};ye.u40=function(e){return new we(5,e)},ye.u48=function(e){return new we(6,e)},ye.nu64=function(e){return new Te(e)},ye.u16be=function(e){return new xe(2,e)},ye.u24be=function(e){return new xe(3,e)},ye.u32be=function(e){return new xe(4,e)},ye.u40be=function(e){return new xe(5,e)},ye.u48be=function(e){return new xe(6,e)},ye.nu64be=function(e){return new Me(e)},ye.s8=function(e){return new ke(1,e)},ye.s16=function(e){return new ke(2,e)},ye.s24=function(e){return new ke(3,e)},ye.s32=function(e){return new ke(4,e)},ye.s40=function(e){return new ke(5,e)},ye.s48=function(e){return new ke(6,e)},ye.ns64=function(e){return new Pe(e)},ye.s16be=function(e){return new Ae(2,e)},ye.s24be=function(e){return new Ae(3,e)},ye.s32be=function(e){return new Ae(4,e)},ye.s40be=function(e){return new Ae(5,e)},ye.s48be=function(e){return new Ae(6,e)},ye.ns64be=function(e){return new Be(e)},ye.f32=function(e){return new Ce(e)},ye.f32be=function(e){return new Oe(e)},ye.f64=function(e){return new De(e)},ye.f64be=function(e){return new Re(e)};var $e=ye.struct=function(e,t,n){return new ze(e,t,n)};ye.bits=function(e,t,n){return new We(e,t,n)},ye.seq=function(e,t,n){return new Le(e,t,n)},ye.union=function(e,t,n){return new Ue(e,t,n)},ye.unionLayoutDiscriminator=function(e,t){return new Ne(e,t)};var Je=ye.blob=function(e,t){return new Ge(e,t)};ye.cstr=function(e){return new He(e)},ye.utf8=function(e,t){return new qe(e,t)},ye.const=function(e,t){return new Ye(e,t)};var et=function(){return Je(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},tt=function(){return Je(8,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64")};function nt(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return(0,g.sendAndConfirmTransaction)(t,n,i,{skipPreflight:!1})}var rt=new g.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),it=new g.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),ot="Failed to find account",at="Invalid account owner";function st(e){return v.Buffer.from(e.toBuffer())}var ut=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"toBuffer",value:function(){var e=(0,a.Z)((0,s.Z)(n.prototype),"toArray",this).call(this).reverse(),t=v.Buffer.from(e);if(8===t.length)return t;re(t.length<8,"u64 too large");var r=v.Buffer.alloc(8);return t.copy(r),r}}],[{key:"fromBuffer",value:function(e){return re(8===e.length,"Invalid buffer length: ".concat(e.length)),new n((0,o.Z)(e).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)}}]),n}(m());function ct(e){return"publicKey"in e}var lt={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},ft=new g.PublicKey("So11111111111111111111111111111111111111112"),ht=$e([Qe("mintAuthorityOption"),et("mintAuthority"),tt("supply"),Xe("decimals"),Xe("isInitialized"),Qe("freezeAuthorityOption"),et("freezeAuthority")]),dt=$e([et("mint"),et("owner"),tt("amount"),Qe("delegateOption"),et("delegate"),Xe("state"),Qe("isNativeOption"),tt("isNative"),tt("delegatedAmount"),Qe("closeAuthorityOption"),et("closeAuthority")]),pt=$e([Xe("m"),Xe("n"),Xe("is_initialized"),et("signer1"),et("signer2"),et("signer3"),et("signer4"),et("signer5"),et("signer6"),et("signer7"),et("signer8"),et("signer9"),et("signer10"),et("signer11")]),yt=function(){function e(t,n,r,i){(0,c.Z)(this,e),(0,p.Z)(this,"connection",void 0),(0,p.Z)(this,"publicKey",void 0),(0,p.Z)(this,"programId",void 0),(0,p.Z)(this,"associatedProgramId",void 0),(0,p.Z)(this,"payer",void 0),Object.assign(this,{connection:t,publicKey:n,programId:r,payer:i,associatedProgramId:it})}return(0,l.Z)(e,[{key:"createAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(this.connection);case 2:return i=t.sent,o=g.Keypair.generate(),(a=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:i,space:dt.span,programId:this.programId})),s=this.publicKey,a.add(e.createInitAccountInstruction(this.programId,s,o.publicKey,n)),t.next=10,nt("createAccount and InitializeAccount",this.connection,a,this.payer,o);case 10:return t.abrupt("return",o.publicKey);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.abrupt("return",this.createAssociatedTokenAccountInternal(n,i));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInternal",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("CreateAssociatedTokenAccount",this.connection,(new g.Transaction).add(e.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,i,n,this.payer.publicKey)),this.payer);case 2:return t.abrupt("return",i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrCreateAssociatedAccountInfo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.prev=3,t.next=6,this.getAccountInfo(i);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),t.t0.message!==ot&&t.t0.message!==at){t.next=24;break}return t.prev=12,t.next=15,this.createAssociatedTokenAccountInternal(n,i);case 15:t.next=19;break;case 17:t.prev=17,t.t1=t.catch(12);case 19:return t.next=21,this.getAccountInfo(i);case 21:return t.abrupt("return",t.sent);case 24:throw t.t0;case 25:case"end":return t.stop()}}),t,this,[[3,9],[12,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createMultisig",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var o,a,s,u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g.Keypair.generate(),t.next=3,e.getMinBalanceRentForExemptMultisig(this.connection);case 3:return a=t.sent,(s=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:a,space:pt.span,programId:this.programId})),u=[{pubkey:o.publicKey,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],i.forEach((function(e){return u.push({pubkey:e,isSigner:!1,isWritable:!1})})),c=$e([Xe("instruction"),Xe("m")]),l=v.Buffer.alloc(c.span),c.encode({instruction:2,m:n},l),s.add({keys:u,programId:this.programId,data:l}),t.next=14,nt("createAccount and InitializeMultisig",this.connection,s,this.payer,o);case 14:return t.abrupt("return",o.publicKey);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMintInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(this.publicKey);case 2:if(null!==(t=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:if(t.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid mint owner: ".concat(JSON.stringify(t.owner)));case 7:if(t.data.length==ht.span){e.next=9;break}throw new Error("Invalid mint size");case 9:return n=v.Buffer.from(t.data),0===(i=ht.decode(n)).mintAuthorityOption?i.mintAuthority=null:i.mintAuthority=new g.PublicKey(i.mintAuthority),i.supply=ut.fromBuffer(i.supply),i.isInitialized=0!=i.isInitialized,0===i.freezeAuthorityOption?i.freezeAuthority=null:i.freezeAuthority=new g.PublicKey(i.freezeAuthority),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t,n);case 2:if(null!==(i=e.sent)){e.next=5;break}throw new Error(ot);case 5:if(i.owner.equals(this.programId)){e.next=7;break}throw new Error(at);case 7:if(i.data.length==dt.span){e.next=9;break}throw new Error("Invalid account size");case 9:if(o=v.Buffer.from(i.data),(a=dt.decode(o)).address=t,a.mint=new g.PublicKey(a.mint),a.owner=new g.PublicKey(a.owner),a.amount=ut.fromBuffer(a.amount),0===a.delegateOption?(a.delegate=null,a.delegatedAmount=new ut):(a.delegate=new g.PublicKey(a.delegate),a.delegatedAmount=ut.fromBuffer(a.delegatedAmount)),a.isInitialized=0!==a.state,a.isFrozen=2===a.state,1===a.isNativeOption?(a.rentExemptReserve=ut.fromBuffer(a.isNative),a.isNative=!0):(a.rentExemptReserve=null,a.isNative=!1),0===a.closeAuthorityOption?a.closeAuthority=null:a.closeAuthority=new g.PublicKey(a.closeAuthority),a.mint.equals(this.publicKey)){e.next=22;break}throw new Error("Invalid account mint: ".concat(JSON.stringify(a.mint)," !== ").concat(JSON.stringify(this.publicKey)));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultisigInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t);case 2:if(null!==(n=e.sent)){e.next=5;break}throw new Error("Failed to find multisig");case 5:if(n.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid multisig owner");case 7:if(n.data.length==pt.span){e.next=9;break}throw new Error("Invalid multisig size");case 9:return i=v.Buffer.from(n.data),(o=pt.decode(i)).signer1=new g.PublicKey(o.signer1),o.signer2=new g.PublicKey(o.signer2),o.signer3=new g.PublicKey(o.signer3),o.signer4=new g.PublicKey(o.signer4),o.signer5=new g.PublicKey(o.signer5),o.signer6=new g.PublicKey(o.signer6),o.signer7=new g.PublicKey(o.signer7),o.signer8=new g.PublicKey(o.signer8),o.signer9=new g.PublicKey(o.signer9),o.signer10=new g.PublicKey(o.signer10),o.signer11=new g.PublicKey(o.signer11),e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Transfer",this.connection,(new g.Transaction).add(e.createTransferInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Approve",this.connection,(new g.Transaction).add(e.createApproveInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"revoke",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["Revoke",this.connection,(new g.Transaction).add(e.createRevokeInstruction(this.programId,n,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"setAuthority",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(s)?(c=s.publicKey,l=[s]):(c=s,l=u),t.next=3,nt.apply(void 0,["SetAuthority",this.connection,(new g.Transaction).add(e.createSetAuthorityInstruction(this.programId,n,i,a,c,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"mintTo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["MintTo",this.connection,(new g.Transaction).add(e.createMintToInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"burn",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["Burn",this.connection,(new g.Transaction).add(e.createBurnInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"closeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(u=a.publicKey,c=[a]):(u=a,c=s),t.next=3,nt.apply(void 0,["CloseAccount",this.connection,(new g.Transaction).add(e.createCloseAccountInstruction(this.programId,n,i,u,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"freezeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["FreezeAccount",this.connection,(new g.Transaction).add(e.createFreezeAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"thawAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["ThawAccount",this.connection,(new g.Transaction).add(e.createThawAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"transferChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["TransferChecked",this.connection,(new g.Transaction).add(e.createTransferCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"approveChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["ApproveChecked",this.connection,(new g.Transaction).add(e.createApproveCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"mintToChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["MintToChecked",this.connection,(new g.Transaction).add(e.createMintToCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"burnChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["BurnChecked",this.connection,(new g.Transaction).add(e.createBurnCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"syncNative",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("SyncNative",this.connection,(new g.Transaction).add(e.createSyncNativeInstruction(this.programId,n)),this.payer);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getMinBalanceRentForExemptMint",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(ht.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(dt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptMultisig",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(pt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMint",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s,u){var c,l,f,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.Keypair.generate(),l=new e(n,c.publicKey,u,i),t.next=4,e.getMinBalanceRentForExemptMint(n);case 4:return f=t.sent,(h=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:i.publicKey,newAccountPubkey:c.publicKey,lamports:f,space:ht.span,programId:u})),h.add(e.createInitMintInstruction(u,c.publicKey,s,o,a)),t.next=10,nt("createAccount and InitializeMint",n,h,i,c);case 10:return t.abrupt("return",l);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"createWrappedNativeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s){var u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(n);case 2:return u=t.sent,c=g.Keypair.generate(),(l=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:a.publicKey,newAccountPubkey:c.publicKey,lamports:u,space:dt.span,programId:i})),l.add(g.SystemProgram.transfer({fromPubkey:a.publicKey,toPubkey:c.publicKey,lamports:s})),l.add(e.createInitAccountInstruction(i,ft,c.publicKey,o)),t.next=10,nt("createAccount, transfer, and initializeAccount",n,l,a,c);case 10:return t.abrupt("return",c.publicKey);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"createInitMintInstruction",value:function(e,t,n,r,i){var o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=$e([Xe("instruction"),Xe("decimals"),et("mintAuthority"),Xe("option"),et("freezeAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:0,decimals:n,mintAuthority:st(r),option:null===i?0:1,freezeAuthority:st(i||new g.PublicKey(0))},s);return s=s.slice(0,u),new g.TransactionInstruction({keys:o,programId:e,data:s})}},{key:"createInitAccountInstruction",value:function(e,t,n,r){var i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);return o.encode({instruction:1},a),new g.TransactionInstruction({keys:i,programId:e,data:a})}},{key:"createTransferInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:3,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createApproveInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:4,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createRevokeInstruction",value:function(e,t,n,r){var i=$e([Xe("instruction")]),o=v.Buffer.alloc(i.span);i.encode({instruction:5},o);var a=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===r.length?a.push({pubkey:n,isSigner:!0,isWritable:!1}):(a.push({pubkey:n,isSigner:!1,isWritable:!1}),r.forEach((function(e){return a.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:a,programId:e,data:o})}},{key:"createSetAuthorityInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),Xe("authorityType"),Xe("option"),et("newAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:6,authorityType:lt[r],option:null===n?0:1,newAuthority:st(n||new g.PublicKey(0))},s);s=s.slice(0,u);var c=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===o.length?c.push({pubkey:i,isSigner:!0,isWritable:!1}):(c.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:s})}},{key:"createMintToInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:7,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createBurnInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:8,amount:new ut(o).toBuffer()},s);var u=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createCloseAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:9},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createFreezeAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:10},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createThawAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:11},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createTransferCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:12,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createApproveCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:13,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createMintToCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:14,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createBurnCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:15,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createSyncNativeInstruction",value:function(e,t){var n=$e([Xe("instruction")]),r=v.Buffer.alloc(n.span);n.encode({instruction:17},r);var i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new g.TransactionInstruction({keys:i,programId:e,data:r})}},{key:"getAssociatedTokenAddress",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>4&&void 0!==a[4]&&a[4]||g.PublicKey.isOnCurve(o.toBuffer())){e.next=3;break}throw new Error("Owner cannot sign: ".concat(o.toString()));case 3:return e.next=5,g.PublicKey.findProgramAddress([o.toBuffer(),n.toBuffer(),i.toBuffer()],t);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInstruction",value:function(e,t,n,r,i,o){var a=v.Buffer.alloc(0),s=[{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new g.TransactionInstruction({keys:s,programId:e,data:a})}}]),e}()},48686:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Program=void 0;var s=n(96322),u=n(10757),c=n(19778),l=function(){function e(){i(this,e)}return o(e,null,[{key:"findProgramAddress",value:function(e){return a(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.PublicKey.findProgramAddress(e,this.PUBKEY);case 2:return t.abrupt("return",t.sent[0]);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"getProgramAccounts",value:function(e,t){return a(this,void 0,void 0,r().mark((function n(){var i,o,a,l;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},t&&("string"===typeof t?o=t:(o=t.commitment,t.dataSlice&&(i.dataSlice=t.dataSlice),t.filters&&(i.filters=t.filters))),a=e._buildArgs([this.PUBKEY.toBase58()],o,"base64",i),n.next=5,e._rpcRequest("getProgramAccounts",a);case 5:return l=n.sent,n.abrupt("return",l.result.map((function(e){var t=e.account,n=t.data,r=t.executable,i=t.lamports,o=t.owner,a=e.pubkey;return{account:{data:c.Buffer.from(n[0],"base64"),executable:r,lamports:i,owner:new s.PublicKey(o)},pubkey:new s.PublicKey(a)}})).map((function(e){var t=e.pubkey,n=e.account;return new u.Account(t,n)})));case 7:case"end":return n.stop()}}),n,this)})))}}]),e}();t.Program=l},93807:function(e,t,n){"use strict";var r=n(56690).default,i=n(89728).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;var s=function(e){o(n,e);var t=a(n);function n(e){return r(this,n),t.call(this,e)}return i(n,null,[{key:"fromCombined",value:function(e){var t=new n(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});return e.forEach((function(e){return e.instructions.forEach((function(e){t.add(e)}))})),t}}]),n}(n(96322).Transaction);t.Transaction=s},4590:function(e,t,n){"use strict";var r=n(27424).default,i=n(861).default,o=n(17061).default,a=n(56690).default,s=n(89728).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Account=void 0;var c=n(96322),l=n(19778),f=n(92091),h=function(){function e(t,n){a(this,e),this.pubkey=new c.PublicKey(t),this.info=n}return s(e,[{key:"assertOwner",value:function(e){var t;return null===(t=this.info)||void 0===t?void 0:t.owner.equals(new c.PublicKey(e))}},{key:"toJSON",value:function(){var e,t,n,r,i;return{pubkey:this.pubkey.toString(),info:{executable:!!(null===(e=this.info)||void 0===e?void 0:e.executable),owner:(null===(t=this.info)||void 0===t?void 0:t.owner)?new c.PublicKey(null===(n=this.info)||void 0===n?void 0:n.owner):null,lamports:null===(r=this.info)||void 0===r?void 0:r.lamports,data:null===(i=this.info)||void 0===i?void 0:i.data.toJSON()},data:this.data}}},{key:"toString",value:function(){return JSON.stringify(this.toJSON())}}],[{key:"from",value:function(e){return new this(e.pubkey,e.info)}},{key:"load",value:function(t,n){return u(this,void 0,void 0,o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getInfo(t,n);case 2:return i=r.sent,r.abrupt("return",new this(n,i));case 4:case"end":return r.stop()}}),r,this)})))}},{key:"isCompatible",value:function(e){throw new Error("method 'isCompatible' is not implemented")}},{key:"getInfo",value:function(e,t){return u(this,void 0,void 0,o().mark((function n(){var r;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getAccountInfo(new c.PublicKey(t));case 2:if(r=n.sent){n.next=5;break}throw(0,f.ERROR_ACCOUNT_NOT_FOUND)(t);case 5:return n.abrupt("return",Object.assign(Object.assign({},r),{data:l.Buffer.from(null===r||void 0===r?void 0:r.data)}));case 6:case"end":return n.stop()}}),n)})))}},{key:"getInfos",value:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"recent";return u(this,void 0,void 0,o().mark((function s(){var u,c,l;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:for(99,u=[],c=0;c<n.length;c+=99)u.push(e.getMultipleAccounts(t,n.slice(c,Math.min(n.length,c+99)),a));return l=new Map,o.next=6,Promise.all(u);case 6:return o.sent.forEach((function(e){var t;return i(null!==(t=null===e||void 0===e?void 0:e.entries())&&void 0!==t?t:[]).forEach((function(e){var t=r(e,2),n=t[0],i=t[1];return l.set(n,i)}))})),o.abrupt("return",l);case 8:case"end":return o.stop()}}),s)})))}},{key:"getMultipleAccounts",value:function(e,t,n){return u(this,void 0,void 0,o().mark((function r(){var i,a,s;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=e._buildArgs([t.map((function(e){return e.toString()}))],n,"base64"),r.next=3,e._rpcRequest("getMultipleAccounts",i);case 3:if(!(a=r.sent).error){r.next=6;break}throw new Error("failed to get info about accounts "+a.error.message);case 6:if(a.result.value){r.next=8;break}return r.abrupt("return");case 8:return s=a.result.value.filter(Boolean).map((function(e){return Object.assign(Object.assign({},e),{data:l.Buffer.from(e.data[0],"base64")})})),r.abrupt("return",s.reduce((function(e,n,r){return e.set(t[r],n),e}),new Map));case 10:case"end":return r.stop()}}),r)})))}}]),e}();t.Account=h},54521:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.deserialize=t.TokenAccount=void 0;var c=n(92091),l=n(4590),f=n(70916),h=n(96322),d=function(e){a(l,e);var n=s(l);function l(e,r){var o;if(i(this,l),!(o=n.call(this,e,r)).assertOwner(f.TOKEN_PROGRAM_ID))throw(0,c.ERROR_INVALID_OWNER)();if(!l.isCompatible(o.info.data))throw(0,c.ERROR_INVALID_ACCOUNT_DATA)();return o.data=(0,t.deserialize)(o.info.data),o}return o(l,null,[{key:"isCompatible",value:function(e){return e.length===f.AccountLayout.span}},{key:"getTokenAccountsByOwner",value:function(e,t){return u(this,void 0,void 0,r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getTokenAccountsByOwner(new h.PublicKey(t),{programId:f.TOKEN_PROGRAM_ID});case 2:return n.abrupt("return",n.sent.value.map((function(e){return new l(e.pubkey,e.account)})));case 3:case"end":return n.stop()}}),n)})))}}]),l}(l.Account);t.TokenAccount=d;t.deserialize=function(e){var t=f.AccountLayout.decode(e);return t.mint=new h.PublicKey(t.mint),t.owner=new h.PublicKey(t.owner),t.amount=f.u64.fromBuffer(t.amount),0===t.delegateOption?(t.delegate=null,t.delegatedAmount=new f.u64(0)):(t.delegate=new h.PublicKey(t.delegate),t.delegatedAmount=f.u64.fromBuffer(t.delegatedAmount)),t.isInitialized=0!==t.state,t.isFrozen=2===t.state,1===t.isNativeOption?(t.rentExemptReserve=f.u64.fromBuffer(t.isNative),t.isNative=!0):(t.rentExemptReserve=null,t.isNative=!1),0===t.closeAuthorityOption?t.closeAuthority=null:t.closeAuthority=new h.PublicKey(t.closeAuthority),t}},10757:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4590),t),i(n(54521),t)},95883:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0,t.config={arweaveWallet:"HvwC9QSAzvGXhhVrgPmauVwFWcYZhne3hVot9EbHuFTm",programs:{auction:"auctxRXPeJoc4817jDhf4HbjnhEcr1cCXenosMhK5R8",metadata:"metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s",metaplex:"p1exdMJcjVao65QdewkaZRUnU6VPSXhus9n2GzWfh98",vault:"vau1zxA2LbssAUEF7Gpw91zMM1LvXrvpzJtmZ58rPsn",packs:"BNRmGgciUJuyznkYHnmitA9an1BcDDiU9JmjEQwvBYVR",memo:"MemoSq4gqABAXKb96qnH8TysNcWxMyWCqXgDLGmfcHr",token:"TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"},maxCreatorLimit:5}},92091:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=n(33496).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ERROR_ACCOUNT_NOT_FOUND=t.ERROR_DEPRECATED_ACCOUNT_DATA=t.ERROR_INVALID_ACCOUNT_DATA=t.ERROR_INVALID_OWNER=t.MetaplexError=t.ErrorCode=void 0,function(e){e[e.ERROR_INVALID_OWNER=0]="ERROR_INVALID_OWNER",e[e.ERROR_INVALID_ACCOUNT_DATA=1]="ERROR_INVALID_ACCOUNT_DATA",e[e.ERROR_DEPRECATED_ACCOUNT_DATA=2]="ERROR_DEPRECATED_ACCOUNT_DATA",e[e.ERROR_ACCOUNT_NOT_FOUND=3]="ERROR_ACCOUNT_NOT_FOUND"}(r=t.ErrorCode||(t.ErrorCode={}));var c=function(e){a(n,e);var t=s(n);function n(e,r){var i;return o(this,n),(i=t.call(this,r)).errorCode=e,i}return i(n)}(u(Error));t.MetaplexError=c;t.ERROR_INVALID_OWNER=function(){return new c(r.ERROR_INVALID_OWNER,"Invalid owner")};t.ERROR_INVALID_ACCOUNT_DATA=function(){return new c(r.ERROR_INVALID_ACCOUNT_DATA,"Invalid data")};t.ERROR_DEPRECATED_ACCOUNT_DATA=function(){return new c(r.ERROR_DEPRECATED_ACCOUNT_DATA,"Account data is deprecated")};t.ERROR_ACCOUNT_NOT_FOUND=function(e){return new c(r.ERROR_ACCOUNT_NOT_FOUND,"Unable to find account: ".concat(e))}},73340:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(10757),t),i(n(95883),t),i(n(92091),t),i(n(48686),t),i(n(93807),t),i(n(48396),t),i(n(90359),t)},48396:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},41211:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(56690).default,o=n(89728).default,a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.serialize=t.deserializeUnchecked=t.deserialize=t.struct=t.Data=t.extendBorsh=void 0;var s=n(96322),u=n(35127);Object.defineProperty(t,"deserializeUnchecked",{enumerable:!0,get:function(){return u.deserializeUnchecked}}),Object.defineProperty(t,"serialize",{enumerable:!0,get:function(){return u.serialize}}),Object.defineProperty(t,"deserialize",{enumerable:!0,get:function(){return u.deserialize}});var c=a(n(37541));t.extendBorsh=function(){u.BinaryReader.prototype.readPubkey=function(){var e=this.readFixedArray(32);return new s.PublicKey(e)},u.BinaryWriter.prototype.writePubkey=function(e){this.writeFixedArray(e.toBuffer())},u.BinaryReader.prototype.readPubkeyAsString=function(){var e=this.readFixedArray(32);return c.default.encode(e)},u.BinaryWriter.prototype.writePubkeyAsString=function(e){this.writeFixedArray(c.default.decode(e))}},(0,t.extendBorsh)();var l=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),Object.assign(this,t)}return o(e,null,[{key:"struct",value:function(e){return(0,t.struct)(this,e)}},{key:"serialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r.from((0,u.serialize)(this.SCHEMA,new this(e)))}},{key:"deserialize",value:function(e){return(0,u.deserializeUnchecked)(this.SCHEMA,this,e)}}]),e}();t.Data=l;t.struct=function(e,t){return new Map([[e,{kind:"struct",fields:t}]])}},90359:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&r(t,e,n);return i(t,e),t},a=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.Borsh=void 0,t.Borsh=o(n(41211)),a(n(8988),t)},8988:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getBNFromData=t.TupleNumericType=void 0;var i,o=r(n(80518));!function(e){e[e.U8=1]="U8",e[e.U16=2]="U16",e[e.U32=4]="U32",e[e.U64=8]="U64"}(i=t.TupleNumericType||(t.TupleNumericType={}));t.getBNFromData=function(e,t,n){switch(n){case i.U8:return new o.default(e[t],"le");case i.U16:return new o.default(e.slice(t,t+2),"le");case i.U32:return new o.default(e.slice(t,t+4),"le");case i.U64:return new o.default(e.slice(t,t+8),"le")}}},37541:function(e,t,n){var r=n(12307);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},93410:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MetaplexProgram=t.MetaplexKey=void 0;var s=n(73340),u=n(96322);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.OriginalAuthorityLookupV1=1]="OriginalAuthorityLookupV1",e[e.BidRedemptionTicketV1=2]="BidRedemptionTicketV1",e[e.StoreV1=3]="StoreV1",e[e.WhitelistedCreatorV1=4]="WhitelistedCreatorV1",e[e.PayoutTicketV1=5]="PayoutTicketV1",e[e.SafetyDepositValidationTicketV1=6]="SafetyDepositValidationTicketV1",e[e.AuctionManagerV1=7]="AuctionManagerV1",e[e.PrizeTrackingTicketV1=8]="PrizeTrackingTicketV1",e[e.SafetyDepositConfigV1=9]="SafetyDepositConfigV1",e[e.AuctionManagerV2=10]="AuctionManagerV2",e[e.BidRedemptionTicketV2=11]="BidRedemptionTicketV2",e[e.AuctionWinnerTokenTypeTrackerV1=12]="AuctionWinnerTokenTypeTrackerV1",e[e.StoreIndexerV1=13]="StoreIndexerV1",e[e.AuctionCacheV1=14]="AuctionCacheV1",e[e.StoreConfigV1=15]="StoreConfigV1"}(t.MetaplexKey||(t.MetaplexKey={}));var c=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(s.Program);t.MetaplexProgram=c,c.PREFIX="metaplex",c.CONFIG="config",c.TOTALS="totals",c.PUBKEY=new u.PublicKey(s.config.programs.metaplex)},89093:function(e,t,n){"use strict";var r,i,o=n(17061).default,a=n(861).default,s=n(89728).default,u=n(56690).default,c=n(61655).default,l=n(26389).default,f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionManager=t.AuctionManagerV2Data=t.AuctionManagerStateV2=t.AuctionManagerStatus=void 0;var d,p=n(96322),y=h(n(80518)),m=h(n(66315)),g=n(75562),v=n(93410),b=n(19778),_=n(33258),w=n(73340);!function(e){e[e.Initialized=0]="Initialized",e[e.Validated=1]="Validated",e[e.Running=2]="Running",e[e.Disbursing=3]="Disbursing",e[e.Finished=4]="Finished"}(d=t.AuctionManagerStatus||(t.AuctionManagerStatus={}));var x=function(e){c(n,e);var t=l(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).status=d.Initialized,e.safetyConfigItemsValidated=new y.default(0),e.bidsPushedToAcceptPayment=new y.default(0),e.hasParticipation=!1,e}return s(n)}(w.Borsh.Data);t.AuctionManagerStateV2=x,r=x,x.SCHEMA=r.struct([["status","u8"],["safetyConfigItemsValidated","u64"],["bidsPushedToAcceptPayment","u64"],["hasParticipation","u8"]]);var k=function(e){c(n,e);var t=l(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).key=v.MetaplexKey.AuctionManagerV2,r}return s(n)}(w.Borsh.Data);t.AuctionManagerV2Data=k,i=k,k.SCHEMA=new Map([].concat(a(x.SCHEMA),a(i.struct([["key","u8"],["store","pubkeyAsString"],["authority","pubkeyAsString"],["auction","pubkeyAsString"],["vault","pubkeyAsString"],["acceptPayment","pubkeyAsString"],["state",x]]))));var A=function(e){c(n,e);var t=l(n);function n(e,r){var i;if(u(this,n),!(i=t.call(this,e,r)).assertOwner(v.MetaplexProgram.PUBKEY))throw(0,w.ERROR_INVALID_OWNER)();if(n.isAuctionManagerV1(i.info.data))throw(0,w.ERROR_DEPRECATED_ACCOUNT_DATA)();if(!n.isAuctionManagerV2(i.info.data))throw(0,w.ERROR_INVALID_ACCOUNT_DATA)();return i.data=k.deserialize(i.info.data),i}return s(n,[{key:"getAuction",value:function(e){return f(this,void 0,void 0,o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_.Auction.load(e,this.data.auction));case 1:case"end":return t.stop()}}),t,this)})))}},{key:"getBidRedemptionTickets",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return f(this,void 0,void 0,o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.MetaplexProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:m.default.encode(b.Buffer.from([v.MetaplexKey.BidRedemptionTicketV2]))}},{memcmp:{offset:g.WINNER_INDEX_OFFSETS[+t],bytes:this.pubkey.toBase58()}}]});case 2:return n.abrupt("return",n.sent.map((function(e){return g.BidRedemptionTicket.from(e)})));case 3:case"end":return n.stop()}}),n,this)})))}}],[{key:"isCompatible",value:function(e){return n.isAuctionManagerV1(e)||n.isAuctionManagerV2(e)}},{key:"isAuctionManagerV1",value:function(e){return e[0]===v.MetaplexKey.AuctionManagerV1}},{key:"isAuctionManagerV2",value:function(e){return e[0]===v.MetaplexKey.AuctionManagerV2}},{key:"getPDA",value:function(e){return v.MetaplexProgram.findProgramAddress([b.Buffer.from(v.MetaplexProgram.PREFIX),new p.PublicKey(e).toBuffer()])}},{key:"findMany",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return f(this,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.MetaplexProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:m.default.encode(b.Buffer.from([v.MetaplexKey.AuctionManagerV2]))}},t.store&&{memcmp:{offset:1,bytes:new p.PublicKey(t.store).toBase58()}},t.authority&&{memcmp:{offset:33,bytes:new p.PublicKey(t.authority).toBase58()}}].filter(Boolean)});case 2:return r.abrupt("return",r.sent.map((function(e){return n.from(e)})));case 3:case"end":return r.stop()}}),r)})))}}]),n}(w.Account);t.AuctionManager=A},7236:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionWinnerTokenTypeTracker=void 0;var l=n(73340),f=n(96322),h=c(n(80518)),d=n(19778),p=n(93410),y=function(e){a(n,e);var t=s(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(p.MetaplexProgram.PUBKEY))throw(0,l.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,l.ERROR_INVALID_ACCOUNT_DATA)();return o.data=m(o.info.data),o}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===p.MetaplexKey.AuctionWinnerTokenTypeTrackerV1}},{key:"getPDA",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.MetaplexProgram.findProgramAddress([d.Buffer.from(p.MetaplexProgram.PREFIX),p.MetaplexProgram.PUBKEY.toBuffer(),new f.PublicKey(e).toBuffer(),d.Buffer.from(p.MetaplexProgram.TOTALS)]));case 1:case"end":return t.stop()}}),t)})))}}]),n}(l.Account);t.AuctionWinnerTokenTypeTracker=y;var m=function(e){for(var t={key:p.MetaplexKey.SafetyDepositConfigV1,amountType:e[1],lengthType:e[2],amountRanges:[]},n=new h.default(e.slice(3,7),"le"),r=7,i=0;i<n.toNumber();i++){var o=(0,l.getBNFromData)(e,r,t.amountType);r+=t.amountType;var a=(0,l.getBNFromData)(e,r,t.lengthType);r+=t.lengthType,t.amountRanges.push({amount:o,length:a})}return t}},75562:function(e,t,n){"use strict";var r=n(56690).default,i=n(89728).default,o=n(61655).default,a=n(26389).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BidRedemptionTicket=t.WINNER_INDEX_OFFSETS=void 0;var u=s(n(80518)),c=s(n(66315)),l=n(93410),f=n(73340);t.WINNER_INDEX_OFFSETS=[2,10];var h=function(e){o(s,e);var n=a(s);function s(e,i){var o;if(r(this,s),!(o=n.call(this,e,i)).assertOwner(l.MetaplexProgram.PUBKEY))throw(0,f.ERROR_INVALID_OWNER)();if(s.isBidRedemptionTicketV1(o.info.data))throw(0,f.ERROR_DEPRECATED_ACCOUNT_DATA)();if(!s.isBidRedemptionTicketV2(o.info.data))throw(0,f.ERROR_INVALID_ACCOUNT_DATA)();var a=o.info.data.toJSON().data,h=0!==a[1]&&new u.default(a.slice(1,9),"le"),d=t.WINNER_INDEX_OFFSETS[+!!h];return o.data={key:l.MetaplexKey.BidRedemptionTicketV2,winnerIndex:h,data:a,auctionManager:c.default.encode(a.slice(d,d+32))},o}return i(s,null,[{key:"isCompatible",value:function(e){return s.isBidRedemptionTicketV1(e)||s.isBidRedemptionTicketV2(e)}},{key:"isBidRedemptionTicketV1",value:function(e){return e[0]===l.MetaplexKey.BidRedemptionTicketV1}},{key:"isBidRedemptionTicketV2",value:function(e){return e[0]===l.MetaplexKey.BidRedemptionTicketV2}}]),s}(f.Account);t.BidRedemptionTicket=h},6671:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PayoutTicket=t.PayoutTicketData=void 0;var f=n(96322),h=l(n(66315)),d=n(73340),p=n(93410),y=n(19778),m=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=p.MetaplexKey.PayoutTicketV1,r}return o(n)}(d.Borsh.Data);t.PayoutTicketData=m,r=m,m.SCHEMA=r.struct([["key","u8"],["recipient","pubkeyAsString"],["amountPaid","u64"]]);var g=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(p.MetaplexProgram.PUBKEY))throw(0,d.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,d.ERROR_INVALID_ACCOUNT_DATA)();return i.data=m.deserialize(i.info.data),i}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===p.MetaplexKey.PayoutTicketV1}},{key:"getPayoutTicketsByRecipient",value:function(e,t){return c(this,void 0,void 0,i().mark((function r(){return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p.MetaplexProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:h.default.encode(y.Buffer.from([p.MetaplexKey.PayoutTicketV1]))}},{memcmp:{offset:1,bytes:new f.PublicKey(t).toBase58()}}]});case 2:return r.abrupt("return",r.sent.map((function(e){return n.from(e)})));case 3:case"end":return r.stop()}}),r)})))}}]),n}(d.Account);t.PayoutTicket=g},39714:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PrizeTrackingTicket=t.PrizeTrackingTicketData=void 0;var l=n(96322),f=n(73340),h=n(93410),d=n(19778),p=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=h.MetaplexKey.PrizeTrackingTicketV1,r.key=h.MetaplexKey.PrizeTrackingTicketV1,r}return o(n)}(f.Borsh.Data);t.PrizeTrackingTicketData=p,r=p,p.SCHEMA=r.struct([["key","u8"],["metadata","pubkeyAsString"],["supplySnapshot","u64"],["expectedRedemptions","u64"],["redemptions","u64"]]);var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(h.MetaplexProgram.PUBKEY))throw(0,f.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,f.ERROR_INVALID_ACCOUNT_DATA)();return i.data=p.deserialize(i.info.data),i}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===h.MetaplexKey.PrizeTrackingTicketV1}},{key:"getPDA",value:function(e,t){return c(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",h.MetaplexProgram.findProgramAddress([d.Buffer.from(h.MetaplexProgram.PREFIX),h.MetaplexProgram.PUBKEY.toBuffer(),new l.PublicKey(e).toBuffer(),new l.PublicKey(t).toBuffer()]));case 1:case"end":return n.stop()}}),n)})))}}]),n}(f.Account);t.PrizeTrackingTicket=y},59370:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SafetyDepositConfig=t.NonWinningConstraint=t.WinningConstraint=t.WinningConfigType=void 0;var l=n(96322),f=c(n(80518)),h=c(n(66315)),d=n(73340),p=n(93410),y=n(19778);!function(e){e[e.TokenOnlyTransfer=0]="TokenOnlyTransfer",e[e.FullRightsTransfer=1]="FullRightsTransfer",e[e.PrintingV1=2]="PrintingV1",e[e.PrintingV2=3]="PrintingV2",e[e.Participation=4]="Participation"}(t.WinningConfigType||(t.WinningConfigType={})),function(e){e[e.NoParticipationPrize=0]="NoParticipationPrize",e[e.ParticipationPrizeGiven=1]="ParticipationPrizeGiven"}(t.WinningConstraint||(t.WinningConstraint={})),function(e){e[e.NoParticipationPrize=0]="NoParticipationPrize",e[e.GivenForFixedPrice=1]="GivenForFixedPrice",e[e.GivenForBidPrice=2]="GivenForBidPrice"}(t.NonWinningConstraint||(t.NonWinningConstraint={}));var m=function(e){a(n,e);var t=s(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(p.MetaplexProgram.PUBKEY))throw(0,d.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,d.ERROR_INVALID_ACCOUNT_DATA)();return o.data=g(o.info.data),o}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===p.MetaplexKey.SafetyDepositConfigV1}},{key:"getPDA",value:function(e,t){return u(this,void 0,void 0,r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",p.MetaplexProgram.findProgramAddress([y.Buffer.from(p.MetaplexProgram.PREFIX),p.MetaplexProgram.PUBKEY.toBuffer(),new l.PublicKey(e).toBuffer(),new l.PublicKey(t).toBuffer()]));case 1:case"end":return n.stop()}}),n)})))}}]),n}(d.Account);t.SafetyDepositConfig=m;var g=function(e){for(var t={key:p.MetaplexKey.SafetyDepositConfigV1,auctionManager:h.default.encode(e.slice(1,33)),order:new f.default(e.slice(33,41),"le"),winningConfigType:e[41],amountType:e[42],lengthType:e[43],amountRanges:[],participationConfig:null,participationState:null},n=new f.default(e.slice(44,48),"le"),r=48,i=0;i<n.toNumber();i++){var o=(0,d.getBNFromData)(e,r,t.amountType);r+=t.amountType;var a=(0,d.getBNFromData)(e,r,t.lengthType);r+=t.lengthType,t.amountRanges.push({amount:o,length:a})}if(0==e[r])r+=1,t.participationConfig=null;else{var s=e[r+1],u=e[r+2],c=null;1==e[r+=3]?(c=new f.default(e.slice(r+1,r+9),"le"),r+=9):r+=1,t.participationConfig={winnerConstraint:s,nonWinningConstraint:u,fixedPrice:c}}if(0==e[r])r+=1,t.participationState=null;else{var l=new f.default(e.slice(r+1,r+9),"le");r+=9,t.participationState={collectedToAcceptPayment:l}}return t}},30801:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Store=t.StoreData=void 0;var f=n(73340),h=n(93410),d=n(96322),p=l(n(66315)),y=n(93511),m=n(89093),g=n(19778),v=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=h.MetaplexKey.StoreV1,r.public=!0,r.key=h.MetaplexKey.StoreV1,r}return o(n)}(f.Borsh.Data);t.StoreData=v,r=v,v.SCHEMA=r.struct([["key","u8"],["public","u8"],["auctionProgram","pubkeyAsString"],["tokenVaultProgram","pubkeyAsString"],["tokenMetadataProgram","pubkeyAsString"],["tokenProgram","pubkeyAsString"]]);var b=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(h.MetaplexProgram.PUBKEY))throw(0,f.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,f.ERROR_INVALID_ACCOUNT_DATA)();return i.data=v.deserialize(i.info.data),i}return o(n,[{key:"getWhitelistedCreators",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.MetaplexProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:p.default.encode(g.Buffer.from([h.MetaplexKey.WhitelistedCreatorV1]))}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return y.WhitelistedCreator.from(e)})));case 3:case"end":return t.stop()}}),t)})))}},{key:"getAuctionManagers",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.MetaplexProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:p.default.encode(g.Buffer.from([h.MetaplexKey.AuctionManagerV2]))}},{memcmp:{offset:1,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return m.AuctionManager.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}}],[{key:"isCompatible",value:function(e){return e[0]===h.MetaplexKey.StoreV1}},{key:"getPDA",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",h.MetaplexProgram.findProgramAddress([g.Buffer.from(h.MetaplexProgram.PREFIX),h.MetaplexProgram.PUBKEY.toBuffer(),new d.PublicKey(e).toBuffer()]));case 1:case"end":return t.stop()}}),t)})))}}]),n}(f.Account);t.Store=b},66450:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.StoreConfig=t.StoreConfigData=void 0;var l=n(73340),f=n(96322),h=n(19778),d=n(93410),p=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=d.MetaplexKey.StoreConfigV1,r.key=d.MetaplexKey.StoreConfigV1,r}return o(n)}(l.Borsh.Data);t.StoreConfigData=p,r=p,p.SCHEMA=r.struct([["key","u8"],["settingsUri",{kind:"option",type:"string"}]]);var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(d.MetaplexProgram.PUBKEY))throw(0,l.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,l.ERROR_INVALID_ACCOUNT_DATA)();return i.data=p.deserialize(i.info.data),i}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===d.MetaplexKey.StoreConfigV1}},{key:"getPDA",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.MetaplexProgram.findProgramAddress([h.Buffer.from(d.MetaplexProgram.PREFIX),d.MetaplexProgram.PUBKEY.toBuffer(),h.Buffer.from(d.MetaplexProgram.CONFIG),new f.PublicKey(e).toBuffer()]));case 1:case"end":return t.stop()}}),t)})))}}]),n}(l.Account);t.StoreConfig=y},93511:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.WhitelistedCreator=t.WhitelistedCreatorData=void 0;var l=n(73340),f=n(93410),h=n(19778),d=n(96322),p=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=f.MetaplexKey.WhitelistedCreatorV1,r.activated=!0,r.key=f.MetaplexKey.WhitelistedCreatorV1,r}return o(n)}(l.Borsh.Data);t.WhitelistedCreatorData=p,r=p,p.SCHEMA=r.struct([["key","u8"],["address","pubkeyAsString"],["activated","u8"]]);var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(f.MetaplexProgram.PUBKEY))throw(0,l.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,l.ERROR_INVALID_ACCOUNT_DATA)();return i.data=p.deserialize(i.info.data),i}return o(n,null,[{key:"isCompatible",value:function(e){return e[0]===f.MetaplexKey.WhitelistedCreatorV1}},{key:"getPDA",value:function(e,t){return c(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",f.MetaplexProgram.findProgramAddress([h.Buffer.from(f.MetaplexProgram.PREFIX),f.MetaplexProgram.PUBKEY.toBuffer(),new d.PublicKey(e).toBuffer(),new d.PublicKey(t).toBuffer()]));case 1:case"end":return n.stop()}}),n)})))}}]),n}(l.Account);t.WhitelistedCreator=y},53604:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(89093),t),i(n(75562),t),i(n(6671),t),i(n(39714),t),i(n(59370),t),i(n(30801),t),i(n(66450),t),i(n(93511),t),i(n(7236),t),i(n(93410),t),i(n(32374),t)},18845:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ClaimBid=t.ClaimBidArgs=void 0;var u=n(73340),c=n(33258),l=n(44239),f=n(96322),h=n(93410),d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=6,e}return i(n)}(u.Borsh.Data);t.ClaimBidArgs=d,r=d,d.SCHEMA=r.struct([["instruction","u8"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.store,s=r.vault,u=r.auction,p=r.auctionExtended,y=r.auctionManager,m=r.bidder,g=r.bidderPot,v=r.bidderPotToken,b=r.acceptPayment,_=r.tokenMint,w=d.serialize();return i.add(new f.TransactionInstruction({keys:[{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:_,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:c.AuctionProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:f.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:l.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1}],programId:h.MetaplexProgram.PUBKEY,data:w})),i}return i(n)}(u.Transaction);t.ClaimBid=p},29767:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EndAuction=t.EndAuctionArgs=void 0;var c=u(n(80518)),l=n(73340),f=n(96322),h=n(33258),d=n(93410),p=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=20,e}return i(n)}(l.Borsh.Data);t.EndAuctionArgs=p,r=p,p.SCHEMA=r.struct([["instruction","u8"],["reveal",{kind:"option",type:[c.default,c.default]}]]);var y=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.store,s=r.auction,u=r.auctionExtended,c=r.auctionManager,l=r.auctionManagerAuthority,y=r.reveal,m=void 0===y?null:y,g=p.serialize({reveal:m});return i.add(new f.TransactionInstruction({keys:[{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:h.AuctionProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:f.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],programId:d.MetaplexProgram.PUBKEY,data:g})),i}return i(n)}(l.Transaction);t.EndAuction=y},46057:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InitAuctionManagerV2=t.InitAuctionManagerV2Args=void 0;var c=n(73340),l=n(96322),f=u(n(80518)),h=n(93410),d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=17,e.amountType=c.TupleNumericType.U8,e.lengthType=c.TupleNumericType.U8,e.maxRanges=new f.default(1),e}return i(n)}(c.Borsh.Data);t.InitAuctionManagerV2Args=d,r=d,d.SCHEMA=r.struct([["instruction","u8"],["amountType","u8"],["lengthType","u8"],["maxRanges","u64"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.store,u=r.vault,c=r.auction,f=r.auctionManager,p=r.auctionManagerAuthority,y=r.acceptPaymentAccount,m=r.tokenTracker,g=r.amountType,v=r.lengthType,b=r.maxRanges,_=d.serialize({amountType:g,lengthType:v,maxRanges:b});return i.add(new l.TransactionInstruction({keys:[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:h.MetaplexProgram.PUBKEY,data:_})),i}return i(n)}(c.Transaction);t.InitAuctionManagerV2=p},55081:function(e,t,n){"use strict";var r,i,o=n(861).default,a=n(89728).default,s=n(56690).default,u=n(61655).default,c=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RedeemBid=t.RedeemUnusedWinningConfigItemsAsAuctioneerArgs=t.ProxyCallAddress=t.RedeemBidArgs=void 0;var l,f=n(73340),h=n(44239),d=n(96322),p=n(53662),y=n(90261),m=n(93410),g=function(e){u(n,e);var t=c(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).instruction=2,e}return a(n)}(f.Borsh.Data);t.RedeemBidArgs=g,r=g,g.SCHEMA=r.struct([["instruction","u8"]]),function(e){e[e.RedeemBid=0]="RedeemBid",e[e.RedeemFullRightsTransferBid=1]="RedeemFullRightsTransferBid"}(l=t.ProxyCallAddress||(t.ProxyCallAddress={}));var v=function(e){u(n,e);var t=c(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).instruction=12,e}return a(n)}(f.Borsh.Data);t.RedeemUnusedWinningConfigItemsAsAuctioneerArgs=v,i=v,v.SCHEMA=i.struct([["instruction","u8"],["winningConfigItemIndex","u8"],["proxyCall","u8"]]);var b=function(e){u(n,e);var t=c(n);function n(e,r){var i;s(this,n),i=t.call(this,e);var a=e.feePayer,u=r.store,c=r.vault,f=r.auction,b=r.auctionExtended,_=r.auctionManager,w=r.bidRedemption,x=r.bidderMeta,k=r.safetyDepositTokenStore,A=r.destination,E=r.safetyDeposit,I=r.fractionMint,S=r.bidder,T=r.isPrintingType,M=r.safetyDepositConfig,P=r.transferAuthority,B=r.masterEdition,C=r.reservationList,O=r.auctioneerReclaimIndex,D=O?v.serialize({winningConfigItemIndex:O,proxyCall:l.RedeemBid}):g.serialize();return i.add(new d.TransactionInstruction({keys:[{pubkey:_,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:E,isSigner:!1,isWritable:!0},{pubkey:c,isSigner:!1,isWritable:!0},{pubkey:I,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!1},{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:h.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:y.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:p.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:d.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:P,isSigner:!1,isWritable:!1},{pubkey:M,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1}].concat(o(T&&B&&C?[{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:C,isSigner:!1,isWritable:!0}]:[])),programId:m.MetaplexProgram.PUBKEY,data:D})),i}return a(n)}(f.Transaction);t.RedeemBid=b},61231:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RedeemFullRightsTransferBid=t.RedeemFullRightsTransferBidArgs=void 0;var u=n(73340),c=n(44239),l=n(96322),f=n(53662),h=n(90261),d=n(93410),p=n(55081),y=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=3,e}return i(n)}(u.Borsh.Data);t.RedeemFullRightsTransferBidArgs=y,r=y,y.SCHEMA=r.struct([["instruction","u8"]]);var m=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.store,u=r.vault,m=r.auction,g=r.auctionExtended,v=r.auctionManager,b=r.bidRedemption,_=r.bidMetadata,w=r.safetyDepositTokenStore,x=r.destination,k=r.safetyDeposit,A=r.fractionMint,E=r.bidder,I=r.safetyDepositConfig,S=r.transferAuthority,T=r.masterMetadata,M=r.newAuthority,P=r.auctioneerReclaimIndex,B=P?p.RedeemUnusedWinningConfigItemsAsAuctioneerArgs.serialize({winningConfigItemIndex:P,proxyCall:p.ProxyCallAddress.RedeemFullRightsTransferBid}):y.serialize();return i.add(new l.TransactionInstruction({keys:[{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:b,isSigner:!1,isWritable:!0},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:_,isSigner:!1,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:h.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:f.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!1},{pubkey:S,isSigner:!1,isWritable:!1},{pubkey:I,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1}],programId:d.MetaplexProgram.PUBKEY,data:B})),i}return i(n)}(u.Transaction);t.RedeemFullRightsTransferBid=m},19658:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RedeemParticipationBidV3=t.RedeemParticipationBidV3Args=void 0;var u=n(73340),c=n(53662),l=n(90261),f=n(44239),h=n(96322),d=n(93410),p=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=19,e}return i(n)}(u.Borsh.Data);t.RedeemParticipationBidV3Args=p,r=p,p.SCHEMA=r.struct([["instruction","u8"],["winIndex",{kind:"option",type:"u64"}]]);var y=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.store,u=r.vault,y=r.auction,m=r.auctionExtended,g=r.auctionManager,v=r.bidRedemption,b=r.bidMetadata,_=r.safetyDepositTokenStore,w=r.destination,x=r.safetyDeposit,k=r.bidder,A=r.safetyDepositConfig,E=r.metadata,I=r.prizeTrackingTicket,S=r.newMetadata,T=r.newEdition,M=r.masterEdition,P=r.newMint,B=r.editionMark,C=r.winIndex,O=r.transferAuthority,D=r.acceptPaymentAccount,R=r.tokenPaymentAccount,L=p.serialize({winIndex:C});return i.add(new h.TransactionInstruction({keys:[{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:_,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:A,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:f.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:h.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:h.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:O,isSigner:!0,isWritable:!1},{pubkey:D,isSigner:!1,isWritable:!0},{pubkey:R,isSigner:!1,isWritable:!0},{pubkey:I,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1}],programId:d.MetaplexProgram.PUBKEY,data:L})),i}return i(n)}(u.Transaction);t.RedeemParticipationBidV3=y},88667:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RedeemPrintingV2Bid=t.RedeemPrintingV2BidArgs=void 0;var u=n(73340),c=n(90261),l=n(53662),f=n(44239),h=n(96322),d=n(93410),p=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=14,e}return i(n)}(u.Borsh.Data);t.RedeemPrintingV2BidArgs=p,r=p,p.SCHEMA=r.struct([["instruction","u8"],["editionOffset","u64"],["winIndex","u64"]]);var y=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.store,u=r.vault,y=r.auction,m=r.auctionExtended,g=r.auctionManager,v=r.bidRedemption,b=r.bidMetadata,_=r.safetyDepositTokenStore,w=r.destination,x=r.safetyDeposit,k=r.bidder,A=r.safetyDepositConfig,E=r.metadata,I=r.prizeTrackingTicket,S=r.newMetadata,T=r.newEdition,M=r.masterEdition,P=r.newMint,B=r.editionMark,C=r.winIndex,O=r.editionOffset,D=p.serialize({winIndex:C,editionOffset:O});return i.add(new h.TransactionInstruction({keys:[{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:_,isSigner:!1,isWritable:!0},{pubkey:w,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!1,isWritable:!0},{pubkey:x,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:A,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:k,isSigner:!1,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:f.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:l.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:h.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:h.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:I,isSigner:!1,isWritable:!0},{pubkey:S,isSigner:!1,isWritable:!0},{pubkey:T,isSigner:!1,isWritable:!0},{pubkey:M,isSigner:!1,isWritable:!0},{pubkey:P,isSigner:!1,isWritable:!0},{pubkey:B,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:E,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1}],programId:d.MetaplexProgram.PUBKEY,data:D})),i}return i(n)}(u.Transaction);t.RedeemPrintingV2Bid=y},14731:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetStore=t.SetStoreArgs=void 0;var u=n(73340),c=n(44239),l=n(96322),f=n(53662),h=n(90261),d=n(33258),p=n(93410),y=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=8,e}return i(n)}(u.Borsh.Data);t.SetStoreArgs=y,r=y,y.SCHEMA=r.struct([["instruction","u8"],["public","u8"]]);var m=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.admin,u=r.store,m=r.isPublic,g=y.serialize({public:m});return i.add(new l.TransactionInstruction({keys:[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:h.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:f.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:d.AuctionProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:p.MetaplexProgram.PUBKEY,data:g})),i}return i(n)}(u.Transaction);t.SetStore=m},88976:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetStoreV2=t.SetStoreV2Args=void 0;var u=n(44239),c=n(96322),l=n(73340),f=n(90261),h=n(53662),d=n(33258),p=n(93410),y=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=23,e}return i(n)}(l.Borsh.Data);t.SetStoreV2Args=y,r=y,y.SCHEMA=r.struct([["instruction","u8"],["public","u8"],["settingsUri",{kind:"option",type:"string"}]]);var m=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.admin,l=r.store,m=r.config,g=r.isPublic,v=r.settingsUri,b=y.serialize({public:g,settingsUri:v});return i.add(new c.TransactionInstruction({keys:[{pubkey:l,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:f.VaultProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:h.MetadataProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:d.AuctionProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:p.MetaplexProgram.PUBKEY,data:b})),i}return i(n)}(l.Transaction);t.SetStoreV2=m},79106:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetWhitelistedCreator=t.SetWhitelistedCreatorArgs=void 0;var u=n(73340),c=n(96322),l=n(93410),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=9,e}return i(n)}(u.Borsh.Data);t.SetWhitelistedCreatorArgs=f,r=f,f.SCHEMA=r.struct([["instruction","u8"],["activated","u8"]]);var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.admin,u=r.whitelistedCreatorPDA,h=r.store,d=r.creator,p=r.activated,y=f.serialize({activated:p});return i.add(new c.TransactionInstruction({keys:[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetaplexProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.SetWhitelistedCreator=h},50105:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.StartAuction=t.StartAuctionArgs=void 0;var u=n(73340),c=n(96322),l=n(33258),f=n(93410),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=5,e}return i(n)}(u.Borsh.Data);t.StartAuctionArgs=h,r=h,h.SCHEMA=r.struct([["instruction","u8"]]);var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.store,s=r.auction,u=r.auctionManager,d=r.auctionManagerAuthority,p=h.serialize();return i.add(new c.TransactionInstruction({keys:[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:l.AuctionProgram.PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_CLOCK_PUBKEY,isSigner:!1,isWritable:!1}],programId:f.MetaplexProgram.PUBKEY,data:p})),i}return i(n)}(u.Transaction);t.StartAuction=d},32374:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(18845),t),i(n(29767),t),i(n(46057),t),i(n(55081),t),i(n(61231),t),i(n(88667),t),i(n(14731),t),i(n(88976),t),i(n(79106),t),i(n(50105),t),i(n(19658),t)},95880:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataProgram=t.MetadataKey=void 0;var s=n(96322),u=n(73340);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.MetadataV1=4]="MetadataV1",e[e.EditionV1=1]="EditionV1",e[e.MasterEditionV1=2]="MasterEditionV1",e[e.MasterEditionV2=6]="MasterEditionV2",e[e.EditionMarker=7]="EditionMarker"}(t.MetadataKey||(t.MetadataKey={}));var c=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(u.Program);t.MetadataProgram=c,c.PREFIX="metadata",c.PUBKEY=new s.PublicKey(u.config.programs.metadata)},67110:function(e,t,n){"use strict";var r=n(17061).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Edition=t.EditionData=void 0;var c=n(73340),l=n(95880),f=n(96322),h=n(19778),d=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=l.MetadataKey.EditionV1,r}return i(n)}(c.Borsh.Data);t.EditionData=d,d.SCHEMA=d.struct([["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;if(o(this,n),!(i=t.call(this,e,r)).assertOwner(l.MetadataProgram.PUBKEY))throw(0,c.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,c.ERROR_INVALID_ACCOUNT_DATA)();return i.data=d.deserialize(i.info.data),i}return i(n,null,[{key:"getPDA",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.MetadataProgram.findProgramAddress([h.Buffer.from(l.MetadataProgram.PREFIX),l.MetadataProgram.PUBKEY.toBuffer(),new f.PublicKey(e).toBuffer(),h.Buffer.from(n.EDITION_PREFIX)]));case 1:case"end":return t.stop()}}),t)})))}},{key:"isCompatible",value:function(e){return e[0]===l.MetadataKey.EditionV1}}]),n}(c.Account);t.Edition=p,p.EDITION_PREFIX="edition"},25753:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EditionMarker=t.EditionMarkerData=void 0;var c=n(73340),l=n(96322),f=n(67110),h=n(95880),d=n(19778),p=function(e){a(n,e);var t=s(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).key=h.MetadataKey.EditionMarker,r}return o(n,[{key:"editionTaken",value:function(e){var t=e%y.DATA_SIZE,n=Math.floor(t/8);if(n>30)throw Error("Bad index for edition");var r=7-t%8,i=Math.pow(2,r);return 0!=(this.ledger[n]&i)}}]),n}(c.Borsh.Data);t.EditionMarkerData=p,p.SCHEMA=p.struct([["key","u8"],["ledger",[31]]]);var y=function(e){a(n,e);var t=s(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(h.MetadataProgram.PUBKEY))throw(0,c.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,c.ERROR_INVALID_ACCOUNT_DATA)();return o.data=p.deserialize(o.info.data),o}return o(n,null,[{key:"getPDA",value:function(e,t){return u(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Math.floor(t.toNumber()/248),n.abrupt("return",h.MetadataProgram.findProgramAddress([d.Buffer.from(h.MetadataProgram.PREFIX),h.MetadataProgram.PUBKEY.toBuffer(),new l.PublicKey(e).toBuffer(),d.Buffer.from(f.Edition.EDITION_PREFIX),d.Buffer.from(i.toString())]));case 2:case"end":return n.stop()}}),n)})))}},{key:"isCompatible",value:function(e){return e[0]===h.MetadataKey.EditionMarker}}]),n}(c.Account);t.EditionMarker=y,y.DATA_SIZE=248},6543:function(e,t,n){"use strict";var r=n(17061).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MasterEdition=t.MasterEditionV2Data=t.MasterEditionV1Data=void 0;var l=n(73340),f=c(n(66315)),h=n(67110),d=n(95880),p=n(19778),y=n(96322),m=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=d.MetadataKey.MasterEditionV1,r}return i(n)}(l.Borsh.Data);t.MasterEditionV1Data=m,m.SCHEMA=m.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]);var g=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=d.MetadataKey.MasterEditionV2,r}return i(n)}(l.Borsh.Data);t.MasterEditionV2Data=g,g.SCHEMA=g.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]);var v=function(e){a(n,e);var t=s(n);function n(e,r){var i;if(o(this,n),!(i=t.call(this,e,r)).assertOwner(d.MetadataProgram.PUBKEY))throw(0,l.ERROR_INVALID_OWNER)();if(n.isMasterEditionV1(i.info.data))i.data=m.deserialize(i.info.data);else{if(!n.isMasterEditionV2(i.info.data))throw(0,l.ERROR_INVALID_ACCOUNT_DATA)();i.data=g.deserialize(i.info.data)}return i}return i(n,[{key:"getEditions",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.MetadataProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:f.default.encode(p.Buffer.from([d.MetadataKey.EditionV1]))}},{memcmp:{offset:1,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return h.Edition.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}}],[{key:"getPDA",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.MetadataProgram.findProgramAddress([p.Buffer.from(d.MetadataProgram.PREFIX),d.MetadataProgram.PUBKEY.toBuffer(),new y.PublicKey(e).toBuffer(),p.Buffer.from(n.EDITION_PREFIX)]));case 1:case"end":return t.stop()}}),t)})))}},{key:"isCompatible",value:function(e){return n.isMasterEditionV1(e)||n.isMasterEditionV2(e)}},{key:"isMasterEditionV1",value:function(e){return e[0]===d.MetadataKey.MasterEditionV1}},{key:"isMasterEditionV2",value:function(e){return e[0]===d.MetadataKey.MasterEditionV2}}]),n}(l.Account);t.MasterEdition=v,v.EDITION_PREFIX="edition"},23850:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.computeCreatorOffset=t.MAX_CREATOR_LEN=t.MAX_URI_LENGTH=t.MAX_SYMBOL_LENGTH=t.MAX_NAME_LENGTH=t.Metadata=t.MetadataData=t.MetadataDataData=t.Creator=void 0;var f=n(73340),h=n(96322),d=l(n(80518)),p=l(n(66315)),y=n(19778),m=n(95880),g=n(67110),v=n(6543),b=function(e){s(n,e);var t=u(n);function n(){return a(this,n),t.apply(this,arguments)}return o(n)}(f.Borsh.Data);t.Creator=b,b.SCHEMA=b.struct([["address","pubkeyAsString"],["verified","u8"],["share","u8"]]);var _=function(e){s(n,e);var t=u(n);function n(e){var r;a(this,n),r=t.call(this,e);var i=new RegExp("\0","g");return r.name=e.name.replace(i,""),r.uri=e.uri.replace(i,""),r.symbol=e.symbol.replace(i,""),r}return o(n)}(f.Borsh.Data);t.MetadataDataData=_,_.SCHEMA=new Map([].concat(i(b.SCHEMA),i(_.struct([["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[b]}]]))));var w=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=m.MetadataKey.MetadataV1,r}return o(n)}(f.Borsh.Data);t.MetadataData=w,w.SCHEMA=new Map([].concat(i(_.SCHEMA),i(w.struct([["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",_],["primarySaleHappened","u8"],["isMutable","u8"]]))));var x=function(e){s(l,e);var n=u(l);function l(e,t){var r;if(a(this,l),!(r=n.call(this,e,t)).assertOwner(m.MetadataProgram.PUBKEY))throw(0,f.ERROR_INVALID_OWNER)();if(!l.isCompatible(r.info.data))throw(0,f.ERROR_INVALID_ACCOUNT_DATA)();return r.data=w.deserialize(r.info.data),r}return o(l,null,[{key:"isCompatible",value:function(e){return e[0]===m.MetadataKey.MetadataV1}},{key:"getPDA",value:function(e){return c(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",m.MetadataProgram.findProgramAddress([y.Buffer.from(m.MetadataProgram.PREFIX),m.MetadataProgram.PUBKEY.toBuffer(),new h.PublicKey(e).toBuffer()]));case 1:case"end":return t.stop()}}),t)})))}},{key:"findMany",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,void 0,void 0,r().mark((function o(){var a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=[{memcmp:{offset:0,bytes:p.default.encode(y.Buffer.from([m.MetadataKey.MetadataV1]))}},n.updateAuthority&&{memcmp:{offset:1,bytes:new h.PublicKey(n.updateAuthority).toBase58()}},n.mint&&{memcmp:{offset:33,bytes:new h.PublicKey(n.mint).toBase58()}}].filter(Boolean),!n.creators){r.next=7;break}return r.next=4,Promise.all(Array.from(Array(f.config.maxCreatorLimit).keys()).reduce((function(r,o){return[].concat(i(r),i(n.creators.map((function(n){return m.MetadataProgram.getProgramAccounts(e,{filters:[].concat(i(a),[{memcmp:{offset:(0,t.computeCreatorOffset)(o),bytes:new h.PublicKey(n).toBase58()}}])})}))))}),[]));case 4:return r.abrupt("return",r.sent.flat().map((function(e){return l.from(e)})));case 7:return r.next=9,m.MetadataProgram.getProgramAccounts(e,{filters:a});case 9:return r.abrupt("return",r.sent.map((function(e){return l.from(e)})));case 10:case"end":return r.stop()}}),o)})))}},{key:"findByOwner",value:function(e,t){return c(this,void 0,void 0,r().mark((function n(){var i,o,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return i=n.sent,o=new Map(i.map((function(e){var t=e.data;return[t.mint.toString(),t]}))),n.next=6,l.findMany(e);case 6:return a=n.sent,n.abrupt("return",a.filter((function(e){var t,n;return o.has(e.data.mint)&&((null===(n=null===(t=null===o||void 0===o?void 0:o.get(e.data.mint))||void 0===t?void 0:t.amount)||void 0===n?void 0:n.toNumber())||0)>0})));case 8:case"end":return n.stop()}}),n)})))}},{key:"findByOwnerV2",value:function(e,t){return c(this,void 0,void 0,r().mark((function n(){var i,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return i=n.sent,o=i.map((function(e){return e.data})).filter((function(e){var t=e.amount;return(null===t||void 0===t?void 0:t.toNumber())>0})),n.next=6,Promise.all(o.map((function(t){var n=t.mint;return l.findMany(e,{mint:n})})));case 6:return n.abrupt("return",n.sent.flat());case 7:case"end":return n.stop()}}),n)})))}},{key:"findDataByOwner",value:function(e,t){return c(this,void 0,void 0,r().mark((function n(){var o,a,s,u;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return o=n.sent,a=o.reduce((function(e,t){var n,r=t.data;return(null===(n=r.amount)||void 0===n?void 0:n.eq(new d.default(1)))?[].concat(i(e),[l.getPDA(r.mint)]):e}),[]),n.next=6,Promise.all(a);case 6:return s=n.sent,n.next=9,f.Account.getInfos(e,s);case 9:return u=n.sent,n.abrupt("return",Array.from(u.values()).map((function(e){return w.deserialize(e.data)})));case 11:case"end":return n.stop()}}),n)})))}},{key:"getEdition",value:function(e,t){return c(this,void 0,void 0,r().mark((function n(){var i,o,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g.Edition.getPDA(t);case 2:return i=n.sent,n.next=5,f.Account.getInfo(e,i);case 5:o=n.sent,a=null===o||void 0===o?void 0:o.data[0],n.t0=a,n.next=n.t0===m.MetadataKey.EditionV1?10:n.t0===m.MetadataKey.MasterEditionV1||n.t0===m.MetadataKey.MasterEditionV2?11:12;break;case 10:return n.abrupt("return",new g.Edition(i,o));case 11:return n.abrupt("return",new v.MasterEdition(i,o));case 12:return n.abrupt("return");case 13:case"end":return n.stop()}}),n)})))}}]),l}(f.Account);t.Metadata=x,t.MAX_NAME_LENGTH=32,t.MAX_SYMBOL_LENGTH=10,t.MAX_URI_LENGTH=200,t.MAX_CREATOR_LEN=34;t.computeCreatorOffset=function(e){return 69+t.MAX_NAME_LENGTH+4+t.MAX_URI_LENGTH+4+t.MAX_SYMBOL_LENGTH+2+1+4+e*t.MAX_CREATOR_LEN}},53662:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67110),t),i(n(25753),t),i(n(6543),t),i(n(23850),t),i(n(95880),t),i(n(62772),t)},49678:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMasterEdition=t.CreateMasterEditionArgs=void 0;var s=n(73340),u=n(44239),c=n(96322),l=n(95880),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=10,e}return r(n)}(s.Borsh.Data);t.CreateMasterEditionArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.edition,h=r.metadata,d=r.updateAuthority,p=r.mint,y=r.mintAuthority,m=r.maxSupply,g=f.serialize({maxSupply:m||null});return o.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:g})),o}return r(n)}(s.Transaction);t.CreateMasterEdition=h},62743:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMetadata=t.CreateMetadataArgs=void 0;var u=n(73340),c=n(96322),l=n(23850),f=n(95880),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=0,e}return i(n)}(u.Borsh.Data);t.CreateMetadataArgs=h,h.SCHEMA=new Map([].concat(r(l.MetadataDataData.SCHEMA),r(h.struct([["instruction","u8"],["data",l.MetadataDataData],["isMutable","u8"]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.metadataData,l=r.updateAuthority,d=r.mint,p=r.mintAuthority,y=h.serialize({data:u,isMutable:!0});return i.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.CreateMetadata=d},72208:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MintNewEditionFromMasterEditionViaToken=t.MintNewEditionFromMasterEditionViaTokenArgs=void 0;var s=n(73340),u=n(44239),c=n(96322),l=n(95880),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=11,e}return r(n)}(s.Borsh.Data);t.MintNewEditionFromMasterEditionViaTokenArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["edition","u64"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.edition,h=r.metadata,d=r.updateAuthority,p=r.masterEdition,y=r.masterMetadata,m=r.mint,g=r.editionMarker,v=r.mintAuthority,b=r.tokenOwner,_=r.tokenAccount,w=r.editionValue,x=f.serialize({edition:w});return o.add(new c.TransactionInstruction({keys:[{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:b,isSigner:!0,isWritable:!1},{pubkey:_,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:x})),o}return r(n)}(s.Transaction);t.MintNewEditionFromMasterEditionViaToken=h},2605:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SignMetadata=t.SignMetadataArgs=void 0;var s=n(73340),u=n(96322),c=n(95880),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=7,e}return r(n)}(s.Borsh.Data);t.SignMetadataArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.metadata,s=r.creator,f=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1}],programId:c.MetadataProgram.PUBKEY,data:f})),o}return r(n)}(s.Transaction);t.SignMetadata=f},80196:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateMetadata=t.UpdateMetadataArgs=void 0;var u=n(73340),c=n(96322),l=n(23850),f=n(95880),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=1,e}return i(n)}(u.Borsh.Data);t.UpdateMetadataArgs=h,h.SCHEMA=new Map([].concat(r(l.MetadataDataData.SCHEMA),r(h.struct([["instruction","u8"],["data",{kind:"option",type:l.MetadataDataData}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.metadata,s=r.metadataData,u=r.updateAuthority,l=r.newUpdateAuthority,d=r.primarySaleHappened,p=h.serialize({data:s,updateAuthority:l&&l.toString(),primarySaleHappened:d||null});return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:p})),i}return i(n)}(u.Transaction);t.UpdateMetadata=d},98899:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatePrimarySaleHappenedViaToken=t.UpdatePrimarySaleHappenedViaTokenArgs=void 0;var s=n(73340),u=n(96322),c=n(95880),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=4,e}return r(n)}(s.Borsh.Data);t.UpdatePrimarySaleHappenedViaTokenArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.metadata,s=r.owner,f=r.tokenAccount,h=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1}],programId:c.MetadataProgram.PUBKEY,data:h})),o}return r(n)}(s.Transaction);t.UpdatePrimarySaleHappenedViaToken=f},62772:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(62743),t),i(n(80196),t),i(n(49678),t),i(n(72208),t),i(n(98899),t),i(n(2605),t)},44239:function(e,t,n){"use strict";n.r(t),n.d(t,{ASSOCIATED_TOKEN_PROGRAM_ID:function(){return it},AccountLayout:function(){return dt},MintLayout:function(){return ht},NATIVE_MINT:function(){return ft},TOKEN_PROGRAM_ID:function(){return rt},Token:function(){return yt},u64:function(){return ut}});for(var r=n(74165),i=n(15861),o=n(93433),a=n(11752),s=n(61120),u=n(37762),c=n(15671),l=n(43144),f=n(97326),h=n(60136),d=n(29388),p=n(4942),y=n(80518),m=n.n(y),g=n(96322),v={},b={byteLength:function(e){var t=I(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=I(e),i=r[0],o=r[1],a=new x(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=w[e.charCodeAt(n)]<<18|w[e.charCodeAt(n+1)]<<12|w[e.charCodeAt(n+2)]<<6|w[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=w[e.charCodeAt(n)]<<2|w[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=w[e.charCodeAt(n)]<<10|w[e.charCodeAt(n+1)]<<4|w[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(S(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(_[t>>2]+_[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(_[t>>10]+_[t>>4&63]+_[t<<2&63]+"="));return i.join("")}},_=[],w=[],x="undefined"!==typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,E=k.length;A<E;++A)_[A]=k[A],w[k.charCodeAt(A)]=A;function I(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function S(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(_[(i=r)>>18&63]+_[i>>12&63]+_[i>>6&63]+_[63&i]);return o.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;var T={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}};!function(e){var t=b,n=T,r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|g(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?o(0):y(e);if("Buffer"===e.type&&Array.isArray(e.data))return y(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),o(e<0?0:0|g(e))}function y(e){for(var t=e.length<0?0:0|g(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function v(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:k(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):k(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function A(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function E(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function I(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return p(e)},a.allocUnsafeSlow=function(e){return p(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(a.isBuffer(o)||(o=a.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function W(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),a.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var V={};function K(e,t,n){V[e]=function(n){(0,h.Z)(i,n);var r=(0,d.Z)(i);function i(){var n;return(0,c.Z)(this,i),n=r.call(this),Object.defineProperty((0,f.Z)(n),"message",{value:t.apply((0,f.Z)(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return(0,l.Z)(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}}(v);var M="undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},P="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function B(e,t){var n={seen:[],stylize:O};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),z(t)?n.showHidden=t:t&&function(e,t){if(!t||!j(t))return e;var n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),U(n.showHidden)&&(n.showHidden=!1),U(n.depth)&&(n.depth=2),U(n.colors)&&(n.colors=!1),U(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=C),D(n,e,n.depth)}function C(e,t){var n=B.styles[t];return n?"\x1b["+B.colors[n][0]+"m"+e+"\x1b["+B.colors[n][1]+"m":e}function O(e,t){return e}function D(e,t,n){if(e.customInspect&&t&&K(t.inspect)&&t.inspect!==B&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return N(r)||(r=D(e,r,n)),r}var i=function(e,t){if(U(t))return e.stylize("undefined","undefined");if(N(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"===typeof r)return e.stylize(""+t,"number");var r;if(z(t))return e.stylize(""+t,"boolean");if(Z(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),V(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return R(t);if(0===o.length){if(K(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(F(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(W(t))return e.stylize(Date.prototype.toString.call(t),"date");if(V(t))return R(t)}var u,c,l="",f=!1,h=["{","}"];(u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),K(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return F(t)&&(l=" "+RegExp.prototype.toString.call(t)),W(t)&&(l=" "+Date.prototype.toUTCString.call(t)),V(t)&&(l=" "+R(t)),0!==o.length||f&&0!=t.length?n<0?F(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)q(t,String(a))?o.push(L(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(L(e,t,n,r,i,!0))})),o}(e,t,n,a,o):o.map((function(r){return L(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,h)):h[0]+l+h[1]}function R(e){return"["+Error.prototype.toString.call(e)+"]"}function L(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),q(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=Z(n)?D(e,u.value,null):D(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),U(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function z(e){return"boolean"===typeof e}function Z(e){return null===e}function N(e){return"string"===typeof e}function U(e){return void 0===e}function F(e){return j(e)&&"[object RegExp]"===H(e)}function j(e){return"object"===typeof e&&null!==e}function W(e){return j(e)&&"[object Date]"===H(e)}function V(e){return j(e)&&("[object Error]"===H(e)||e instanceof Error)}function K(e){return"function"===typeof e}function G(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function H(e){return Object.prototype.toString.call(e)}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}B.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},B.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var X,Q=Object.prototype.hasOwnProperty,$=Object.keys||function(e){var t=[];for(var n in e)Q.call(e,n)&&t.push(n);return t},J=Array.prototype.slice;function ee(){return"undefined"!==typeof X?X:X="foo"===function(){}.name}function te(e){return Object.prototype.toString.call(e)}function ne(e){return!v.isBuffer(e)&&("function"===typeof M.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function re(e,t){e||ce(e,!0,t,"==",le)}var ie=/\s*function\s+([^\(\s]*)\s*/;function oe(e){if(K(e)){if(ee())return e.name;var t=e.toString().match(ie);return t&&t[1]}}function ae(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return se(ue(e.actual),128)+" "+e.operator+" "+se(ue(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||ce;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=oe(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function se(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function ue(e){if(ee()||!K(e))return B(e);var t=oe(e);return"[Function"+(t?": "+t:"")+"]"}function ce(e,t,n,r,i){throw new ae({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function le(e,t){e||ce(e,!0,t,"==",le)}function fe(e,t,n,r){if(e===t)return!0;if(v.isBuffer(e)&&v.isBuffer(t))return 0===Y(e,t);if(W(e)&&W(t))return e.getTime()===t.getTime();if(F(e)&&F(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(ne(e)&&ne(t)&&te(e)===te(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===Y(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(v.isBuffer(e)!==v.isBuffer(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(G(e)||G(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=he(e),o=he(t);if(i&&!o||!i&&o)return!1;if(i)return fe(e=J.call(e),t=J.call(t),n);var a,s,u=$(e),c=$(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!fe(e[a=u[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function he(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function de(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function pe(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&ce(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&i&&!n;if((!e&&V(i)&&o&&de(i,n)||a)&&ce(i,n,"Got unwanted exception"+r),e&&i&&n&&!de(i,n)||!e&&i)throw i}re.AssertionError=ae,P(ae,Error),re.fail=ce,re.ok=le,re.equal=function e(t,n,r){t!=n&&ce(t,n,r,"==",e)},re.notEqual=function e(t,n,r){t==n&&ce(t,n,r,"!=",e)},re.deepEqual=function e(t,n,r){fe(t,n,!1)||ce(t,n,r,"deepEqual",e)},re.deepStrictEqual=function e(t,n,r){fe(t,n,!0)||ce(t,n,r,"deepStrictEqual",e)},re.notDeepEqual=function e(t,n,r){fe(t,n,!1)&&ce(t,n,r,"notDeepEqual",e)},re.notDeepStrictEqual=function e(t,n,r){fe(t,n,!0)&&ce(t,n,r,"notDeepStrictEqual",e)},re.strictEqual=function e(t,n,r){t!==n&&ce(t,n,r,"===",e)},re.notStrictEqual=function e(t,n,r){t===n&&ce(t,n,r,"!==",e)},re.throws=function(e,t,n){pe(!0,e,t,n)},re.doesNotThrow=function(e,t,n){pe(!1,e,t,n)},re.ifError=function(e){if(e)throw e};var ye={},me=function(){function e(t,n){if((0,c.Z)(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return(0,l.Z)(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"decode",value:function(e,t){throw new Error("Layout is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("Layout is abstract")}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function ge(e,t){return t.property?e+"["+t.property+"]":e}ye.Layout=me,ye.nameWithProperty=ge,ye.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof me))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var ve=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(me),be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return(i=t.call(this,-1,r)).elementSpan=e,i}return(0,l.Z)(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(ve),_e=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return(o=t.call(this,e.span,i||e.property)).layout=e,o.offset=r,o}return(0,l.Z)(n,[{key:"isCount",value:function(){return this.layout instanceof we||this.layout instanceof xe}},{key:"decode",value:function(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}]),n}(ve),we=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}]),n}(me),xe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}]),n}(me),ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}]),n}(me),Ae=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}]),n}(me),Ee=Math.pow(2,32);function Ie(e){var t=Math.floor(e/Ee);return{hi32:t,lo32:e-t*Ee}}function Se(e,t){return e*Ee+t}var Te=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}]),n}(me),Me=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readUInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Pe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}]),n}(me),Be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Ce=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}]),n}(me),Oe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}]),n}(me),De=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}]),n}(me),Re=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}]),n}(me),Le=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ve&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof ve)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0,r=this.count;if(r instanceof ve&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=[],r=0,i=this.count;for(i instanceof ve&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof ve&&this.count.encode(e.length,t,n),i}}]),n}(me),ze=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof me}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var a,s=(0,u.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){s.e(h)}finally{s.f()}var f=-1;try{f=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(o=t.call(this,f,r)).fields=e,o.decodePrefixes=!!i,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n,r=this.makeDestinationObject(),i=(0,u.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r,i=n,o=0,a=0,s=(0,u.Z)(this.fields);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.span;if(a=0<l?l:0,void 0!==c.property){var f=e[c.property];void 0!==f&&(a=c.encode(f,t,n),0>l&&(l=c.getSpan(t,n)))}o=n,n+=l}}catch(h){s.e(h)}finally{s.f()}return o+a-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(me),Ze=function(){function e(t){(0,c.Z)(this,e),this.property=t}return(0,l.Z)(e,[{key:"decode",value:function(){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(){throw new Error("UnionDiscriminator is abstract")}}]),e}(),Ne=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(Ze),Ue=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;(0,c.Z)(this,n);var a=e instanceof we||e instanceof xe;if(a)e=new Ne(new _e(e));else if(e instanceof ve&&e.isCount())e=new Ne(e);else if(!(e instanceof Ze))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===r&&(r=null),!(null===r||r instanceof me))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var s=-1;r&&0<=(s=r.span)&&a&&(s+=e.layout.span),(o=t.call(this,s,i)).discriminator=e,o.usesPrefixDiscriminator=a,o.defaultLayout=r,o.registry={};var u=o.defaultGetSourceVariant.bind((0,f.Z)(o));return o.getSourceVariant=function(e){return u(e)},o.configGetSourceVariant=function(e){u=e.bind(this)},o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e,t){var n;void 0===t&&(t=0);var r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){var a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new Fe(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e,t){var n=e;return v.Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}]),n}(me),Fe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i,o){var a;if((0,c.Z)(this,n),!(e instanceof Ue))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof me))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}},{key:"decode",value:function(e,t){var n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(me);function je(e){return 0>e&&(e+=4294967296),e}var We=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof we||e instanceof xe))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=je(e),this},o._packedGetValue=function(){return a},o}return(0,l.Z)(n,[{key:"decode",value:function(e,t){var n=this.makeDestinationObject();void 0===t&&(t=0);var r=this.word.decode(e,t);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;void 0!==a.property&&(n[a.property]=a.decode(r))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.word.decode(t,n);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a.property){var s=e[a.property];void 0!==s&&a.encode(s)}}}catch(c){o.e(c)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new Ve(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new Ke(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(me),Ve=function(){function e(t,n,r){if((0,c.Z)(this,e),!(t instanceof We))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=je(this.valueMask<<this.start),this.property=r}return(0,l.Z)(e,[{key:"decode",value:function(){return je(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if(!Number.isInteger(e)||e!==je(e&this.valueMask))throw new TypeError(ge("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=je(e<<this.start);this.container._packedSetValue(je(t&~this.wordMask)|n)}}]),e}(),Ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){return(0,c.Z)(this,n),t.call(this,e,1,r)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return!!Ve.prototype.decode.call(this,e,t)}},{key:"encode",value:function(e){return"boolean"===typeof e&&(e=+e),Ve.prototype.encode.call(this,e)}}]),n}(Ve),Ge=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof ve||(o=e),(i=t.call(this,o,r)).length=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof ve&&(r=e.length),!v.Buffer.isBuffer(e)||r!==e.length)throw new TypeError(ge("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof ve&&this.length.encode(r,t,n),r}}]),n}(me),He=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,-1,e)}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}]),n}(me),qe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}]),n}(me),Ye=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;return(0,c.Z)(this,n),(i=t.call(this,0,r)).value=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t,n){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(me);ye.ExternalLayout=ve,ye.GreedyCount=be,ye.OffsetLayout=_e,ye.UInt=we,ye.UIntBE=xe,ye.Int=ke,ye.IntBE=Ae,ye.Float=Ce,ye.FloatBE=Oe,ye.Double=De,ye.DoubleBE=Re,ye.Sequence=Le,ye.Structure=ze,ye.UnionDiscriminator=Ze,ye.UnionLayoutDiscriminator=Ne,ye.Union=Ue,ye.VariantLayout=Fe,ye.BitStructure=We,ye.BitField=Ve,ye.Boolean=Ke,ye.Blob=Ge,ye.CString=He,ye.UTF8=qe,ye.Constant=Ye,ye.greedy=function(e,t){return new be(e,t)},ye.offset=function(e,t,n){return new _e(e,t,n)};var Xe=ye.u8=function(e){return new we(1,e)};ye.u16=function(e){return new we(2,e)},ye.u24=function(e){return new we(3,e)};var Qe=ye.u32=function(e){return new we(4,e)};ye.u40=function(e){return new we(5,e)},ye.u48=function(e){return new we(6,e)},ye.nu64=function(e){return new Te(e)},ye.u16be=function(e){return new xe(2,e)},ye.u24be=function(e){return new xe(3,e)},ye.u32be=function(e){return new xe(4,e)},ye.u40be=function(e){return new xe(5,e)},ye.u48be=function(e){return new xe(6,e)},ye.nu64be=function(e){return new Me(e)},ye.s8=function(e){return new ke(1,e)},ye.s16=function(e){return new ke(2,e)},ye.s24=function(e){return new ke(3,e)},ye.s32=function(e){return new ke(4,e)},ye.s40=function(e){return new ke(5,e)},ye.s48=function(e){return new ke(6,e)},ye.ns64=function(e){return new Pe(e)},ye.s16be=function(e){return new Ae(2,e)},ye.s24be=function(e){return new Ae(3,e)},ye.s32be=function(e){return new Ae(4,e)},ye.s40be=function(e){return new Ae(5,e)},ye.s48be=function(e){return new Ae(6,e)},ye.ns64be=function(e){return new Be(e)},ye.f32=function(e){return new Ce(e)},ye.f32be=function(e){return new Oe(e)},ye.f64=function(e){return new De(e)},ye.f64be=function(e){return new Re(e)};var $e=ye.struct=function(e,t,n){return new ze(e,t,n)};ye.bits=function(e,t,n){return new We(e,t,n)},ye.seq=function(e,t,n){return new Le(e,t,n)},ye.union=function(e,t,n){return new Ue(e,t,n)},ye.unionLayoutDiscriminator=function(e,t){return new Ne(e,t)};var Je=ye.blob=function(e,t){return new Ge(e,t)};ye.cstr=function(e){return new He(e)},ye.utf8=function(e,t){return new qe(e,t)},ye.const=function(e,t){return new Ye(e,t)};var et=function(){return Je(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},tt=function(){return Je(8,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64")};function nt(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return(0,g.sendAndConfirmTransaction)(t,n,i,{skipPreflight:!1})}var rt=new g.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),it=new g.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),ot="Failed to find account",at="Invalid account owner";function st(e){return v.Buffer.from(e.toBuffer())}var ut=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"toBuffer",value:function(){var e=(0,a.Z)((0,s.Z)(n.prototype),"toArray",this).call(this).reverse(),t=v.Buffer.from(e);if(8===t.length)return t;re(t.length<8,"u64 too large");var r=v.Buffer.alloc(8);return t.copy(r),r}}],[{key:"fromBuffer",value:function(e){return re(8===e.length,"Invalid buffer length: ".concat(e.length)),new n((0,o.Z)(e).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)}}]),n}(m());function ct(e){return"publicKey"in e}var lt={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},ft=new g.PublicKey("So11111111111111111111111111111111111111112"),ht=$e([Qe("mintAuthorityOption"),et("mintAuthority"),tt("supply"),Xe("decimals"),Xe("isInitialized"),Qe("freezeAuthorityOption"),et("freezeAuthority")]),dt=$e([et("mint"),et("owner"),tt("amount"),Qe("delegateOption"),et("delegate"),Xe("state"),Qe("isNativeOption"),tt("isNative"),tt("delegatedAmount"),Qe("closeAuthorityOption"),et("closeAuthority")]),pt=$e([Xe("m"),Xe("n"),Xe("is_initialized"),et("signer1"),et("signer2"),et("signer3"),et("signer4"),et("signer5"),et("signer6"),et("signer7"),et("signer8"),et("signer9"),et("signer10"),et("signer11")]),yt=function(){function e(t,n,r,i){(0,c.Z)(this,e),(0,p.Z)(this,"connection",void 0),(0,p.Z)(this,"publicKey",void 0),(0,p.Z)(this,"programId",void 0),(0,p.Z)(this,"associatedProgramId",void 0),(0,p.Z)(this,"payer",void 0),Object.assign(this,{connection:t,publicKey:n,programId:r,payer:i,associatedProgramId:it})}return(0,l.Z)(e,[{key:"createAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(this.connection);case 2:return i=t.sent,o=g.Keypair.generate(),(a=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:i,space:dt.span,programId:this.programId})),s=this.publicKey,a.add(e.createInitAccountInstruction(this.programId,s,o.publicKey,n)),t.next=10,nt("createAccount and InitializeAccount",this.connection,a,this.payer,o);case 10:return t.abrupt("return",o.publicKey);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.abrupt("return",this.createAssociatedTokenAccountInternal(n,i));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInternal",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("CreateAssociatedTokenAccount",this.connection,(new g.Transaction).add(e.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,i,n,this.payer.publicKey)),this.payer);case 2:return t.abrupt("return",i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrCreateAssociatedAccountInfo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.prev=3,t.next=6,this.getAccountInfo(i);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),t.t0.message!==ot&&t.t0.message!==at){t.next=24;break}return t.prev=12,t.next=15,this.createAssociatedTokenAccountInternal(n,i);case 15:t.next=19;break;case 17:t.prev=17,t.t1=t.catch(12);case 19:return t.next=21,this.getAccountInfo(i);case 21:return t.abrupt("return",t.sent);case 24:throw t.t0;case 25:case"end":return t.stop()}}),t,this,[[3,9],[12,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createMultisig",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var o,a,s,u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g.Keypair.generate(),t.next=3,e.getMinBalanceRentForExemptMultisig(this.connection);case 3:return a=t.sent,(s=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:a,space:pt.span,programId:this.programId})),u=[{pubkey:o.publicKey,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],i.forEach((function(e){return u.push({pubkey:e,isSigner:!1,isWritable:!1})})),c=$e([Xe("instruction"),Xe("m")]),l=v.Buffer.alloc(c.span),c.encode({instruction:2,m:n},l),s.add({keys:u,programId:this.programId,data:l}),t.next=14,nt("createAccount and InitializeMultisig",this.connection,s,this.payer,o);case 14:return t.abrupt("return",o.publicKey);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMintInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(this.publicKey);case 2:if(null!==(t=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:if(t.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid mint owner: ".concat(JSON.stringify(t.owner)));case 7:if(t.data.length==ht.span){e.next=9;break}throw new Error("Invalid mint size");case 9:return n=v.Buffer.from(t.data),0===(i=ht.decode(n)).mintAuthorityOption?i.mintAuthority=null:i.mintAuthority=new g.PublicKey(i.mintAuthority),i.supply=ut.fromBuffer(i.supply),i.isInitialized=0!=i.isInitialized,0===i.freezeAuthorityOption?i.freezeAuthority=null:i.freezeAuthority=new g.PublicKey(i.freezeAuthority),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t,n);case 2:if(null!==(i=e.sent)){e.next=5;break}throw new Error(ot);case 5:if(i.owner.equals(this.programId)){e.next=7;break}throw new Error(at);case 7:if(i.data.length==dt.span){e.next=9;break}throw new Error("Invalid account size");case 9:if(o=v.Buffer.from(i.data),(a=dt.decode(o)).address=t,a.mint=new g.PublicKey(a.mint),a.owner=new g.PublicKey(a.owner),a.amount=ut.fromBuffer(a.amount),0===a.delegateOption?(a.delegate=null,a.delegatedAmount=new ut):(a.delegate=new g.PublicKey(a.delegate),a.delegatedAmount=ut.fromBuffer(a.delegatedAmount)),a.isInitialized=0!==a.state,a.isFrozen=2===a.state,1===a.isNativeOption?(a.rentExemptReserve=ut.fromBuffer(a.isNative),a.isNative=!0):(a.rentExemptReserve=null,a.isNative=!1),0===a.closeAuthorityOption?a.closeAuthority=null:a.closeAuthority=new g.PublicKey(a.closeAuthority),a.mint.equals(this.publicKey)){e.next=22;break}throw new Error("Invalid account mint: ".concat(JSON.stringify(a.mint)," !== ").concat(JSON.stringify(this.publicKey)));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultisigInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t);case 2:if(null!==(n=e.sent)){e.next=5;break}throw new Error("Failed to find multisig");case 5:if(n.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid multisig owner");case 7:if(n.data.length==pt.span){e.next=9;break}throw new Error("Invalid multisig size");case 9:return i=v.Buffer.from(n.data),(o=pt.decode(i)).signer1=new g.PublicKey(o.signer1),o.signer2=new g.PublicKey(o.signer2),o.signer3=new g.PublicKey(o.signer3),o.signer4=new g.PublicKey(o.signer4),o.signer5=new g.PublicKey(o.signer5),o.signer6=new g.PublicKey(o.signer6),o.signer7=new g.PublicKey(o.signer7),o.signer8=new g.PublicKey(o.signer8),o.signer9=new g.PublicKey(o.signer9),o.signer10=new g.PublicKey(o.signer10),o.signer11=new g.PublicKey(o.signer11),e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Transfer",this.connection,(new g.Transaction).add(e.createTransferInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Approve",this.connection,(new g.Transaction).add(e.createApproveInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"revoke",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["Revoke",this.connection,(new g.Transaction).add(e.createRevokeInstruction(this.programId,n,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"setAuthority",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(s)?(c=s.publicKey,l=[s]):(c=s,l=u),t.next=3,nt.apply(void 0,["SetAuthority",this.connection,(new g.Transaction).add(e.createSetAuthorityInstruction(this.programId,n,i,a,c,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"mintTo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["MintTo",this.connection,(new g.Transaction).add(e.createMintToInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"burn",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["Burn",this.connection,(new g.Transaction).add(e.createBurnInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"closeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(u=a.publicKey,c=[a]):(u=a,c=s),t.next=3,nt.apply(void 0,["CloseAccount",this.connection,(new g.Transaction).add(e.createCloseAccountInstruction(this.programId,n,i,u,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"freezeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["FreezeAccount",this.connection,(new g.Transaction).add(e.createFreezeAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"thawAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["ThawAccount",this.connection,(new g.Transaction).add(e.createThawAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"transferChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["TransferChecked",this.connection,(new g.Transaction).add(e.createTransferCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"approveChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["ApproveChecked",this.connection,(new g.Transaction).add(e.createApproveCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"mintToChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["MintToChecked",this.connection,(new g.Transaction).add(e.createMintToCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"burnChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["BurnChecked",this.connection,(new g.Transaction).add(e.createBurnCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"syncNative",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("SyncNative",this.connection,(new g.Transaction).add(e.createSyncNativeInstruction(this.programId,n)),this.payer);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getMinBalanceRentForExemptMint",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(ht.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(dt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptMultisig",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(pt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMint",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s,u){var c,l,f,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.Keypair.generate(),l=new e(n,c.publicKey,u,i),t.next=4,e.getMinBalanceRentForExemptMint(n);case 4:return f=t.sent,(h=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:i.publicKey,newAccountPubkey:c.publicKey,lamports:f,space:ht.span,programId:u})),h.add(e.createInitMintInstruction(u,c.publicKey,s,o,a)),t.next=10,nt("createAccount and InitializeMint",n,h,i,c);case 10:return t.abrupt("return",l);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"createWrappedNativeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s){var u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(n);case 2:return u=t.sent,c=g.Keypair.generate(),(l=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:a.publicKey,newAccountPubkey:c.publicKey,lamports:u,space:dt.span,programId:i})),l.add(g.SystemProgram.transfer({fromPubkey:a.publicKey,toPubkey:c.publicKey,lamports:s})),l.add(e.createInitAccountInstruction(i,ft,c.publicKey,o)),t.next=10,nt("createAccount, transfer, and initializeAccount",n,l,a,c);case 10:return t.abrupt("return",c.publicKey);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"createInitMintInstruction",value:function(e,t,n,r,i){var o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=$e([Xe("instruction"),Xe("decimals"),et("mintAuthority"),Xe("option"),et("freezeAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:0,decimals:n,mintAuthority:st(r),option:null===i?0:1,freezeAuthority:st(i||new g.PublicKey(0))},s);return s=s.slice(0,u),new g.TransactionInstruction({keys:o,programId:e,data:s})}},{key:"createInitAccountInstruction",value:function(e,t,n,r){var i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);return o.encode({instruction:1},a),new g.TransactionInstruction({keys:i,programId:e,data:a})}},{key:"createTransferInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:3,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createApproveInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:4,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createRevokeInstruction",value:function(e,t,n,r){var i=$e([Xe("instruction")]),o=v.Buffer.alloc(i.span);i.encode({instruction:5},o);var a=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===r.length?a.push({pubkey:n,isSigner:!0,isWritable:!1}):(a.push({pubkey:n,isSigner:!1,isWritable:!1}),r.forEach((function(e){return a.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:a,programId:e,data:o})}},{key:"createSetAuthorityInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),Xe("authorityType"),Xe("option"),et("newAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:6,authorityType:lt[r],option:null===n?0:1,newAuthority:st(n||new g.PublicKey(0))},s);s=s.slice(0,u);var c=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===o.length?c.push({pubkey:i,isSigner:!0,isWritable:!1}):(c.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:s})}},{key:"createMintToInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:7,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createBurnInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:8,amount:new ut(o).toBuffer()},s);var u=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createCloseAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:9},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createFreezeAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:10},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createThawAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:11},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createTransferCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:12,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createApproveCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:13,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createMintToCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:14,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createBurnCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:15,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createSyncNativeInstruction",value:function(e,t){var n=$e([Xe("instruction")]),r=v.Buffer.alloc(n.span);n.encode({instruction:17},r);var i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new g.TransactionInstruction({keys:i,programId:e,data:r})}},{key:"getAssociatedTokenAddress",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>4&&void 0!==a[4]&&a[4]||g.PublicKey.isOnCurve(o.toBuffer())){e.next=3;break}throw new Error("Owner cannot sign: ".concat(o.toString()));case 3:return e.next=5,g.PublicKey.findProgramAddress([o.toBuffer(),n.toBuffer(),i.toBuffer()],t);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInstruction",value:function(e,t,n,r,i,o){var a=v.Buffer.alloc(0),s=[{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new g.TransactionInstruction({keys:s,programId:e,data:a})}}]),e}()},15397:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(17061).default,o=n(56690).default,a=n(89728).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataProgram=void 0;var l=n(96322),f=n(73340),h=function(e){s(n,e);var t=u(n);function n(){return o(this,n),t.apply(this,arguments)}return a(n,null,[{key:"findEditionAccount",value:function(e,t){return c(this,void 0,void 0,i().mark((function o(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),e.toBuffer(),r.from(n.EDITION,"utf8"),r.from(t,"utf8")],n.PUBKEY));case 1:case"end":return i.stop()}}),o)})))}},{key:"findMasterEditionAccount",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),e.toBuffer(),r.from(n.EDITION,"utf8")],n.PUBKEY));case 1:case"end":return t.stop()}}),t)})))}},{key:"findMetadataAccount",value:function(e){return c(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),e.toBuffer()],n.PUBKEY));case 1:case"end":return t.stop()}}),t)})))}},{key:"findUseAuthorityAccount",value:function(e,t){return c(this,void 0,void 0,i().mark((function o(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),e.toBuffer(),r.from(n.USER,"utf8"),t.toBuffer()],n.PUBKEY));case 1:case"end":return i.stop()}}),o)})))}},{key:"findCollectionAuthorityAccount",value:function(e,t){return c(this,void 0,void 0,i().mark((function o(){return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),e.toBuffer(),r.from(n.COLLECTION_AUTHORITY,"utf8"),t.toBuffer()],n.PUBKEY));case 1:case"end":return i.stop()}}),o)})))}},{key:"findProgramAsBurnerAccount",value:function(){return c(this,void 0,void 0,i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",l.PublicKey.findProgramAddress([r.from(n.PREFIX,"utf8"),n.PUBKEY.toBuffer(),r.from(n.BURN,"utf8")],n.PUBKEY));case 1:case"end":return e.stop()}}),e)})))}}]),n}(f.Program);t.MetadataProgram=h,h.PREFIX="metadata",h.EDITION="edition",h.USER="user",h.COLLECTION_AUTHORITY="collection_authority",h.BURN="burn",h.PUBKEY=new l.PublicKey(f.config.programs.metadata)},8752:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CollctionAuthorityRecord=t.Collection=void 0;var s=n(73340),u=n(28041),c=function(e){o(n,e);var t=a(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).key=e.key,r.verified=e.verified,r}return r(n)}(s.Borsh.Data);t.Collection=c,c.SCHEMA=c.struct([["verified","u8"],["key","pubkeyAsString"]]);var l=function(e){o(n,e);var t=a(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).key=u.MetadataKey.CollectionAuthorityRecord,r.bump=e.bump,r}return r(n)}(s.Borsh.Data);t.CollctionAuthorityRecord=l,l.SCHEMA=l.struct([["key","u8"],["bump","u8"]])},84520:function(e,t,n){"use strict";var r=n(17061).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Edition=t.EditionData=void 0;var c=n(73340),l=n(15397),f=n(96322),h=n(19778),d=n(28041),p=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=d.MetadataKey.EditionV1,r}return i(n)}(c.Borsh.Data);t.EditionData=p,p.SCHEMA=p.struct([["key","u8"],["parent","pubkeyAsString"],["edition","u64"]]);var y=function(e){a(n,e);var t=s(n);function n(e,r){var i;if(o(this,n),!(i=t.call(this,e,r)).assertOwner(l.MetadataProgram.PUBKEY))throw(0,c.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,c.ERROR_INVALID_ACCOUNT_DATA)();return i.data=p.deserialize(i.info.data),i}return i(n,null,[{key:"getPDA",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",l.MetadataProgram.findProgramAddress([h.Buffer.from(l.MetadataProgram.PREFIX),l.MetadataProgram.PUBKEY.toBuffer(),new f.PublicKey(e).toBuffer(),h.Buffer.from(n.EDITION_PREFIX)]));case 1:case"end":return t.stop()}}),t)})))}},{key:"isCompatible",value:function(e){return e[0]===d.MetadataKey.EditionV1}}]),n}(c.Account);t.Edition=y,y.EDITION_PREFIX="edition"},74231:function(e,t,n){"use strict";var r=n(17061).default,i=n(56690).default,o=n(89728).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.EditionMarker=t.EditionMarkerData=void 0;var c=n(73340),l=n(96322),f=n(84520),h=n(15397),d=n(19778),p=n(28041),y=function(e){a(n,e);var t=s(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).key=p.MetadataKey.EditionMarker,r}return o(n,[{key:"editionTaken",value:function(e){var t=e%m.DATA_SIZE,n=Math.floor(t/8);if(n>30)throw Error("Bad index for edition");var r=7-t%8,i=Math.pow(2,r);return 0!=(this.ledger[n]&i)}}]),n}(c.Borsh.Data);t.EditionMarkerData=y,y.SCHEMA=y.struct([["key","u8"],["ledger",[31]]]);var m=function(e){a(n,e);var t=s(n);function n(e,r){var o;if(i(this,n),!(o=t.call(this,e,r)).assertOwner(h.MetadataProgram.PUBKEY))throw(0,c.ERROR_INVALID_OWNER)();if(!n.isCompatible(o.info.data))throw(0,c.ERROR_INVALID_ACCOUNT_DATA)();return o.data=y.deserialize(o.info.data),o}return o(n,null,[{key:"getPDA",value:function(e,t){return u(this,void 0,void 0,r().mark((function n(){var i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=Math.floor(t.toNumber()/248),n.abrupt("return",h.MetadataProgram.findProgramAddress([d.Buffer.from(h.MetadataProgram.PREFIX),h.MetadataProgram.PUBKEY.toBuffer(),new l.PublicKey(e).toBuffer(),d.Buffer.from(f.Edition.EDITION_PREFIX),d.Buffer.from(i.toString())]));case 2:case"end":return n.stop()}}),n)})))}},{key:"isCompatible",value:function(e){return e[0]===p.MetadataKey.EditionMarker}}]),n}(c.Account);t.EditionMarker=m,m.DATA_SIZE=248},47520:function(e,t,n){"use strict";var r=n(17061).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default,u=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.MasterEdition=t.MasterEditionV2Data=t.MasterEditionV1Data=void 0;var l=n(73340),f=c(n(66315)),h=n(84520),d=n(15397),p=n(19778),y=n(96322),m=n(28041),g=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=m.MetadataKey.MasterEditionV1,r}return i(n)}(l.Borsh.Data);t.MasterEditionV1Data=g,g.SCHEMA=g.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}],["printingMint","pubkeyAsString"],["oneTimePrintingAuthorizationMint","pubkeyAsString"]]);var v=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=m.MetadataKey.MasterEditionV2,r}return i(n)}(l.Borsh.Data);t.MasterEditionV2Data=v,v.SCHEMA=v.struct([["key","u8"],["supply","u64"],["maxSupply",{kind:"option",type:"u64"}]]);var b=function(e){a(n,e);var t=s(n);function n(e,r){var i;if(o(this,n),!(i=t.call(this,e,r)).assertOwner(d.MetadataProgram.PUBKEY))throw(0,l.ERROR_INVALID_OWNER)();if(n.isMasterEditionV1(i.info.data))i.data=g.deserialize(i.info.data);else{if(!n.isMasterEditionV2(i.info.data))throw(0,l.ERROR_INVALID_ACCOUNT_DATA)();i.data=v.deserialize(i.info.data)}return i}return i(n,[{key:"getEditions",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.MetadataProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:f.default.encode(p.Buffer.from([m.MetadataKey.EditionV1]))}},{memcmp:{offset:1,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return h.Edition.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}}],[{key:"getPDA",value:function(e){return u(this,void 0,void 0,r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",d.MetadataProgram.findProgramAddress([p.Buffer.from(d.MetadataProgram.PREFIX),d.MetadataProgram.PUBKEY.toBuffer(),new y.PublicKey(e).toBuffer(),p.Buffer.from(n.EDITION_PREFIX)]));case 1:case"end":return t.stop()}}),t)})))}},{key:"isCompatible",value:function(e){return n.isMasterEditionV1(e)||n.isMasterEditionV2(e)}},{key:"isMasterEditionV1",value:function(e){return e[0]===m.MetadataKey.MasterEditionV1}},{key:"isMasterEditionV2",value:function(e){return e[0]===m.MetadataKey.MasterEditionV2}}]),n}(l.Account);t.MasterEdition=b,b.EDITION_PREFIX="edition"},96050:function(e,t,n){"use strict";var r=n(27424).default,i=n(17061).default,o=n(861).default,a=n(89728).default,s=n(56690).default,u=n(61655).default,c=n(26389).default,l=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.computeCreatorOffset=t.MAX_CREATOR_LEN=t.MAX_URI_LENGTH=t.MAX_SYMBOL_LENGTH=t.MAX_NAME_LENGTH=t.Metadata=t.MetadataData=t.MetadataDataData=t.DataV2=t.Creator=void 0;var h=n(73340),d=n(96322),p=f(n(80518)),y=f(n(66315)),m=n(19778),g=n(15397),v=n(84520),b=n(47520),_=n(9473),w=n(8752),x=n(28041),k=function(e){u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return a(n)}(h.Borsh.Data);t.Creator=k,k.SCHEMA=k.struct([["address","pubkeyAsString"],["verified","u8"],["share","u8"]]);var A=function(e){u(n,e);var t=c(n);function n(){return s(this,n),t.apply(this,arguments)}return a(n)}(h.Borsh.Data);t.DataV2=A,A.SCHEMA=new Map([].concat(o(k.SCHEMA),o(w.Collection.SCHEMA),o(_.Uses.SCHEMA),o(A.struct([["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[k]}],["collection",{kind:"option",type:w.Collection}],["uses",{kind:"option",type:_.Uses}]]))));var E=function(e){u(n,e);var t=c(n);function n(e){var r;s(this,n),r=t.call(this,e);var i=new RegExp("\0","g");return r.name=e.name.replace(i,""),r.uri=e.uri.replace(i,""),r.symbol=e.symbol.replace(i,""),r}return a(n)}(h.Borsh.Data);t.MetadataDataData=E,E.SCHEMA=new Map([].concat(o(k.SCHEMA),o(E.struct([["name","string"],["symbol","string"],["uri","string"],["sellerFeeBasisPoints","u16"],["creators",{kind:"option",type:[k]}]]))));var I=function(e){u(n,e);var t=c(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).key=x.MetadataKey.MetadataV1,r}return a(n)}(h.Borsh.Data);t.MetadataData=I,I.SCHEMA=new Map([].concat(o(E.SCHEMA),o(w.Collection.SCHEMA),o(_.Uses.SCHEMA),o(I.struct([["key","u8"],["updateAuthority","pubkeyAsString"],["mint","pubkeyAsString"],["data",E],["primarySaleHappened","u8"],["isMutable","u8"],["editionNonce",{kind:"option",type:"u8"}],["tokenStandard",{kind:"option",type:"u8"}],["collection",{kind:"option",type:w.Collection}],["uses",{kind:"option",type:_.Uses}]]))));var S=function(e){u(f,e);var n=c(f);function f(e,t){var r;if(s(this,f),!(r=n.call(this,e,t)).assertOwner(g.MetadataProgram.PUBKEY))throw(0,h.ERROR_INVALID_OWNER)();if(!f.isCompatible(r.info.data))throw(0,h.ERROR_INVALID_ACCOUNT_DATA)();return r.data=I.deserialize(r.info.data),r}return a(f,null,[{key:"isCompatible",value:function(e){return e[0]===x.MetadataKey.MetadataV1}},{key:"getPDA",value:function(e){return l(this,void 0,void 0,i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g.MetadataProgram.findProgramAddress([m.Buffer.from(g.MetadataProgram.PREFIX),g.MetadataProgram.PUBKEY.toBuffer(),new d.PublicKey(e).toBuffer()]));case 1:case"end":return t.stop()}}),t)})))}},{key:"findMany",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(this,void 0,void 0,i().mark((function r(){var a;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=[{memcmp:{offset:0,bytes:y.default.encode(m.Buffer.from([x.MetadataKey.MetadataV1]))}},n.updateAuthority&&{memcmp:{offset:1,bytes:new d.PublicKey(n.updateAuthority).toBase58()}},n.mint&&{memcmp:{offset:33,bytes:new d.PublicKey(n.mint).toBase58()}}].filter(Boolean),!n.creators){r.next=7;break}return r.next=4,Promise.all(Array.from(Array(h.config.maxCreatorLimit).keys()).reduce((function(r,i){return[].concat(o(r),o(n.creators.map((function(n){return g.MetadataProgram.getProgramAccounts(e,{filters:[].concat(o(a),[{memcmp:{offset:(0,t.computeCreatorOffset)(i),bytes:new d.PublicKey(n).toBase58()}}])})}))))}),[]));case 4:return r.abrupt("return",r.sent.flat().map((function(e){return f.from(e)})));case 7:return r.next=9,g.MetadataProgram.getProgramAccounts(e,{filters:a});case 9:return r.abrupt("return",r.sent.map((function(e){return f.from(e)})));case 10:case"end":return r.stop()}}),r)})))}},{key:"findByMint",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.getPDA(t);case 2:return r=n.sent,n.abrupt("return",f.load(e,r));case 4:case"end":return n.stop()}}),n)})))}},{key:"findByOwner",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r,o,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return r=n.sent,o=new Map(r.map((function(e){var t=e.data;return[t.mint.toString(),t]}))),n.next=6,f.findMany(e);case 6:return a=n.sent,n.abrupt("return",a.filter((function(e){var t,n;return o.has(e.data.mint)&&((null===(n=null===(t=null===o||void 0===o?void 0:o.get(e.data.mint))||void 0===t?void 0:t.amount)||void 0===n?void 0:n.toNumber())||0)>0})));case 8:case"end":return n.stop()}}),n)})))}},{key:"findByOwnerV2",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r,o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return r=n.sent,o=r.map((function(e){return e.data})).filter((function(e){var t=e.amount;return(null===t||void 0===t?void 0:t.toNumber())>0})),n.next=6,Promise.all(o.map((function(t){var n=t.mint;return f.findMany(e,{mint:n})})));case 6:return n.abrupt("return",n.sent.flat());case 7:case"end":return n.stop()}}),n)})))}},{key:"findByOwnerV3",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var o;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.findInfoByOwner(e,t);case 2:return o=n.sent,n.abrupt("return",Array.from(o.entries()).map((function(e){var t=r(e,2);return new f(t[0],t[1])})));case 4:case"end":return n.stop()}}),n)})))}},{key:"findInfoByOwner",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r,a,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,h.TokenAccount.getTokenAccountsByOwner(e,t);case 2:return r=n.sent,a=r.reduce((function(e,t){var n,r=t.data;return(null===(n=r.amount)||void 0===n?void 0:n.eq(new p.default(1)))?[].concat(o(e),[f.getPDA(r.mint)]):e}),[]),n.next=6,Promise.all(a);case 6:return s=n.sent,n.abrupt("return",h.Account.getInfos(e,s));case 8:case"end":return n.stop()}}),n)})))}},{key:"findDataByOwner",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.findInfoByOwner(e,t);case 2:return r=n.sent,n.abrupt("return",Array.from(r.values()).map((function(e){return I.deserialize(e.data)})));case 4:case"end":return n.stop()}}),n)})))}},{key:"getEdition",value:function(e,t){return l(this,void 0,void 0,i().mark((function n(){var r,o,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,v.Edition.getPDA(t);case 2:return r=n.sent,n.next=5,h.Account.getInfo(e,r);case 5:o=n.sent,a=null===o||void 0===o?void 0:o.data[0],n.t0=a,n.next=n.t0===x.MetadataKey.EditionV1?10:n.t0===x.MetadataKey.MasterEditionV1||n.t0===x.MetadataKey.MasterEditionV2?11:12;break;case 10:return n.abrupt("return",new v.Edition(r,o));case 11:return n.abrupt("return",new b.MasterEdition(r,o));case 12:return n.abrupt("return");case 13:case"end":return n.stop()}}),n)})))}}]),f}(h.Account);t.Metadata=S,t.MAX_NAME_LENGTH=32,t.MAX_SYMBOL_LENGTH=10,t.MAX_URI_LENGTH=200,t.MAX_CREATOR_LEN=34;t.computeCreatorOffset=function(e){return 69+t.MAX_NAME_LENGTH+4+t.MAX_URI_LENGTH+4+t.MAX_SYMBOL_LENGTH+2+1+4+e*t.MAX_CREATOR_LEN}},9473:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UseAuthorityRecord=t.Uses=void 0;var s=n(73340),u=n(2163),c=function(e){o(n,e);var t=a(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).useMethod=e.useMethod,r.total=e.total,r.remaining=e.remaining,r}return r(n)}(s.Borsh.Data);t.Uses=c,c.SCHEMA=c.struct([["useMethod","u8"],["total","u64"],["remaining","u64"]]);var l=function(e){o(n,e);var t=a(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).key=u.MetadataKey.UseAuthorityRecord,r.allowedUses=e.allowedUses,r.bump=e.bump,r}return r(n)}(s.Borsh.Data);t.UseAuthorityRecord=l,l.SCHEMA=l.struct([["key","u8"],["allowedUses","u64"],["bump","u8"]])},28041:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenStandard=t.UseMethod=t.MetadataKey=void 0,function(e){e[e.Uninitialized=0]="Uninitialized",e[e.MetadataV1=4]="MetadataV1",e[e.EditionV1=1]="EditionV1",e[e.MasterEditionV1=2]="MasterEditionV1",e[e.MasterEditionV2=6]="MasterEditionV2",e[e.EditionMarker=7]="EditionMarker",e[e.UseAuthorityRecord=8]="UseAuthorityRecord",e[e.CollectionAuthorityRecord=9]="CollectionAuthorityRecord"}(t.MetadataKey||(t.MetadataKey={})),function(e){e[e.Burn=0]="Burn",e[e.Single=1]="Single",e[e.Multiple=2]="Multiple"}(t.UseMethod||(t.UseMethod={})),function(e){e[e.NonFungible=0]="NonFungible",e[e.FungibleAsset=1]="FungibleAsset",e[e.Fungible=2]="Fungible",e[e.NonFungibleEdition=3]="NonFungibleEdition"}(t.TokenStandard||(t.TokenStandard={}))},2163:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(28041),t),i(n(96050),t),i(n(47520),t),i(n(84520),t),i(n(74231),t),i(n(8752),t),i(n(9473),t)},17398:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2163),t),i(n(15397),t),i(n(3296),t)},73994:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ApproveCollectionAuthority=t.ApproveCollectionAuthorityArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=23,e}return i(n)}(u.Borsh.Data);t.ApproveCollectionAuthorityArgs=f,f.SCHEMA=new Map(r(f.struct([["instruction","u8"]])));var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.collectionAuthorityRecord,h=r.newCollectionAuthority,d=r.updateAuthority,p=r.mint,y=f.serialize(),m=[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return i.add(new c.TransactionInstruction({keys:m,programId:l.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.ApproveCollectionAuthority=h},62822:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ApproveUseAuthority=t.ApproveUseAuthorityArgs=void 0;var u=n(73340),c=n(42446),l=n(96322),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=20,e}return i(n)}(u.Borsh.Data);t.ApproveUseAuthorityArgs=h,h.SCHEMA=new Map(r(h.struct([["instruction","u8"],["numberOfUses","u8"]])));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.useAuthorityRecord,u=r.user,d=r.owner,p=r.ownerTokenAccount,y=r.metadata,m=r.mint,g=r.burner,v=r.numberOfUses,b=h.serialize({numberOfUses:v}),_=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:g,isSigner:!1,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return i.add(new l.TransactionInstruction({keys:_,programId:f.MetadataProgram.PUBKEY,data:b})),i}return i(n)}(u.Transaction);t.ApproveUseAuthority=d},60333:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMasterEdition=t.CreateMasterEditionArgs=void 0;var s=n(73340),u=n(42446),c=n(96322),l=n(15397),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=10,e}return r(n)}(s.Borsh.Data);t.CreateMasterEditionArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.edition,h=r.metadata,d=r.updateAuthority,p=r.mint,y=r.mintAuthority,m=r.maxSupply,g=f.serialize({maxSupply:m||null});return o.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:g})),o}return r(n)}(s.Transaction);t.CreateMasterEdition=h},13706:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMasterEditionV3=t.CreateMasterEditionV3Args=void 0;var s=n(73340),u=n(42446),c=n(96322),l=n(15397),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=17,e}return r(n)}(s.Borsh.Data);t.CreateMasterEditionV3Args=f,f.SCHEMA=f.struct([["instruction","u8"],["maxSupply",{kind:"option",type:"u64"}]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.edition,h=r.metadata,d=r.updateAuthority,p=r.mint,y=r.mintAuthority,m=r.maxSupply,g=f.serialize({maxSupply:m||null});return o.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:y,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:g})),o}return r(n)}(s.Transaction);t.CreateMasterEditionV3=h},67089:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMetadata=t.CreateMetadataArgs=void 0;var u=n(73340),c=n(96322),l=n(96050),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=0,e}return i(n)}(u.Borsh.Data);t.CreateMetadataArgs=h,h.SCHEMA=new Map([].concat(r(l.MetadataDataData.SCHEMA),r(h.struct([["instruction","u8"],["data",l.MetadataDataData],["isMutable","u8"]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.metadataData,l=r.updateAuthority,d=r.mint,p=r.mintAuthority,y=h.serialize({data:u,isMutable:!0});return i.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.CreateMetadata=d},65053:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CreateMetadataV2=t.CreateMetadataV2Args=void 0;var u=n(73340),c=n(96322),l=n(96050),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=16,e}return i(n)}(u.Borsh.Data);t.CreateMetadataV2Args=h,h.SCHEMA=new Map([].concat(r(l.DataV2.SCHEMA),r(h.struct([["instruction","u8"],["data",l.DataV2],["isMutable","u8"]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.metadataData,l=r.updateAuthority,d=r.mint,p=r.mintAuthority,y=h.serialize({data:u,isMutable:!0});return i.add(new c.TransactionInstruction({keys:[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.CreateMetadataV2=d},32647:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.FreezeDelegatedAccount=t.FreezeDelegatedAccountArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=n(42446),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=26,e}return i(n)}(u.Borsh.Data);t.FreezeDelegatedAccountArgs=h,h.SCHEMA=new Map(r(h.struct([["instruction","u8"]])));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.delegate,s=r.token_account,u=r.edition,d=r.mint,p=h.serialize();return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:p})),i}return i(n)}(u.Transaction);t.FreezeDelegatedAccount=d},70269:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MintNewEditionFromMasterEditionViaToken=t.MintNewEditionFromMasterEditionViaTokenArgs=void 0;var s=n(73340),u=n(42446),c=n(96322),l=n(15397),f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=11,e}return r(n)}(s.Borsh.Data);t.MintNewEditionFromMasterEditionViaTokenArgs=f,f.SCHEMA=f.struct([["instruction","u8"],["edition","u64"]]);var h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.edition,h=r.metadata,d=r.updateAuthority,p=r.masterEdition,y=r.masterMetadata,m=r.mint,g=r.editionMarker,v=r.mintAuthority,b=r.tokenOwner,_=r.tokenAccount,w=r.editionValue,x=f.serialize({edition:w});return o.add(new c.TransactionInstruction({keys:[{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:b,isSigner:!0,isWritable:!1},{pubkey:_,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:x})),o}return r(n)}(s.Transaction);t.MintNewEditionFromMasterEditionViaToken=h},33189:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RemoveCreatorVerification=t.RemoveCreatorVerificationArgs=void 0;var s=n(73340),u=n(96322),c=n(15397),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=28,e}return r(n)}(s.Borsh.Data);t.RemoveCreatorVerificationArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.metadata,s=r.creator,f=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1}],programId:c.MetadataProgram.PUBKEY,data:f})),o}return r(n)}(s.Transaction);t.RemoveCreatorVerification=f},86774:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RevokeCollectionAuthority=t.RevokeCollectionAuthorityArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=24,e}return i(n)}(u.Borsh.Data);t.RevokeCollectionAuthorityArgs=f,f.SCHEMA=new Map(r(f.struct([["instruction","u8"]])));var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.metadata,s=r.collectionAuthorityRecord,u=r.delegateAuthority,h=r.newCollectionAuthority,d=r.updateAuthority,p=r.mint,y=u||h;if(!y)throw new Error("Must provide either a delegateAuthority");var m=f.serialize(),g=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return i.add(new c.TransactionInstruction({keys:g,programId:l.MetadataProgram.PUBKEY,data:m})),i}return i(n)}(u.Transaction);t.RevokeCollectionAuthority=h},5840:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RevokeUseAuthority=t.RevokeUseAuthorityArgs=void 0;var u=n(73340),c=n(42446),l=n(96322),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=21,e}return i(n)}(u.Borsh.Data);t.RevokeUseAuthorityArgs=h,h.SCHEMA=new Map(r(h.struct([["instruction","u8"]])));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.useAuthorityRecord,s=r.user,u=r.owner,d=r.ownerTokenAccount,p=r.metadata,y=r.mint,m=h.serialize(),g=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return i.add(new l.TransactionInstruction({keys:g,programId:f.MetadataProgram.PUBKEY,data:m})),i}return i(n)}(u.Transaction);t.RevokeUseAuthority=d},52492:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetAndVerifyCollectionCollection=t.SetAndVerifyCollectionArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=25,e}return i(n)}(u.Borsh.Data);t.SetAndVerifyCollectionArgs=f,f.SCHEMA=new Map(r(f.struct([["instruction","u8"]])));var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.collectionAuthority,h=r.collectionMint,d=r.updateAuthority,p=r.collectionMetadata,y=r.collectionMasterEdition,m=r.collectionAuthorityRecord,g=f.serialize(),v=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1}];return m&&v.push({pubkey:m,isSigner:!1,isWritable:!1}),i.add(new c.TransactionInstruction({keys:v,programId:l.MetadataProgram.PUBKEY,data:g})),i}return i(n)}(u.Transaction);t.SetAndVerifyCollectionCollection=h},38289:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SignMetadata=t.SignMetadataArgs=void 0;var s=n(73340),u=n(96322),c=n(15397),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=7,e}return r(n)}(s.Borsh.Data);t.SignMetadataArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.metadata,s=r.creator,f=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1}],programId:c.MetadataProgram.PUBKEY,data:f})),o}return r(n)}(s.Transaction);t.SignMetadata=f},37233:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ThawDelegatedAccount=t.ThawDelegatedAccountArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=n(42446),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=27,e}return i(n)}(u.Borsh.Data);t.ThawDelegatedAccountArgs=h,h.SCHEMA=new Map(r(h.struct([["instruction","u8"]])));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.delegate,s=r.token_account,u=r.edition,d=r.mint,p=h.serialize();return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:f.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:l.MetadataProgram.PUBKEY,data:p})),i}return i(n)}(u.Transaction);t.ThawDelegatedAccount=d},82358:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UnVerifyCollection=t.UnVerifyCollectionArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=22,e}return i(n)}(u.Borsh.Data);t.UnVerifyCollectionArgs=f,f.SCHEMA=new Map(r(f.struct([["instruction","u8"]])));var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.collectionAuthority,h=r.collectionMint,d=r.collectionMetadata,p=r.collectionMasterEdition,y=r.collectionAuthorityRecord,m=f.serialize(),g=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1}];return y&&g.push({pubkey:y,isSigner:!1,isWritable:!1}),i.add(new c.TransactionInstruction({keys:g,programId:l.MetadataProgram.PUBKEY,data:m})),i}return i(n)}(u.Transaction);t.UnVerifyCollection=h},87106:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateMetadata=t.UpdateMetadataArgs=void 0;var u=n(73340),c=n(96322),l=n(96050),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=1,e}return i(n)}(u.Borsh.Data);t.UpdateMetadataArgs=h,h.SCHEMA=new Map([].concat(r(l.MetadataDataData.SCHEMA),r(h.struct([["instruction","u8"],["data",{kind:"option",type:l.MetadataDataData}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.metadata,s=r.metadataData,u=r.updateAuthority,l=r.newUpdateAuthority,d=r.primarySaleHappened,p=h.serialize({data:s,updateAuthority:l&&l.toString(),primarySaleHappened:d||null});return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:p})),i}return i(n)}(u.Transaction);t.UpdateMetadata=d},80953:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateMetadataV2=t.UpdateMetadataV2Args=void 0;var u=n(73340),c=n(96322),l=n(96050),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=15,e}return i(n)}(u.Borsh.Data);t.UpdateMetadataV2Args=h,h.SCHEMA=new Map([].concat(r(l.DataV2.SCHEMA),r(h.struct([["instruction","u8"],["data",{kind:"option",type:l.DataV2}],["updateAuthority",{kind:"option",type:"pubkeyAsString"}],["primarySaleHappened",{kind:"option",type:"u8"}],["isMutable",{kind:"option",type:"u8"}]]))));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.metadata,s=r.metadataData,u=r.updateAuthority,l=r.newUpdateAuthority,d=r.primarySaleHappened,p=r.isMutable,y=h.serialize({data:s,updateAuthority:l&&l.toString(),primarySaleHappened:d||null,isMutable:p||null});return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!1}],programId:f.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.UpdateMetadataV2=d},17345:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdatePrimarySaleHappenedViaToken=t.UpdatePrimarySaleHappenedViaTokenArgs=void 0;var s=n(73340),u=n(96322),c=n(15397),l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).instruction=4,e}return r(n)}(s.Borsh.Data);t.UpdatePrimarySaleHappenedViaTokenArgs=l,l.SCHEMA=l.struct([["instruction","u8"]]);var f=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.metadata,s=r.owner,f=r.tokenAccount,h=l.serialize();return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:f,isSigner:!1,isWritable:!1}],programId:c.MetadataProgram.PUBKEY,data:h})),o}return r(n)}(s.Transaction);t.UpdatePrimarySaleHappenedViaToken=f},36377:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.Utilize=t.UtilizeArgs=void 0;var u=n(73340),c=n(42446),l=n(96322),f=n(15397),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=19,e}return i(n)}(u.Borsh.Data);t.UtilizeArgs=h,h.SCHEMA=new Map(r(h.struct([["instruction","u8"],["numberOfUses","u8"]])));var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.metadata,s=r.useAuthority,u=r.numberOfUses,d=r.burner,p=r.tokenAccount,y=h.serialize({numberOfUses:u}),m=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return s&&(m.push({pubkey:s,isSigner:!1,isWritable:!1}),m.push({pubkey:d,isSigner:!1,isWritable:!1})),i.add(new l.TransactionInstruction({keys:m,programId:f.MetadataProgram.PUBKEY,data:y})),i}return i(n)}(u.Transaction);t.Utilize=d},15537:function(e,t,n){"use strict";var r=n(861).default,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VerifyCollection=t.VerifyCollectionArgs=void 0;var u=n(73340),c=n(96322),l=n(15397),f=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=18,e}return i(n)}(u.Borsh.Data);t.VerifyCollectionArgs=f,f.SCHEMA=new Map(r(f.struct([["instruction","u8"]])));var h=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=e.feePayer,s=r.metadata,u=r.collectionAuthority,h=r.collectionMint,d=r.collectionMetadata,p=r.collectionMasterEdition,y=r.collectionAuthorityRecord,m=f.serialize(),g=[{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!0,isWritable:!0},{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:h,isSigner:!1,isWritable:!1},{pubkey:d,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1}];return y&&g.push({pubkey:y,isSigner:!1,isWritable:!1}),i.add(new c.TransactionInstruction({keys:g,programId:l.MetadataProgram.PUBKEY,data:m})),i}return i(n)}(u.Transaction);t.VerifyCollection=h},3296:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(67089),t),i(n(87106),t),i(n(60333),t),i(n(70269),t),i(n(17345),t),i(n(38289),t),i(n(80953),t),i(n(65053),t),i(n(13706),t),i(n(15537),t),i(n(82358),t),i(n(38289),t),i(n(52492),t),i(n(62822),t),i(n(5840),t),i(n(73994),t),i(n(86774),t),i(n(36377),t),i(n(32647),t),i(n(37233),t),i(n(33189),t)},42446:function(e,t,n){"use strict";n.r(t),n.d(t,{ASSOCIATED_TOKEN_PROGRAM_ID:function(){return it},AccountLayout:function(){return dt},MintLayout:function(){return ht},NATIVE_MINT:function(){return ft},TOKEN_PROGRAM_ID:function(){return rt},Token:function(){return yt},u64:function(){return ut}});for(var r=n(74165),i=n(15861),o=n(93433),a=n(11752),s=n(61120),u=n(37762),c=n(15671),l=n(43144),f=n(97326),h=n(60136),d=n(29388),p=n(4942),y=n(80518),m=n.n(y),g=n(96322),v={},b={byteLength:function(e){var t=I(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=I(e),i=r[0],o=r[1],a=new x(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=w[e.charCodeAt(n)]<<18|w[e.charCodeAt(n+1)]<<12|w[e.charCodeAt(n+2)]<<6|w[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=w[e.charCodeAt(n)]<<2|w[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=w[e.charCodeAt(n)]<<10|w[e.charCodeAt(n+1)]<<4|w[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(S(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(_[t>>2]+_[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(_[t>>10]+_[t>>4&63]+_[t<<2&63]+"="));return i.join("")}},_=[],w=[],x="undefined"!==typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,E=k.length;A<E;++A)_[A]=k[A],w[k.charCodeAt(A)]=A;function I(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function S(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(_[(i=r)>>18&63]+_[i>>12&63]+_[i>>6&63]+_[63&i]);return o.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;var T={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}};!function(e){var t=b,n=T,r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|g(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?o(0):y(e);if("Buffer"===e.type&&Array.isArray(e.data))return y(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),o(e<0?0:0|g(e))}function y(e){for(var t=e.length<0?0:0|g(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function v(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:k(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):k(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function A(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function E(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function I(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return p(e)},a.allocUnsafeSlow=function(e){return p(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(a.isBuffer(o)||(o=a.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function W(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),a.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var V={};function K(e,t,n){V[e]=function(n){(0,h.Z)(i,n);var r=(0,d.Z)(i);function i(){var n;return(0,c.Z)(this,i),n=r.call(this),Object.defineProperty((0,f.Z)(n),"message",{value:t.apply((0,f.Z)(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return(0,l.Z)(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}}(v);var M="undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},P="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function B(e,t){var n={seen:[],stylize:O};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),z(t)?n.showHidden=t:t&&function(e,t){if(!t||!j(t))return e;var n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),U(n.showHidden)&&(n.showHidden=!1),U(n.depth)&&(n.depth=2),U(n.colors)&&(n.colors=!1),U(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=C),D(n,e,n.depth)}function C(e,t){var n=B.styles[t];return n?"\x1b["+B.colors[n][0]+"m"+e+"\x1b["+B.colors[n][1]+"m":e}function O(e,t){return e}function D(e,t,n){if(e.customInspect&&t&&K(t.inspect)&&t.inspect!==B&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return N(r)||(r=D(e,r,n)),r}var i=function(e,t){if(U(t))return e.stylize("undefined","undefined");if(N(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"===typeof r)return e.stylize(""+t,"number");var r;if(z(t))return e.stylize(""+t,"boolean");if(Z(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),V(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return R(t);if(0===o.length){if(K(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(F(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(W(t))return e.stylize(Date.prototype.toString.call(t),"date");if(V(t))return R(t)}var u,c,l="",f=!1,h=["{","}"];(u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),K(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return F(t)&&(l=" "+RegExp.prototype.toString.call(t)),W(t)&&(l=" "+Date.prototype.toUTCString.call(t)),V(t)&&(l=" "+R(t)),0!==o.length||f&&0!=t.length?n<0?F(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)q(t,String(a))?o.push(L(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(L(e,t,n,r,i,!0))})),o}(e,t,n,a,o):o.map((function(r){return L(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,h)):h[0]+l+h[1]}function R(e){return"["+Error.prototype.toString.call(e)+"]"}function L(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),q(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=Z(n)?D(e,u.value,null):D(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),U(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function z(e){return"boolean"===typeof e}function Z(e){return null===e}function N(e){return"string"===typeof e}function U(e){return void 0===e}function F(e){return j(e)&&"[object RegExp]"===H(e)}function j(e){return"object"===typeof e&&null!==e}function W(e){return j(e)&&"[object Date]"===H(e)}function V(e){return j(e)&&("[object Error]"===H(e)||e instanceof Error)}function K(e){return"function"===typeof e}function G(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function H(e){return Object.prototype.toString.call(e)}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}B.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},B.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var X,Q=Object.prototype.hasOwnProperty,$=Object.keys||function(e){var t=[];for(var n in e)Q.call(e,n)&&t.push(n);return t},J=Array.prototype.slice;function ee(){return"undefined"!==typeof X?X:X="foo"===function(){}.name}function te(e){return Object.prototype.toString.call(e)}function ne(e){return!v.isBuffer(e)&&("function"===typeof M.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function re(e,t){e||ce(e,!0,t,"==",le)}var ie=/\s*function\s+([^\(\s]*)\s*/;function oe(e){if(K(e)){if(ee())return e.name;var t=e.toString().match(ie);return t&&t[1]}}function ae(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return se(ue(e.actual),128)+" "+e.operator+" "+se(ue(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||ce;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=oe(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function se(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function ue(e){if(ee()||!K(e))return B(e);var t=oe(e);return"[Function"+(t?": "+t:"")+"]"}function ce(e,t,n,r,i){throw new ae({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function le(e,t){e||ce(e,!0,t,"==",le)}function fe(e,t,n,r){if(e===t)return!0;if(v.isBuffer(e)&&v.isBuffer(t))return 0===Y(e,t);if(W(e)&&W(t))return e.getTime()===t.getTime();if(F(e)&&F(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(ne(e)&&ne(t)&&te(e)===te(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===Y(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(v.isBuffer(e)!==v.isBuffer(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(G(e)||G(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=he(e),o=he(t);if(i&&!o||!i&&o)return!1;if(i)return fe(e=J.call(e),t=J.call(t),n);var a,s,u=$(e),c=$(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!fe(e[a=u[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function he(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function de(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function pe(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&ce(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&i&&!n;if((!e&&V(i)&&o&&de(i,n)||a)&&ce(i,n,"Got unwanted exception"+r),e&&i&&n&&!de(i,n)||!e&&i)throw i}re.AssertionError=ae,P(ae,Error),re.fail=ce,re.ok=le,re.equal=function e(t,n,r){t!=n&&ce(t,n,r,"==",e)},re.notEqual=function e(t,n,r){t==n&&ce(t,n,r,"!=",e)},re.deepEqual=function e(t,n,r){fe(t,n,!1)||ce(t,n,r,"deepEqual",e)},re.deepStrictEqual=function e(t,n,r){fe(t,n,!0)||ce(t,n,r,"deepStrictEqual",e)},re.notDeepEqual=function e(t,n,r){fe(t,n,!1)&&ce(t,n,r,"notDeepEqual",e)},re.notDeepStrictEqual=function e(t,n,r){fe(t,n,!0)&&ce(t,n,r,"notDeepStrictEqual",e)},re.strictEqual=function e(t,n,r){t!==n&&ce(t,n,r,"===",e)},re.notStrictEqual=function e(t,n,r){t===n&&ce(t,n,r,"!==",e)},re.throws=function(e,t,n){pe(!0,e,t,n)},re.doesNotThrow=function(e,t,n){pe(!1,e,t,n)},re.ifError=function(e){if(e)throw e};var ye={},me=function(){function e(t,n){if((0,c.Z)(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return(0,l.Z)(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"decode",value:function(e,t){throw new Error("Layout is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("Layout is abstract")}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function ge(e,t){return t.property?e+"["+t.property+"]":e}ye.Layout=me,ye.nameWithProperty=ge,ye.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof me))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var ve=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(me),be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return(i=t.call(this,-1,r)).elementSpan=e,i}return(0,l.Z)(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(ve),_e=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return(o=t.call(this,e.span,i||e.property)).layout=e,o.offset=r,o}return(0,l.Z)(n,[{key:"isCount",value:function(){return this.layout instanceof we||this.layout instanceof xe}},{key:"decode",value:function(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}]),n}(ve),we=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}]),n}(me),xe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}]),n}(me),ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}]),n}(me),Ae=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}]),n}(me),Ee=Math.pow(2,32);function Ie(e){var t=Math.floor(e/Ee);return{hi32:t,lo32:e-t*Ee}}function Se(e,t){return e*Ee+t}var Te=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}]),n}(me),Me=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readUInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Pe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}]),n}(me),Be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Ce=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}]),n}(me),Oe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}]),n}(me),De=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}]),n}(me),Re=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}]),n}(me),Le=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ve&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof ve)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0,r=this.count;if(r instanceof ve&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=[],r=0,i=this.count;for(i instanceof ve&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof ve&&this.count.encode(e.length,t,n),i}}]),n}(me),ze=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof me}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var a,s=(0,u.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){s.e(h)}finally{s.f()}var f=-1;try{f=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(o=t.call(this,f,r)).fields=e,o.decodePrefixes=!!i,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n,r=this.makeDestinationObject(),i=(0,u.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r,i=n,o=0,a=0,s=(0,u.Z)(this.fields);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.span;if(a=0<l?l:0,void 0!==c.property){var f=e[c.property];void 0!==f&&(a=c.encode(f,t,n),0>l&&(l=c.getSpan(t,n)))}o=n,n+=l}}catch(h){s.e(h)}finally{s.f()}return o+a-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(me),Ze=function(){function e(t){(0,c.Z)(this,e),this.property=t}return(0,l.Z)(e,[{key:"decode",value:function(){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(){throw new Error("UnionDiscriminator is abstract")}}]),e}(),Ne=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(Ze),Ue=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;(0,c.Z)(this,n);var a=e instanceof we||e instanceof xe;if(a)e=new Ne(new _e(e));else if(e instanceof ve&&e.isCount())e=new Ne(e);else if(!(e instanceof Ze))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===r&&(r=null),!(null===r||r instanceof me))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var s=-1;r&&0<=(s=r.span)&&a&&(s+=e.layout.span),(o=t.call(this,s,i)).discriminator=e,o.usesPrefixDiscriminator=a,o.defaultLayout=r,o.registry={};var u=o.defaultGetSourceVariant.bind((0,f.Z)(o));return o.getSourceVariant=function(e){return u(e)},o.configGetSourceVariant=function(e){u=e.bind(this)},o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e,t){var n;void 0===t&&(t=0);var r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){var a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new Fe(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e,t){var n=e;return v.Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}]),n}(me),Fe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i,o){var a;if((0,c.Z)(this,n),!(e instanceof Ue))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof me))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}},{key:"decode",value:function(e,t){var n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(me);function je(e){return 0>e&&(e+=4294967296),e}var We=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof we||e instanceof xe))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=je(e),this},o._packedGetValue=function(){return a},o}return(0,l.Z)(n,[{key:"decode",value:function(e,t){var n=this.makeDestinationObject();void 0===t&&(t=0);var r=this.word.decode(e,t);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;void 0!==a.property&&(n[a.property]=a.decode(r))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.word.decode(t,n);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a.property){var s=e[a.property];void 0!==s&&a.encode(s)}}}catch(c){o.e(c)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new Ve(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new Ke(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(me),Ve=function(){function e(t,n,r){if((0,c.Z)(this,e),!(t instanceof We))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=je(this.valueMask<<this.start),this.property=r}return(0,l.Z)(e,[{key:"decode",value:function(){return je(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if(!Number.isInteger(e)||e!==je(e&this.valueMask))throw new TypeError(ge("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=je(e<<this.start);this.container._packedSetValue(je(t&~this.wordMask)|n)}}]),e}(),Ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){return(0,c.Z)(this,n),t.call(this,e,1,r)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return!!Ve.prototype.decode.call(this,e,t)}},{key:"encode",value:function(e){return"boolean"===typeof e&&(e=+e),Ve.prototype.encode.call(this,e)}}]),n}(Ve),Ge=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof ve||(o=e),(i=t.call(this,o,r)).length=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof ve&&(r=e.length),!v.Buffer.isBuffer(e)||r!==e.length)throw new TypeError(ge("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof ve&&this.length.encode(r,t,n),r}}]),n}(me),He=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,-1,e)}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}]),n}(me),qe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}]),n}(me),Ye=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;return(0,c.Z)(this,n),(i=t.call(this,0,r)).value=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t,n){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(me);ye.ExternalLayout=ve,ye.GreedyCount=be,ye.OffsetLayout=_e,ye.UInt=we,ye.UIntBE=xe,ye.Int=ke,ye.IntBE=Ae,ye.Float=Ce,ye.FloatBE=Oe,ye.Double=De,ye.DoubleBE=Re,ye.Sequence=Le,ye.Structure=ze,ye.UnionDiscriminator=Ze,ye.UnionLayoutDiscriminator=Ne,ye.Union=Ue,ye.VariantLayout=Fe,ye.BitStructure=We,ye.BitField=Ve,ye.Boolean=Ke,ye.Blob=Ge,ye.CString=He,ye.UTF8=qe,ye.Constant=Ye,ye.greedy=function(e,t){return new be(e,t)},ye.offset=function(e,t,n){return new _e(e,t,n)};var Xe=ye.u8=function(e){return new we(1,e)};ye.u16=function(e){return new we(2,e)},ye.u24=function(e){return new we(3,e)};var Qe=ye.u32=function(e){return new we(4,e)};ye.u40=function(e){return new we(5,e)},ye.u48=function(e){return new we(6,e)},ye.nu64=function(e){return new Te(e)},ye.u16be=function(e){return new xe(2,e)},ye.u24be=function(e){return new xe(3,e)},ye.u32be=function(e){return new xe(4,e)},ye.u40be=function(e){return new xe(5,e)},ye.u48be=function(e){return new xe(6,e)},ye.nu64be=function(e){return new Me(e)},ye.s8=function(e){return new ke(1,e)},ye.s16=function(e){return new ke(2,e)},ye.s24=function(e){return new ke(3,e)},ye.s32=function(e){return new ke(4,e)},ye.s40=function(e){return new ke(5,e)},ye.s48=function(e){return new ke(6,e)},ye.ns64=function(e){return new Pe(e)},ye.s16be=function(e){return new Ae(2,e)},ye.s24be=function(e){return new Ae(3,e)},ye.s32be=function(e){return new Ae(4,e)},ye.s40be=function(e){return new Ae(5,e)},ye.s48be=function(e){return new Ae(6,e)},ye.ns64be=function(e){return new Be(e)},ye.f32=function(e){return new Ce(e)},ye.f32be=function(e){return new Oe(e)},ye.f64=function(e){return new De(e)},ye.f64be=function(e){return new Re(e)};var $e=ye.struct=function(e,t,n){return new ze(e,t,n)};ye.bits=function(e,t,n){return new We(e,t,n)},ye.seq=function(e,t,n){return new Le(e,t,n)},ye.union=function(e,t,n){return new Ue(e,t,n)},ye.unionLayoutDiscriminator=function(e,t){return new Ne(e,t)};var Je=ye.blob=function(e,t){return new Ge(e,t)};ye.cstr=function(e){return new He(e)},ye.utf8=function(e,t){return new qe(e,t)},ye.const=function(e,t){return new Ye(e,t)};var et=function(){return Je(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},tt=function(){return Je(8,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64")};function nt(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return(0,g.sendAndConfirmTransaction)(t,n,i,{skipPreflight:!1})}var rt=new g.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),it=new g.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),ot="Failed to find account",at="Invalid account owner";function st(e){return v.Buffer.from(e.toBuffer())}var ut=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"toBuffer",value:function(){var e=(0,a.Z)((0,s.Z)(n.prototype),"toArray",this).call(this).reverse(),t=v.Buffer.from(e);if(8===t.length)return t;re(t.length<8,"u64 too large");var r=v.Buffer.alloc(8);return t.copy(r),r}}],[{key:"fromBuffer",value:function(e){return re(8===e.length,"Invalid buffer length: ".concat(e.length)),new n((0,o.Z)(e).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)}}]),n}(m());function ct(e){return"publicKey"in e}var lt={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},ft=new g.PublicKey("So11111111111111111111111111111111111111112"),ht=$e([Qe("mintAuthorityOption"),et("mintAuthority"),tt("supply"),Xe("decimals"),Xe("isInitialized"),Qe("freezeAuthorityOption"),et("freezeAuthority")]),dt=$e([et("mint"),et("owner"),tt("amount"),Qe("delegateOption"),et("delegate"),Xe("state"),Qe("isNativeOption"),tt("isNative"),tt("delegatedAmount"),Qe("closeAuthorityOption"),et("closeAuthority")]),pt=$e([Xe("m"),Xe("n"),Xe("is_initialized"),et("signer1"),et("signer2"),et("signer3"),et("signer4"),et("signer5"),et("signer6"),et("signer7"),et("signer8"),et("signer9"),et("signer10"),et("signer11")]),yt=function(){function e(t,n,r,i){(0,c.Z)(this,e),(0,p.Z)(this,"connection",void 0),(0,p.Z)(this,"publicKey",void 0),(0,p.Z)(this,"programId",void 0),(0,p.Z)(this,"associatedProgramId",void 0),(0,p.Z)(this,"payer",void 0),Object.assign(this,{connection:t,publicKey:n,programId:r,payer:i,associatedProgramId:it})}return(0,l.Z)(e,[{key:"createAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(this.connection);case 2:return i=t.sent,o=g.Keypair.generate(),(a=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:i,space:dt.span,programId:this.programId})),s=this.publicKey,a.add(e.createInitAccountInstruction(this.programId,s,o.publicKey,n)),t.next=10,nt("createAccount and InitializeAccount",this.connection,a,this.payer,o);case 10:return t.abrupt("return",o.publicKey);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.abrupt("return",this.createAssociatedTokenAccountInternal(n,i));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInternal",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("CreateAssociatedTokenAccount",this.connection,(new g.Transaction).add(e.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,i,n,this.payer.publicKey)),this.payer);case 2:return t.abrupt("return",i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrCreateAssociatedAccountInfo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.prev=3,t.next=6,this.getAccountInfo(i);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),t.t0.message!==ot&&t.t0.message!==at){t.next=24;break}return t.prev=12,t.next=15,this.createAssociatedTokenAccountInternal(n,i);case 15:t.next=19;break;case 17:t.prev=17,t.t1=t.catch(12);case 19:return t.next=21,this.getAccountInfo(i);case 21:return t.abrupt("return",t.sent);case 24:throw t.t0;case 25:case"end":return t.stop()}}),t,this,[[3,9],[12,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createMultisig",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var o,a,s,u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g.Keypair.generate(),t.next=3,e.getMinBalanceRentForExemptMultisig(this.connection);case 3:return a=t.sent,(s=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:a,space:pt.span,programId:this.programId})),u=[{pubkey:o.publicKey,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],i.forEach((function(e){return u.push({pubkey:e,isSigner:!1,isWritable:!1})})),c=$e([Xe("instruction"),Xe("m")]),l=v.Buffer.alloc(c.span),c.encode({instruction:2,m:n},l),s.add({keys:u,programId:this.programId,data:l}),t.next=14,nt("createAccount and InitializeMultisig",this.connection,s,this.payer,o);case 14:return t.abrupt("return",o.publicKey);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMintInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(this.publicKey);case 2:if(null!==(t=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:if(t.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid mint owner: ".concat(JSON.stringify(t.owner)));case 7:if(t.data.length==ht.span){e.next=9;break}throw new Error("Invalid mint size");case 9:return n=v.Buffer.from(t.data),0===(i=ht.decode(n)).mintAuthorityOption?i.mintAuthority=null:i.mintAuthority=new g.PublicKey(i.mintAuthority),i.supply=ut.fromBuffer(i.supply),i.isInitialized=0!=i.isInitialized,0===i.freezeAuthorityOption?i.freezeAuthority=null:i.freezeAuthority=new g.PublicKey(i.freezeAuthority),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t,n);case 2:if(null!==(i=e.sent)){e.next=5;break}throw new Error(ot);case 5:if(i.owner.equals(this.programId)){e.next=7;break}throw new Error(at);case 7:if(i.data.length==dt.span){e.next=9;break}throw new Error("Invalid account size");case 9:if(o=v.Buffer.from(i.data),(a=dt.decode(o)).address=t,a.mint=new g.PublicKey(a.mint),a.owner=new g.PublicKey(a.owner),a.amount=ut.fromBuffer(a.amount),0===a.delegateOption?(a.delegate=null,a.delegatedAmount=new ut):(a.delegate=new g.PublicKey(a.delegate),a.delegatedAmount=ut.fromBuffer(a.delegatedAmount)),a.isInitialized=0!==a.state,a.isFrozen=2===a.state,1===a.isNativeOption?(a.rentExemptReserve=ut.fromBuffer(a.isNative),a.isNative=!0):(a.rentExemptReserve=null,a.isNative=!1),0===a.closeAuthorityOption?a.closeAuthority=null:a.closeAuthority=new g.PublicKey(a.closeAuthority),a.mint.equals(this.publicKey)){e.next=22;break}throw new Error("Invalid account mint: ".concat(JSON.stringify(a.mint)," !== ").concat(JSON.stringify(this.publicKey)));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultisigInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t);case 2:if(null!==(n=e.sent)){e.next=5;break}throw new Error("Failed to find multisig");case 5:if(n.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid multisig owner");case 7:if(n.data.length==pt.span){e.next=9;break}throw new Error("Invalid multisig size");case 9:return i=v.Buffer.from(n.data),(o=pt.decode(i)).signer1=new g.PublicKey(o.signer1),o.signer2=new g.PublicKey(o.signer2),o.signer3=new g.PublicKey(o.signer3),o.signer4=new g.PublicKey(o.signer4),o.signer5=new g.PublicKey(o.signer5),o.signer6=new g.PublicKey(o.signer6),o.signer7=new g.PublicKey(o.signer7),o.signer8=new g.PublicKey(o.signer8),o.signer9=new g.PublicKey(o.signer9),o.signer10=new g.PublicKey(o.signer10),o.signer11=new g.PublicKey(o.signer11),e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Transfer",this.connection,(new g.Transaction).add(e.createTransferInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Approve",this.connection,(new g.Transaction).add(e.createApproveInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"revoke",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["Revoke",this.connection,(new g.Transaction).add(e.createRevokeInstruction(this.programId,n,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"setAuthority",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(s)?(c=s.publicKey,l=[s]):(c=s,l=u),t.next=3,nt.apply(void 0,["SetAuthority",this.connection,(new g.Transaction).add(e.createSetAuthorityInstruction(this.programId,n,i,a,c,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"mintTo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["MintTo",this.connection,(new g.Transaction).add(e.createMintToInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"burn",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["Burn",this.connection,(new g.Transaction).add(e.createBurnInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"closeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(u=a.publicKey,c=[a]):(u=a,c=s),t.next=3,nt.apply(void 0,["CloseAccount",this.connection,(new g.Transaction).add(e.createCloseAccountInstruction(this.programId,n,i,u,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"freezeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["FreezeAccount",this.connection,(new g.Transaction).add(e.createFreezeAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"thawAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["ThawAccount",this.connection,(new g.Transaction).add(e.createThawAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"transferChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["TransferChecked",this.connection,(new g.Transaction).add(e.createTransferCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"approveChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["ApproveChecked",this.connection,(new g.Transaction).add(e.createApproveCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"mintToChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["MintToChecked",this.connection,(new g.Transaction).add(e.createMintToCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"burnChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["BurnChecked",this.connection,(new g.Transaction).add(e.createBurnCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"syncNative",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("SyncNative",this.connection,(new g.Transaction).add(e.createSyncNativeInstruction(this.programId,n)),this.payer);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getMinBalanceRentForExemptMint",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(ht.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(dt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptMultisig",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(pt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMint",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s,u){var c,l,f,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.Keypair.generate(),l=new e(n,c.publicKey,u,i),t.next=4,e.getMinBalanceRentForExemptMint(n);case 4:return f=t.sent,(h=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:i.publicKey,newAccountPubkey:c.publicKey,lamports:f,space:ht.span,programId:u})),h.add(e.createInitMintInstruction(u,c.publicKey,s,o,a)),t.next=10,nt("createAccount and InitializeMint",n,h,i,c);case 10:return t.abrupt("return",l);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"createWrappedNativeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s){var u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(n);case 2:return u=t.sent,c=g.Keypair.generate(),(l=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:a.publicKey,newAccountPubkey:c.publicKey,lamports:u,space:dt.span,programId:i})),l.add(g.SystemProgram.transfer({fromPubkey:a.publicKey,toPubkey:c.publicKey,lamports:s})),l.add(e.createInitAccountInstruction(i,ft,c.publicKey,o)),t.next=10,nt("createAccount, transfer, and initializeAccount",n,l,a,c);case 10:return t.abrupt("return",c.publicKey);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"createInitMintInstruction",value:function(e,t,n,r,i){var o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=$e([Xe("instruction"),Xe("decimals"),et("mintAuthority"),Xe("option"),et("freezeAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:0,decimals:n,mintAuthority:st(r),option:null===i?0:1,freezeAuthority:st(i||new g.PublicKey(0))},s);return s=s.slice(0,u),new g.TransactionInstruction({keys:o,programId:e,data:s})}},{key:"createInitAccountInstruction",value:function(e,t,n,r){var i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);return o.encode({instruction:1},a),new g.TransactionInstruction({keys:i,programId:e,data:a})}},{key:"createTransferInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:3,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createApproveInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:4,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createRevokeInstruction",value:function(e,t,n,r){var i=$e([Xe("instruction")]),o=v.Buffer.alloc(i.span);i.encode({instruction:5},o);var a=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===r.length?a.push({pubkey:n,isSigner:!0,isWritable:!1}):(a.push({pubkey:n,isSigner:!1,isWritable:!1}),r.forEach((function(e){return a.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:a,programId:e,data:o})}},{key:"createSetAuthorityInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),Xe("authorityType"),Xe("option"),et("newAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:6,authorityType:lt[r],option:null===n?0:1,newAuthority:st(n||new g.PublicKey(0))},s);s=s.slice(0,u);var c=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===o.length?c.push({pubkey:i,isSigner:!0,isWritable:!1}):(c.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:s})}},{key:"createMintToInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:7,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createBurnInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:8,amount:new ut(o).toBuffer()},s);var u=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createCloseAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:9},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createFreezeAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:10},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createThawAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:11},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createTransferCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:12,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createApproveCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:13,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createMintToCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:14,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createBurnCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:15,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createSyncNativeInstruction",value:function(e,t){var n=$e([Xe("instruction")]),r=v.Buffer.alloc(n.span);n.encode({instruction:17},r);var i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new g.TransactionInstruction({keys:i,programId:e,data:r})}},{key:"getAssociatedTokenAddress",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>4&&void 0!==a[4]&&a[4]||g.PublicKey.isOnCurve(o.toBuffer())){e.next=3;break}throw new Error("Owner cannot sign: ".concat(o.toString()));case 3:return e.next=5,g.PublicKey.findProgramAddress([o.toBuffer(),n.toBuffer(),i.toBuffer()],t);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInstruction",value:function(e,t,n,r,i,o){var a=v.Buffer.alloc(0),s=[{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new g.TransactionInstruction({keys:s,programId:e,data:a})}}]),e}()},64329:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.VaultProgram=t.VaultInstructions=t.VaultKey=void 0;var s=n(73340),u=n(96322);!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.VaultV1=3]="VaultV1",e[e.SafetyDepositBoxV1=1]="SafetyDepositBoxV1",e[e.ExternalPriceAccountV1=2]="ExternalPriceAccountV1"}(t.VaultKey||(t.VaultKey={})),function(e){e[e.InitVault=0]="InitVault",e[e.AddTokenToInactiveVault=1]="AddTokenToInactiveVault",e[e.ActivateVault=2]="ActivateVault",e[e.CombineVault=3]="CombineVault",e[e.RedeemShares=4]="RedeemShares",e[e.WithdrawTokenFromSafetyDepositBox=5]="WithdrawTokenFromSafetyDepositBox",e[e.MintFractionalShares=6]="MintFractionalShares",e[e.WithdrawSharesFromTreasury=7]="WithdrawSharesFromTreasury",e[e.AddSharesToTreasury=8]="AddSharesToTreasury",e[e.UpdateExternalPriceAccount=9]="UpdateExternalPriceAccount",e[e.SetVaultAuthority=10]="SetVaultAuthority"}(t.VaultInstructions||(t.VaultInstructions={}));var c=function(e){o(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return r(n)}(s.Program);t.VaultProgram=c,c.PREFIX="vault",c.PUBKEY=new u.PublicKey(s.config.programs.vault)},30393:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ExternalPriceAccount=t.ExternalPriceAccountData=void 0;var u=n(73340),c=n(64329),l=function(e){a(n,e);var t=s(n);function n(e){var r;return o(this,n),(r=t.call(this,e)).key=c.VaultKey.ExternalPriceAccountV1,r}return i(n)}(u.Borsh.Data);t.ExternalPriceAccountData=l,r=l,l.SCHEMA=r.struct([["key","u8"],["pricePerShare","u64"],["priceMint","pubkeyAsString"],["allowedToCombine","u8"]]);var f=function(e){a(n,e);var t=s(n);function n(e,r){var i;if(o(this,n),!(i=t.call(this,e,r)).assertOwner(c.VaultProgram.PUBKEY))throw(0,u.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,u.ERROR_INVALID_ACCOUNT_DATA)();return i.data=l.deserialize(i.info.data),i}return i(n,null,[{key:"isCompatible",value:function(e){return e[0]===c.VaultKey.ExternalPriceAccountV1}}]),n}(u.Account);t.ExternalPriceAccount=f},26041:function(e,t,n){"use strict";var r,i=n(17061).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default,c=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.SafetyDepositBox=t.SafetyDepositBoxData=void 0;var l=n(96322),f=n(64329),h=n(19778),d=n(73340),p=function(e){s(n,e);var t=u(n);function n(e){var r;return a(this,n),(r=t.call(this,e)).key=f.VaultKey.SafetyDepositBoxV1,r}return o(n)}(d.Borsh.Data);t.SafetyDepositBoxData=p,r=p,p.SCHEMA=r.struct([["key","u8"],["vault","pubkeyAsString"],["tokenMint","pubkeyAsString"],["store","pubkeyAsString"],["order","u8"]]);var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(a(this,n),!(i=t.call(this,e,r)).assertOwner(f.VaultProgram.PUBKEY))throw(0,d.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,d.ERROR_INVALID_ACCOUNT_DATA)();return i.data=p.deserialize(i.info.data),i}return o(n,null,[{key:"getPDA",value:function(e,t){return c(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",f.VaultProgram.findProgramAddress([h.Buffer.from(f.VaultProgram.PREFIX),new l.PublicKey(e).toBuffer(),new l.PublicKey(t).toBuffer()]));case 1:case"end":return n.stop()}}),n)})))}},{key:"isCompatible",value:function(e){return e[0]===f.VaultKey.SafetyDepositBoxV1}}]),n}(d.Account);t.SafetyDepositBox=y},49980:function(e,t,n){"use strict";var r,i,o,a=n(17061).default,s=n(89728).default,u=n(56690).default,c=n(61655).default,l=n(26389).default,f=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))},h=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Vault=t.VaultData=t.VaultState=t.NumberOfShareArgs=t.AmountArgs=void 0;var d=n(96322),p=h(n(66315)),y=n(73340),m=n(26041),g=n(64329),v=n(19778),b=function(e){c(n,e);var t=l(n);function n(){return u(this,n),t.apply(this,arguments)}return s(n)}(y.Borsh.Data);t.AmountArgs=b,r=b,b.SCHEMA=r.struct([["instruction","u8"],["amount","u64"]]);var _=function(e){c(n,e);var t=l(n);function n(){return u(this,n),t.apply(this,arguments)}return s(n)}(y.Borsh.Data);t.NumberOfShareArgs=_,i=_,_.SCHEMA=i.struct([["instruction","u8"],["numberOfShares","u64"]]),function(e){e[e.Inactive=0]="Inactive",e[e.Active=1]="Active",e[e.Combined=2]="Combined",e[e.Deactivated=3]="Deactivated"}(t.VaultState||(t.VaultState={}));var w=function(e){c(n,e);var t=l(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).key=g.VaultKey.VaultV1,r}return s(n)}(y.Borsh.Data);t.VaultData=w,o=w,w.SCHEMA=o.struct([["key","u8"],["tokenProgram","pubkeyAsString"],["fractionMint","pubkeyAsString"],["authority","pubkeyAsString"],["fractionTreasury","pubkeyAsString"],["redeemTreasury","pubkeyAsString"],["allowFurtherShareCreation","u8"],["pricingLookupAddress","pubkeyAsString"],["tokenTypeCount","u8"],["state","u8"],["lockedPricePerShare","u64"]]);var x=function(e){c(n,e);var t=l(n);function n(e,r){var i;if(u(this,n),!(i=t.call(this,e,r)).assertOwner(g.VaultProgram.PUBKEY))throw(0,y.ERROR_INVALID_OWNER)();if(!n.isCompatible(i.info.data))throw(0,y.ERROR_INVALID_ACCOUNT_DATA)();return i.data=w.deserialize(i.info.data),i}return s(n,[{key:"getSafetyDepositBoxes",value:function(e){return f(this,void 0,void 0,a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.VaultProgram.getProgramAccounts(e,{filters:[{memcmp:{offset:0,bytes:p.default.encode(v.Buffer.from([g.VaultKey.SafetyDepositBoxV1]))}},{memcmp:{offset:1,bytes:this.pubkey.toBase58()}}]});case 2:return t.abrupt("return",t.sent.map((function(e){return m.SafetyDepositBox.from(e)})));case 3:case"end":return t.stop()}}),t,this)})))}}],[{key:"getPDA",value:function(e){return f(this,void 0,void 0,a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",g.VaultProgram.findProgramAddress([v.Buffer.from(g.VaultProgram.PREFIX),g.VaultProgram.PUBKEY.toBuffer(),new d.PublicKey(e).toBuffer()]));case 1:case"end":return t.stop()}}),t)})))}},{key:"isCompatible",value:function(e){return e[0]===g.VaultKey.VaultV1}}]),n}(y.Account);t.Vault=x,x.MAX_VAULT_SIZE=205,x.MAX_EXTERNAL_ACCOUNT_SIZE=42},90261:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(26041),t),i(n(49980),t),i(n(30393),t),i(n(64329),t),i(n(75546),t),i(n(26533),t)},95971:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.ActivateVault=void 0;var s=n(16737),u=n(96322),c=n(64329),l=n(49980),f=n(64329),h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.vault,h=r.vaultAuthority,d=r.fractionMint,p=r.fractionTreasury,y=r.fractionMintAuthority,m=r.numberOfShares,g=l.NumberOfShareArgs.serialize({instruction:c.VaultInstructions.ActivateVault,numberOfShares:m});return o.add(new u.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!0,isWritable:!1},{pubkey:s.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:f.VaultProgram.PUBKEY,data:g})),o}return r(n)}(n(73340).Transaction);t.ActivateVault=h},88213:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AddSharesToTreasury=void 0;var s=n(16737),u=n(96322),c=n(64329),l=n(49980),f=n(64329),h=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.vault,h=r.vaultAuthority,d=r.source,p=r.transferAuthority,y=r.fractionTreasury,m=r.numberOfShares,g=l.NumberOfShareArgs.serialize({instruction:c.VaultInstructions.AddSharesToTreasury,numberOfShares:m});return o.add(new u.TransactionInstruction({keys:[{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:h,isSigner:!1,isWritable:!0},{pubkey:s.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:u.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:f.VaultProgram.PUBKEY,data:g})),o}return r(n)}(n(73340).Transaction);t.AddSharesToTreasury=h},93102:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.AddTokenToInactiveVault=void 0;var s=n(73340),u=n(16737),c=n(96322),l=n(49980),f=n(64329),h=n(64329),d=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=e.feePayer,s=r.vault,d=r.vaultAuthority,p=r.tokenAccount,y=r.tokenStoreAccount,m=r.transferAuthority,g=r.safetyDepositBox,v=r.amount,b=l.AmountArgs.serialize({instruction:h.VaultInstructions.AddTokenToInactiveVault,amount:v});return o.add(new c.TransactionInstruction({keys:[{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!0,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1},{pubkey:c.SystemProgram.programId,isSigner:!1,isWritable:!1}],programId:f.VaultProgram.PUBKEY,data:b})),o}return r(n)}(s.Transaction);t.AddTokenToInactiveVault=d},14518:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.CombineVault=t.CombineVaultArgs=void 0;var u=n(73340),c=n(16737),l=n(96322),f=n(64329),h=n(64329),d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=f.VaultInstructions.CombineVault,e}return i(n)}(u.Borsh.Data);t.CombineVaultArgs=d,r=d,d.SCHEMA=r.struct([["instruction","u8"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.vault,s=r.vaultAuthority,u=r.fractionMint,f=r.fractionTreasury,p=r.outstandingShareTokenAccount,y=r.payingTokenAccount,m=r.redeemTreasury,g=r.newVaultAuthority,v=r.transferAuthority,b=r.externalPriceAccount,_=r.burnAuthority,w=d.serialize();return i.add(new l.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!0},{pubkey:g||s,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:v,isSigner:!0,isWritable:!1},{pubkey:_,isSigner:!1,isWritable:!1},{pubkey:b,isSigner:!1,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:w})),i}return i(n)}(u.Transaction);t.CombineVault=p},77546:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.InitVault=t.InitVaultArgs=void 0;var u=n(73340),c=n(16737),l=n(96322),f=n(64329),h=n(64329),d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=f.VaultInstructions.InitVault,e.allowFurtherShareCreation=!1,e}return i(n)}(u.Borsh.Data);t.InitVaultArgs=d,r=d,d.SCHEMA=r.struct([["instruction","u8"],["allowFurtherShareCreation","u8"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.vault,s=r.vaultAuthority,u=r.fractionalMint,f=r.redeemTreasury,p=r.fractionalTreasury,y=r.pricingLookupAddress,m=r.allowFurtherShareCreation,g=d.serialize({allowFurtherShareCreation:m});return i.add(new l.TransactionInstruction({keys:[{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:g})),i}return i(n)}(u.Transaction);t.InitVault=p},22385:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.MintFractionalShares=void 0;var s=n(16737),u=n(96322),c=n(64329),l=n(73340),f=n(49980),h=n(64329),d=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.vault,l=r.vaultAuthority,d=r.fractionMint,p=r.fractionTreasury,y=r.fractionMintAuthority,m=r.numberOfShares,g=f.NumberOfShareArgs.serialize({instruction:c.VaultInstructions.MintFractionalShares,numberOfShares:m});return o.add(new u.TransactionInstruction({keys:[{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:y,isSigner:!1,isWritable:!1},{pubkey:l,isSigner:!1,isWritable:!1},{pubkey:s.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:g})),o}return r(n)}(l.Transaction);t.MintFractionalShares=d},28416:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.RedeemShares=t.RedeemSharesArgs=void 0;var u=n(73340),c=n(16737),l=n(96322),f=n(64329),h=n(64329),d=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=f.VaultInstructions.RedeemShares,e}return i(n)}(u.Borsh.Data);t.RedeemSharesArgs=d,r=d,d.SCHEMA=r.struct([["instruction","u8"]]);var p=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.vault,s=r.burnAuthority,u=r.fractionMint,f=r.outstandingSharesAccount,p=r.proceedsAccount,y=r.redeemTreasury,m=r.transferAuthority,g=d.serialize();return i.add(new l.TransactionInstruction({keys:[{pubkey:f,isSigner:!1,isWritable:!0},{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:u,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:c.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:l.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:g})),i}return i(n)}(u.Transaction);t.RedeemShares=p},79617:function(e,t,n){"use strict";var r,i=n(89728).default,o=n(56690).default,a=n(61655).default,s=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.SetVaultAuthority=t.SetVaultAuthorityArgs=void 0;var u=n(73340),c=n(96322),l=n(64329),f=n(64329),h=function(e){a(n,e);var t=s(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments)).instruction=l.VaultInstructions.SetVaultAuthority,e}return i(n)}(u.Borsh.Data);t.SetVaultAuthorityArgs=h,r=h,h.SCHEMA=r.struct([["instruction","u8"]]);var d=function(e){a(n,e);var t=s(n);function n(e,r){var i;o(this,n),i=t.call(this,e);var a=r.vault,s=r.currentAuthority,u=r.newAuthority,l=h.serialize();return i.add(new c.TransactionInstruction({keys:[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:u,isSigner:!1,isWritable:!1}],programId:f.VaultProgram.PUBKEY,data:l})),i}return i(n)}(u.Transaction);t.SetVaultAuthority=d},4750:function(e,t,n){"use strict";var r,i=n(861).default,o=n(89728).default,a=n(56690).default,s=n(61655).default,u=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateExternalPriceAccount=t.UpdateExternalPriceAccountArgs=void 0;var c=n(73340),l=n(96322),f=n(64329),h=n(30393),d=n(64329),p=function(e){s(n,e);var t=u(n);function n(){var e;return a(this,n),(e=t.apply(this,arguments)).instruction=f.VaultInstructions.UpdateExternalPriceAccount,e}return o(n)}(c.Borsh.Data);t.UpdateExternalPriceAccountArgs=p,r=p,p.SCHEMA=new Map([].concat(i(h.ExternalPriceAccountData.SCHEMA),i(r.struct([["instruction","u8"],["externalPriceAccount",h.ExternalPriceAccountData]]))));var y=function(e){s(n,e);var t=u(n);function n(e,r){var i;a(this,n),i=t.call(this,e);var o=r.externalPriceAccount,s=r.externalPriceAccountData,u=p.serialize({externalPriceAccount:s});return i.add(new l.TransactionInstruction({keys:[{pubkey:o,isSigner:!1,isWritable:!0}],programId:d.VaultProgram.PUBKEY,data:u})),i}return o(n)}(c.Transaction);t.UpdateExternalPriceAccount=y},74456:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WithdrawSharesFromTreasury=void 0;var s=n(73340),u=n(16737),c=n(96322),l=n(64329),f=n(49980),h=n(64329),d=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.vault,s=r.vaultAuthority,d=r.destination,p=r.transferAuthority,y=r.fractionTreasury,m=r.numberOfShares,g=f.NumberOfShareArgs.serialize({instruction:l.VaultInstructions.WithdrawSharesFromTreasury,numberOfShares:m});return o.add(new c.TransactionInstruction({keys:[{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!1},{pubkey:p,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:g})),o}return r(n)}(s.Transaction);t.WithdrawSharesFromTreasury=d},24957:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default;Object.defineProperty(t,"__esModule",{value:!0}),t.WithdrawTokenFromSafetyDepositBox=void 0;var s=n(73340),u=n(16737),c=n(96322),l=n(64329),f=n(49980),h=n(64329),d=function(e){o(n,e);var t=a(n);function n(e,r){var o;i(this,n),o=t.call(this,e);var a=r.vault,s=r.vaultAuthority,d=r.store,p=r.destination,y=r.fractionMint,m=r.transferAuthority,g=r.safetyDepositBox,v=r.amount,b=f.AmountArgs.serialize({instruction:l.VaultInstructions.WithdrawTokenFromSafetyDepositBox,amount:v});return o.add(new c.TransactionInstruction({keys:[{pubkey:p,isSigner:!1,isWritable:!0},{pubkey:g,isSigner:!1,isWritable:!0},{pubkey:d,isSigner:!1,isWritable:!0},{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:y,isSigner:!1,isWritable:!0},{pubkey:s,isSigner:!0,isWritable:!1},{pubkey:m,isSigner:!1,isWritable:!1},{pubkey:u.TOKEN_PROGRAM_ID,isSigner:!1,isWritable:!1},{pubkey:c.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:h.VaultProgram.PUBKEY,data:b})),o}return r(n)}(s.Transaction);t.WithdrawTokenFromSafetyDepositBox=d},75546:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(95971),t),i(n(88213),t),i(n(93102),t),i(n(14518),t),i(n(77546),t),i(n(22385),t),i(n(28416),t),i(n(79617),t),i(n(4750),t),i(n(74456),t),i(n(24957),t)},26533:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16737:function(e,t,n){"use strict";n.r(t),n.d(t,{ASSOCIATED_TOKEN_PROGRAM_ID:function(){return it},AccountLayout:function(){return dt},MintLayout:function(){return ht},NATIVE_MINT:function(){return ft},TOKEN_PROGRAM_ID:function(){return rt},Token:function(){return yt},u64:function(){return ut}});for(var r=n(74165),i=n(15861),o=n(93433),a=n(11752),s=n(61120),u=n(37762),c=n(15671),l=n(43144),f=n(97326),h=n(60136),d=n(29388),p=n(4942),y=n(80518),m=n.n(y),g=n(96322),v={},b={byteLength:function(e){var t=I(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=I(e),i=r[0],o=r[1],a=new x(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=w[e.charCodeAt(n)]<<18|w[e.charCodeAt(n+1)]<<12|w[e.charCodeAt(n+2)]<<6|w[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=w[e.charCodeAt(n)]<<2|w[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=w[e.charCodeAt(n)]<<10|w[e.charCodeAt(n+1)]<<4|w[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(S(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(_[t>>2]+_[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(_[t>>10]+_[t>>4&63]+_[t<<2&63]+"="));return i.join("")}},_=[],w=[],x="undefined"!==typeof Uint8Array?Uint8Array:Array,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A=0,E=k.length;A<E;++A)_[A]=k[A],w[k.charCodeAt(A)]=A;function I(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function S(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(_[(i=r)>>18&63]+_[i>>12&63]+_[i>>6&63]+_[63&i]);return o.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63;var T={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}};!function(e){var t=b,n=T,r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|v(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return m(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return m(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return m(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|g(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?o(0):y(e);if("Buffer"===e.type&&Array.isArray(e.data))return y(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return u(e),o(e<0?0:0|g(e))}function y(e){for(var t=e.length<0?0:0|g(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function m(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function v(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function _(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function w(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function x(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:k(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):k(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function k(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function A(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function E(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function I(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function S(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return p(e)},a.allocUnsafeSlow=function(e){return p(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(a.isBuffer(o)||(o=a.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=v,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)w(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):_.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return x(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return x(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return I(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function W(e,t,r,i,o){return t=+t,r>>>=0,o||F(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),a.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var V={};function K(e,t,n){V[e]=function(n){(0,h.Z)(i,n);var r=(0,d.Z)(i);function i(){var n;return(0,c.Z)(this,i),n=r.call(this),Object.defineProperty((0,f.Z)(n),"message",{value:t.apply((0,f.Z)(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return(0,l.Z)(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}}(v);var M="undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},P="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function B(e,t){var n={seen:[],stylize:O};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),z(t)?n.showHidden=t:t&&function(e,t){if(!t||!j(t))return e;var n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),U(n.showHidden)&&(n.showHidden=!1),U(n.depth)&&(n.depth=2),U(n.colors)&&(n.colors=!1),U(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=C),D(n,e,n.depth)}function C(e,t){var n=B.styles[t];return n?"\x1b["+B.colors[n][0]+"m"+e+"\x1b["+B.colors[n][1]+"m":e}function O(e,t){return e}function D(e,t,n){if(e.customInspect&&t&&K(t.inspect)&&t.inspect!==B&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return N(r)||(r=D(e,r,n)),r}var i=function(e,t){if(U(t))return e.stylize("undefined","undefined");if(N(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"===typeof r)return e.stylize(""+t,"number");var r;if(z(t))return e.stylize(""+t,"boolean");if(Z(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),V(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return R(t);if(0===o.length){if(K(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(F(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(W(t))return e.stylize(Date.prototype.toString.call(t),"date");if(V(t))return R(t)}var u,c,l="",f=!1,h=["{","}"];(u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),K(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return F(t)&&(l=" "+RegExp.prototype.toString.call(t)),W(t)&&(l=" "+Date.prototype.toUTCString.call(t)),V(t)&&(l=" "+R(t)),0!==o.length||f&&0!=t.length?n<0?F(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)q(t,String(a))?o.push(L(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(L(e,t,n,r,i,!0))})),o}(e,t,n,a,o):o.map((function(r){return L(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,h)):h[0]+l+h[1]}function R(e){return"["+Error.prototype.toString.call(e)+"]"}function L(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),q(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=Z(n)?D(e,u.value,null):D(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),U(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function z(e){return"boolean"===typeof e}function Z(e){return null===e}function N(e){return"string"===typeof e}function U(e){return void 0===e}function F(e){return j(e)&&"[object RegExp]"===H(e)}function j(e){return"object"===typeof e&&null!==e}function W(e){return j(e)&&"[object Date]"===H(e)}function V(e){return j(e)&&("[object Error]"===H(e)||e instanceof Error)}function K(e){return"function"===typeof e}function G(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function H(e){return Object.prototype.toString.call(e)}function q(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Y(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}B.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},B.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var X,Q=Object.prototype.hasOwnProperty,$=Object.keys||function(e){var t=[];for(var n in e)Q.call(e,n)&&t.push(n);return t},J=Array.prototype.slice;function ee(){return"undefined"!==typeof X?X:X="foo"===function(){}.name}function te(e){return Object.prototype.toString.call(e)}function ne(e){return!v.isBuffer(e)&&("function"===typeof M.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function re(e,t){e||ce(e,!0,t,"==",le)}var ie=/\s*function\s+([^\(\s]*)\s*/;function oe(e){if(K(e)){if(ee())return e.name;var t=e.toString().match(ie);return t&&t[1]}}function ae(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return se(ue(e.actual),128)+" "+e.operator+" "+se(ue(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||ce;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=oe(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function se(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function ue(e){if(ee()||!K(e))return B(e);var t=oe(e);return"[Function"+(t?": "+t:"")+"]"}function ce(e,t,n,r,i){throw new ae({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function le(e,t){e||ce(e,!0,t,"==",le)}function fe(e,t,n,r){if(e===t)return!0;if(v.isBuffer(e)&&v.isBuffer(t))return 0===Y(e,t);if(W(e)&&W(t))return e.getTime()===t.getTime();if(F(e)&&F(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(ne(e)&&ne(t)&&te(e)===te(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===Y(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(v.isBuffer(e)!==v.isBuffer(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(G(e)||G(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=he(e),o=he(t);if(i&&!o||!i&&o)return!1;if(i)return fe(e=J.call(e),t=J.call(t),n);var a,s,u=$(e),c=$(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!fe(e[a=u[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function he(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function de(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function pe(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&ce(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&i&&!n;if((!e&&V(i)&&o&&de(i,n)||a)&&ce(i,n,"Got unwanted exception"+r),e&&i&&n&&!de(i,n)||!e&&i)throw i}re.AssertionError=ae,P(ae,Error),re.fail=ce,re.ok=le,re.equal=function e(t,n,r){t!=n&&ce(t,n,r,"==",e)},re.notEqual=function e(t,n,r){t==n&&ce(t,n,r,"!=",e)},re.deepEqual=function e(t,n,r){fe(t,n,!1)||ce(t,n,r,"deepEqual",e)},re.deepStrictEqual=function e(t,n,r){fe(t,n,!0)||ce(t,n,r,"deepStrictEqual",e)},re.notDeepEqual=function e(t,n,r){fe(t,n,!1)&&ce(t,n,r,"notDeepEqual",e)},re.notDeepStrictEqual=function e(t,n,r){fe(t,n,!0)&&ce(t,n,r,"notDeepStrictEqual",e)},re.strictEqual=function e(t,n,r){t!==n&&ce(t,n,r,"===",e)},re.notStrictEqual=function e(t,n,r){t===n&&ce(t,n,r,"!==",e)},re.throws=function(e,t,n){pe(!0,e,t,n)},re.doesNotThrow=function(e,t,n){pe(!1,e,t,n)},re.ifError=function(e){if(e)throw e};var ye={},me=function(){function e(t,n){if((0,c.Z)(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return(0,l.Z)(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"decode",value:function(e,t){throw new Error("Layout is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("Layout is abstract")}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function ge(e,t){return t.property?e+"["+t.property+"]":e}ye.Layout=me,ye.nameWithProperty=ge,ye.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof me))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var ve=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(me),be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return(i=t.call(this,-1,r)).elementSpan=e,i}return(0,l.Z)(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(ve),_e=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return(o=t.call(this,e.span,i||e.property)).layout=e,o.offset=r,o}return(0,l.Z)(n,[{key:"isCount",value:function(){return this.layout instanceof we||this.layout instanceof xe}},{key:"decode",value:function(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}]),n}(ve),we=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}]),n}(me),xe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}]),n}(me),ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}]),n}(me),Ae=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}]),n}(me),Ee=Math.pow(2,32);function Ie(e){var t=Math.floor(e/Ee);return{hi32:t,lo32:e-t*Ee}}function Se(e,t){return e*Ee+t}var Te=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}]),n}(me),Me=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readUInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Pe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Se(e.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}]),n}(me),Be=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Se(e.readInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ie(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(me),Ce=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}]),n}(me),Oe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,4,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}]),n}(me),De=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}]),n}(me),Re=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,8,e)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}]),n}(me),Le=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof me))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof ve&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof ve)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0,r=this.count;if(r instanceof ve&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=[],r=0,i=this.count;for(i instanceof ve&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof ve&&this.count.encode(e.length,t,n),i}}]),n}(me),ze=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof me}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var a,s=(0,u.Z)(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){s.e(h)}finally{s.f()}var f=-1;try{f=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(o=t.call(this,f,r)).fields=e,o.decodePrefixes=!!i,o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n,r=this.makeDestinationObject(),i=(0,u.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r,i=n,o=0,a=0,s=(0,u.Z)(this.fields);try{for(s.s();!(r=s.n()).done;){var c=r.value,l=c.span;if(a=0<l?l:0,void 0!==c.property){var f=e[c.property];void 0!==f&&(a=c.encode(f,t,n),0>l&&(l=c.getSpan(t,n)))}o=n,n+=l}}catch(h){s.e(h)}finally{s.f()}return o+a-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=(0,u.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(me),Ze=function(){function e(t){(0,c.Z)(this,e),this.property=t}return(0,l.Z)(e,[{key:"decode",value:function(){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(){throw new Error("UnionDiscriminator is abstract")}}]),e}(),Ne=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(Ze),Ue=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;(0,c.Z)(this,n);var a=e instanceof we||e instanceof xe;if(a)e=new Ne(new _e(e));else if(e instanceof ve&&e.isCount())e=new Ne(e);else if(!(e instanceof Ze))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===r&&(r=null),!(null===r||r instanceof me))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var s=-1;r&&0<=(s=r.span)&&a&&(s+=e.layout.span),(o=t.call(this,s,i)).discriminator=e,o.usesPrefixDiscriminator=a,o.defaultLayout=r,o.registry={};var u=o.defaultGetSourceVariant.bind((0,f.Z)(o));return o.getSourceVariant=function(e){return u(e)},o.configGetSourceVariant=function(e){u=e.bind(this)},o}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e,t){var n;void 0===t&&(t=0);var r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){var a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new Fe(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e,t){var n=e;return v.Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}]),n}(me),Fe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i,o){var a;if((0,c.Z)(this,n),!(e instanceof Ue))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof me))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}},{key:"decode",value:function(e,t){var n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(me);function je(e){return 0>e&&(e+=4294967296),e}var We=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r,i){var o;if((0,c.Z)(this,n),!(e instanceof we||e instanceof xe))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=je(e),this},o._packedGetValue=function(){return a},o}return(0,l.Z)(n,[{key:"decode",value:function(e,t){var n=this.makeDestinationObject();void 0===t&&(t=0);var r=this.word.decode(e,t);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;void 0!==a.property&&(n[a.property]=a.decode(r))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.word.decode(t,n);this._packedSetValue(r);var i,o=(0,u.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a.property){var s=e[a.property];void 0!==s&&a.encode(s)}}}catch(c){o.e(c)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new Ve(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new Ke(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,u.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(me),Ve=function(){function e(t,n,r){if((0,c.Z)(this,e),!(t instanceof We))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=je(this.valueMask<<this.start),this.property=r}return(0,l.Z)(e,[{key:"decode",value:function(){return je(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if(!Number.isInteger(e)||e!==je(e&this.valueMask))throw new TypeError(ge("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=je(e<<this.start);this.container._packedSetValue(je(t&~this.wordMask)|n)}}]),e}(),Ke=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){return(0,c.Z)(this,n),t.call(this,e,1,r)}return(0,l.Z)(n,[{key:"decode",value:function(e,t){return!!Ve.prototype.decode.call(this,e,t)}},{key:"encode",value:function(e){return"boolean"===typeof e&&(e=+e),Ve.prototype.encode.call(this,e)}}]),n}(Ve),Ge=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),!(e instanceof ve&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof ve||(o=e),(i=t.call(this,o,r)).length=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof ve&&(r=e.length),!v.Buffer.isBuffer(e)||r!==e.length)throw new TypeError(ge("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof ve&&this.length.encode(r,t,n),r}}]),n}(me),He=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e){return(0,c.Z)(this,n),t.call(this,-1,e)}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}]),n}(me),qe=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;if((0,c.Z)(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return(0,l.Z)(n,[{key:"getSpan",value:function(e,t){if(!v.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new v.Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}]),n}(me),Ye=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;return(0,c.Z)(this,n),(i=t.call(this,0,r)).value=e,i}return(0,l.Z)(n,[{key:"decode",value:function(e,t,n){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(me);ye.ExternalLayout=ve,ye.GreedyCount=be,ye.OffsetLayout=_e,ye.UInt=we,ye.UIntBE=xe,ye.Int=ke,ye.IntBE=Ae,ye.Float=Ce,ye.FloatBE=Oe,ye.Double=De,ye.DoubleBE=Re,ye.Sequence=Le,ye.Structure=ze,ye.UnionDiscriminator=Ze,ye.UnionLayoutDiscriminator=Ne,ye.Union=Ue,ye.VariantLayout=Fe,ye.BitStructure=We,ye.BitField=Ve,ye.Boolean=Ke,ye.Blob=Ge,ye.CString=He,ye.UTF8=qe,ye.Constant=Ye,ye.greedy=function(e,t){return new be(e,t)},ye.offset=function(e,t,n){return new _e(e,t,n)};var Xe=ye.u8=function(e){return new we(1,e)};ye.u16=function(e){return new we(2,e)},ye.u24=function(e){return new we(3,e)};var Qe=ye.u32=function(e){return new we(4,e)};ye.u40=function(e){return new we(5,e)},ye.u48=function(e){return new we(6,e)},ye.nu64=function(e){return new Te(e)},ye.u16be=function(e){return new xe(2,e)},ye.u24be=function(e){return new xe(3,e)},ye.u32be=function(e){return new xe(4,e)},ye.u40be=function(e){return new xe(5,e)},ye.u48be=function(e){return new xe(6,e)},ye.nu64be=function(e){return new Me(e)},ye.s8=function(e){return new ke(1,e)},ye.s16=function(e){return new ke(2,e)},ye.s24=function(e){return new ke(3,e)},ye.s32=function(e){return new ke(4,e)},ye.s40=function(e){return new ke(5,e)},ye.s48=function(e){return new ke(6,e)},ye.ns64=function(e){return new Pe(e)},ye.s16be=function(e){return new Ae(2,e)},ye.s24be=function(e){return new Ae(3,e)},ye.s32be=function(e){return new Ae(4,e)},ye.s40be=function(e){return new Ae(5,e)},ye.s48be=function(e){return new Ae(6,e)},ye.ns64be=function(e){return new Be(e)},ye.f32=function(e){return new Ce(e)},ye.f32be=function(e){return new Oe(e)},ye.f64=function(e){return new De(e)},ye.f64be=function(e){return new Re(e)};var $e=ye.struct=function(e,t,n){return new ze(e,t,n)};ye.bits=function(e,t,n){return new We(e,t,n)},ye.seq=function(e,t,n){return new Le(e,t,n)},ye.union=function(e,t,n){return new Ue(e,t,n)},ye.unionLayoutDiscriminator=function(e,t){return new Ne(e,t)};var Je=ye.blob=function(e,t){return new Ge(e,t)};ye.cstr=function(e){return new He(e)},ye.utf8=function(e,t){return new qe(e,t)},ye.const=function(e,t){return new Ye(e,t)};var et=function(){return Je(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},tt=function(){return Je(8,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64")};function nt(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];return(0,g.sendAndConfirmTransaction)(t,n,i,{skipPreflight:!1})}var rt=new g.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),it=new g.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),ot="Failed to find account",at="Invalid account owner";function st(e){return v.Buffer.from(e.toBuffer())}var ut=function(e){(0,h.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,l.Z)(n,[{key:"toBuffer",value:function(){var e=(0,a.Z)((0,s.Z)(n.prototype),"toArray",this).call(this).reverse(),t=v.Buffer.from(e);if(8===t.length)return t;re(t.length<8,"u64 too large");var r=v.Buffer.alloc(8);return t.copy(r),r}}],[{key:"fromBuffer",value:function(e){return re(8===e.length,"Invalid buffer length: ".concat(e.length)),new n((0,o.Z)(e).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)}}]),n}(m());function ct(e){return"publicKey"in e}var lt={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},ft=new g.PublicKey("So11111111111111111111111111111111111111112"),ht=$e([Qe("mintAuthorityOption"),et("mintAuthority"),tt("supply"),Xe("decimals"),Xe("isInitialized"),Qe("freezeAuthorityOption"),et("freezeAuthority")]),dt=$e([et("mint"),et("owner"),tt("amount"),Qe("delegateOption"),et("delegate"),Xe("state"),Qe("isNativeOption"),tt("isNative"),tt("delegatedAmount"),Qe("closeAuthorityOption"),et("closeAuthority")]),pt=$e([Xe("m"),Xe("n"),Xe("is_initialized"),et("signer1"),et("signer2"),et("signer3"),et("signer4"),et("signer5"),et("signer6"),et("signer7"),et("signer8"),et("signer9"),et("signer10"),et("signer11")]),yt=function(){function e(t,n,r,i){(0,c.Z)(this,e),(0,p.Z)(this,"connection",void 0),(0,p.Z)(this,"publicKey",void 0),(0,p.Z)(this,"programId",void 0),(0,p.Z)(this,"associatedProgramId",void 0),(0,p.Z)(this,"payer",void 0),Object.assign(this,{connection:t,publicKey:n,programId:r,payer:i,associatedProgramId:it})}return(0,l.Z)(e,[{key:"createAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i,o,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(this.connection);case 2:return i=t.sent,o=g.Keypair.generate(),(a=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:i,space:dt.span,programId:this.programId})),s=this.publicKey,a.add(e.createInitAccountInstruction(this.programId,s,o.publicKey,n)),t.next=10,nt("createAccount and InitializeAccount",this.connection,a,this.payer,o);case 10:return t.abrupt("return",o.publicKey);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.abrupt("return",this.createAssociatedTokenAccountInternal(n,i));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInternal",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("CreateAssociatedTokenAccount",this.connection,(new g.Transaction).add(e.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,i,n,this.payer.publicKey)),this.payer);case 2:return t.abrupt("return",i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrCreateAssociatedAccountInfo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){var i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return i=t.sent,t.prev=3,t.next=6,this.getAccountInfo(i);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),t.t0.message!==ot&&t.t0.message!==at){t.next=24;break}return t.prev=12,t.next=15,this.createAssociatedTokenAccountInternal(n,i);case 15:t.next=19;break;case 17:t.prev=17,t.t1=t.catch(12);case 19:return t.next=21,this.getAccountInfo(i);case 21:return t.abrupt("return",t.sent);case 24:throw t.t0;case 25:case"end":return t.stop()}}),t,this,[[3,9],[12,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createMultisig",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i){var o,a,s,u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=g.Keypair.generate(),t.next=3,e.getMinBalanceRentForExemptMultisig(this.connection);case 3:return a=t.sent,(s=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:o.publicKey,lamports:a,space:pt.span,programId:this.programId})),u=[{pubkey:o.publicKey,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],i.forEach((function(e){return u.push({pubkey:e,isSigner:!1,isWritable:!1})})),c=$e([Xe("instruction"),Xe("m")]),l=v.Buffer.alloc(c.span),c.encode({instruction:2,m:n},l),s.add({keys:u,programId:this.programId,data:l}),t.next=14,nt("createAccount and InitializeMultisig",this.connection,s,this.payer,o);case 14:return t.abrupt("return",o.publicKey);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMintInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(this.publicKey);case 2:if(null!==(t=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:if(t.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid mint owner: ".concat(JSON.stringify(t.owner)));case 7:if(t.data.length==ht.span){e.next=9;break}throw new Error("Invalid mint size");case 9:return n=v.Buffer.from(t.data),0===(i=ht.decode(n)).mintAuthorityOption?i.mintAuthority=null:i.mintAuthority=new g.PublicKey(i.mintAuthority),i.supply=ut.fromBuffer(i.supply),i.isInitialized=0!=i.isInitialized,0===i.freezeAuthorityOption?i.freezeAuthority=null:i.freezeAuthority=new g.PublicKey(i.freezeAuthority),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t,n);case 2:if(null!==(i=e.sent)){e.next=5;break}throw new Error(ot);case 5:if(i.owner.equals(this.programId)){e.next=7;break}throw new Error(at);case 7:if(i.data.length==dt.span){e.next=9;break}throw new Error("Invalid account size");case 9:if(o=v.Buffer.from(i.data),(a=dt.decode(o)).address=t,a.mint=new g.PublicKey(a.mint),a.owner=new g.PublicKey(a.owner),a.amount=ut.fromBuffer(a.amount),0===a.delegateOption?(a.delegate=null,a.delegatedAmount=new ut):(a.delegate=new g.PublicKey(a.delegate),a.delegatedAmount=ut.fromBuffer(a.delegatedAmount)),a.isInitialized=0!==a.state,a.isFrozen=2===a.state,1===a.isNativeOption?(a.rentExemptReserve=ut.fromBuffer(a.isNative),a.isNative=!0):(a.rentExemptReserve=null,a.isNative=!1),0===a.closeAuthorityOption?a.closeAuthority=null:a.closeAuthority=new g.PublicKey(a.closeAuthority),a.mint.equals(this.publicKey)){e.next=22;break}throw new Error("Invalid account mint: ".concat(JSON.stringify(a.mint)," !== ").concat(JSON.stringify(this.publicKey)));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultisigInfo",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t);case 2:if(null!==(n=e.sent)){e.next=5;break}throw new Error("Failed to find multisig");case 5:if(n.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid multisig owner");case 7:if(n.data.length==pt.span){e.next=9;break}throw new Error("Invalid multisig size");case 9:return i=v.Buffer.from(n.data),(o=pt.decode(i)).signer1=new g.PublicKey(o.signer1),o.signer2=new g.PublicKey(o.signer2),o.signer3=new g.PublicKey(o.signer3),o.signer4=new g.PublicKey(o.signer4),o.signer5=new g.PublicKey(o.signer5),o.signer6=new g.PublicKey(o.signer6),o.signer7=new g.PublicKey(o.signer7),o.signer8=new g.PublicKey(o.signer8),o.signer9=new g.PublicKey(o.signer9),o.signer10=new g.PublicKey(o.signer10),o.signer11=new g.PublicKey(o.signer11),e.abrupt("return",o);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Transfer",this.connection,(new g.Transaction).add(e.createTransferInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(c=a.publicKey,l=[a]):(c=a,l=s),t.next=3,nt.apply(void 0,["Approve",this.connection,(new g.Transaction).add(e.createApproveInstruction(this.programId,n,i,c,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"revoke",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["Revoke",this.connection,(new g.Transaction).add(e.createRevokeInstruction(this.programId,n,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"setAuthority",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(s)?(c=s.publicKey,l=[s]):(c=s,l=u),t.next=3,nt.apply(void 0,["SetAuthority",this.connection,(new g.Transaction).add(e.createSetAuthorityInstruction(this.programId,n,i,a,c,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"mintTo",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["MintTo",this.connection,(new g.Transaction).add(e.createMintToInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"burn",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(u=i.publicKey,c=[i]):(u=i,c=a),t.next=3,nt.apply(void 0,["Burn",this.connection,(new g.Transaction).add(e.createBurnInstruction(this.programId,this.publicKey,n,u,a,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"closeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s){var u,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(u=a.publicKey,c=[a]):(u=a,c=s),t.next=3,nt.apply(void 0,["CloseAccount",this.connection,(new g.Transaction).add(e.createCloseAccountInstruction(this.programId,n,i,u,s)),this.payer].concat((0,o.Z)(c)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"freezeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["FreezeAccount",this.connection,(new g.Transaction).add(e.createFreezeAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"thawAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a){var s,u;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(s=i.publicKey,u=[i]):(s=i,u=a),t.next=3,nt.apply(void 0,["ThawAccount",this.connection,(new g.Transaction).add(e.createThawAccountInstruction(this.programId,n,this.publicKey,s,a)),this.payer].concat((0,o.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"transferChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["TransferChecked",this.connection,(new g.Transaction).add(e.createTransferCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"approveChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u,c){var l,f;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(a)?(l=a.publicKey,f=[a]):(l=a,f=s),t.next=3,nt.apply(void 0,["ApproveChecked",this.connection,(new g.Transaction).add(e.createApproveCheckedInstruction(this.programId,n,this.publicKey,i,l,s,u,c)),this.payer].concat((0,o.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"mintToChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["MintToChecked",this.connection,(new g.Transaction).add(e.createMintToCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"burnChecked",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,a,s,u){var c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ct(i)?(c=i.publicKey,l=[i]):(c=i,l=a),t.next=3,nt.apply(void 0,["BurnChecked",this.connection,(new g.Transaction).add(e.createBurnCheckedInstruction(this.programId,this.publicKey,n,c,a,s,u)),this.payer].concat((0,o.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"syncNative",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt("SyncNative",this.connection,(new g.Transaction).add(e.createSyncNativeInstruction(this.programId,n)),this.payer);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getMinBalanceRentForExemptMint",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(ht.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptAccount",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(dt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptMultisig",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(pt.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMint",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s,u){var c,l,f,h;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=g.Keypair.generate(),l=new e(n,c.publicKey,u,i),t.next=4,e.getMinBalanceRentForExemptMint(n);case 4:return f=t.sent,(h=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:i.publicKey,newAccountPubkey:c.publicKey,lamports:f,space:ht.span,programId:u})),h.add(e.createInitMintInstruction(u,c.publicKey,s,o,a)),t.next=10,nt("createAccount and InitializeMint",n,h,i,c);case 10:return t.abrupt("return",l);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"createWrappedNativeAccount",value:function(){var t=(0,i.Z)((0,r.Z)().mark((function t(n,i,o,a,s){var u,c,l;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(n);case 2:return u=t.sent,c=g.Keypair.generate(),(l=new g.Transaction).add(g.SystemProgram.createAccount({fromPubkey:a.publicKey,newAccountPubkey:c.publicKey,lamports:u,space:dt.span,programId:i})),l.add(g.SystemProgram.transfer({fromPubkey:a.publicKey,toPubkey:c.publicKey,lamports:s})),l.add(e.createInitAccountInstruction(i,ft,c.publicKey,o)),t.next=10,nt("createAccount, transfer, and initializeAccount",n,l,a,c);case 10:return t.abrupt("return",c.publicKey);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"createInitMintInstruction",value:function(e,t,n,r,i){var o=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=$e([Xe("instruction"),Xe("decimals"),et("mintAuthority"),Xe("option"),et("freezeAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:0,decimals:n,mintAuthority:st(r),option:null===i?0:1,freezeAuthority:st(i||new g.PublicKey(0))},s);return s=s.slice(0,u),new g.TransactionInstruction({keys:o,programId:e,data:s})}},{key:"createInitAccountInstruction",value:function(e,t,n,r){var i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);return o.encode({instruction:1},a),new g.TransactionInstruction({keys:i,programId:e,data:a})}},{key:"createTransferInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:3,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createApproveInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:4,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createRevokeInstruction",value:function(e,t,n,r){var i=$e([Xe("instruction")]),o=v.Buffer.alloc(i.span);i.encode({instruction:5},o);var a=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===r.length?a.push({pubkey:n,isSigner:!0,isWritable:!1}):(a.push({pubkey:n,isSigner:!1,isWritable:!1}),r.forEach((function(e){return a.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:a,programId:e,data:o})}},{key:"createSetAuthorityInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),Xe("authorityType"),Xe("option"),et("newAuthority")]),s=v.Buffer.alloc(1024),u=a.encode({instruction:6,authorityType:lt[r],option:null===n?0:1,newAuthority:st(n||new g.PublicKey(0))},s);s=s.slice(0,u);var c=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===o.length?c.push({pubkey:i,isSigner:!0,isWritable:!1}):(c.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:s})}},{key:"createMintToInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:7,amount:new ut(o).toBuffer()},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createBurnInstruction",value:function(e,t,n,r,i,o){var a=$e([Xe("instruction"),tt("amount")]),s=v.Buffer.alloc(a.span);a.encode({instruction:8,amount:new ut(o).toBuffer()},s);var u=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createCloseAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:9},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createFreezeAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:10},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createThawAccountInstruction",value:function(e,t,n,r,i){var o=$e([Xe("instruction")]),a=v.Buffer.alloc(o.span);o.encode({instruction:11},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?s.push({pubkey:r,isSigner:!0,isWritable:!1}):(s.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createTransferCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:12,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createApproveCheckedInstruction",value:function(e,t,n,r,i,o,a,s){var u=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),c=v.Buffer.alloc(u.span);u.encode({instruction:13,amount:new ut(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return 0===o.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),o.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createMintToCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:14,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createBurnCheckedInstruction",value:function(e,t,n,r,i,o,a){var s=$e([Xe("instruction"),tt("amount"),Xe("decimals")]),u=v.Buffer.alloc(s.span);s.encode({instruction:15,amount:new ut(o).toBuffer(),decimals:a},u);var c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new g.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createSyncNativeInstruction",value:function(e,t){var n=$e([Xe("instruction")]),r=v.Buffer.alloc(n.span);n.encode({instruction:17},r);var i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new g.TransactionInstruction({keys:i,programId:e,data:r})}},{key:"getAssociatedTokenAddress",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n,i,o){var a=arguments;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>4&&void 0!==a[4]&&a[4]||g.PublicKey.isOnCurve(o.toBuffer())){e.next=3;break}throw new Error("Owner cannot sign: ".concat(o.toString()));case 3:return e.next=5,g.PublicKey.findProgramAddress([o.toBuffer(),n.toBuffer(),i.toBuffer()],t);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInstruction",value:function(e,t,n,r,i,o){var a=v.Buffer.alloc(0),s=[{pubkey:o,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:g.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:g.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new g.TransactionInstruction({keys:s,programId:e,data:a})}}]),e}()},48972:function(e,t,n){e.exports=n(53709)},73735:function(e,t,n){"use strict";var r=n(38887),i=n(8158),o=n(88444),a=n(72404),s=n(43120),u=n(14062),c=n(72851),l=n(29676),f=n(3050),h=n(36869);e.exports=function(e){return new Promise((function(t,n){var d,p=e.data,y=e.headers,m=e.responseType;function g(){e.cancelToken&&e.cancelToken.unsubscribe(d),e.signal&&e.signal.removeEventListener("abort",d)}r.isFormData(p)&&delete y["Content-Type"];var v=new XMLHttpRequest;if(e.auth){var b=e.auth.username||"",_=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";y.Authorization="Basic "+btoa(b+":"+_)}var w=s(e.baseURL,e.url);function x(){if(v){var r="getAllResponseHeaders"in v?u(v.getAllResponseHeaders()):null,o={data:m&&"text"!==m&&"json"!==m?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v};i((function(e){t(e),g()}),(function(e){n(e),g()}),o),v=null}}if(v.open(e.method.toUpperCase(),a(w,e.params,e.paramsSerializer),!0),v.timeout=e.timeout,"onloadend"in v?v.onloadend=x:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(x)},v.onabort=function(){v&&(n(l("Request aborted",e,"ECONNABORTED",v)),v=null)},v.onerror=function(){n(l("Network Error",e,null,v)),v=null},v.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||f.transitional;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),n(l(t,e,r.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",v)),v=null},r.isStandardBrowserEnv()){var k=(e.withCredentials||c(w))&&e.xsrfCookieName?o.read(e.xsrfCookieName):void 0;k&&(y[e.xsrfHeaderName]=k)}"setRequestHeader"in v&&r.forEach(y,(function(e,t){"undefined"===typeof p&&"content-type"===t.toLowerCase()?delete y[t]:v.setRequestHeader(t,e)})),r.isUndefined(e.withCredentials)||(v.withCredentials=!!e.withCredentials),m&&"json"!==m&&(v.responseType=e.responseType),"function"===typeof e.onDownloadProgress&&v.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(d=function(e){v&&(n(!e||e&&e.type?new h("canceled"):e),v.abort(),v=null)},e.cancelToken&&e.cancelToken.subscribe(d),e.signal&&(e.signal.aborted?d():e.signal.addEventListener("abort",d))),p||(p=null),v.send(p)}))}},53709:function(e,t,n){"use strict";var r=n(38887),i=n(88720),o=n(12430),a=n(78090);var s=function e(t){var n=new o(t),s=i(o.prototype.request,n);return r.extend(s,o.prototype,n),r.extend(s,n),s.create=function(n){return e(a(t,n))},s}(n(3050));s.Axios=o,s.Cancel=n(36869),s.CancelToken=n(62431),s.isCancel=n(30746),s.VERSION=n(81370).version,s.all=function(e){return Promise.all(e)},s.spread=n(36176),s.isAxiosError=n(10918),e.exports=s,e.exports.default=s},36869:function(e){"use strict";function t(e){this.message=e}t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,e.exports=t},62431:function(e,t,n){"use strict";var r=n(36869);function i(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var n=this;this.promise.then((function(e){if(n._listeners){var t,r=n._listeners.length;for(t=0;t<r;t++)n._listeners[t](e);n._listeners=null}})),this.promise.then=function(e){var t,r=new Promise((function(e){n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e){n.reason||(n.reason=new r(e),t(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.prototype.subscribe=function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]},i.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},i.source=function(){var e;return{token:new i((function(t){e=t})),cancel:e}},e.exports=i},30746:function(e){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},12430:function(e,t,n){"use strict";var r=n(38887),i=n(72404),o=n(63903),a=n(68161),s=n(78090),u=n(3370),c=u.validators;function l(e){this.defaults=e,this.interceptors={request:new o,response:new o}}l.prototype.request=function(e,t){if("string"===typeof e?(t=t||{}).url=e:t=e||{},!t.url)throw new Error("Provided config url is not valid");(t=s(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;void 0!==n&&u.assertOptions(n,{silentJSONParsing:c.transitional(c.boolean),forcedJSONParsing:c.transitional(c.boolean),clarifyTimeoutError:c.transitional(c.boolean)},!1);var r=[],i=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,r.unshift(e.fulfilled,e.rejected))}));var o,l=[];if(this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)})),!i){var f=[a,void 0];for(Array.prototype.unshift.apply(f,r),f=f.concat(l),o=Promise.resolve(t);f.length;)o=o.then(f.shift(),f.shift());return o}for(var h=t;r.length;){var d=r.shift(),p=r.shift();try{h=d(h)}catch(y){p(y);break}}try{o=a(h)}catch(y){return Promise.reject(y)}for(;l.length;)o=o.then(l.shift(),l.shift());return o},l.prototype.getUri=function(e){if(!e.url)throw new Error("Provided config url is not valid");return e=s(this.defaults,e),i(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(e){l.prototype[e]=function(t,n){return this.request(s(n||{},{method:e,url:t,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(e){l.prototype[e]=function(t,n,r){return this.request(s(r||{},{method:e,url:t,data:n}))}})),e.exports=l},63903:function(e,t,n){"use strict";var r=n(38887);function i(){this.handlers=[]}i.prototype.use=function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function(e){r.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=i},43120:function(e,t,n){"use strict";var r=n(10111),i=n(89695);e.exports=function(e,t){return e&&!r(t)?i(e,t):t}},29676:function(e,t,n){"use strict";var r=n(73512);e.exports=function(e,t,n,i,o){var a=new Error(e);return r(a,t,n,i,o)}},68161:function(e,t,n){"use strict";var r=n(38887),i=n(10329),o=n(30746),a=n(3050),s=n(36869);function u(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s("canceled")}e.exports=function(e){return u(e),e.headers=e.headers||{},e.data=i.call(e,e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||a.adapter)(e).then((function(t){return u(e),t.data=i.call(e,t.data,t.headers,e.transformResponse),t}),(function(t){return o(t)||(u(e),t&&t.response&&(t.response.data=i.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},73512:function(e){"use strict";e.exports=function(e,t,n,r,i){return e.config=t,n&&(e.code=n),e.request=r,e.response=i,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e}},78090:function(e,t,n){"use strict";var r=n(38887);e.exports=function(e,t){t=t||{};var n={};function i(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function o(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(e[n],t[n])}function a(e){if(!r.isUndefined(t[e]))return i(void 0,t[e])}function s(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:i(void 0,e[n]):i(void 0,t[n])}function u(n){return n in t?i(e[n],t[n]):n in e?i(void 0,e[n]):void 0}var c={url:a,method:a,data:a,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:u};return r.forEach(Object.keys(e).concat(Object.keys(t)),(function(e){var t=c[e]||o,i=t(e);r.isUndefined(i)&&t!==u||(n[e]=i)})),n}},8158:function(e,t,n){"use strict";var r=n(29676);e.exports=function(e,t,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?t(r("Request failed with status code "+n.status,n.config,null,n.request,n)):e(n)}},10329:function(e,t,n){"use strict";var r=n(38887),i=n(3050);e.exports=function(e,t,n){var o=this||i;return r.forEach(n,(function(n){e=n.call(o,e,t)})),e}},3050:function(e,t,n){"use strict";var r=n(1426),i=n(38887),o=n(39042),a=n(73512),s={"Content-Type":"application/x-www-form-urlencoded"};function u(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:function(){var e;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof r&&"[object process]"===Object.prototype.toString.call(r))&&(e=n(73735)),e}(),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e)?e:i.isArrayBufferView(e)?e.buffer:i.isURLSearchParams(e)?(u(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):i.isObject(e)||t&&"application/json"===t["Content-Type"]?(u(t,"application/json"),function(e,t,n){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,n=t&&t.silentJSONParsing,r=t&&t.forcedJSONParsing,o=!n&&"json"===this.responseType;if(o||r&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(s){if(o){if("SyntaxError"===s.name)throw a(s,this,"E_JSON_PARSE");throw s}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(e){c.headers[e]={}})),i.forEach(["post","put","patch"],(function(e){c.headers[e]=i.merge(s)})),e.exports=c},81370:function(e){e.exports={version:"0.25.0"}},88720:function(e){"use strict";e.exports=function(e,t){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return e.apply(t,n)}}},72404:function(e,t,n){"use strict";var r=n(38887);function i(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,n){if(!t)return e;var o;if(n)o=n(t);else if(r.isURLSearchParams(t))o=t.toString();else{var a=[];r.forEach(t,(function(e,t){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?t+="[]":e=[e],r.forEach(e,(function(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),a.push(i(t)+"="+i(e))})))})),o=a.join("&")}if(o){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}},89695:function(e){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},88444:function(e,t,n){"use strict";var r=n(38887);e.exports=r.isStandardBrowserEnv()?{write:function(e,t,n,i,o,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),r.isString(i)&&s.push("path="+i),r.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},10111:function(e){"use strict";e.exports=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},10918:function(e,t,n){"use strict";var r=n(38887);e.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},72851:function(e,t,n){"use strict";var r=n(38887);e.exports=r.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=i(window.location.href),function(t){var n=r.isString(t)?i(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}},39042:function(e,t,n){"use strict";var r=n(38887);e.exports=function(e,t){r.forEach(e,(function(n,r){r!==t&&r.toUpperCase()===t.toUpperCase()&&(e[t]=n,delete e[r])}))}},14062:function(e,t,n){"use strict";var r=n(38887),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,n,o,a={};return e?(r.forEach(e.split("\n"),(function(e){if(o=e.indexOf(":"),t=r.trim(e.substr(0,o)).toLowerCase(),n=r.trim(e.substr(o+1)),t){if(a[t]&&i.indexOf(t)>=0)return;a[t]="set-cookie"===t?(a[t]?a[t]:[]).concat([n]):a[t]?a[t]+", "+n:n}})),a):a}},36176:function(e){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},3370:function(e,t,n){"use strict";var r=n(81370).version,i={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){i[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var o={};i.transitional=function(e,t,n){function i(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(n,r,a){if(!1===e)throw new Error(i(r," has been removed"+(t?" in "+t:"")));return t&&!o[r]&&(o[r]=!0,console.warn(i(r," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,r,a)}},e.exports={assertOptions:function(e,t,n){if("object"!==typeof e)throw new TypeError("options must be an object");for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],u=void 0===s||a(s,o,e);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},38887:function(e,t,n){"use strict";var r=n(88720),i=Object.prototype.toString;function o(e){return Array.isArray(e)}function a(e){return"undefined"===typeof e}function s(e){return"[object ArrayBuffer]"===i.call(e)}function u(e){return null!==e&&"object"===typeof e}function c(e){if("[object Object]"!==i.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function l(e){return"[object Function]"===i.call(e)}function f(e,t){if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),o(e))for(var n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.call(null,e[i],i,e)}e.exports={isArray:o,isArrayBuffer:s,isBuffer:function(e){return null!==e&&!a(e)&&null!==e.constructor&&!a(e.constructor)&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"[object FormData]"===i.call(e)},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&s(e.buffer)},isString:function(e){return"string"===typeof e},isNumber:function(e){return"number"===typeof e},isObject:u,isPlainObject:c,isUndefined:a,isDate:function(e){return"[object Date]"===i.call(e)},isFile:function(e){return"[object File]"===i.call(e)},isBlob:function(e){return"[object Blob]"===i.call(e)},isFunction:l,isStream:function(e){return u(e)&&l(e.pipe)},isURLSearchParams:function(e){return"[object URLSearchParams]"===i.call(e)},isStandardBrowserEnv:function(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)},forEach:f,merge:function e(){var t={};function n(n,r){c(t[r])&&c(n)?t[r]=e(t[r],n):c(n)?t[r]=e({},n):o(n)?t[r]=n.slice():t[r]=n}for(var r=0,i=arguments.length;r<i;r++)f(arguments[r],n);return t},extend:function(e,t,n){return f(t,(function(t,i){e[i]=n&&"function"===typeof t?r(t,n):t})),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}}},62576:function(e,t,n){"use strict";var r=n(41588).default,i=n(73808).default,o=n(66115).default,a=n(74704).default,s=n(61655).default,u=n(26389).default,c=n(56690).default,l=n(89728).default;Object.defineProperty(t,"__esModule",{value:!0}),t.s16=t.s8=t.nu64be=t.u48be=t.u40be=t.u32be=t.u24be=t.u16be=t.nu64=t.u48=t.u40=t.u32=t.u24=t.u16=t.u8=t.offset=t.greedy=t.Constant=t.UTF8=t.CString=t.Blob=t.Boolean=t.BitField=t.BitStructure=t.VariantLayout=t.Union=t.UnionLayoutDiscriminator=t.UnionDiscriminator=t.Structure=t.Sequence=t.DoubleBE=t.Double=t.FloatBE=t.Float=t.NearInt64BE=t.NearInt64=t.NearUInt64BE=t.NearUInt64=t.IntBE=t.Int=t.UIntBE=t.UInt=t.OffsetLayout=t.GreedyCount=t.ExternalLayout=t.bindConstructorLayout=t.nameWithProperty=t.Layout=t.uint8ArrayToBuffer=t.checkUint8Array=void 0,t.constant=t.utf8=t.cstr=t.blob=t.unionLayoutDiscriminator=t.union=t.seq=t.bits=t.struct=t.f64be=t.f64=t.f32be=t.f32=t.ns64be=t.s48be=t.s40be=t.s32be=t.s24be=t.s16be=t.ns64=t.s48=t.s40=t.s32=t.s24=void 0;var f=n(19778);function h(e){if(!(e instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function d(e){return h(e),f.Buffer.from(e.buffer,e.byteOffset,e.length)}t.checkUint8Array=h,t.uint8ArrayToBuffer=d;var p=function(){function e(t,n){if(c(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return l(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function y(e,t){return t.property?e+"["+t.property+"]":e}t.Layout=p,t.nameWithProperty=y,t.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(e,"layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof p))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(t,"boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var m=function(e){s(n,e);var t=u(n);function n(){return c(this,n),t.apply(this,arguments)}return l(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(p);t.ExternalLayout=m;var g=function(e){s(n,e);var t=u(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1?arguments[1]:void 0;if(c(this,n),!Number.isInteger(r)||0>=r)throw new TypeError("elementSpan must be a (positive) integer");return(e=t.call(this,-1,i)).elementSpan=r,e}return l(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(m);t.GreedyCount=g;var v=function(e){s(n,e);var t=u(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2?arguments[2]:void 0;if(c(this,n),!(e instanceof p))throw new TypeError("layout must be a Layout");if(!Number.isInteger(i))throw new TypeError("offset must be integer or undefined");return(r=t.call(this,e.span,o||e.property)).layout=e,r.offset=i,r}return l(n,[{key:"isCount",value:function(){return this.layout instanceof b||this.layout instanceof _}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.layout.encode(e,t,n+this.offset)}}]),n}(m);t.OffsetLayout=v;var b=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readUIntLE(t,this.span)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeUIntLE(e,n,this.span),this.span}}]),n}(p);t.UInt=b;var _=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readUIntBE(t,this.span)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeUIntBE(e,n,this.span),this.span}}]),n}(p);t.UIntBE=_;var w=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readIntLE(t,this.span)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeIntLE(e,n,this.span),this.span}}]),n}(p);t.Int=w;var x=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readIntBE(t,this.span)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeIntBE(e,n,this.span),this.span}}]),n}(p);t.IntBE=x;var k=Math.pow(2,32);function A(e){var t=Math.floor(e/k);return{hi32:t,lo32:e-t*k}}function E(e,t){return e*k+t}var I=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d(e),r=n.readUInt32LE(t);return E(n.readUInt32LE(t+4),r)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=A(e),i=d(t);return i.writeUInt32LE(r.lo32,n),i.writeUInt32LE(r.hi32,n+4),8}}]),n}(p);t.NearUInt64=I;var S=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d(e);return E(n.readUInt32BE(t),n.readUInt32BE(t+4))}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=A(e),i=d(t);return i.writeUInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}]),n}(p);t.NearUInt64BE=S;var T=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d(e),r=n.readUInt32LE(t);return E(n.readInt32LE(t+4),r)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=A(e),i=d(t);return i.writeUInt32LE(r.lo32,n),i.writeInt32LE(r.hi32,n+4),8}}]),n}(p);t.NearInt64=T;var M=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=d(e);return E(n.readInt32BE(t),n.readUInt32BE(t+4))}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=A(e),i=d(t);return i.writeInt32BE(r.hi32,n),i.writeUInt32BE(r.lo32,n+4),8}}]),n}(p);t.NearInt64BE=M;var P=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,4,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readFloatLE(t)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeFloatLE(e,n),4}}]),n}(p);t.Float=P;var B=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,4,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readFloatBE(t)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeFloatBE(e,n),4}}]),n}(p);t.FloatBE=B;var C=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readDoubleLE(t)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeDoubleLE(e,n),8}}]),n}(p);t.Double=C;var O=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,8,e)}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return d(e).readDoubleBE(t)}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(t).writeDoubleBE(e,n),8}}]),n}(p);t.DoubleBE=O;var D=function(e){s(n,e);var t=u(n);function n(e,r,i){var o;if(c(this,n),!(e instanceof p))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof m&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof m)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var n=0,r=this.count;if(r instanceof m&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=0,i=this.count;for(i instanceof m&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof m&&this.count.encode(e.length,t,n),i}}]),n}(p);t.Sequence=D;var R=function(e){s(n,e);var t=u(n);function n(e,r,i){var o;if(c(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof p}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var s,u=a(e);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(0>l.span&&void 0===l.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(h){u.e(h)}finally{u.f()}var f=-1;try{f=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(d){}return(o=t.call(this,f,r)).fields=e,o.decodePrefixes=!!i,o}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);var n,r=this.makeDestinationObject(),i=a(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(s){i.e(s)}finally{i.f()}return r}},{key:"encode",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=r,o=0,s=0,u=a(this.fields);try{for(u.s();!(n=u.n()).done;){var c=n.value,l=c.span;if(s=0<l?l:0,void 0!==c.property){var f=e[c.property];void 0!==f&&(s=c.encode(f,t,r),0>l&&(l=c.getSpan(t,r)))}o=r,r+=l}}catch(h){u.e(h)}finally{u.f()}return o+s-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=a(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=a(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=a(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(p);t.Structure=R;var L=function(){function e(t){c(this,e),this.property=t}return l(e,[{key:"decode",value:function(e,t){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("UnionDiscriminator is abstract")}}]),e}();t.UnionDiscriminator=L;var z=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),!(e instanceof m&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return l(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(L);t.UnionLayoutDiscriminator=z;var Z=function(e){s(n,e);var t=u(n);function n(e,r,i){var a,s;if(c(this,n),e instanceof b||e instanceof _)s=new z(new v(e));else if(e instanceof m&&e.isCount())s=new z(e);else{if(!(e instanceof L))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");s=e}if(void 0===r&&(r=null),!(null===r||r instanceof p))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var u=-1;r&&0<=(u=r.span)&&(e instanceof b||e instanceof _)&&(u+=s.layout.span),(a=t.call(this,u,i)).discriminator=s,a.usesPrefixDiscriminator=e instanceof b||e instanceof _,a.defaultLayout=r,a.registry={};var l=a.defaultGetSourceVariant.bind(o(a));return a.getSourceVariant=function(e){return l(e)},a.configGetSourceVariant=function(e){l=e.bind(this)},a}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||t.property&&Object.prototype.hasOwnProperty.call(e,t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(r.property&&Object.prototype.hasOwnProperty.call(e,r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.discriminator,i=r.decode(e,n),o=this.registry[i];if(void 0===o){var a=this.defaultLayout,s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),(t=this.makeDestinationObject())[r.property]=i,t[a.property]=a.decode(e,n+s)}else t=o.decode(e,n);return t}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new N(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t=e instanceof Uint8Array?this.discriminator.decode(e,n):e,this.registry[t]}}]),n}(p);t.Union=Z;var N=function(e){s(n,e);var t=u(n);function n(e,r,i,o){var a;if(c(this,n),!(e instanceof Z))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof p))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(0<=this.span)return this.span;var n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);var r=0;return this.layout&&(r=this.layout.getSpan(e,t+n)),n+r}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.makeDestinationObject();if(this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(p);function U(e){return 0>e&&(e+=4294967296),e}t.VariantLayout=N;var F=function(e){s(n,e);var t=u(n);function n(e,r,i){var o;if(c(this,n),!(e instanceof b||e instanceof _))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=U(e),this},o._packedGetValue=function(){return a},o}return l(n,[{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.makeDestinationObject(),r=this.word.decode(e,t);this._packedSetValue(r);var i,o=a(this.fields);try{for(o.s();!(i=o.n()).done;){var s=i.value;void 0!==s.property&&(n[s.property]=s.decode(e))}}catch(u){o.e(u)}finally{o.f()}return n}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.word.decode(t,n);this._packedSetValue(r);var i,o=a(this.fields);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(void 0!==s.property){var u=e[s.property];void 0!==u&&s.encode(u)}}}catch(c){o.e(c)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new j(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new W(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=a(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(p);t.BitStructure=F;var j=function(){function e(t,n,r){if(c(this,e),!(t instanceof F))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=U(this.valueMask<<this.start),this.property=r}return l(e,[{key:"decode",value:function(e,t){return U(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if("number"!==typeof e||!Number.isInteger(e)||e!==U(e&this.valueMask))throw new TypeError(y("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=U(e<<this.start);this.container._packedSetValue(U(t&~this.wordMask)|n)}}]),e}();t.BitField=j;var W=function(e){s(n,e);var t=u(n);function n(e,r){return c(this,n),t.call(this,e,1,r)}return l(n,[{key:"decode",value:function(e,t){return!!r(i(n.prototype),"decode",this).call(this,e,t)}},{key:"encode",value:function(e){"boolean"===typeof e&&(e=+e),r(i(n.prototype),"encode",this).call(this,e)}}]),n}(j);t.Boolean=W;var V=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),!(e instanceof m&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof m||(o=e),(i=t.call(this,o,r)).length=e,i}return l(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.span;return 0>n&&(n=this.length.decode(e,t)),d(e).slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof m&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(y("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>t.length)throw new RangeError("encoding overruns Uint8Array");var i=d(e);return d(t).write(i.toString("hex"),n,r,"hex"),this.length instanceof m&&this.length.encode(r,t,n),r}}]),n}(p);t.Blob=V;var K=function(e){s(n,e);var t=u(n);function n(e){return c(this,n),t.call(this,-1,e)}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;h(e);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getSpan(e,t);return d(e).slice(t,t+n-1).toString("utf-8")}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!==typeof e&&(e=String(e));var r=f.Buffer.from(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");var o=d(t);return r.copy(o,n),o[n+i]=0,i+1}}]),n}(p);t.CString=K;var G=function(e){s(n,e);var t=u(n);function n(e,r){var i;if(c(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return l(n,[{key:"getSpan",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return h(e),e.length-t}},{key:"decode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return d(e).slice(t,t+n).toString("utf-8")}},{key:"encode",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;"string"!==typeof e&&(e=String(e));var r=f.Buffer.from(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(d(t),n),i}}]),n}(p);t.UTF8=G;var H=function(e){s(n,e);var t=u(n);function n(e,r){var i;return c(this,n),(i=t.call(this,0,r)).value=e,i}return l(n,[{key:"decode",value:function(e,t){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(p);t.Constant=H,t.greedy=function(e,t){return new g(e,t)},t.offset=function(e,t,n){return new v(e,t,n)},t.u8=function(e){return new b(1,e)},t.u16=function(e){return new b(2,e)},t.u24=function(e){return new b(3,e)},t.u32=function(e){return new b(4,e)},t.u40=function(e){return new b(5,e)},t.u48=function(e){return new b(6,e)},t.nu64=function(e){return new I(e)},t.u16be=function(e){return new _(2,e)},t.u24be=function(e){return new _(3,e)},t.u32be=function(e){return new _(4,e)},t.u40be=function(e){return new _(5,e)},t.u48be=function(e){return new _(6,e)},t.nu64be=function(e){return new S(e)},t.s8=function(e){return new w(1,e)},t.s16=function(e){return new w(2,e)},t.s24=function(e){return new w(3,e)},t.s32=function(e){return new w(4,e)},t.s40=function(e){return new w(5,e)},t.s48=function(e){return new w(6,e)},t.ns64=function(e){return new T(e)},t.s16be=function(e){return new x(2,e)},t.s24be=function(e){return new x(3,e)},t.s32be=function(e){return new x(4,e)},t.s40be=function(e){return new x(5,e)},t.s48be=function(e){return new x(6,e)},t.ns64be=function(e){return new M(e)},t.f32=function(e){return new P(e)},t.f32be=function(e){return new B(e)},t.f64=function(e){return new C(e)},t.f64be=function(e){return new O(e)},t.struct=function(e,t,n){return new R(e,t,n)},t.bits=function(e,t,n){return new F(e,t,n)},t.seq=function(e,t,n){return new D(e,t,n)},t.union=function(e,t,n){return new Z(e,t,n)},t.unionLayoutDiscriminator=function(e,t){return new z(e,t)},t.blob=function(e,t){return new V(e,t)},t.cstr=function(e){return new K(e)},t.utf8=function(e,t){return new G(e,t)},t.constant=function(e,t){return new H(e,t)}},10792:function(e,t,n){var r=n(12307);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},92812:function(e,t,n){var r=n(12307);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},96322:function(e,t,n){"use strict";n.r(t),n.d(t,{Account:function(){return Vr},AddressLookupTableAccount:function(){return eo},AddressLookupTableInstruction:function(){return Ga},AddressLookupTableProgram:function(){return Ha},Authorized:function(){return is},BLOCKHASH_CACHE_TIMEOUT_MS:function(){return ao},BPF_LOADER_DEPRECATED_PROGRAM_ID:function(){return Kr},BPF_LOADER_PROGRAM_ID:function(){return Fi},BpfLoader:function(){return ji},COMPUTE_BUDGET_INSTRUCTION_LAYOUTS:function(){return Ya},ComputeBudgetInstruction:function(){return qa},ComputeBudgetProgram:function(){return Xa},Connection:function(){return Wa},Ed25519Program:function(){return $a},Enum:function(){return Zr},EpochSchedule:function(){return qi},FeeCalculatorLayout:function(){return Bi},Keypair:function(){return Va},LAMPORTS_PER_SOL:function(){return Ts},LOOKUP_TABLE_INSTRUCTION_LAYOUTS:function(){return Ka},Loader:function(){return Ui},Lockup:function(){return os},MAX_SEED_LENGTH:function(){return Ur},Message:function(){return ui},MessageAccountKeys:function(){return $r},MessageV0:function(){return ci},NONCE_ACCOUNT_LENGTH:function(){return Oi},NonceAccount:function(){return Di},PACKET_DATA_SIZE:function(){return Gr},PUBLIC_KEY_LENGTH:function(){return Fr},PublicKey:function(){return Wr},SIGNATURE_LENGTH_IN_BYTES:function(){return qr},SOLANA_SCHEMA:function(){return Nr},STAKE_CONFIG_ID:function(){return rs},STAKE_INSTRUCTION_LAYOUTS:function(){return ss},SYSTEM_INSTRUCTION_LAYOUTS:function(){return zi},SYSVAR_CLOCK_PUBKEY:function(){return mi},SYSVAR_EPOCH_SCHEDULE_PUBKEY:function(){return gi},SYSVAR_INSTRUCTIONS_PUBKEY:function(){return vi},SYSVAR_RECENT_BLOCKHASHES_PUBKEY:function(){return bi},SYSVAR_RENT_PUBKEY:function(){return _i},SYSVAR_REWARDS_PUBKEY:function(){return wi},SYSVAR_SLOT_HASHES_PUBKEY:function(){return xi},SYSVAR_SLOT_HISTORY_PUBKEY:function(){return ki},SYSVAR_STAKE_HISTORY_PUBKEY:function(){return Ai},Secp256k1Program:function(){return ns},SendTransactionError:function(){return Yi},SolanaJSONRPCError:function(){return Qi},SolanaJSONRPCErrorCode:function(){return Xi},StakeAuthorizationLayout:function(){return us},StakeInstruction:function(){return as},StakeProgram:function(){return cs},Struct:function(){return zr},SystemInstruction:function(){return Li},SystemProgram:function(){return Zi},Transaction:function(){return di},TransactionExpiredBlockheightExceededError:function(){return Yr},TransactionExpiredNonceInvalidError:function(){return Qr},TransactionExpiredTimeoutError:function(){return Xr},TransactionInstruction:function(){return hi},TransactionMessage:function(){return pi},TransactionStatus:function(){return ai},VALIDATOR_INFO_KEY:function(){return ys},VERSION_PREFIX_MASK:function(){return Hr},VOTE_PROGRAM_ID:function(){return vs},ValidatorInfo:function(){return gs},VersionedMessage:function(){return li},VersionedTransaction:function(){return yi},VoteAccount:function(){return _s},VoteAuthorizationLayout:function(){return ds},VoteInit:function(){return ls},VoteInstruction:function(){return fs},VoteProgram:function(){return ps},clusterApiUrl:function(){return Es},sendAndConfirmRawTransaction:function(){return Is},sendAndConfirmTransaction:function(){return Ei}});var r=n(44925),i=n(11752),o=n(61120),a=n(1413),s=n(29439),u=n(93433),c=n(37762),l=n(98737),f=n(74165),h=n(15861),d=n(60136),p=n(29388),y=n(15671),m=n(43144),g=n(38443);function v(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function b(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new TypeError("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}var _={number:v,bool:function(e){if("boolean"!==typeof e)throw new Error("Expected boolean, not ".concat(e))},bytes:b,hash:function(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");v(e.outputLen),v(e.blockLen)},exists:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},output:function(e,t){b(e);var n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}},w=_,x=("object"===typeof self&&"crypto"in self&&self.crypto,function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}),k=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},A=function(e,t){return e<<32-t|e>>>t};if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function E(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new TypeError("utf8ToBytes expected string, got ".concat(typeof e));return(new TextEncoder).encode(e)}(e)),!(e instanceof Uint8Array))throw new TypeError("Expected input type is Uint8Array (got ".concat(typeof e,")"));return e}var I=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,[{key:"clone",value:function(){return this._cloneInto()}}]),e}();function S(e){var t=function(t){return e().update(E(t)).digest()},n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(){return e()},t}var T=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i,o){var a;return(0,y.Z)(this,n),(a=t.call(this)).blockLen=e,a.outputLen=r,a.padOffset=i,a.isLE=o,a.finished=!1,a.length=0,a.pos=0,a.destroyed=!1,a.buffer=new Uint8Array(e),a.view=k(a.buffer),a}return(0,m.Z)(n,[{key:"update",value:function(e){w.exists(this);for(var t=this.view,n=this.buffer,r=this.blockLen,i=(e=E(e)).length,o=0;o<i;){var a=Math.min(r-this.pos,i-o);if(a!==r)n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(t,0),this.pos=0);else for(var s=k(e);r<=i-o;o+=r)this.process(s,o)}return this.length+=e.length,this.roundClean(),this}},{key:"digestInto",value:function(e){w.exists(this),w.output(e,this),this.finished=!0;var t=this.buffer,n=this.view,r=this.blockLen,i=this.isLE,o=this.pos;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>r-o&&(this.process(n,0),o=0);for(var a=o;a<r;a++)t[a]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);var i=BigInt(32),o=BigInt(4294967295),a=Number(n>>i&o),s=Number(n&o),u=r?4:0,c=r?0:4;e.setUint32(t+u,a,r),e.setUint32(t+c,s,r)}(n,r-8,BigInt(8*this.length),i),this.process(n,0);var s=k(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");var c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(var f=0;f<c;f++)s.setUint32(4*f,l[f],i)}},{key:"digest",value:function(){var e=this.buffer,t=this.outputLen;this.digestInto(e);var n=e.slice(0,t);return this.destroy(),n}},{key:"_cloneInto",value:function(e){var t;e||(e=new this.constructor),(t=e).set.apply(t,(0,u.Z)(this.get()));var n=this.blockLen,r=this.buffer,i=this.length,o=this.finished,a=this.destroyed,s=this.pos;return e.length=i,e.pos=s,e.finished=o,e.destroyed=a,i%n&&e.buffer.set(r),e}}]),n}(I),M=BigInt(Math.pow(2,32)-1),P=BigInt(32);function B(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&M),l:Number(e>>P&M)}:{h:0|Number(e>>P&M),l:0|Number(e&M)}}var C={fromBig:B,split:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length),i=0;i<e.length;i++){var o=B(e[i],t),a=[o.h,o.l];n[i]=a[0],r[i]=a[1]}return[n,r]},toBig:function(e,t){return BigInt(e>>>0)<<P|BigInt(t>>>0)},shrSH:function(e,t,n){return e>>>n},shrSL:function(e,t,n){return e<<32-n|t>>>n},rotrSH:function(e,t,n){return e>>>n|t<<32-n},rotrSL:function(e,t,n){return e<<32-n|t>>>n},rotrBH:function(e,t,n){return e<<64-n|t>>>n-32},rotrBL:function(e,t,n){return e>>>n-32|t<<64-n},rotr32H:function(e,t){return t},rotr32L:function(e,t){return e},rotlSH:function(e,t,n){return e<<n|t>>>32-n},rotlSL:function(e,t,n){return t<<n|e>>>32-n},rotlBH:function(e,t,n){return t<<n-32|e>>>64-n},rotlBL:function(e,t,n){return e<<n-32|t>>>64-n},add:function(e,t,n,r){var i=(t>>>0)+(r>>>0);return{h:e+n+(i/Math.pow(2,32)|0)|0,l:0|i}},add3L:function(e,t,n){return(e>>>0)+(t>>>0)+(n>>>0)},add3H:function(e,t,n,r){return t+n+r+(e/Math.pow(2,32)|0)|0},add4L:function(e,t,n,r){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)},add4H:function(e,t,n,r,i){return t+n+r+i+(e/Math.pow(2,32)|0)|0},add5H:function(e,t,n,r,i,o){return t+n+r+i+o+(e/Math.pow(2,32)|0)|0},add5L:function(e,t,n,r,i){return(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0)}},O=C,D=O.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((function(e){return BigInt(e)}))),R=(0,s.Z)(D,2),L=R[0],z=R[1],Z=new Uint32Array(80),N=new Uint32Array(80),U=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this,128,64,16,!1)).Ah=1779033703,e.Al=-205731576,e.Bh=-1150833019,e.Bl=-2067093701,e.Ch=1013904242,e.Cl=-23791573,e.Dh=-1521486534,e.Dl=1595750129,e.Eh=1359893119,e.El=-1377402159,e.Fh=-1694144372,e.Fl=725511199,e.Gh=528734635,e.Gl=-79577749,e.Hh=1541459225,e.Hl=327033209,e}return(0,m.Z)(n,[{key:"get",value:function(){return[this.Ah,this.Al,this.Bh,this.Bl,this.Ch,this.Cl,this.Dh,this.Dl,this.Eh,this.El,this.Fh,this.Fl,this.Gh,this.Gl,this.Hh,this.Hl]}},{key:"set",value:function(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|i,this.Cl=0|o,this.Dh=0|a,this.Dl=0|s,this.Eh=0|u,this.El=0|c,this.Fh=0|l,this.Fl=0|f,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Z[n]=e.getUint32(t),N[n]=e.getUint32(t+=4);for(var r=16;r<80;r++){var i=0|Z[r-15],o=0|N[r-15],a=O.rotrSH(i,o,1)^O.rotrSH(i,o,8)^O.shrSH(i,o,7),s=O.rotrSL(i,o,1)^O.rotrSL(i,o,8)^O.shrSL(i,o,7),u=0|Z[r-2],c=0|N[r-2],l=O.rotrSH(u,c,19)^O.rotrBH(u,c,61)^O.shrSH(u,c,6),f=O.rotrSL(u,c,19)^O.rotrBL(u,c,61)^O.shrSL(u,c,6),h=O.add4L(s,f,N[r-7],N[r-16]),d=O.add4H(h,a,l,Z[r-7],Z[r-16]);Z[r]=0|d,N[r]=0|h}for(var p=this.Ah,y=this.Al,m=this.Bh,g=this.Bl,v=this.Ch,b=this.Cl,_=this.Dh,w=this.Dl,x=this.Eh,k=this.El,A=this.Fh,E=this.Fl,I=this.Gh,S=this.Gl,T=this.Hh,M=this.Hl,P=0;P<80;P++){var B=O.rotrSH(x,k,14)^O.rotrSH(x,k,18)^O.rotrBH(x,k,41),C=O.rotrSL(x,k,14)^O.rotrSL(x,k,18)^O.rotrBL(x,k,41),D=x&A^~x&I,R=k&E^~k&S,U=O.add5L(M,C,R,z[P],N[P]),F=O.add5H(U,T,B,D,L[P],Z[P]),j=0|U,W=O.rotrSH(p,y,28)^O.rotrBH(p,y,34)^O.rotrBH(p,y,39),V=O.rotrSL(p,y,28)^O.rotrBL(p,y,34)^O.rotrBL(p,y,39),K=p&m^p&v^m&v,G=y&g^y&b^g&b;T=0|I,M=0|S,I=0|A,S=0|E,A=0|x,E=0|k;var H=O.add(0|_,0|w,0|F,0|j);x=H.h,k=H.l,_=0|v,w=0|b,v=0|m,b=0|g,m=0|p,g=0|y;var q=O.add3L(j,V,G);p=O.add3H(q,F,W,K),y=0|q}var Y=O.add(0|this.Ah,0|this.Al,0|p,0|y);p=Y.h,y=Y.l;var X=O.add(0|this.Bh,0|this.Bl,0|m,0|g);m=X.h,g=X.l;var Q=O.add(0|this.Ch,0|this.Cl,0|v,0|b);v=Q.h,b=Q.l;var $=O.add(0|this.Dh,0|this.Dl,0|_,0|w);_=$.h,w=$.l;var J=O.add(0|this.Eh,0|this.El,0|x,0|k);x=J.h,k=J.l;var ee=O.add(0|this.Fh,0|this.Fl,0|A,0|E);A=ee.h,E=ee.l;var te=O.add(0|this.Gh,0|this.Gl,0|I,0|S);I=te.h,S=te.l;var ne=O.add(0|this.Hh,0|this.Hl,0|T,0|M);T=ne.h,M=ne.l,this.set(p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M)}},{key:"roundClean",value:function(){Z.fill(0),N.fill(0)}},{key:"destroy",value:function(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}]),n}(T),F=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).Ah=-1942145080,e.Al=424955298,e.Bh=1944164710,e.Bl=-1982016298,e.Ch=502970286,e.Cl=855612546,e.Dh=1738396948,e.Dl=1479516111,e.Eh=258812777,e.El=2077511080,e.Fh=2011393907,e.Fl=79989058,e.Gh=1067287976,e.Gl=1780299464,e.Hh=286451373,e.Hl=-1848208735,e.outputLen=28,e}return(0,m.Z)(n)}(U),j=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).Ah=573645204,e.Al=-64227540,e.Bh=-1621794909,e.Bl=-934517566,e.Ch=596883563,e.Cl=1867755857,e.Dh=-1774684391,e.Dl=1497426621,e.Eh=-1775747358,e.El=-1467023389,e.Fh=-1101128155,e.Fl=1401305490,e.Gh=721525244,e.Gl=746961066,e.Hh=246885852,e.Hl=-2117784414,e.outputLen=32,e}return(0,m.Z)(n)}(U),W=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).Ah=-876896931,e.Al=-1056596264,e.Bh=1654270250,e.Bl=914150663,e.Ch=-1856437926,e.Cl=812702999,e.Dh=355462360,e.Dl=-150054599,e.Eh=1731405415,e.El=-4191439,e.Fh=-1900787065,e.Fl=1750603025,e.Gh=-619958771,e.Gl=1694076839,e.Hh=1203062813,e.Hl=-1090891868,e.outputLen=48,e}return(0,m.Z)(n)}(U),V=S((function(){return new U})),K=(S((function(){return new F})),S((function(){return new j})),S((function(){return new W})),n(7420)),G=n.t(K,2),H=BigInt(0),q=BigInt(1),Y=BigInt(2),X=BigInt(8),Q=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),$=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:Q,n:Q,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),J=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),ee=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),te=(BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742"),BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235")),ne=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),re=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),ie=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),oe=function(){function e(t,n,r,i){(0,y.Z)(this,e),this.x=t,this.y=n,this.z=r,this.t=i}return(0,m.Z)(e,[{key:"equals",value:function(e){se(e);var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=Ee(t*a),u=Ee(i*r),c=Ee(n*a),l=Ee(o*r);return s===u&&c===l}},{key:"negate",value:function(){return new e(Ee(-this.x),this.y,this.z,Ee(-this.t))}},{key:"double",value:function(){var t=this.x,n=this.y,r=this.z,i=$.a,o=Ee(t*t),a=Ee(n*n),s=Ee(Y*Ee(r*r)),u=Ee(i*o),c=t+n,l=Ee(Ee(c*c)-o-a),f=u+a,h=f-s,d=u-a,p=Ee(l*h),y=Ee(f*d),m=Ee(l*d);return new e(p,y,Ee(h*f),m)}},{key:"add",value:function(t){se(t);var n=this.x,r=this.y,i=this.z,o=this.t,a=t.x,s=t.y,u=t.z,c=t.t,l=Ee((r-n)*(s+a)),f=Ee((r+n)*(s-a)),h=Ee(f-l);if(h===H)return this.double();var d=Ee(i*Y*c),p=Ee(o*Y*u),y=p+d,m=f+l,g=p-d,v=Ee(y*h),b=Ee(m*g),_=Ee(y*g);return new e(v,b,Ee(h*m),_)}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"precomputeWindow",value:function(e){for(var t=1+256/e,n=[],r=this,i=r,o=0;o<t;o++){i=r,n.push(i);for(var a=1;a<Math.pow(2,e-1);a++)i=i.add(r),n.push(i);r=i.double()}return n}},{key:"wNAF",value:function(t,n){!n&&this.equals(e.BASE)&&(n=he.BASE);var r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var i=n&&fe.get(n);i||(i=this.precomputeWindow(r),n&&1!==r&&(i=e.normalizeZ(i),fe.set(n,i)));for(var o=e.ZERO,a=e.BASE,s=1+256/r,u=Math.pow(2,r-1),c=BigInt(Math.pow(2,r)-1),l=Math.pow(2,r),f=BigInt(r),h=0;h<s;h++){var d=h*u,p=Number(t&c);t>>=f,p>u&&(p-=l,t+=q);var y=d,m=d+Math.abs(p)-1,g=h%2!==0,v=p<0;0===p?a=a.add(ae(g,i[y])):o=o.add(ae(v,i[m]))}return e.normalizeZ([o,a])[0]}},{key:"multiply",value:function(e,t){return this.wNAF(Oe(e,$.l),t)}},{key:"multiplyUnsafe",value:function(t){var n=Oe(t,$.l,!1),r=e.BASE,i=e.ZERO;if(n===H)return i;if(this.equals(i)||n===q)return this;if(this.equals(r))return this.wNAF(n);for(var o=i,a=this;n>H;)n&q&&(o=o.add(a)),a=a.double(),n>>=q;return o}},{key:"isSmallOrder",value:function(){return this.multiplyUnsafe($.h).equals(e.ZERO)}},{key:"isTorsionFree",value:function(){var t=this.multiplyUnsafe($.l/Y).double();return $.l%Y&&(t=t.add(this)),t.equals(e.ZERO)}},{key:"toAffine",value:function(t){var n=this.x,r=this.y,i=this.z,o=this.equals(e.ZERO);null==t&&(t=o?X:Ie(i));var a=Ee(n*t),s=Ee(r*t),u=Ee(i*t);if(o)return he.ZERO;if(u!==q)throw new Error("invZ was invalid");return new he(a,s)}},{key:"fromRistrettoBytes",value:function(){ce()}},{key:"toRistrettoBytes",value:function(){ce()}},{key:"fromRistrettoHash",value:function(){ce()}}],[{key:"fromAffine",value:function(t){if(!(t instanceof he))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(he.ZERO)?e.ZERO:new e(t.x,t.y,q,Ee(t.x*t.y))}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.P,n=new Array(e.length),r=Ie(e.reduce((function(e,r,i){return r===H?e:(n[i]=e,Ee(e*r,t))}),q),t);return e.reduceRight((function(e,r,i){return r===H?e:(n[i]=Ee(e*n[i],t),Ee(e*r,t))}),r),n}(e.map((function(e){return e.z})));return e.map((function(e,n){return e.toAffine(t[n])}))}},{key:"normalizeZ",value:function(e){return this.toAffineBatch(e).map(this.fromAffine)}}]),e}();function ae(e,t){var n=t.negate();return e?n:t}function se(e){if(!(e instanceof oe))throw new TypeError("ExtendedPoint expected")}function ue(e){if(!(e instanceof le))throw new TypeError("RistrettoPoint expected")}function ce(){throw new Error("Legacy method: switch to RistrettoPoint")}oe.BASE=new oe($.Gx,$.Gy,q,Ee($.Gx*$.Gy)),oe.ZERO=new oe(H,q,q,H);var le=function(){function e(t){(0,y.Z)(this,e),this.ep=t}return(0,m.Z)(e,[{key:"toRawBytes",value:function(){var e,t=this.ep,n=t.x,r=t.y,i=t.z,o=t.t,a=Ee(Ee(i+r)*Ee(i-r)),s=Ee(n*r),u=Ee(s*s),c=Pe(Ee(a*u)).value,l=Ee(c*a),f=Ee(c*s),h=Ee(l*f*o);if(_e(o*h)){var d=Ee(r*ee),p=Ee(n*ee);n=d,r=p,e=Ee(l*ne)}else e=f;_e(n*h)&&(r=Ee(-r));var y=Ee((i-r)*e);return _e(y)&&(y=Ee(-y)),be(y)}},{key:"toHex",value:function(){return me(this.toRawBytes())}},{key:"toString",value:function(){return this.toHex()}},{key:"equals",value:function(e){ue(e);var t=this.ep,n=e.ep,r=Ee(t.x*n.y)===Ee(t.y*n.x),i=Ee(t.y*n.y)===Ee(t.x*n.x);return r||i}},{key:"add",value:function(t){return ue(t),new e(this.ep.add(t.ep))}},{key:"subtract",value:function(t){return ue(t),new e(this.ep.subtract(t.ep))}},{key:"multiply",value:function(t){return new e(this.ep.multiply(t))}},{key:"multiplyUnsafe",value:function(t){return new e(this.ep.multiplyUnsafe(t))}}],[{key:"calcElligatorRistrettoMap",value:function(e){var t=$.d,n=Ee(ee*e*e),r=Ee((n+q)*re),i=BigInt(-1),o=Ee((i-t*n)*Ee(n+t)),a=Me(r,o),s=a.isValid,u=a.value,c=Ee(u*e);_e(c)||(c=Ee(-c)),s||(u=c),s||(i=n);var l=Ee(i*(n-q)*ie-o),f=u*u,h=Ee((u+u)*o),d=Ee(l*te),p=Ee(q-f),y=Ee(q+f);return new oe(Ee(h*y),Ee(p*d),Ee(d*y),Ee(h*p))}},{key:"hashToCurve",value:function(t){var n=Ae((t=Ce(t,64)).slice(0,32)),r=this.calcElligatorRistrettoMap(n),i=Ae(t.slice(32,64)),o=this.calcElligatorRistrettoMap(i);return new e(r.add(o))}},{key:"fromHex",value:function(t){t=Ce(t,32);var n=$.a,r=$.d,i="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=Ae(t);if(!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(be(o),t)||_e(o))throw new Error(i);var a=Ee(o*o),s=Ee(q+n*a),u=Ee(q-n*a),c=Ee(s*s),l=Ee(u*u),f=Ee(n*r*c-l),h=Pe(Ee(f*l)),d=h.isValid,p=h.value,y=Ee(p*u),m=Ee(p*y*f),g=Ee((o+o)*y);_e(g)&&(g=Ee(-g));var v=Ee(s*m),b=Ee(g*v);if(!d||_e(b)||v===H)throw new Error(i);return new e(new oe(g,v,q,b))}}]),e}();le.BASE=new le(oe.BASE),le.ZERO=new le(oe.ZERO);var fe=new WeakMap,he=function(){function e(t,n){(0,y.Z)(this,e),this.x=t,this.y=n}return(0,m.Z)(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,fe.delete(this)}},{key:"toRawBytes",value:function(){var e=be(this.y);return e[31]|=this.x&q?128:0,e}},{key:"toHex",value:function(){return me(this.toRawBytes())}},{key:"toX25519",value:function(){var e=this.y;return be(Ee((q+e)*Ie(q-e)))}},{key:"isTorsionFree",value:function(){return oe.fromAffine(this).isTorsionFree()}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(Ee(-this.x),this.y)}},{key:"add",value:function(e){return oe.fromAffine(this).add(oe.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return oe.fromAffine(this).multiply(e,this).toAffine()}}],[{key:"fromHex",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=$.d,i=$.P,o=(t=Ce(t,32)).slice();o[31]=-129&t[31];var a=we(o);if(n&&a>=i)throw new Error("Expected 0 < hex < P");if(!n&&a>=J)throw new Error("Expected 0 < hex < 2**256");var s=Ee(a*a),u=Me(Ee(s-q),Ee(r*s+q)),c=u.isValid,l=u.value;if(!c)throw new Error("Point.fromHex: invalid y coordinate");var f=(l&q)===q;return 0!==(128&t[31])!==f&&(l=Ee(-l)),new e(l,a)}},{key:"fromPrivateKey",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ze(t);case 2:return e.abrupt("return",e.sent.point);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();he.BASE=new he($.Gx,$.Gy),he.ZERO=new he(H,q);var de=function(){function e(t,n){(0,y.Z)(this,e),this.r=t,this.s=n,this.assertValidity()}return(0,m.Z)(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!(e instanceof he))throw new Error("Expected Point instance");return Oe(t,$.l,!1),this}},{key:"toRawBytes",value:function(){var e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(be(this.s),32),e}},{key:"toHex",value:function(){return me(this.toRawBytes())}}],[{key:"fromHex",value:function(t){var n=Ce(t,64);return new e(he.fromHex(n.slice(0,32),!1),we(n.slice(32,64)))}}]),e}();function pe(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Expected Uint8Array list");if(1===t.length)return t[0];for(var r=t.reduce((function(e,t){return e+t.length}),0),i=new Uint8Array(r),o=0,a=0;o<t.length;o++){var s=t[o];i.set(s,a),a+=s.length}return i}var ye=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function me(e){if(!(e instanceof Uint8Array))throw new Error("Uint8Array expected");for(var t="",n=0;n<e.length;n++)t+=ye[e[n]];return t}function ge(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex");for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++){var r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ve(e){return ge(e.toString(16).padStart(64,"0"))}function be(e){return ve(e).reverse()}function _e(e){return(Ee(e)&q)===q}function we(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+me(Uint8Array.from(e).reverse()))}var xe,ke=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Ae(e){return Ee(we(e)&ke)}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.P,n=e%t;return n>=H?n:t+n}function Ie(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.P;if(e===H||t<=H)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var n=Ee(e,t),r=t,i=H,o=q,a=q,s=H;n!==H;){var u=r/n,c=r%n,l=i-a*u,f=o-s*u;r=n,n=c,i=a,o=s,a=l,s=f}if(r!==q)throw new Error("invert: does not exist");return Ee(i,t)}function Se(e,t){for(var n=$.P,r=e;t-- >H;)r*=r,r%=n;return r}function Te(e){var t=$.P,n=BigInt(5),r=BigInt(10),i=BigInt(20),o=BigInt(40),a=BigInt(80),s=e*e%t*e%t,u=Se(s,Y)*s%t,c=Se(u,q)*e%t,l=Se(c,n)*c%t,f=Se(l,r)*l%t,h=Se(f,i)*f%t,d=Se(h,o)*h%t,p=Se(d,a)*d%t,y=Se(p,a)*d%t,m=Se(y,r)*l%t;return{pow_p_5_8:Se(m,Y)*e%t,b2:s}}function Me(e,t){var n=Ee(t*t*t),r=Ee(n*n*t),i=Ee(e*n*Te(e*r).pow_p_5_8),o=Ee(t*i*i),a=i,s=Ee(i*ee),u=o===e,c=o===Ee(-e),l=o===Ee(-e*ee);return u&&(i=a),(c||l)&&(i=s),_e(i)&&(i=Ee(-i)),{isValid:u||c,value:i}}function Pe(e){return Me(q,e)}function Be(e){return Ee(we(e),$.l)}function Ce(e,t){var n=e instanceof Uint8Array?Uint8Array.from(e):ge(e);if("number"===typeof t&&n.length!==t)throw new Error("Expected ".concat(t," bytes"));return n}function Oe(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t)throw new TypeError("Specify max value");if("number"===typeof e&&Number.isSafeInteger(e)&&(e=BigInt(e)),"bigint"===typeof e&&e<t)if(n){if(H<e)return e}else if(H<=e)return e;throw new TypeError("Expected valid scalar: 0 < scalar < max")}function De(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function Re(e){if(32!==(e="bigint"===typeof e||"number"===typeof e?ve(Oe(e,J)):Ce(e)).length)throw new Error("Expected 32 bytes");return e}function Le(e){var t=De(e.slice(0,32)),n=e.slice(32,64),r=Be(t),i=he.BASE.multiply(r),o=i.toRawBytes();return{head:t,prefix:n,scalar:r,point:i,pointBytes:o}}function ze(){if("function"!==typeof xe)throw new Error("utils.sha512Sync must be set to use sync methods");return xe.apply(void 0,arguments)}function Ze(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Le,e.next=3,Ke.sha512(Re(t));case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return Le(ze(Re(e)))}function Fe(e,t,n){t=Ce(t),n instanceof he||(n=he.fromHex(n,!1));var r=e instanceof de?e.assertValidity():de.fromHex(e),i=r.r,o=r.s;return{r:i,s:o,SB:oe.BASE.multiplyUnsafe(o),pub:n,msg:t}}function je(e,t,n,r){var i=Be(r),o=oe.fromAffine(e).multiplyUnsafe(i);return oe.fromAffine(t).add(o).subtract(n).multiplyUnsafe($.h).equals(oe.ZERO)}var We={getExtendedPublicKey:Ue,getPublicKey:function(e){return Ue(e).pointBytes},sign:function(e,t){e=Ce(e);var n=Ue(t),r=n.prefix,i=n.scalar,o=n.pointBytes,a=Be(ze(r,e)),s=he.BASE.multiply(a),u=Ee(a+Be(ze(s.toRawBytes(),o,e))*i,$.l);return new de(s,u).toRawBytes()},verify:function(e,t,n){var r=Fe(e,t,n),i=r.r,o=r.SB,a=r.msg,s=r.pub,u=ze(i.toRawBytes(),s.toRawBytes(),a);return je(s,i,o,u)}};he.BASE._setWindowSize(8);var Ve={node:G,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},Ke={bytesToHex:me,hexToBytes:ge,concatBytes:pe,getExtendedPublicKey:Ze,mod:Ee,invert:Ie,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:function(e){if((e=Ce(e)).length<40||e.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return Ee(we(e),$.l-q)+q},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(Ve.web)return Ve.web.getRandomValues(new Uint8Array(e));if(Ve.node){var t=Ve.node.randomBytes;return new Uint8Array(t(e).buffer)}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return Ke.randomBytes(32)},sha512:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=pe.apply(void 0,r),!Ve.web){e.next=8;break}return e.next=4,Ve.web.subtle.digest("SHA-512",t.buffer);case 4:return n=e.sent,e.abrupt("return",new Uint8Array(n));case 8:if(!Ve.node){e.next=12;break}return e.abrupt("return",Uint8Array.from(Ve.node.createHash("sha512").update(t).digest()));case 12:throw new Error("The environment doesn't have sha512 function");case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:he.BASE,n=t.equals(he.BASE)?t:new he(t.x,t.y);return n._setWindowSize(e),n.multiply(Y),n},sha512Sync:void 0};Object.defineProperties(Ke,{sha512Sync:{configurable:!1,get:function(){return xe},set:function(e){xe||(xe=e)}}});var Ge=n(80518),He=n.n(Ge),qe=n(87189),Ye=n.n(qe),Xe=function(e,t,n){return e&t^e&n^t&n},Qe=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),$e=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Je=new Uint32Array(64),et=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this,64,32,8,!1)).A=0|$e[0],e.B=0|$e[1],e.C=0|$e[2],e.D=0|$e[3],e.E=0|$e[4],e.F=0|$e[5],e.G=0|$e[6],e.H=0|$e[7],e}return(0,m.Z)(n,[{key:"get",value:function(){return[this.A,this.B,this.C,this.D,this.E,this.F,this.G,this.H]}},{key:"set",value:function(e,t,n,r,i,o,a,s){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|i,this.F=0|o,this.G=0|a,this.H=0|s}},{key:"process",value:function(e,t){for(var n=0;n<16;n++,t+=4)Je[n]=e.getUint32(t,!1);for(var r=16;r<64;r++){var i=Je[r-15],o=Je[r-2],a=A(i,7)^A(i,18)^i>>>3,s=A(o,17)^A(o,19)^o>>>10;Je[r]=s+Je[r-7]+a+Je[r-16]|0}for(var u,c=this.A,l=this.B,f=this.C,h=this.D,d=this.E,p=this.F,y=this.G,m=this.H,g=0;g<64;g++){var v=m+(A(d,6)^A(d,11)^A(d,25))+((u=d)&p^~u&y)+Qe[g]+Je[g]|0,b=(A(c,2)^A(c,13)^A(c,22))+Xe(c,l,f)|0;m=y,y=p,p=d,d=h+v|0,h=f,f=l,l=c,c=v+b|0}c=c+this.A|0,l=l+this.B|0,f=f+this.C|0,h=h+this.D|0,d=d+this.E|0,p=p+this.F|0,y=y+this.G|0,m=m+this.H|0,this.set(c,l,f,h,d,p,y,m)}},{key:"roundClean",value:function(){Je.fill(0)}},{key:"destroy",value:function(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}]),n}(T),tt=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,y.Z)(this,n),(e=t.call(this)).A=-1056596264,e.B=914150663,e.C=812702999,e.D=-150054599,e.E=-4191439,e.F=1750603025,e.G=1694076839,e.H=-1090891868,e.outputLen=28,e}return(0,m.Z)(n)}(et),nt=S((function(){return new et})),rt=(S((function(){return new tt})),n(35127)),it=n(62576),ot=n(86070),at=n(83878),st=n(59199),ut=n(40181),ct=n(25267);var lt=n(97326),ft=["message"],ht=(0,f.Z)().mark(vt),dt=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,i){var o,a;(0,y.Z)(this,n);var s=e.message,c=(0,r.Z)(e,ft),l=e.path,f=0===l.length?s:"At path: "+l.join(".")+" -- "+s;return o=t.call(this,f),Object.assign((0,lt.Z)(o),c),o.name=o.constructor.name,o.failures=function(){var t;return null!=(t=a)?t:a=[e].concat((0,u.Z)(i()))},o}return(0,m.Z)(n)}((0,l.Z)(TypeError));function pt(e){return yt(e)&&"function"===typeof e[Symbol.iterator]}function yt(e){return"object"===typeof e&&null!=e}function mt(e){return"string"===typeof e?JSON.stringify(e):""+e}function gt(e,t,n,r){if(!0!==e){!1===e?e={}:"string"===typeof e&&(e={message:e});var i=t.path,o=t.branch,s=n.type,u=e,c=u.refinement,l=u.message,f=void 0===l?"Expected a value of type `"+s+"`"+(c?" with refinement `"+c+"`":"")+", but received: `"+mt(r)+"`":l;return(0,a.Z)((0,a.Z)({value:r,type:s,refinement:c,key:i[i.length-1],path:i,branch:o},e),{},{message:f})}}function vt(e,t,n,r){var i,o,a,s;return(0,f.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:pt(e)||(e=[e]),i=(0,c.Z)(e),u.prev=2,i.s();case 4:if((o=i.n()).done){u.next=12;break}if(a=o.value,!(s=gt(a,t,n,r))){u.next=10;break}return u.next=10,s;case 10:u.next=4;break;case 12:u.next=17;break;case 14:u.prev=14,u.t0=u.catch(2),i.e(u.t0);case 17:return u.prev=17,i.f(),u.finish(17);case 20:case"end":return u.stop()}}),ht,null,[[2,14,17,20]])}function bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,f.Z)().mark((function r(){var i,o,a,l,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P,B,C,O,D;return(0,f.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=n.path,o=void 0===i?[]:i,a=n.branch,l=void 0===a?[e]:a,h=n.coerce,d=void 0!==h&&h,p=n.mask,y=void 0!==p&&p,m={path:o,branch:l},d&&(e=t.coercer(e,m),y&&"type"!==t.type&&yt(t.schema)&&yt(e)&&!Array.isArray(e)))for(g in e)void 0===t.schema[g]&&delete e[g];v=!0,b=(0,c.Z)(t.validator(e,m)),r.prev=5,b.s();case 7:if((_=b.n()).done){r.next=14;break}return w=_.value,v=!1,r.next=12,[w,void 0];case 12:r.next=7;break;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r.catch(5),b.e(r.t0);case 19:return r.prev=19,b.f(),r.finish(19);case 22:x=(0,c.Z)(t.entries(e,m)),r.prev=23,x.s();case 25:if((k=x.n()).done){r.next=52;break}A=(0,s.Z)(k.value,3),E=A[0],I=A[1],S=A[2],T=bt(I,S,{path:void 0===E?o:[].concat((0,u.Z)(o),[E]),branch:void 0===E?l:[].concat((0,u.Z)(l),[I]),coerce:d,mask:y}),M=(0,c.Z)(T),r.prev=29,M.s();case 31:if((P=M.n()).done){r.next=42;break}if(!(B=P.value)[0]){r.next=39;break}return v=!1,r.next=37,[B[0],void 0];case 37:r.next=40;break;case 39:d&&(I=B[1],void 0===E?e=I:e instanceof Map?e.set(E,I):e instanceof Set?e.add(I):yt(e)&&(e[E]=I));case 40:r.next=31;break;case 42:r.next=47;break;case 44:r.prev=44,r.t1=r.catch(29),M.e(r.t1);case 47:return r.prev=47,M.f(),r.finish(47);case 50:r.next=25;break;case 52:r.next=57;break;case 54:r.prev=54,r.t2=r.catch(23),x.e(r.t2);case 57:return r.prev=57,x.f(),r.finish(57);case 60:if(!v){r.next=79;break}C=(0,c.Z)(t.refiner(e,m)),r.prev=62,C.s();case 64:if((O=C.n()).done){r.next=71;break}return D=O.value,v=!1,r.next=69,[D,void 0];case 69:r.next=64;break;case 71:r.next=76;break;case 73:r.prev=73,r.t3=r.catch(62),C.e(r.t3);case 76:return r.prev=76,C.f(),r.finish(76);case 79:if(!v){r.next=82;break}return r.next=82,[void 0,e];case 82:case"end":return r.stop()}}),r,null,[[5,16,19,22],[23,54,57,60],[29,44,47,50],[62,73,76,79]])}))()}var _t=function(){function e(t){var n=this;(0,y.Z)(this,e);var r=t.type,i=t.schema,o=t.validator,a=t.refiner,s=t.coercer,u=void 0===s?function(e){return e}:s,c=t.entries,l=void 0===c?(0,f.Z)().mark((function e(){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})):c;this.type=r,this.schema=i,this.entries=l,this.coercer=u,this.validator=o?function(e,t){return vt(o(e,t),t,n,e)}:function(){return[]},this.refiner=a?function(e,t){return vt(a(e,t),t,n,e)}:function(){return[]}}return(0,m.Z)(e,[{key:"assert",value:function(e){return wt(e,this)}},{key:"create",value:function(e){return xt(e,this)}},{key:"is",value:function(e){return kt(e,this)}},{key:"mask",value:function(e){return function(e,t){var n=At(e,t,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(e,this)}},{key:"validate",value:function(e){return At(e,this,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}}]),e}();function wt(e,t){var n=At(e,t);if(n[0])throw n[0]}function xt(e,t){var n=At(e,t,{coerce:!0});if(n[0])throw n[0];return n[1]}function kt(e,t){return!At(e,t)[0]}function At(e,t){var n=bt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),r=function(e){var t=e.next(),n=t.done,r=t.value;return n?void 0:r}(n);if(r[0]){var i=new dt(r[0],(0,f.Z)().mark((function e(){var t,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,c.Z)(n),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=10;break}if(!(i=r.value)[0]){e.next=8;break}return e.next=8,i[0];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[1,12,15,18]])})));return[i,void 0]}return[void 0,r[1]]}function Et(e,t){return new _t({type:e,schema:null,validator:t})}function It(e){return new _t({type:"array",schema:e,entries:(0,f.Z)().mark((function t(n){var r,i,o,a,u;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e||!Array.isArray(n)){t.next=18;break}r=(0,c.Z)(n.entries()),t.prev=2,r.s();case 4:if((i=r.n()).done){t.next=10;break}return o=(0,s.Z)(i.value,2),a=o[0],u=o[1],t.next=8,[a,u,e];case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,12,15,18]])})),coercer:function(e){return Array.isArray(e)?e.slice():e},validator:function(e){return Array.isArray(e)||"Expected an array value, but received: "+mt(e)}})}function St(){return Et("boolean",(function(e){return"boolean"===typeof e}))}function Tt(e){return Et("instance",(function(t){return t instanceof e||"Expected a `"+e.name+"` instance, but received: "+mt(t)}))}function Mt(e){var t=mt(e),n=typeof e;return new _t({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:function(n){return n===e||"Expected the literal `"+t+"`, but received: "+mt(n)}})}function Pt(){return Et("never",(function(){return!1}))}function Bt(e){return new _t((0,a.Z)((0,a.Z)({},e),{},{validator:function(t,n){return null===t||e.validator(t,n)},refiner:function(t,n){return null===t||e.refiner(t,n)}}))}function Ct(){return Et("number",(function(e){return"number"===typeof e&&!isNaN(e)||"Expected a number, but received: "+mt(e)}))}function Ot(e){return new _t((0,a.Z)((0,a.Z)({},e),{},{validator:function(t,n){return void 0===t||e.validator(t,n)},refiner:function(t,n){return void 0===t||e.refiner(t,n)}}))}function Dt(e,t){return new _t({type:"record",schema:null,entries:(0,f.Z)().mark((function n(r){var i,o;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!yt(r)){n.next=11;break}n.t0=(0,f.Z)().keys(r);case 2:if((n.t1=n.t0()).done){n.next=11;break}return i=n.t1.value,o=r[i],n.next=7,[i,i,e];case 7:return n.next=9,[i,o,t];case 9:n.next=2;break;case 11:case"end":return n.stop()}}),n)})),validator:function(e){return yt(e)||"Expected an object, but received: "+mt(e)}})}function Rt(){return Et("string",(function(e){return"string"===typeof e||"Expected a string, but received: "+mt(e)}))}function Lt(e){var t=Pt();return new _t({type:"tuple",schema:null,entries:(0,f.Z)().mark((function n(r){var i,o;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Array.isArray(r)){n.next=9;break}i=Math.max(e.length,r.length),o=0;case 3:if(!(o<i)){n.next=9;break}return n.next=6,[o,r[o],e[o]||t];case 6:o++,n.next=3;break;case 9:case"end":return n.stop()}}),n)})),validator:function(e){return Array.isArray(e)||"Expected an array, but received: "+mt(e)}})}function zt(e){var t=Object.keys(e);return new _t({type:"type",schema:e,entries:(0,f.Z)().mark((function n(r){var i,o,a;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!yt(r)){n.next=9;break}i=0,o=t;case 2:if(!(i<o.length)){n.next=9;break}return a=o[i],n.next=6,[a,r[a],e[a]];case 6:i++,n.next=2;break;case 9:case"end":return n.stop()}}),n)})),validator:function(e){return yt(e)||"Expected an object, but received: "+mt(e)}})}function Zt(e){var t=e.map((function(e){return e.type})).join(" | ");return new _t({type:"union",schema:null,validator:function(n,r){var i,o,a=[],u=(0,c.Z)(e);try{for(u.s();!(i=u.n()).done;){var l=bt(n,i.value,r),f=(o=l,(0,at.Z)(o)||(0,st.Z)(o)||(0,ut.Z)(o)||(0,ct.Z)()).slice(0);if(!(0,s.Z)(f,1)[0][0])return[];var h,d=(0,c.Z)(f);try{for(d.s();!(h=d.n()).done;){var p=(0,s.Z)(h.value,1)[0];p&&a.push(p)}}catch(y){d.e(y)}finally{d.f()}}}catch(y){u.e(y)}finally{u.f()}return["Expected the value to satisfy a union of `"+t+"`, but received: "+mt(n)].concat(a)}})}function Nt(){return Et("unknown",(function(){return!0}))}function Ut(e,t,n){return new _t((0,a.Z)((0,a.Z)({},e),{},{coercer:function(r,i){return kt(r,t)?e.coercer(n(r,i),i):e.coercer(r,i)}}))}for(var Ft=n(29976),jt=n.n(Ft),Wt=n(14641),Vt=n(55421),Kt=[],Gt=[],Ht=[],qt=BigInt(0),Yt=BigInt(1),Xt=BigInt(2),Qt=BigInt(7),$t=BigInt(256),Jt=BigInt(113),en=0,tn=Yt,nn=1,rn=0;en<24;en++){var on=[rn,(2*nn+3*rn)%5];nn=on[0],rn=on[1],Kt.push(2*(5*rn+nn)),Gt.push((en+1)*(en+2)/2%64);for(var an=qt,sn=0;sn<7;sn++)(tn=(tn<<Yt^(tn>>Qt)*Jt)%$t)&Xt&&(an^=Yt<<(Yt<<BigInt(sn))-Yt);Ht.push(an)}var un=O.split(Ht,!0),cn=(0,s.Z)(un,2),ln=cn[0],fn=cn[1],hn=function(e,t,n){return n>32?O.rotlBH(e,t,n):O.rotlSH(e,t,n)},dn=function(e,t,n){return n>32?O.rotlBL(e,t,n):O.rotlSL(e,t,n)};var pn=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if((0,y.Z)(this,n),(o=t.call(this)).blockLen=e,o.suffix=r,o.outputLen=i,o.enableXOF=a,o.rounds=s,o.pos=0,o.posOut=0,o.finished=!1,o.destroyed=!1,w.number(i),0>=o.blockLen||o.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");return o.state=new Uint8Array(200),o.state32=x(o.state),o}return(0,m.Z)(n,[{key:"keccak",value:function(){!function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10),r=24-t;r<24;r++){for(var i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(var o=0;o<10;o+=2)for(var a=(o+8)%10,s=(o+2)%10,u=n[s],c=n[s+1],l=hn(u,c,1)^n[a],f=dn(u,c,1)^n[a+1],h=0;h<50;h+=10)e[o+h]^=l,e[o+h+1]^=f;for(var d=e[2],p=e[3],y=0;y<24;y++){var m=Gt[y],g=hn(d,p,m),v=dn(d,p,m),b=Kt[y];d=e[b],p=e[b+1],e[b]=g,e[b+1]=v}for(var _=0;_<50;_+=10){for(var w=0;w<10;w++)n[w]=e[_+w];for(var x=0;x<10;x++)e[_+x]^=~n[(x+2)%10]&n[(x+4)%10]}e[0]^=ln[r],e[1]^=fn[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}},{key:"update",value:function(e){w.exists(this);for(var t=this.blockLen,n=this.state,r=(e=E(e)).length,i=0;i<r;){for(var o=Math.min(t-this.pos,r-i),a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}},{key:"finish",value:function(){if(!this.finished){this.finished=!0;var e=this.state,t=this.suffix,n=this.pos,r=this.blockLen;e[n]^=t,0!==(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}}},{key:"writeInto",value:function(e){w.exists(this,!1),w.bytes(e),this.finish();for(var t=this.state,n=this.blockLen,r=0,i=e.length;r<i;){this.posOut>=n&&this.keccak();var o=Math.min(n-this.posOut,i-r);e.set(t.subarray(this.posOut,this.posOut+o),r),this.posOut+=o,r+=o}return e}},{key:"xofInto",value:function(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}},{key:"xof",value:function(e){return w.number(e),this.xofInto(new Uint8Array(e))}},{key:"digestInto",value:function(e){if(w.output(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}},{key:"digest",value:function(){return this.digestInto(new Uint8Array(this.outputLen))}},{key:"destroy",value:function(){this.destroyed=!0,this.state.fill(0)}},{key:"_cloneInto",value:function(e){var t=this.blockLen,r=this.suffix,i=this.outputLen,o=this.rounds,a=this.enableXOF;return e||(e=new n(t,r,i,a,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=r,e.outputLen=i,e.enableXOF=a,e.destroyed=this.destroyed,e}}]),n}(I),yn=function(e,t,n){return S((function(){return new pn(t,e,n)}))},mn=(yn(6,144,28),yn(6,136,32),yn(6,104,48),yn(6,72,64),yn(1,144,28),yn(1,136,32)),gn=(yn(1,104,48),yn(1,72,64),function(e,t,n){return function(e){var t=function(t,n){return e(n).update(E(t)).digest()},n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=function(t){return e(t)},t}((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new pn(t,e,void 0===r.dkLen?n:r.dkLen,!0)}))}),vn=(gn(31,168,16),gn(31,136,32),function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,y.Z)(this,n),(i=t.call(this)).finished=!1,i.destroyed=!1,w.hash(e);var o=E(r);if(i.iHash=e.create(),"function"!==typeof i.iHash.update)throw new TypeError("Expected instance of class which extends utils.Hash");i.blockLen=i.iHash.blockLen,i.outputLen=i.iHash.outputLen;var a=i.blockLen,s=new Uint8Array(a);s.set(o.length>a?e.create().update(o).digest():o);for(var u=0;u<s.length;u++)s[u]^=54;i.iHash.update(s),i.oHash=e.create();for(var c=0;c<s.length;c++)s[c]^=106;return i.oHash.update(s),s.fill(0),i}return(0,m.Z)(n,[{key:"update",value:function(e){return w.exists(this),this.iHash.update(e),this}},{key:"digestInto",value:function(e){w.exists(this),w.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}},{key:"digest",value:function(){var e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}},{key:"_cloneInto",value:function(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));var t=this.oHash,n=this.iHash,r=this.finished,i=this.destroyed,o=this.blockLen,a=this.outputLen;return e.finished=r,e.destroyed=i,e.blockLen=o,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}},{key:"destroy",value:function(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}]),n}(I)),bn=function(e,t,n){return new vn(e,t).update(n).digest()};bn.create=function(e,t){return new vn(e,t)};var _n=n(95856),wn=n.t(_n,2),xn=BigInt(0),kn=BigInt(1),An=BigInt(2),En=BigInt(3),In=BigInt(8),Sn=Object.freeze({a:xn,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:kn,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),Tn=function(e,t){return(e+t/An)/t},Mn=BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),Pn=function(e){var t=Sn.n,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-kn*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),s=Tn(o*e,t),u=Tn(-r*e,t),c=sr(e-s*n-u*i,t),l=sr(-s*r-u*o,t),f=c>a,h=l>a;if(f&&(c=t-c),h&&(l=t-l),c>a||l>a)throw new Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:f,k1:c,k2neg:h,k2:l}},Bn=32,Cn=32,On=32,Dn=Bn+1,Rn=2*Bn+1;function Ln(e){var t=Sn.a,n=Sn.b,r=sr(e*e),i=sr(r*e);return sr(i+t*e+n)}var zn=Sn.a===xn,Zn=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,m.Z)(n)}((0,l.Z)(Error));function Nn(e){if(!(e instanceof Un))throw new TypeError("JacobianPoint expected")}var Un=function(){function e(t,n,r){(0,y.Z)(this,e),this.x=t,this.y=n,this.z=r}return(0,m.Z)(e,[{key:"equals",value:function(e){Nn(e);var t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=sr(r*r),u=sr(a*a),c=sr(t*u),l=sr(i*s),f=sr(sr(n*a)*u),h=sr(sr(o*r)*s);return c===l&&f===h}},{key:"negate",value:function(){return new e(this.x,sr(-this.y),this.z)}},{key:"double",value:function(){var t=this.x,n=this.y,r=this.z,i=sr(t*t),o=sr(n*n),a=sr(o*o),s=t+o,u=sr(An*(sr(s*s)-i-a)),c=sr(En*i),l=sr(c*c),f=sr(l-An*u);return new e(f,sr(c*(u-f)-In*a),sr(An*n*r))}},{key:"add",value:function(t){Nn(t);var n=this.x,r=this.y,i=this.z,o=t.x,a=t.y,s=t.z;if(o===xn||a===xn)return this;if(n===xn||r===xn)return t;var u=sr(i*i),c=sr(s*s),l=sr(n*c),f=sr(o*u),h=sr(sr(r*s)*c),d=sr(sr(a*i)*u),p=sr(f-l),y=sr(d-h);if(p===xn)return y===xn?this.double():e.ZERO;var m=sr(p*p),g=sr(p*m),v=sr(l*m),b=sr(y*y-g-An*v);return new e(b,sr(y*(v-b)-h*g),sr(i*s*p))}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiplyUnsafe",value:function(t){var n=e.ZERO;if("bigint"===typeof t&&t===xn)return n;var r=ar(t);if(r===kn)return this;if(!zn){for(var i=n,o=this;r>xn;)r&kn&&(i=i.add(o)),o=o.double(),r>>=kn;return i}for(var a=Pn(r),s=a.k1neg,u=a.k1,c=a.k2neg,l=a.k2,f=n,h=n,d=this;u>xn||l>xn;)u&kn&&(f=f.add(d)),l&kn&&(h=h.add(d)),d=d.double(),u>>=kn,l>>=kn;return s&&(f=f.negate()),c&&(h=h.negate()),h=new e(sr(h.x*Mn),h.y,h.z),f.add(h)}},{key:"precomputeWindow",value:function(e){for(var t=zn?128/e+1:256/e+1,n=[],r=this,i=r,o=0;o<t;o++){i=r,n.push(i);for(var a=1;a<Math.pow(2,e-1);a++)i=i.add(r),n.push(i);r=i.double()}return n}},{key:"wNAF",value:function(t,n){!n&&this.equals(e.BASE)&&(n=Wn.BASE);var r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");var i=n&&jn.get(n);i||(i=this.precomputeWindow(r),n&&1!==r&&(i=e.normalizeZ(i),jn.set(n,i)));for(var o=e.ZERO,a=e.BASE,s=1+(zn?128/r:256/r),u=Math.pow(2,r-1),c=BigInt(Math.pow(2,r)-1),l=Math.pow(2,r),f=BigInt(r),h=0;h<s;h++){var d=h*u,p=Number(t&c);t>>=f,p>u&&(p-=l,t+=kn);var y=d,m=d+Math.abs(p)-1,g=h%2!==0,v=p<0;0===p?a=a.add(Fn(g,i[y])):o=o.add(Fn(v,i[m]))}return{p:o,f:a}}},{key:"multiply",value:function(t,n){var r,i,o=ar(t);if(zn){var a=Pn(o),s=a.k1neg,u=a.k1,c=a.k2neg,l=a.k2,f=this.wNAF(u,n),h=f.p,d=f.f,p=this.wNAF(l,n),y=p.p,m=p.f;h=Fn(s,h),y=new e(sr((y=Fn(c,y)).x*Mn),y.y,y.z),r=h.add(y),i=d.add(m)}else{var g=this.wNAF(o,n);r=g.p,i=g.f}return e.normalizeZ([r,i])[0]}},{key:"toAffine",value:function(t){var n=this.x,r=this.y,i=this.z,o=this.equals(e.ZERO);null==t&&(t=o?In:cr(i));var a=t,s=sr(a*a),u=sr(s*a),c=sr(n*s),l=sr(r*u),f=sr(i*a);if(o)return Wn.ZERO;if(f!==kn)throw new Error("invZ was invalid");return new Wn(c,l)}}],[{key:"fromAffine",value:function(t){if(!(t instanceof Wn))throw new TypeError("JacobianPoint#fromAffine: expected Point");return t.equals(Wn.ZERO)?e.ZERO:new e(t.x,t.y,kn)}},{key:"toAffineBatch",value:function(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn.P,n=new Array(e.length),r=cr(e.reduce((function(e,r,i){return r===xn?e:(n[i]=e,sr(e*r,t))}),kn),t);return e.reduceRight((function(e,r,i){return r===xn?e:(n[i]=sr(e*n[i],t),sr(e*r,t))}),r),n}(e.map((function(e){return e.z})));return e.map((function(e,n){return e.toAffine(t[n])}))}},{key:"normalizeZ",value:function(t){return e.toAffineBatch(t).map(e.fromAffine)}}]),e}();function Fn(e,t){var n=t.negate();return e?n:t}Un.BASE=new Un(Sn.Gx,Sn.Gy,kn),Un.ZERO=new Un(xn,kn,xn);var jn=new WeakMap,Wn=function(){function e(t,n){(0,y.Z)(this,e),this.x=t,this.y=n}return(0,m.Z)(e,[{key:"_setWindowSize",value:function(e){this._WINDOW_SIZE=e,jn.delete(this)}},{key:"hasEvenY",value:function(){return this.y%An===xn}},{key:"toRawBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return rr(this.toHex(e))}},{key:"toHex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Jn(this.x);if(e){var n=this.hasEvenY()?"02":"03";return"".concat(n).concat(t)}return"04".concat(t).concat(Jn(this.y))}},{key:"toHexX",value:function(){return this.toHex(!0).slice(2)}},{key:"toRawX",value:function(){return this.toRawBytes(!0).slice(1)}},{key:"assertValidity",value:function(){var e="Point is not on elliptic curve",t=this.x,n=this.y;if(!dr(t)||!dr(n))throw new Error(e);var r=sr(n*n);if(sr(r-Ln(t))!==xn)throw new Error(e)}},{key:"equals",value:function(e){return this.x===e.x&&this.y===e.y}},{key:"negate",value:function(){return new e(this.x,sr(-this.y))}},{key:"double",value:function(){return Un.fromAffine(this).double().toAffine()}},{key:"add",value:function(e){return Un.fromAffine(this).add(Un.fromAffine(e)).toAffine()}},{key:"subtract",value:function(e){return this.add(e.negate())}},{key:"multiply",value:function(e){return Un.fromAffine(this).multiply(e,this).toAffine()}},{key:"multiplyAndAddUnsafe",value:function(t,n,r){var i=Un.fromAffine(this),o=n===xn||n===kn||this!==e.BASE?i.multiplyUnsafe(n):i.multiply(n),a=Un.fromAffine(t).multiplyUnsafe(r),s=o.add(a);return s.equals(Un.ZERO)?void 0:s.toAffine()}}],[{key:"fromCompressedHex",value:function(t){var n=32===t.length,r=ir(n?t:t.subarray(1));if(!dr(r))throw new Error("Point is not on curve");var i=function(e){var t=Sn.P,n=BigInt(6),r=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),s=BigInt(88),u=e*e*e%t,c=u*u*e%t,l=ur(c,En)*c%t,f=ur(l,En)*c%t,h=ur(f,An)*u%t,d=ur(h,r)*h%t,p=ur(d,i)*d%t,y=ur(p,a)*p%t,m=ur(y,s)*y%t,g=ur(m,a)*p%t,v=ur(g,En)*c%t,b=ur(v,o)*d%t,_=ur(b,n)*u%t,w=ur(_,An);if(w*w%t!==e)throw new Error("Cannot find square root");return w}(Ln(r)),o=(i&kn)===kn;n?o&&(i=sr(-i)):1===(1&t[0])!==o&&(i=sr(-i));var a=new e(r,i);return a.assertValidity(),a}},{key:"fromUncompressedHex",value:function(t){var n=new e(ir(t.subarray(1,Bn+1)),ir(t.subarray(Bn+1,2*Bn+1)));return n.assertValidity(),n}},{key:"fromHex",value:function(e){var t=or(e),n=t.length,r=t[0];if(n===Bn)return this.fromCompressedHex(t);if(n===Dn&&(2===r||3===r))return this.fromCompressedHex(t);if(n===Rn&&4===r)return this.fromUncompressedHex(t);throw new Error("Point.fromHex: received invalid point. Expected 32-".concat(Dn," compressed bytes or ").concat(Rn," uncompressed bytes, not ").concat(n))}},{key:"fromPrivateKey",value:function(t){return e.BASE.multiply(yr(t))}},{key:"fromSignature",value:function(t,n,r){var i=mr(n),o=i.r,a=i.s;if(![0,1,2,3].includes(r))throw new Error("Cannot recover: invalid recovery bit");var s=lr(or(t)),u=Sn.n,c=2===r||3===r?o+u:o,l=cr(c,u),f=sr(-s*l,u),h=sr(a*l,u),d=1&r?"03":"02",p=e.fromHex(d+Jn(c)),y=e.BASE.multiplyAndAddUnsafe(p,f,h);if(!y)throw new Error("Cannot recover signature: point at infinify");return y.assertValidity(),y}}]),e}();function Vn(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function Kn(e){if(e.length<2||2!==e[0])throw new Error("Invalid signature integer tag: ".concat(Yn(e)));var t=e[1],n=e.subarray(2,t+2);if(!t||n.length!==t)throw new Error("Invalid signature integer: wrong length");if(0===n[0]&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:ir(n),left:e.subarray(t+2)}}Wn.BASE=new Wn(Sn.Gx,Sn.Gy),Wn.ZERO=new Wn(xn,xn);var Gn=function(){function e(t,n){(0,y.Z)(this,e),this.r=t,this.s=n,this.assertValidity()}return(0,m.Z)(e,[{key:"assertValidity",value:function(){var e=this.r,t=this.s;if(!hr(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!hr(t))throw new Error("Invalid Signature: s must be 0 < s < n")}},{key:"hasHighS",value:function(){var e=Sn.n>>kn;return this.s>e}},{key:"normalizeS",value:function(){return this.hasHighS()?new e(this.r,sr(-this.s,Sn.n)):this}},{key:"toDERRawBytes",value:function(){return rr(this.toDERHex())}},{key:"toDERHex",value:function(){var e=Vn(tr(this.s)),t=Vn(tr(this.r)),n=e.length/2,r=t.length/2,i=tr(n),o=tr(r),a=tr(r+n+4);return"30".concat(a,"02").concat(o).concat(t,"02").concat(i).concat(e)}},{key:"toRawBytes",value:function(){return this.toDERRawBytes()}},{key:"toHex",value:function(){return this.toDERHex()}},{key:"toCompactRawBytes",value:function(){return rr(this.toCompactHex())}},{key:"toCompactHex",value:function(){return Jn(this.r)+Jn(this.s)}}],[{key:"fromCompact",value:function(t){var n=t instanceof Uint8Array,r="Signature.fromCompact";if("string"!==typeof t&&!n)throw new TypeError("".concat(r,": Expected string or Uint8Array"));var i=n?Yn(t):t;if(128!==i.length)throw new Error("".concat(r,": Expected 64-byte hex"));return new e(nr(i.slice(0,64)),nr(i.slice(64,128)))}},{key:"fromDER",value:function(t){var n=t instanceof Uint8Array;if("string"!==typeof t&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");var r=function(e){if(e.length<2||48!=e[0])throw new Error("Invalid signature tag: ".concat(Yn(e)));if(e[1]!==e.length-2)throw new Error("Invalid signature: incorrect length");var t=Kn(e.subarray(2)),n=t.data,r=Kn(t.left),i=r.data,o=r.left;if(o.length)throw new Error("Invalid signature: left bytes after parsing: ".concat(Yn(o)));return{r:n,s:i}}(n?t:rr(t));return new e(r.r,r.s)}},{key:"fromHex",value:function(e){return this.fromDER(e)}}]),e}();function Hn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.every((function(e){return e instanceof Uint8Array})))throw new Error("Uint8Array list expected");if(1===t.length)return t[0];for(var r=t.reduce((function(e,t){return e+t.length}),0),i=new Uint8Array(r),o=0,a=0;o<t.length;o++){var s=t[o];i.set(s,a),a+=s.length}return i}var qn=Array.from({length:256},(function(e,t){return t.toString(16).padStart(2,"0")}));function Yn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t="",n=0;n<e.length;n++)t+=qn[e[n]];return t}var Xn,Qn,$n=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function Jn(e){if("bigint"!==typeof e)throw new Error("Expected bigint");if(!(xn<=e&&e<$n))throw new Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function er(e){var t=rr(Jn(e));if(32!==t.length)throw new Error("Error: expected 32 bytes");return t}function tr(e){var t=e.toString(16);return 1&t.length?"0".concat(t):t}function nr(e){if("string"!==typeof e)throw new TypeError("hexToNumber: expected string, got "+typeof e);return BigInt("0x".concat(e))}function rr(e){if("string"!==typeof e)throw new TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+e.length);for(var t=new Uint8Array(e.length/2),n=0;n<t.length;n++){var r=2*n,i=e.slice(r,r+2),o=Number.parseInt(i,16);if(Number.isNaN(o)||o<0)throw new Error("Invalid byte sequence");t[n]=o}return t}function ir(e){return nr(Yn(e))}function or(e){return e instanceof Uint8Array?Uint8Array.from(e):rr(e)}function ar(e){if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"===typeof e&&hr(e))return e;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function sr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn.P,n=e%t;return n>=xn?n:t+n}function ur(e,t){for(var n=Sn.P,r=e;t-- >xn;)r*=r,r%=n;return r}function cr(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Sn.P;if(e===xn||t<=xn)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));for(var n=sr(e,t),r=t,i=xn,o=kn,a=kn,s=xn;n!==xn;){var u=r/n,c=r%n,l=i-a*u,f=o-s*u;r=n,n=c,i=a,o=s,a=l,s=f}if(r!==kn)throw new Error("invert: does not exist");return sr(i,t)}function lr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=function(e){var t=8*e.length-8*Cn,n=ir(e);return t>0?n>>BigInt(t):n}(e);if(t)return n;var r=Sn.n;return n>=r?n-r:n}var fr=function(){function e(t,n){if((0,y.Z)(this,e),this.hashLen=t,this.qByteLen=n,"number"!==typeof t||t<2)throw new Error("hashLen must be a number");if("number"!==typeof n||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(t).fill(1),this.k=new Uint8Array(t).fill(0),this.counter=0}return(0,m.Z)(e,[{key:"hmac",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ar.hmacSha256.apply(Ar,[this.k].concat(t))}},{key:"hmacSync",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Qn.apply(void 0,[this.k].concat(t))}},{key:"checkSync",value:function(){if("function"!==typeof Qn)throw new Zn("hmacSha256Sync needs to be set")}},{key:"incr",value:function(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}},{key:"reseed",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:new Uint8Array,e.next=3,this.hmac(this.v,Uint8Array.from([0]),t);case 3:return this.k=e.sent,e.next=6,this.hmac(this.v);case 6:if(this.v=e.sent,0!==t.length){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,this.hmac(this.v,Uint8Array.from([1]),t);case 11:return this.k=e.sent,e.next=14,this.hmac(this.v);case 14:this.v=e.sent;case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"reseedSync",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Uint8Array;this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}},{key:"generate",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.incr(),t=0,n=[];case 3:if(!(t<this.qByteLen)){e.next=12;break}return e.next=6,this.hmac(this.v);case 6:this.v=e.sent,r=this.v.slice(),n.push(r),t+=this.v.length,e.next=3;break;case 12:return e.abrupt("return",Hn.apply(void 0,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"generateSync",value:function(){this.checkSync(),this.incr();for(var e=0,t=[];e<this.qByteLen;){this.v=this.hmacSync(this.v);var n=this.v.slice();t.push(n),e+=this.v.length}return Hn.apply(void 0,t)}}]),e}();function hr(e){return xn<e&&e<Sn.n}function dr(e){return xn<e&&e<Sn.P}function pr(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=Sn.n,o=lr(e,!0);if(hr(o)){var a=cr(o,i),s=Wn.BASE.multiply(o),u=sr(s.x,i);if(u!==xn){var c=sr(a*sr(t+n*u,i),i);if(c!==xn){var l=new Gn(u,c),f=(s.x===l.r?0:2)|Number(s.y&kn);return r&&l.hasHighS()&&(l=l.normalizeS(),f^=1),{sig:l,recovery:f}}}}}function yr(e){var t;if("bigint"===typeof e)t=e;else if("number"===typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"===typeof e){if(e.length!==2*Cn)throw new Error("Expected 32 bytes of private key");t=nr(e)}else{if(!(e instanceof Uint8Array))throw new TypeError("Expected valid private key");if(e.length!==Cn)throw new Error("Expected 32 bytes of private key");t=ir(e)}if(!hr(t))throw new Error("Expected private key: 0 < key < n");return t}function mr(e){if(e instanceof Gn)return e.assertValidity(),e;try{return Gn.fromDER(e)}catch(t){return Gn.fromCompact(e)}}function gr(e){return ir(e.length>Bn?e.slice(0,Bn):e)}function vr(e){var t=gr(e),n=sr(t,Sn.n);return br(n<xn?t:n)}function br(e){return er(e)}function _r(e,t,n){if(null==e)throw new Error('sign: expected valid message hash, not "'.concat(e,'"'));var r=or(e),i=yr(t),o=[br(i),vr(r)];if(null!=n){!0===n&&(n=Ar.randomBytes(Bn));var a=or(n);if(a.length!==Bn)throw new Error("sign: Expected ".concat(Bn," bytes of extra data"));o.push(a)}return{seed:Hn.apply(void 0,o),m:gr(r),d:i}}function wr(e,t){var n=e.sig,r=e.recovery,i=Object.assign({canonical:!0,der:!0},t),o=i.der,a=i.recovered,s=o?n.toDERRawBytes():n.toCompactRawBytes();return a?[s,r]:s}Wn.BASE._setWindowSize(8);var xr={node:wn,web:"object"===typeof self&&"crypto"in self?self.crypto:void 0},kr={},Ar={bytesToHex:Yn,hexToBytes:rr,concatBytes:Hn,mod:sr,invert:cr,isValidPrivateKey:function(e){try{return yr(e),!0}catch(t){return!1}},_bigintTo32Bytes:er,_normalizePrivateKey:yr,hashToPrivateKey:function(e){e=or(e);var t=Cn+8;if(e.length<t||e.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");return er(sr(ir(e),Sn.n-kn)+kn)},randomBytes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(xr.web)return xr.web.getRandomValues(new Uint8Array(e));if(xr.node){var t=xr.node.randomBytes;return Uint8Array.from(t(e))}throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:function(){return Ar.hashToPrivateKey(Ar.randomBytes(Cn+8))},precompute:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Wn.BASE,n=t===Wn.BASE?t:new Wn(t.x,t.y);return n._setWindowSize(e),n.multiply(En),n},sha256:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r,i,o,a,s=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=s.length,n=new Array(t),r=0;r<t;r++)n[r]=s[r];if(!xr.web){e.next=8;break}return e.next=4,xr.web.subtle.digest("SHA-256",Hn.apply(void 0,n));case 4:return i=e.sent,e.abrupt("return",new Uint8Array(i));case 8:if(!xr.node){e.next=15;break}return o=xr.node.createHash,a=o("sha256"),n.forEach((function(e){return a.update(e)})),e.abrupt("return",Uint8Array.from(a.digest()));case 15:throw new Error("The environment doesn't have sha256 function");case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hmacSha256:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s,u,c,l=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=l.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=l[i];if(!xr.web){e.next=12;break}return e.next=4,xr.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]);case 4:return o=e.sent,a=Hn.apply(void 0,r),e.next=8,xr.web.subtle.sign("HMAC",o,a);case 8:return s=e.sent,e.abrupt("return",new Uint8Array(s));case 12:if(!xr.node){e.next=19;break}return u=xr.node.createHmac,c=u("sha256",t),r.forEach((function(e){return c.update(e)})),e.abrupt("return",Uint8Array.from(c.digest()));case 19:throw new Error("The environment doesn't have hmac-sha256 function");case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s=arguments;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(n=kr[t])){e.next=7;break}return e.next=4,Ar.sha256(Uint8Array.from(t,(function(e){return e.charCodeAt(0)})));case 4:r=e.sent,n=Hn(r,r),kr[t]=n;case 7:for(i=s.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=s[a];return e.abrupt("return",Ar.sha256.apply(Ar,[n].concat(o)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),taggedHashSync:function(e){if("function"!==typeof Xn)throw new Zn("sha256Sync is undefined, you need to set it");var t=kr[e];if(void 0===t){var n=Xn(Uint8Array.from(e,(function(e){return e.charCodeAt(0)})));t=Hn(n,n),kr[e]=t}for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return Xn.apply(void 0,[t].concat(i))},_JacobianPoint:Un};Object.defineProperties(Ar,{sha256Sync:{configurable:!1,get:function(){return Xn},set:function(e){Xn||(Xn=e)}},hmacSha256Sync:{configurable:!1,get:function(){return Qn},set:function(e){Qn||(Qn=e)}}});var Er=["commitment"],Ir=["encoding"],Sr=["commitment"],Tr=["commitment"];Ke.sha512Sync=function(){var e;return V((e=Ke).concatBytes.apply(e,arguments))};var Mr=Ke.randomPrivateKey,Pr=function(){var e=Ke.randomPrivateKey(),t=Br(e),n=new Uint8Array(64);return n.set(e),n.set(t,32),{publicKey:t,secretKey:n}},Br=We.getPublicKey;function Cr(e){try{return he.fromHex(e,!0),!0}catch(t){return!1}}var Or,Dr=function(e,t){return We.sign(e,t.slice(0,32))},Rr=We.verify,Lr=function(e){return g.lW.isBuffer(e)?e:e instanceof Uint8Array?g.lW.from(e.buffer,e.byteOffset,e.byteLength):g.lW.from(e)},zr=function(){function e(t){(0,y.Z)(this,e),Object.assign(this,t)}return(0,m.Z)(e,[{key:"encode",value:function(){return g.lW.from((0,rt.serialize)(Nr,this))}}],[{key:"decode",value:function(e){return(0,rt.deserialize)(Nr,this,e)}},{key:"decodeUnchecked",value:function(e){return(0,rt.deserializeUnchecked)(Nr,this,e)}}]),e}(),Zr=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;if((0,y.Z)(this,n),(r=t.call(this,e)).enum="",1!==Object.keys(e).length)throw new Error("Enum can only take single value");return Object.keys(e).map((function(e){r.enum=e})),r}return(0,m.Z)(n)}(zr),Nr=new Map,Ur=32,Fr=32;var jr=1;Or=Symbol.toStringTag;var Wr=function(e,t){(0,d.Z)(r,e);var n=(0,p.Z)(r);function r(e){var t;if((0,y.Z)(this,r),(t=n.call(this,{}))._bn=void 0,function(e){return void 0!==e._bn}(e))t._bn=e._bn;else{if("string"===typeof e){var i=Ye().decode(e);if(i.length!=Fr)throw new Error("Invalid public key input");t._bn=new(He())(i)}else t._bn=new(He())(e);if(t._bn.byteLength()>Fr)throw new Error("Invalid public key input")}return t}return(0,m.Z)(r,[{key:"equals",value:function(e){return this._bn.eq(e._bn)}},{key:"toBase58",value:function(){return Ye().encode(this.toBytes())}},{key:"toJSON",value:function(){return this.toBase58()}},{key:"toBytes",value:function(){var e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}},{key:"toBuffer",value:function(){var e=this._bn.toArrayLike(g.lW);if(e.length===Fr)return e;var t=g.lW.alloc(32);return e.copy(t,32-e.length),t}},{key:t,get:function(){return"PublicKey(".concat(this.toString(),")")}},{key:"toString",value:function(){return this.toBase58()}}],[{key:"unique",value:function(){var e=new r(jr);return jr+=1,new r(e.toBuffer())}},{key:"createWithSeed",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,i){var o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.lW.concat([t.toBuffer(),g.lW.from(n),i.toBuffer()]),a=nt(o),e.abrupt("return",new r(a));case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"createProgramAddressSync",value:function(e,t){var n=g.lW.alloc(0);e.forEach((function(e){if(e.length>Ur)throw new TypeError("Max seed length exceeded");n=g.lW.concat([n,Lr(e)])})),n=g.lW.concat([n,t.toBuffer(),g.lW.from("ProgramDerivedAddress")]);var i=nt(n);if(Cr(i))throw new Error("Invalid seeds, address must fall off the curve");return new r(i)}},{key:"createProgramAddress",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createProgramAddressSync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"findProgramAddressSync",value:function(e,t){for(var n,r=255;0!=r;){try{var i=e.concat(g.lW.from([r]));n=this.createProgramAddressSync(i,t)}catch(o){if(o instanceof TypeError)throw o;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}},{key:"findProgramAddress",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.findProgramAddressSync(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"isOnCurve",value:function(e){return Cr(new r(e).toBytes())}}]),r}(zr,Or);Wr.default=new Wr("11111111111111111111111111111111"),Nr.set(Wr,{kind:"struct",fields:[["_bn","u256"]]});var Vr=function(){function e(t){if((0,y.Z)(this,e),this._publicKey=void 0,this._secretKey=void 0,t){var n=Lr(t);if(64!==t.length)throw new Error("bad secret key size");this._publicKey=n.slice(32,64),this._secretKey=n.slice(0,32)}else this._secretKey=Lr(Mr()),this._publicKey=Lr(Br(this._secretKey))}return(0,m.Z)(e,[{key:"publicKey",get:function(){return new Wr(this._publicKey)}},{key:"secretKey",get:function(){return g.lW.concat([this._secretKey,this._publicKey],64)}}]),e}(),Kr=new Wr("BPFLoader1111111111111111111111111111111111"),Gr=1232,Hr=127,qr=64,Yr=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,"Signature ".concat(e," has expired: block height exceeded."))).signature=void 0,r.signature=e,r}return(0,m.Z)(n)}((0,l.Z)(Error));Object.defineProperty(Yr.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});var Xr=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,"Transaction was not confirmed in ".concat(r.toFixed(2)," seconds. It is ")+"unknown if it succeeded or failed. Check signature "+"".concat(e," using the Solana Explorer or CLI tools."))).signature=void 0,i.signature=e,i}return(0,m.Z)(n)}((0,l.Z)(Error));Object.defineProperty(Xr.prototype,"name",{value:"TransactionExpiredTimeoutError"});var Qr=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,y.Z)(this,n),(r=t.call(this,"Signature ".concat(e," has expired: the nonce is no longer valid."))).signature=void 0,r.signature=e,r}return(0,m.Z)(n)}((0,l.Z)(Error));Object.defineProperty(Qr.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});var $r=function(){function e(t,n){(0,y.Z)(this,e),this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=t,this.accountKeysFromLookups=n}return(0,m.Z)(e,[{key:"keySegments",value:function(){var e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}},{key:"get",value:function(e){var t,n=(0,c.Z)(this.keySegments());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e<r.length)return r[e];e-=r.length}}catch(i){n.e(i)}finally{n.f()}}},{key:"length",get:function(){return this.keySegments().flat().length}},{key:"compileInstructions",value:function(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");var t=new Map;this.keySegments().flat().forEach((function(e,n){t.set(e.toBase58(),n)}));var n=function(e){var n=t.get(e.toBase58());if(void 0===n)throw new Error("Encountered an unknown instruction account key during compilation");return n};return e.map((function(e){return{programIdIndex:n(e.programId),accountKeyIndexes:e.keys.map((function(e){return n(e.pubkey)})),data:e.data}}))}}]),e}(),Jr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey";return it.blob(32,e)},ei=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"signature";return it.blob(64,e)},ti=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"string",t=it.struct([it.u32("length"),it.u32("lengthPadding"),it.blob(it.offset(it.u32(),-8),"chars")],e),n=t.decode.bind(t),r=t.encode.bind(t),i=t;return i.decode=function(e,t){return n(e,t).chars.toString()},i.encode=function(e,t,n){var i={chars:g.lW.from(e,"utf8")};return r(i,t,n)},i.alloc=function(e){return it.u32().span+it.u32().span+g.lW.from(e,"utf8").length},i};function ni(e,t){var n=function e(n){if(n.span>=0)return n.span;if("function"===typeof n.alloc)return n.alloc(t[n.property]);if("count"in n&&"elementLayout"in n){var r=t[n.property];if(Array.isArray(r))return r.length*e(n.elementLayout)}else if("fields"in n)return ni({layout:n},t[n.property]);return 0},r=0;return e.layout.fields.forEach((function(e){r+=n(e)})),r}function ri(e){for(var t=0,n=0;;){var r=e.shift();if(t|=(127&r)<<7*n,n+=1,0===(128&r))break}return t}function ii(e,t){for(var n=t;;){var r=127&n;if(0==(n>>=7)){e.push(r);break}r|=128,e.push(r)}}function oi(e,t){if(!e)throw new Error(t||"Assertion failed")}var ai,si=function(){function e(t,n){(0,y.Z)(this,e),this.payer=void 0,this.keyMetaMap=void 0,this.payer=t,this.keyMetaMap=n}return(0,m.Z)(e,[{key:"getMessageComponents",value:function(){var e=(0,u.Z)(this.keyMetaMap.entries());oi(e.length<=256,"Max static account keys length exceeded");var t=e.filter((function(e){var t=(0,s.Z)(e,2)[1];return t.isSigner&&t.isWritable})),n=e.filter((function(e){var t=(0,s.Z)(e,2)[1];return t.isSigner&&!t.isWritable})),r=e.filter((function(e){var t=(0,s.Z)(e,2)[1];return!t.isSigner&&t.isWritable})),i=e.filter((function(e){var t=(0,s.Z)(e,2)[1];return!t.isSigner&&!t.isWritable})),o={numRequiredSignatures:t.length+n.length,numReadonlySignedAccounts:n.length,numReadonlyUnsignedAccounts:i.length};return oi(t.length>0,"Expected at least one writable signer key"),oi((0,s.Z)(t[0],1)[0]===this.payer.toBase58(),"Expected first writable signer key to be the fee payer"),[o,[].concat((0,u.Z)(t.map((function(e){var t=(0,s.Z)(e,1)[0];return new Wr(t)}))),(0,u.Z)(n.map((function(e){var t=(0,s.Z)(e,1)[0];return new Wr(t)}))),(0,u.Z)(r.map((function(e){var t=(0,s.Z)(e,1)[0];return new Wr(t)}))),(0,u.Z)(i.map((function(e){var t=(0,s.Z)(e,1)[0];return new Wr(t)}))))]}},{key:"extractTableLookup",value:function(e){var t=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&e.isWritable})),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=this.drainKeysFoundInLookupTable(e.state.addresses,(function(e){return!e.isSigner&&!e.isInvoked&&!e.isWritable})),a=(0,s.Z)(o,2),u=a[0],c=a[1];if(0!==r.length||0!==u.length)return[{accountKey:e.key,writableIndexes:r,readonlyIndexes:u},{writable:i,readonly:c}]}},{key:"drainKeysFoundInLookupTable",value:function(e,t){var n,r=this,i=new Array,o=new Array,a=(0,c.Z)(this.keyMetaMap.entries());try{var u=function(){var a=(0,s.Z)(n.value,2),u=a[0],c=a[1];if(t(c)){var l=new Wr(u),f=e.findIndex((function(e){return e.equals(l)}));f>=0&&(oi(f<256,"Max lookup table index exceeded"),i.push(f),o.push(l),r.keyMetaMap.delete(u))}};for(a.s();!(n=a.n()).done;)u()}catch(l){a.e(l)}finally{a.f()}return[i,o]}}],[{key:"compile",value:function(t,n){var r=new Map,i=function(e){var t=e.toBase58(),n=r.get(t);return void 0===n&&(n={isSigner:!1,isWritable:!1,isInvoked:!1},r.set(t,n)),n},o=i(n);o.isSigner=!0,o.isWritable=!0;var a,s=(0,c.Z)(t);try{for(s.s();!(a=s.n()).done;){var u=a.value;i(u.programId).isInvoked=!0;var l,f=(0,c.Z)(u.keys);try{for(f.s();!(l=f.n()).done;){var h=l.value,d=i(h.pubkey);d.isSigner||(d.isSigner=h.isSigner),d.isWritable||(d.isWritable=h.isWritable)}}catch(p){f.e(p)}finally{f.f()}}}catch(p){s.e(p)}finally{s.f()}return new e(n,r)}}]),e}(),ui=function(){function e(t){var n=this;(0,y.Z)(this,e),this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=t.header,this.accountKeys=t.accountKeys.map((function(e){return new Wr(e)})),this.recentBlockhash=t.recentBlockhash,this.instructions=t.instructions,this.instructions.forEach((function(e){return n.indexToProgramIds.set(e.programIdIndex,n.accountKeys[e.programIdIndex])}))}return(0,m.Z)(e,[{key:"version",get:function(){return"legacy"}},{key:"staticAccountKeys",get:function(){return this.accountKeys}},{key:"compiledInstructions",get:function(){return this.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ye().decode(e.data)}}))}},{key:"addressTableLookups",get:function(){return[]}},{key:"getAccountKeys",value:function(){return new $r(this.staticAccountKeys)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures;return e>=this.header.numRequiredSignatures?e-t<this.accountKeys.length-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"isProgramId",value:function(e){return this.indexToProgramIds.has(e)}},{key:"programIds",value:function(){return(0,u.Z)(this.indexToProgramIds.values())}},{key:"nonProgramIds",value:function(){var e=this;return this.accountKeys.filter((function(t,n){return!e.isProgramId(n)}))}},{key:"serialize",value:function(){var e=this.accountKeys.length,t=[];ii(t,e);var n=this.instructions.map((function(e){var t=e.accounts,n=e.programIdIndex,r=Array.from(Ye().decode(e.data)),i=[];ii(i,t.length);var o=[];return ii(o,r.length),{programIdIndex:n,keyIndicesCount:g.lW.from(i),keyIndices:t,dataLength:g.lW.from(o),data:r}})),r=[];ii(r,n.length);var i=g.lW.alloc(Gr);g.lW.from(r).copy(i);var o=r.length;n.forEach((function(e){var t=it.struct([it.u8("programIdIndex"),it.blob(e.keyIndicesCount.length,"keyIndicesCount"),it.seq(it.u8("keyIndex"),e.keyIndices.length,"keyIndices"),it.blob(e.dataLength.length,"dataLength"),it.seq(it.u8("userdatum"),e.data.length,"data")]).encode(e,i,o);o+=t})),i=i.slice(0,o);var a=it.struct([it.blob(1,"numRequiredSignatures"),it.blob(1,"numReadonlySignedAccounts"),it.blob(1,"numReadonlyUnsignedAccounts"),it.blob(t.length,"keyCount"),it.seq(Jr("key"),e,"keys"),Jr("recentBlockhash")]),s={numRequiredSignatures:g.lW.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:g.lW.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:g.lW.from([this.header.numReadonlyUnsignedAccounts]),keyCount:g.lW.from(t),keys:this.accountKeys.map((function(e){return Lr(e.toBytes())})),recentBlockhash:Ye().decode(this.recentBlockhash)},u=g.lW.alloc(2048),c=a.encode(s,u);return i.copy(u,c),u.slice(0,c+i.length)}}],[{key:"compile",value:function(t){var n=si.compile(t.instructions,t.payerKey).getMessageComponents(),r=(0,s.Z)(n,2),i=r[0],o=r[1],a=new $r(o).compileInstructions(t.instructions).map((function(e){return{programIdIndex:e.programIdIndex,accounts:e.accountKeyIndexes,data:Ye().encode(e.data)}}));return new e({header:i,accountKeys:o,recentBlockhash:t.recentBlockhash,instructions:a})}},{key:"from",value:function(t){var n=(0,u.Z)(t),r=n.shift();if(r!==(r&Hr))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");for(var i=n.shift(),o=n.shift(),a=ri(n),s=[],c=0;c<a;c++){var l=n.slice(0,Fr);n=n.slice(Fr),s.push(new Wr(g.lW.from(l)))}for(var f=n.slice(0,Fr),h=ri(n=n.slice(Fr)),d=[],p=0;p<h;p++){var y=n.shift(),m=ri(n),v=n.slice(0,m),b=ri(n=n.slice(m)),_=n.slice(0,b),w=Ye().encode(g.lW.from(_));n=n.slice(b),d.push({programIdIndex:y,accounts:v,data:w})}return new e({header:{numRequiredSignatures:r,numReadonlySignedAccounts:i,numReadonlyUnsignedAccounts:o},recentBlockhash:Ye().encode(g.lW.from(f)),accountKeys:s,instructions:d})}}]),e}(),ci=function(){function e(t){(0,y.Z)(this,e),this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=t.header,this.staticAccountKeys=t.staticAccountKeys,this.recentBlockhash=t.recentBlockhash,this.compiledInstructions=t.compiledInstructions,this.addressTableLookups=t.addressTableLookups}return(0,m.Z)(e,[{key:"version",get:function(){return 0}},{key:"numAccountKeysFromLookups",get:function(){var e,t=0,n=(0,c.Z)(this.addressTableLookups);try{for(n.s();!(e=n.n()).done;){var r=e.value;t+=r.readonlyIndexes.length+r.writableIndexes.length}}catch(i){n.e(i)}finally{n.f()}return t}},{key:"getAccountKeys",value:function(e){var t;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");t=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)t=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new $r(this.staticAccountKeys,t)}},{key:"isAccountSigner",value:function(e){return e<this.header.numRequiredSignatures}},{key:"isAccountWritable",value:function(e){var t=this.header.numRequiredSignatures,n=this.staticAccountKeys.length;return e>=n?e-n<this.addressTableLookups.reduce((function(e,t){return e+t.writableIndexes.length}),0):e>=this.header.numRequiredSignatures?e-t<n-t-this.header.numReadonlyUnsignedAccounts:e<t-this.header.numReadonlySignedAccounts}},{key:"resolveAddressTableLookups",value:function(e){var t,n={writable:[],readonly:[]},r=(0,c.Z)(this.addressTableLookups);try{var i=function(){var r=t.value,i=e.find((function(e){return e.key.equals(r.accountKey)}));if(!i)throw new Error("Failed to find address lookup table account for table key ".concat(r.accountKey.toBase58()));var o,a=(0,c.Z)(r.writableIndexes);try{for(a.s();!(o=a.n()).done;){var s=o.value;if(!(s<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(s," in address lookup table ").concat(r.accountKey.toBase58()));n.writable.push(i.state.addresses[s])}}catch(h){a.e(h)}finally{a.f()}var u,l=(0,c.Z)(r.readonlyIndexes);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(!(f<i.state.addresses.length))throw new Error("Failed to find address for index ".concat(f," in address lookup table ").concat(r.accountKey.toBase58()));n.readonly.push(i.state.addresses[f])}}catch(h){l.e(h)}finally{l.f()}};for(r.s();!(t=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}return n}},{key:"serialize",value:function(){var e=Array();ii(e,this.staticAccountKeys.length);var t=this.serializeInstructions(),n=Array();ii(n,this.compiledInstructions.length);var r=this.serializeAddressTableLookups(),i=Array();ii(i,this.addressTableLookups.length);var o=it.struct([it.u8("prefix"),it.struct([it.u8("numRequiredSignatures"),it.u8("numReadonlySignedAccounts"),it.u8("numReadonlyUnsignedAccounts")],"header"),it.blob(e.length,"staticAccountKeysLength"),it.seq(Jr(),this.staticAccountKeys.length,"staticAccountKeys"),Jr("recentBlockhash"),it.blob(n.length,"instructionsLength"),it.blob(t.length,"serializedInstructions"),it.blob(i.length,"addressTableLookupsLength"),it.blob(r.length,"serializedAddressTableLookups")]),a=new Uint8Array(Gr),s=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map((function(e){return e.toBytes()})),recentBlockhash:Ye().decode(this.recentBlockhash),instructionsLength:new Uint8Array(n),serializedInstructions:t,addressTableLookupsLength:new Uint8Array(i),serializedAddressTableLookups:r},a);return a.slice(0,s)}},{key:"serializeInstructions",value:function(){var e,t=0,n=new Uint8Array(Gr),r=(0,c.Z)(this.compiledInstructions);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=Array();ii(o,i.accountKeyIndexes.length);var a=Array();ii(a,i.data.length),t+=it.struct([it.u8("programIdIndex"),it.blob(o.length,"encodedAccountKeyIndexesLength"),it.seq(it.u8(),i.accountKeyIndexes.length,"accountKeyIndexes"),it.blob(a.length,"encodedDataLength"),it.blob(i.data.length,"data")]).encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(o),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(a),data:i.data},n,t)}}catch(s){r.e(s)}finally{r.f()}return n.slice(0,t)}},{key:"serializeAddressTableLookups",value:function(){var e,t=0,n=new Uint8Array(Gr),r=(0,c.Z)(this.addressTableLookups);try{for(r.s();!(e=r.n()).done;){var i=e.value,o=Array();ii(o,i.writableIndexes.length);var a=Array();ii(a,i.readonlyIndexes.length),t+=it.struct([Jr("accountKey"),it.blob(o.length,"encodedWritableIndexesLength"),it.seq(it.u8(),i.writableIndexes.length,"writableIndexes"),it.blob(a.length,"encodedReadonlyIndexesLength"),it.seq(it.u8(),i.readonlyIndexes.length,"readonlyIndexes")]).encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(o),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(a),readonlyIndexes:i.readonlyIndexes},n,t)}}catch(s){r.e(s)}finally{r.f()}return n.slice(0,t)}}],[{key:"compile",value:function(t){var n,r=si.compile(t.instructions,t.payerKey),i=new Array,o={writable:new Array,readonly:new Array},a=t.addressLookupTableAccounts||[],l=(0,c.Z)(a);try{for(l.s();!(n=l.n()).done;){var f=n.value,h=r.extractTableLookup(f);if(void 0!==h){var d,p,y=(0,s.Z)(h,2),m=y[0],g=y[1],v=g.writable,b=g.readonly;i.push(m),(d=o.writable).push.apply(d,(0,u.Z)(v)),(p=o.readonly).push.apply(p,(0,u.Z)(b))}}}catch(E){l.e(E)}finally{l.f()}var _=r.getMessageComponents(),w=(0,s.Z)(_,2),x=w[0],k=w[1],A=new $r(k,o).compileInstructions(t.instructions);return new e({header:x,staticAccountKeys:k,recentBlockhash:t.recentBlockhash,compiledInstructions:A,addressTableLookups:i})}},{key:"deserialize",value:function(t){var n=(0,u.Z)(t),r=n.shift(),i=r&Hr;oi(r!==i,"Expected versioned message but received legacy message");oi(0===i,"Expected versioned message with version 0 but found version ".concat(i));for(var o={numRequiredSignatures:n.shift(),numReadonlySignedAccounts:n.shift(),numReadonlyUnsignedAccounts:n.shift()},a=[],s=ri(n),c=0;c<s;c++)a.push(new Wr(n.splice(0,Fr)));for(var l=Ye().encode(n.splice(0,Fr)),f=ri(n),h=[],d=0;d<f;d++){var p=n.shift(),y=ri(n),m=n.splice(0,y),g=ri(n),v=new Uint8Array(n.splice(0,g));h.push({programIdIndex:p,accountKeyIndexes:m,data:v})}for(var b=ri(n),_=[],w=0;w<b;w++){var x=new Wr(n.splice(0,Fr)),k=ri(n),A=n.splice(0,k),E=ri(n),I=n.splice(0,E);_.push({accountKey:x,writableIndexes:A,readonlyIndexes:I})}return new e({header:o,staticAccountKeys:a,recentBlockhash:l,compiledInstructions:h,addressTableLookups:_})}}]),e}(),li={deserializeMessageVersion:function(e){var t=e[0],n=t&Hr;return n===t?"legacy":n},deserialize:function(e){var t=li.deserializeMessageVersion(e);if("legacy"===t)return ui.from(e);if(0===t)return ci.deserialize(e);throw new Error("Transaction message version ".concat(t," deserialization is not supported"))}};!function(e){e[e.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",e[e.PROCESSED=1]="PROCESSED",e[e.TIMED_OUT=2]="TIMED_OUT",e[e.NONCE_INVALID=3]="NONCE_INVALID"}(ai||(ai={}));var fi=g.lW.alloc(qr).fill(0),hi=function(){function e(t){(0,y.Z)(this,e),this.keys=void 0,this.programId=void 0,this.data=g.lW.alloc(0),this.programId=t.programId,this.keys=t.keys,t.data&&(this.data=t.data)}return(0,m.Z)(e,[{key:"toJSON",value:function(){return{keys:this.keys.map((function(e){var t=e.pubkey,n=e.isSigner,r=e.isWritable;return{pubkey:t.toJSON(),isSigner:n,isWritable:r}})),programId:this.programId.toJSON(),data:(0,u.Z)(this.data)}}}]),e}(),di=function(){function e(t){if((0,y.Z)(this,e),this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,t)if(t.feePayer&&(this.feePayer=t.feePayer),t.signatures&&(this.signatures=t.signatures),Object.prototype.hasOwnProperty.call(t,"nonceInfo")){var n=t.minContextSlot,r=t.nonceInfo;this.minNonceContextSlot=n,this.nonceInfo=r}else if(Object.prototype.hasOwnProperty.call(t,"lastValidBlockHeight")){var i=t.blockhash,o=t.lastValidBlockHeight;this.recentBlockhash=i,this.lastValidBlockHeight=o}else{var a=t.recentBlockhash,s=t.nonceInfo;s&&(this.nonceInfo=s),this.recentBlockhash=a}}return(0,m.Z)(e,[{key:"signature",get:function(){return this.signatures.length>0?this.signatures[0].signature:null}},{key:"toJSON",value:function(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map((function(e){return e.toJSON()})),signers:this.signatures.map((function(e){return e.publicKey.toJSON()}))}}},{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(0===n.length)throw new Error("No instructions");return n.forEach((function(t){"instructions"in t?e.instructions=e.instructions.concat(t.instructions):"data"in t&&"programId"in t&&"keys"in t?e.instructions.push(t):e.instructions.push(new hi(t))})),this}},{key:"compileMessage",value:function(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;var e,t,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,t=this.instructions[0]!=this.nonceInfo.nonceInstruction?[this.nonceInfo.nonceInstruction].concat((0,u.Z)(this.instructions)):this.instructions):(e=this.recentBlockhash,t=this.instructions),!e)throw new Error("Transaction recentBlockhash required");if(t.length<1&&console.warn("No instructions provided"),this.feePayer)n=this.feePayer;else{if(!(this.signatures.length>0&&this.signatures[0].publicKey))throw new Error("Transaction fee payer required");n=this.signatures[0].publicKey}for(var r=0;r<t.length;r++)if(void 0===t[r].programId)throw new Error("Transaction instruction index ".concat(r," has undefined program id"));var i=[],o=[];t.forEach((function(e){e.keys.forEach((function(e){o.push((0,a.Z)({},e))}));var t=e.programId.toString();i.includes(t)||i.push(t)})),i.forEach((function(e){o.push({pubkey:new Wr(e),isSigner:!1,isWritable:!1})}));var l=[];o.forEach((function(e){var t=e.pubkey.toString(),n=l.findIndex((function(e){return e.pubkey.toString()===t}));n>-1?(l[n].isWritable=l[n].isWritable||e.isWritable,l[n].isSigner=l[n].isSigner||e.isSigner):l.push(e)})),l.sort((function(e,t){return e.isSigner!==t.isSigner?e.isSigner?-1:1:e.isWritable!==t.isWritable?e.isWritable?-1:1:e.pubkey.toBase58().localeCompare(t.pubkey.toBase58())}));var f=l.findIndex((function(e){return e.pubkey.equals(n)}));if(f>-1){var h=l.splice(f,1),d=(0,s.Z)(h,1)[0];d.isSigner=!0,d.isWritable=!0,l.unshift(d)}else l.unshift({pubkey:n,isSigner:!0,isWritable:!0});var p,y=(0,c.Z)(this.signatures);try{var m=function(){var e=p.value,t=l.findIndex((function(t){return t.pubkey.equals(e.publicKey)}));if(!(t>-1))throw new Error("unknown signer: ".concat(e.publicKey.toString()));l[t].isSigner||(l[t].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."))};for(y.s();!(p=y.n()).done;)m()}catch(A){y.e(A)}finally{y.f()}var g=0,v=0,b=0,_=[],w=[];l.forEach((function(e){var t=e.pubkey,n=e.isSigner,r=e.isWritable;n?(_.push(t.toString()),g+=1,r||(v+=1)):(w.push(t.toString()),r||(b+=1))}));var x=_.concat(w),k=t.map((function(e){var t=e.data,n=e.programId;return{programIdIndex:x.indexOf(n.toString()),accounts:e.keys.map((function(e){return x.indexOf(e.pubkey.toString())})),data:Ye().encode(t)}}));return k.forEach((function(e){oi(e.programIdIndex>=0),e.accounts.forEach((function(e){return oi(e>=0)}))})),new ui({header:{numRequiredSignatures:g,numReadonlySignedAccounts:v,numReadonlyUnsignedAccounts:b},accountKeys:x,recentBlockhash:e,instructions:k})}},{key:"_compile",value:function(){var e=this.compileMessage(),t=e.accountKeys.slice(0,e.header.numRequiredSignatures);if(this.signatures.length===t.length&&this.signatures.every((function(e,n){return t[n].equals(e.publicKey)})))return e;return this.signatures=t.map((function(e){return{signature:null,publicKey:e}})),e}},{key:"serializeMessage",value:function(){return this._compile().serialize()}},{key:"getEstimatedFee",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getFeeForMessage(this.compileMessage());case 2:return e.abrupt("return",e.sent.value);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setSigners",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");var r=new Set;this.signatures=t.filter((function(e){var t=e.toString();return!r.has(t)&&(r.add(t),!0)})).map((function(e){return{signature:null,publicKey:e}}))}},{key:"sign",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");for(var r=new Set,i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.publicKey.toString();r.has(u)||(r.add(u),i.push(s))}this.signatures=i.map((function(e){return{signature:null,publicKey:e.publicKey}}));var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"partialSign",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)throw new Error("No signers");for(var r=new Set,i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.publicKey.toString();r.has(u)||(r.add(u),i.push(s))}var c=this._compile();this._partialSign.apply(this,[c].concat(i))}},{key:"_partialSign",value:function(e){for(var t=this,n=e.serialize(),r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];i.forEach((function(e){var r=Dr(n,e.secretKey);t._addSignature(e.publicKey,Lr(r))}))}},{key:"addSignature",value:function(e,t){this._compile(),this._addSignature(e,t)}},{key:"_addSignature",value:function(e,t){oi(64===t.length);var n=this.signatures.findIndex((function(t){return e.equals(t.publicKey)}));if(n<0)throw new Error("unknown signer: ".concat(e.toString()));this.signatures[n].signature=g.lW.from(t)}},{key:"verifySignatures",value:function(e){return this._verifySignatures(this.serializeMessage(),void 0===e||e)}},{key:"_verifySignatures",value:function(e,t){var n,r=(0,c.Z)(this.signatures);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=i.signature,a=i.publicKey;if(null===o){if(t)return!1}else if(!Rr(o,e,a.toBytes()))return!1}}catch(s){r.e(s)}finally{r.f()}return!0}},{key:"serialize",value:function(e){var t=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),n=t.requireAllSignatures,r=t.verifySignatures,i=this.serializeMessage();if(r&&!this._verifySignatures(i,n))throw new Error("Signature verification failed");return this._serialize(i)}},{key:"_serialize",value:function(e){var t=this.signatures,n=[];ii(n,t.length);var r=n.length+64*t.length+e.length,i=g.lW.alloc(r);return oi(t.length<256),g.lW.from(n).copy(i,0),t.forEach((function(e,t){var r=e.signature;null!==r&&(oi(64===r.length,"signature has invalid length"),g.lW.from(r).copy(i,n.length+64*t))})),e.copy(i,n.length+64*t.length),oi(i.length<=Gr,"Transaction too large: ".concat(i.length," > ").concat(Gr)),i}},{key:"keys",get:function(){return oi(1===this.instructions.length),this.instructions[0].keys.map((function(e){return e.pubkey}))}},{key:"programId",get:function(){return oi(1===this.instructions.length),this.instructions[0].programId}},{key:"data",get:function(){return oi(1===this.instructions.length),this.instructions[0].data}}],[{key:"from",value:function(t){for(var n=(0,u.Z)(t),r=ri(n),i=[],o=0;o<r;o++){var a=n.slice(0,qr);n=n.slice(qr),i.push(Ye().encode(g.lW.from(a)))}return e.populate(ui.from(n),i)}},{key:"populate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=new e;return r.recentBlockhash=t.recentBlockhash,t.header.numRequiredSignatures>0&&(r.feePayer=t.accountKeys[0]),n.forEach((function(e,n){var i={signature:e==Ye().encode(fi)?null:Ye().decode(e),publicKey:t.accountKeys[n]};r.signatures.push(i)})),t.instructions.forEach((function(e){var n=e.accounts.map((function(e){var n=t.accountKeys[e];return{pubkey:n,isSigner:r.signatures.some((function(e){return e.publicKey.toString()===n.toString()}))||t.isAccountSigner(e),isWritable:t.isAccountWritable(e)}}));r.instructions.push(new hi({keys:n,programId:t.accountKeys[e.programIdIndex],data:Ye().decode(e.data)}))})),r._message=t,r._json=r.toJSON(),r}}]),e}(),pi=function(){function e(t){(0,y.Z)(this,e),this.payerKey=void 0,this.instructions=void 0,this.recentBlockhash=void 0,this.payerKey=t.payerKey,this.instructions=t.instructions,this.recentBlockhash=t.recentBlockhash}return(0,m.Z)(e,[{key:"compileToLegacyMessage",value:function(){return ui.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions})}},{key:"compileToV0Message",value:function(e){return ci.compile({payerKey:this.payerKey,recentBlockhash:this.recentBlockhash,instructions:this.instructions,addressLookupTableAccounts:e})}}],[{key:"decompile",value:function(t,n){var r=t.header,i=t.compiledInstructions,o=t.recentBlockhash,a=r.numRequiredSignatures,s=r.numReadonlySignedAccounts,u=r.numReadonlyUnsignedAccounts,l=a-s;oi(l>0,"Message header is invalid");var f=t.staticAccountKeys.length-a-u;oi(f>=0,"Message header is invalid");var h=t.getAccountKeys(n),d=h.get(0);if(void 0===d)throw new Error("Failed to decompile message because no account keys were found");var p,y=[],m=(0,c.Z)(i);try{for(m.s();!(p=m.n()).done;){var g,v=p.value,b=[],_=(0,c.Z)(v.accountKeyIndexes);try{for(_.s();!(g=_.n()).done;){var w=g.value,x=h.get(w);if(void 0===x)throw new Error("Failed to find key for account key index ".concat(w));var k=void 0;k=w<a?w<l:w<h.staticAccountKeys.length?w-a<f:w-h.staticAccountKeys.length<h.accountKeysFromLookups.writable.length,b.push({pubkey:x,isSigner:w<r.numRequiredSignatures,isWritable:k})}}catch(E){_.e(E)}finally{_.f()}var A=h.get(v.programIdIndex);if(void 0===A)throw new Error("Failed to find program id for program id index ".concat(v.programIdIndex));y.push(new hi({programId:A,data:Lr(v.data),keys:b}))}}catch(E){m.e(E)}finally{m.f()}return new e({payerKey:d,instructions:y,recentBlockhash:o})}}]),e}(),yi=function(){function e(t,n){if((0,y.Z)(this,e),this.signatures=void 0,this.message=void 0,void 0!==n)oi(n.length===t.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{for(var r=[],i=0;i<t.header.numRequiredSignatures;i++)r.push(new Uint8Array(qr));this.signatures=r}this.message=t}return(0,m.Z)(e,[{key:"version",get:function(){return this.message.version}},{key:"serialize",value:function(){var e=this.message.serialize(),t=Array();ii(t,this.signatures.length);var n=it.struct([it.blob(t.length,"encodedSignaturesLength"),it.seq(ei(),this.signatures.length,"signatures"),it.blob(e.length,"serializedMessage")]),r=new Uint8Array(2048),i=n.encode({encodedSignaturesLength:new Uint8Array(t),signatures:this.signatures,serializedMessage:e},r);return r.slice(0,i)}},{key:"sign",value:function(e){var t,n=this,r=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures),o=(0,c.Z)(e);try{var a=function(){var e=t.value,o=i.findIndex((function(t){return t.equals(e.publicKey)}));oi(o>=0,"Cannot sign with non signer key ".concat(e.publicKey.toBase58())),n.signatures[o]=Dr(r,e.secretKey)};for(o.s();!(t=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}}},{key:"addSignature",value:function(e,t){oi(64===t.byteLength,"Signature must be 64 bytes long");var n=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex((function(t){return t.equals(e)}));oi(n>=0,"Can not add signature; `".concat(e.toBase58(),"` is not required to sign this transaction")),this.signatures[n]=t}}],[{key:"deserialize",value:function(t){for(var n=(0,u.Z)(t),r=[],i=ri(n),o=0;o<i;o++)r.push(new Uint8Array(n.splice(0,qr)));return new e(li.deserialize(new Uint8Array(n)),r)}}]),e}(),mi=new Wr("SysvarC1ock11111111111111111111111111111111"),gi=new Wr("SysvarEpochSchedu1e111111111111111111111111"),vi=new Wr("Sysvar1nstructions1111111111111111111111111"),bi=new Wr("SysvarRecentB1ockHashes11111111111111111111"),_i=new Wr("SysvarRent111111111111111111111111111111111"),wi=new Wr("SysvarRewards111111111111111111111111111111"),xi=new Wr("SysvarS1otHashes111111111111111111111111111"),ki=new Wr("SysvarS1otHistory11111111111111111111111111"),Ai=new Wr("SysvarStakeHistory1111111111111111111111111");function Ei(e,t,n,r){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,h.Z)((0,f.Z)().mark((function e(t,n,r,i){var o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i&&{skipPreflight:i.skipPreflight,preflightCommitment:i.preflightCommitment||i.commitment,maxRetries:i.maxRetries,minContextSlot:i.minContextSlot},e.next=3,t.sendTransaction(n,r,o);case 3:if(a=e.sent,null==n.recentBlockhash||null==n.lastValidBlockHeight){e.next=10;break}return e.next=7,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,signature:a,blockhash:n.recentBlockhash,lastValidBlockHeight:n.lastValidBlockHeight},i&&i.commitment);case 7:s=e.sent.value,e.next=22;break;case 10:if(null==n.minNonceContextSlot||null==n.nonceInfo){e.next=18;break}return u=n.nonceInfo.nonceInstruction,c=u.keys[0].pubkey,e.next=15,t.confirmTransaction({abortSignal:null===i||void 0===i?void 0:i.abortSignal,minContextSlot:n.minNonceContextSlot,nonceAccountPubkey:c,nonceValue:n.nonceInfo.nonce,signature:a},i&&i.commitment);case 15:s=e.sent.value,e.next=22;break;case 18:return null!=(null===i||void 0===i?void 0:i.abortSignal)&&console.warn("sendAndConfirmTransaction(): A transaction with a deprecated confirmation strategy was supplied along with an `abortSignal`. Only transactions having `lastValidBlockHeight` or a combination of `nonceInfo` and `minNonceContextSlot` are abortable."),e.next=21,t.confirmTransaction(a,i&&i.commitment);case 21:s=e.sent.value;case 22:if(!s.err){e.next=24;break}throw new Error("Transaction ".concat(a," failed (").concat(JSON.stringify(s),")"));case 24:return e.abrupt("return",a);case 25:case"end":return e.stop()}}),e)}))),Ii.apply(this,arguments)}function Si(e){return new Promise((function(t){return setTimeout(t,e)}))}function Ti(e,t){var n=e.layout.span>=0?e.layout.span:ni(e,t),r=g.lW.alloc(n),i=Object.assign({instruction:e.index},t);return e.layout.encode(i,r),r}function Mi(e,t){var n;try{n=e.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(n.instruction!==e.index)throw new Error("invalid instruction; instruction index mismatch ".concat(n.instruction," != ").concat(e.index));return n}var Pi,Bi=it.nu64("lamportsPerSignature"),Ci=it.struct([it.u32("version"),it.u32("state"),Jr("authorizedPubkey"),Jr("nonce"),it.struct([Bi],"feeCalculator")]),Oi=Ci.span,Di=function(){function e(t){(0,y.Z)(this,e),this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=t.authorizedPubkey,this.nonce=t.nonce,this.feeCalculator=t.feeCalculator}return(0,m.Z)(e,null,[{key:"fromAccountData",value:function(t){var n=Ci.decode(Lr(t),0);return new e({authorizedPubkey:new Wr(n.authorizedPubkey),nonce:new Wr(n.nonce).toString(),feeCalculator:n.feeCalculator})}}]),e}(),Ri=(Pi=8,function(e){var t=(0,it.blob)(Pi,e),n=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}(t),r=n.encode,i=n.decode,o=t;return o.decode=function(e,t){var n=i(e,t);return(0,ot.toBigIntLE)(g.lW.from(n))},o.encode=function(e,t,n){var i=(0,ot.toBufferLE)(e,Pi);return r(i,t,n)},o}),Li=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,n=it.u32("instruction").decode(e.data),r=0,i=Object.entries(zi);r<i.length;r++){var o=(0,s.Z)(i[r],2),a=o[0];if(o[1].index==n){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a SystemInstruction");return t}},{key:"decodeCreateAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(zi.Create,e.data),n=t.lamports,r=t.space,i=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,lamports:n,space:r,programId:new Wr(i)}}},{key:"decodeTransfer",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(zi.Transfer,e.data).lamports;return{fromPubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,lamports:t}}},{key:"decodeTransferWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(zi.TransferWithSeed,e.data),n=t.lamports,r=t.seed,i=t.programId;return{fromPubkey:e.keys[0].pubkey,basePubkey:e.keys[1].pubkey,toPubkey:e.keys[2].pubkey,lamports:n,seed:r,programId:new Wr(i)}}},{key:"decodeAllocate",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Mi(zi.Allocate,e.data).space;return{accountPubkey:e.keys[0].pubkey,space:t}}},{key:"decodeAllocateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Mi(zi.AllocateWithSeed,e.data),n=t.base,r=t.seed,i=t.space,o=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new Wr(n),seed:r,space:i,programId:new Wr(o)}}},{key:"decodeAssign",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Mi(zi.Assign,e.data).programId;return{accountPubkey:e.keys[0].pubkey,programId:new Wr(t)}}},{key:"decodeAssignWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,1);var t=Mi(zi.AssignWithSeed,e.data),n=t.base,r=t.seed,i=t.programId;return{accountPubkey:e.keys[0].pubkey,basePubkey:new Wr(n),seed:r,programId:new Wr(i)}}},{key:"decodeCreateWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(zi.CreateWithSeed,e.data),n=t.base,r=t.seed,i=t.lamports,o=t.space,a=t.programId;return{fromPubkey:e.keys[0].pubkey,newAccountPubkey:e.keys[1].pubkey,basePubkey:new Wr(n),seed:r,lamports:i,space:o,programId:new Wr(a)}}},{key:"decodeNonceInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(zi.InitializeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:new Wr(t)}}},{key:"decodeNonceAdvance",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Mi(zi.AdvanceNonceAccount,e.data),{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"decodeNonceWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Mi(zi.WithdrawNonceAccount,e.data).lamports;return{noncePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t}}},{key:"decodeNonceAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(zi.AuthorizeNonceAccount,e.data).authorized;return{noncePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[1].pubkey,newAuthorizedPubkey:new Wr(t)}}},{key:"checkProgramId",value:function(e){if(!e.equals(Zi.programId))throw new Error("invalid instruction; programId is not SystemProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),zi=Object.freeze({Create:{index:0,layout:it.struct([it.u32("instruction"),it.ns64("lamports"),it.ns64("space"),Jr("programId")])},Assign:{index:1,layout:it.struct([it.u32("instruction"),Jr("programId")])},Transfer:{index:2,layout:it.struct([it.u32("instruction"),Ri("lamports")])},CreateWithSeed:{index:3,layout:it.struct([it.u32("instruction"),Jr("base"),ti("seed"),it.ns64("lamports"),it.ns64("space"),Jr("programId")])},AdvanceNonceAccount:{index:4,layout:it.struct([it.u32("instruction")])},WithdrawNonceAccount:{index:5,layout:it.struct([it.u32("instruction"),it.ns64("lamports")])},InitializeNonceAccount:{index:6,layout:it.struct([it.u32("instruction"),Jr("authorized")])},AuthorizeNonceAccount:{index:7,layout:it.struct([it.u32("instruction"),Jr("authorized")])},Allocate:{index:8,layout:it.struct([it.u32("instruction"),it.ns64("space")])},AllocateWithSeed:{index:9,layout:it.struct([it.u32("instruction"),Jr("base"),ti("seed"),it.ns64("space"),Jr("programId")])},AssignWithSeed:{index:10,layout:it.struct([it.u32("instruction"),Jr("base"),ti("seed"),Jr("programId")])},TransferWithSeed:{index:11,layout:it.struct([it.u32("instruction"),Ri("lamports"),ti("seed"),Jr("programId")])},UpgradeNonceAccount:{index:12,layout:it.struct([it.u32("instruction")])}}),Zi=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"createAccount",value:function(e){var t=Ti(zi.Create,{lamports:e.lamports,space:e.space,programId:Lr(e.programId.toBuffer())});return new hi({keys:[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!0,isWritable:!0}],programId:this.programId,data:t})}},{key:"transfer",value:function(e){var t,n;"basePubkey"in e?(t=Ti(zi.TransferWithSeed,{lamports:BigInt(e.lamports),seed:e.seed,programId:Lr(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]):(t=Ti(zi.Transfer,{lamports:BigInt(e.lamports)}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0}]);return new hi({keys:n,programId:this.programId,data:t})}},{key:"assign",value:function(e){var t,n;"basePubkey"in e?(t=Ti(zi.AssignWithSeed,{base:Lr(e.basePubkey.toBuffer()),seed:e.seed,programId:Lr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ti(zi.Assign,{programId:Lr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new hi({keys:n,programId:this.programId,data:t})}},{key:"createAccountWithSeed",value:function(e){var t=Ti(zi.CreateWithSeed,{base:Lr(e.basePubkey.toBuffer()),seed:e.seed,lamports:e.lamports,space:e.space,programId:Lr(e.programId.toBuffer())}),n=[{pubkey:e.fromPubkey,isSigner:!0,isWritable:!0},{pubkey:e.newAccountPubkey,isSigner:!1,isWritable:!0}];return e.basePubkey!=e.fromPubkey&&n.push({pubkey:e.basePubkey,isSigner:!0,isWritable:!1}),new hi({keys:n,programId:this.programId,data:t})}},{key:"createNonceAccount",value:function(t){var n=new di;"basePubkey"in t&&"seed"in t?n.add(e.createAccountWithSeed({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,basePubkey:t.basePubkey,seed:t.seed,lamports:t.lamports,space:Oi,programId:this.programId})):n.add(e.createAccount({fromPubkey:t.fromPubkey,newAccountPubkey:t.noncePubkey,lamports:t.lamports,space:Oi,programId:this.programId}));var r={noncePubkey:t.noncePubkey,authorizedPubkey:t.authorizedPubkey};return n.add(this.nonceInitialize(r)),n}},{key:"nonceInitialize",value:function(e){var t=Ti(zi.InitializeNonceAccount,{authorized:Lr(e.authorizedPubkey.toBuffer())}),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:_i,isSigner:!1,isWritable:!1}],programId:this.programId,data:t};return new hi(n)}},{key:"nonceAdvance",value:function(e){var t=Ti(zi.AdvanceNonceAccount),n={keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t};return new hi(n)}},{key:"nonceWithdraw",value:function(e){var t=Ti(zi.WithdrawNonceAccount,{lamports:e.lamports});return new hi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.toPubkey,isSigner:!1,isWritable:!0},{pubkey:bi,isSigner:!1,isWritable:!1},{pubkey:_i,isSigner:!1,isWritable:!1},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"nonceAuthorize",value:function(e){var t=Ti(zi.AuthorizeNonceAccount,{authorized:Lr(e.newAuthorizedPubkey.toBuffer())});return new hi({keys:[{pubkey:e.noncePubkey,isSigner:!1,isWritable:!0},{pubkey:e.authorizedPubkey,isSigner:!0,isWritable:!1}],programId:this.programId,data:t})}},{key:"allocate",value:function(e){var t,n;"basePubkey"in e?(t=Ti(zi.AllocateWithSeed,{base:Lr(e.basePubkey.toBuffer()),seed:e.seed,space:e.space,programId:Lr(e.programId.toBuffer())}),n=[{pubkey:e.accountPubkey,isSigner:!1,isWritable:!0},{pubkey:e.basePubkey,isSigner:!0,isWritable:!1}]):(t=Ti(zi.Allocate,{space:e.space}),n=[{pubkey:e.accountPubkey,isSigner:!0,isWritable:!0}]);return new hi({keys:n,programId:this.programId,data:t})}}]),e}();Zi.programId=new Wr("11111111111111111111111111111111");var Ni=Gr-300,Ui=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"getMinNumSignatures",value:function(t){return 2*(Math.ceil(t/e.chunkSize)+1+1)}},{key:"load",value:function(){var t=(0,h.Z)((0,f.Z)().mark((function t(n,r,i,o,a){var s,u,c,l,h,d,p,y,m,v,b,_,w,x;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.getMinimumBalanceForRentExemption(a.length);case 2:return s=t.sent,t.next=5,n.getAccountInfo(i.publicKey,"confirmed");case 5:if(u=t.sent,c=null,null===u){t.next=16;break}if(!u.executable){t.next=11;break}return console.error("Program load failed, account is already executable"),t.abrupt("return",!1);case 11:u.data.length!==a.length&&(c=c||new di).add(Zi.allocate({accountPubkey:i.publicKey,space:a.length})),u.owner.equals(o)||(c=c||new di).add(Zi.assign({accountPubkey:i.publicKey,programId:o})),u.lamports<s&&(c=c||new di).add(Zi.transfer({fromPubkey:r.publicKey,toPubkey:i.publicKey,lamports:s-u.lamports})),t.next=17;break;case 16:c=(new di).add(Zi.createAccount({fromPubkey:r.publicKey,newAccountPubkey:i.publicKey,lamports:s>0?s:1,space:a.length,programId:o}));case 17:if(null===c){t.next=20;break}return t.next=20,Ei(n,c,[r,i],{commitment:"confirmed"});case 20:l=it.struct([it.u32("instruction"),it.u32("offset"),it.u32("bytesLength"),it.u32("bytesLengthPadding"),it.seq(it.u8("byte"),it.offset(it.u32(),-8),"bytes")]),h=e.chunkSize,d=0,p=a,y=[];case 25:if(!(p.length>0)){t.next=39;break}if(m=p.slice(0,h),v=g.lW.alloc(h+16),l.encode({instruction:0,offset:d,bytes:m,bytesLength:0,bytesLengthPadding:0},v),b=(new di).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0}],programId:o,data:v}),y.push(Ei(n,b,[r,i],{commitment:"confirmed"})),!n._rpcEndpoint.includes("solana.com")){t.next=35;break}return 4,t.next=35,Si(250);case 35:d+=h,p=p.slice(h),t.next=25;break;case 39:return t.next=41,Promise.all(y);case 41:return _=it.struct([it.u32("instruction")]),w=g.lW.alloc(_.span),_.encode({instruction:1},w),x=(new di).add({keys:[{pubkey:i.publicKey,isSigner:!0,isWritable:!0},{pubkey:_i,isSigner:!1,isWritable:!1}],programId:o,data:w}),t.next=47,Ei(n,x,[r,i],{commitment:"confirmed"});case 47:return t.abrupt("return",!0);case 48:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()}]),e}();Ui.chunkSize=Ni;var Fi=new Wr("BPFLoader2111111111111111111111111111111111"),ji=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"getMinNumSignatures",value:function(e){return Ui.getMinNumSignatures(e)}},{key:"load",value:function(e,t,n,r,i){return Ui.load(e,t,n,i,r)}}]),e}(),Wi=Object.prototype.toString,Vi=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};function Ki(e,t){var n,r,i,o,a,s,u;if(!0===e)return"true";if(!1===e)return"false";switch(typeof e){case"object":if(null===e)return null;if(e.toJSON&&"function"===typeof e.toJSON)return Ki(e.toJSON(),t);if("[object Array]"===(u=Wi.call(e))){for(i="[",r=e.length-1,n=0;n<r;n++)i+=Ki(e[n],!0)+",";return r>-1&&(i+=Ki(e[n],!0)),i+"]"}if("[object Object]"===u){for(r=(o=Vi(e).sort()).length,i="",n=0;n<r;)void 0!==(s=Ki(e[a=o[n]],!1))&&(i&&(i+=","),i+=JSON.stringify(a)+":"+s),n++;return"{"+i+"}"}return JSON.stringify(e);case"function":case"undefined":return t?null:void 0;case"string":return JSON.stringify(e);default:return isFinite(e)?e:null}}var Gi=function(e){var t=Ki(e,!1);if(void 0!==t)return""+t};function Hi(e){for(var t=0;e>1;)e/=2,t++;return t}var qi=function(){function e(t,n,r,i,o){(0,y.Z)(this,e),this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=t,this.leaderScheduleSlotOffset=n,this.warmup=r,this.firstNormalEpoch=i,this.firstNormalSlot=o}return(0,m.Z)(e,[{key:"getEpoch",value:function(e){return this.getEpochAndSlotIndex(e)[0]}},{key:"getEpochAndSlotIndex",value:function(e){if(e<this.firstNormalSlot){var t=Hi(0===(n=e+32+1)?1:(n--,n|=n>>1,n|=n>>2,n|=n>>4,n|=n>>8,n|=n>>16,1+(n|=n>>32)))-Hi(32)-1;return[t,e-(this.getSlotsInEpoch(t)-32)]}var n,r=e-this.firstNormalSlot,i=Math.floor(r/this.slotsPerEpoch);return[this.firstNormalEpoch+i,r%this.slotsPerEpoch]}},{key:"getFirstSlotInEpoch",value:function(e){return e<=this.firstNormalEpoch?32*(Math.pow(2,e)-1):(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}},{key:"getLastSlotInEpoch",value:function(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}},{key:"getSlotsInEpoch",value:function(e){return e<this.firstNormalEpoch?Math.pow(2,e+Hi(32)):this.slotsPerEpoch}}]),e}(),Yi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;return(0,y.Z)(this,n),(i=t.call(this,e)).logs=void 0,i.logs=r,i}return(0,m.Z)(n)}((0,l.Z)(Error)),Xi={JSON_RPC_SERVER_ERROR_BLOCK_CLEANED_UP:-32001,JSON_RPC_SERVER_ERROR_SEND_TRANSACTION_PREFLIGHT_FAILURE:-32002,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_VERIFICATION_FAILURE:-32003,JSON_RPC_SERVER_ERROR_BLOCK_NOT_AVAILABLE:-32004,JSON_RPC_SERVER_ERROR_NODE_UNHEALTHY:-32005,JSON_RPC_SERVER_ERROR_TRANSACTION_PRECOMPILE_VERIFICATION_FAILURE:-32006,JSON_RPC_SERVER_ERROR_SLOT_SKIPPED:-32007,JSON_RPC_SERVER_ERROR_NO_SNAPSHOT:-32008,JSON_RPC_SERVER_ERROR_LONG_TERM_STORAGE_SLOT_SKIPPED:-32009,JSON_RPC_SERVER_ERROR_KEY_EXCLUDED_FROM_SECONDARY_INDEX:-32010,JSON_RPC_SERVER_ERROR_TRANSACTION_HISTORY_NOT_AVAILABLE:-32011,JSON_RPC_SCAN_ERROR:-32012,JSON_RPC_SERVER_ERROR_TRANSACTION_SIGNATURE_LEN_MISMATCH:-32013,JSON_RPC_SERVER_ERROR_BLOCK_STATUS_NOT_AVAILABLE_YET:-32014,JSON_RPC_SERVER_ERROR_UNSUPPORTED_TRANSACTION_VERSION:-32015,JSON_RPC_SERVER_ERROR_MIN_CONTEXT_SLOT_NOT_REACHED:-32016},Qi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i,o=e.code,a=e.message,s=e.data;return(0,y.Z)(this,n),(i=t.call(this,null!=r?"".concat(r,": ").concat(a):a)).code=void 0,i.data=void 0,i.code=o,i.data=s,i.name="SolanaJSONRPCError",i}return(0,m.Z)(n)}((0,l.Z)(Error)),$i=globalThis.fetch,Ji=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;(0,y.Z)(this,n);return(o=t.call(this,(function(e){var t=(0,Vt.Z)(e,(0,a.Z)({autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3},r));return o.underlyingSocket="socket"in t?t.socket:t,t}),e,r,i)).underlyingSocket=void 0,o}return(0,m.Z)(n,[{key:"call",value:function(){for(var e,t,r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return 1===r?(t=(0,i.Z)((0,o.Z)(n.prototype),"call",this)).call.apply(t,[this].concat(s)):Promise.reject(new Error("Tried to call a JSON-RPC method `"+s[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}},{key:"notify",value:function(){for(var e,t,r=null===(e=this.underlyingSocket)||void 0===e?void 0:e.readyState,a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];return 1===r?(t=(0,i.Z)((0,o.Z)(n.prototype),"notify",this)).call.apply(t,[this].concat(s)):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+s[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+r+")"))}}]),n}(Wt.Z);var eo=function(){function e(t){(0,y.Z)(this,e),this.key=void 0,this.state=void 0,this.key=t.key,this.state=t.state}return(0,m.Z)(e,[{key:"isActive",value:function(){var e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}}],[{key:"deserialize",value:function(e){var t=function(e,t){var n;try{n=e.layout.decode(t)}catch(r){throw new Error("invalid instruction; "+r)}if(n.typeIndex!==e.index)throw new Error("invalid account data; account type mismatch ".concat(n.typeIndex," != ").concat(e.index));return n}(to,e),n=e.length-56;oi(n>=0,"lookup table is invalid"),oi(n%32===0,"lookup table is invalid");var r=n/32,i=it.struct([it.seq(Jr(),r,"addresses")]).decode(e.slice(56)).addresses;return{deactivationSlot:t.deactivationSlot,lastExtendedSlot:t.lastExtendedSlot,lastExtendedSlotStartIndex:t.lastExtendedStartIndex,authority:0!==t.authority.length?new Wr(t.authority[0]):void 0,addresses:i.map((function(e){return new Wr(e)}))}}}]),e}(),to={index:1,layout:it.struct([it.u32("typeIndex"),Ri("deactivationSlot"),it.nu64("lastExtendedSlot"),it.u8("lastExtendedStartIndex"),it.u8(),it.seq(Jr(),it.offset(it.u8(),-1),"authority")])},no=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;var ro=Ut(Tt(Wr),Rt(),(function(e){return new Wr(e)})),io=Lt([Rt(),Mt("base64")]),oo=Ut(Tt(g.lW),io,(function(e){return g.lW.from(e[0],"base64")})),ao=3e4;function so(e){var t,n;if("string"===typeof e)t=e;else if(e){t=e.commitment,n=(0,r.Z)(e,Er)}return{commitment:t,config:n}}function uo(e){return Zt([zt({jsonrpc:Mt("2.0"),id:Rt(),result:e}),zt({jsonrpc:Mt("2.0"),id:Rt(),error:zt({code:Nt(),message:Rt(),data:Ot(Et("any",(function(){return!0})))})})])}var co=uo(Nt());function lo(e){return Ut(uo(e),co,(function(t){return"error"in t?t:(0,a.Z)((0,a.Z)({},t),{},{result:xt(t.result,e)})}))}function fo(e){return lo(zt({context:zt({slot:Ct()}),value:e}))}function ho(e){return zt({context:zt({slot:Ct()}),value:e})}function po(e,t){return 0===e?new ci({header:t.header,staticAccountKeys:t.accountKeys.map((function(e){return new Wr(e)})),recentBlockhash:t.recentBlockhash,compiledInstructions:t.instructions.map((function(e){return{programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:Ye().decode(e.data)}})),addressTableLookups:t.addressTableLookups}):new ui(t)}var yo=zt({foundation:Ct(),foundationTerm:Ct(),initial:Ct(),taper:Ct(),terminal:Ct()}),mo=lo(It(Bt(zt({epoch:Ct(),effectiveSlot:Ct(),amount:Ct(),postBalance:Ct(),commission:Ot(Bt(Ct()))})))),go=zt({total:Ct(),validator:Ct(),foundation:Ct(),epoch:Ct()}),vo=zt({epoch:Ct(),slotIndex:Ct(),slotsInEpoch:Ct(),absoluteSlot:Ct(),blockHeight:Ot(Ct()),transactionCount:Ot(Ct())}),bo=zt({slotsPerEpoch:Ct(),leaderScheduleSlotOffset:Ct(),warmup:St(),firstNormalEpoch:Ct(),firstNormalSlot:Ct()}),_o=Dt(Rt(),It(Ct())),wo=Bt(Zt([zt({}),Rt()])),xo=zt({err:wo}),ko=Mt("receivedSignature"),Ao=zt({"solana-core":Rt(),"feature-set":Ot(Ct())}),Eo=fo(zt({err:Bt(Zt([zt({}),Rt()])),logs:Bt(It(Rt())),accounts:Ot(Bt(It(Bt(zt({executable:St(),owner:Rt(),lamports:Ct(),data:It(Rt()),rentEpoch:Ot(Ct())}))))),unitsConsumed:Ot(Ct()),returnData:Ot(Bt(zt({programId:Rt(),data:Lt([Rt(),Mt("base64")])})))})),Io=fo(zt({byIdentity:Dt(Rt(),It(Ct())),range:zt({firstSlot:Ct(),lastSlot:Ct()})}));var So=lo(yo),To=lo(go),Mo=lo(vo),Po=lo(bo),Bo=lo(_o),Co=lo(Ct()),Oo=fo(zt({total:Ct(),circulating:Ct(),nonCirculating:Ct(),nonCirculatingAccounts:It(ro)})),Do=zt({amount:Rt(),uiAmount:Bt(Ct()),decimals:Ct(),uiAmountString:Ot(Rt())}),Ro=fo(It(zt({address:ro,amount:Rt(),uiAmount:Bt(Ct()),decimals:Ct(),uiAmountString:Ot(Rt())}))),Lo=fo(It(zt({pubkey:ro,account:zt({executable:St(),owner:ro,lamports:Ct(),data:oo,rentEpoch:Ct()})}))),zo=zt({program:Rt(),parsed:Nt(),space:Ct()}),Zo=fo(It(zt({pubkey:ro,account:zt({executable:St(),owner:ro,lamports:Ct(),data:zo,rentEpoch:Ct()})}))),No=fo(It(zt({lamports:Ct(),address:ro}))),Uo=zt({executable:St(),owner:ro,lamports:Ct(),data:oo,rentEpoch:Ct()}),Fo=zt({pubkey:ro,account:Uo}),jo=Ut(Zt([Tt(g.lW),zo]),Zt([io,zo]),(function(e){return Array.isArray(e)?xt(e,oo):e})),Wo=zt({executable:St(),owner:ro,lamports:Ct(),data:jo,rentEpoch:Ct()}),Vo=zt({pubkey:ro,account:Wo}),Ko=zt({state:Zt([Mt("active"),Mt("inactive"),Mt("activating"),Mt("deactivating")]),active:Ct(),inactive:Ct()}),Go=lo(It(zt({signature:Rt(),slot:Ct(),err:wo,memo:Bt(Rt()),blockTime:Ot(Bt(Ct()))}))),Ho=lo(It(zt({signature:Rt(),slot:Ct(),err:wo,memo:Bt(Rt()),blockTime:Ot(Bt(Ct()))}))),qo=zt({subscription:Ct(),result:ho(Uo)}),Yo=zt({pubkey:ro,account:Uo}),Xo=zt({subscription:Ct(),result:ho(Yo)}),Qo=zt({parent:Ct(),slot:Ct(),root:Ct()}),$o=zt({subscription:Ct(),result:Qo}),Jo=Zt([zt({type:Zt([Mt("firstShredReceived"),Mt("completed"),Mt("optimisticConfirmation"),Mt("root")]),slot:Ct(),timestamp:Ct()}),zt({type:Mt("createdBank"),parent:Ct(),slot:Ct(),timestamp:Ct()}),zt({type:Mt("frozen"),slot:Ct(),timestamp:Ct(),stats:zt({numTransactionEntries:Ct(),numSuccessfulTransactions:Ct(),numFailedTransactions:Ct(),maxTransactionsPerEntry:Ct()})}),zt({type:Mt("dead"),slot:Ct(),timestamp:Ct(),err:Rt()})]),ea=zt({subscription:Ct(),result:Jo}),ta=zt({subscription:Ct(),result:ho(Zt([xo,ko]))}),na=zt({subscription:Ct(),result:Ct()}),ra=zt({pubkey:Rt(),gossip:Bt(Rt()),tpu:Bt(Rt()),rpc:Bt(Rt()),version:Bt(Rt())}),ia=zt({votePubkey:Rt(),nodePubkey:Rt(),activatedStake:Ct(),epochVoteAccount:St(),epochCredits:It(Lt([Ct(),Ct(),Ct()])),commission:Ct(),lastVote:Ct(),rootSlot:Bt(Ct())}),oa=lo(zt({current:It(ia),delinquent:It(ia)})),aa=Zt([Mt("processed"),Mt("confirmed"),Mt("finalized")]),sa=zt({slot:Ct(),confirmations:Bt(Ct()),err:wo,confirmationStatus:Ot(aa)}),ua=fo(It(Bt(sa))),ca=lo(Ct()),la=zt({accountKey:ro,writableIndexes:It(Ct()),readonlyIndexes:It(Ct())}),fa=zt({signatures:It(Rt()),message:zt({accountKeys:It(Rt()),header:zt({numRequiredSignatures:Ct(),numReadonlySignedAccounts:Ct(),numReadonlyUnsignedAccounts:Ct()}),instructions:It(zt({accounts:It(Ct()),data:Rt(),programIdIndex:Ct()})),recentBlockhash:Rt(),addressTableLookups:Ot(It(la))})}),ha=zt({pubkey:ro,signer:St(),writable:St(),source:Ot(Zt([Mt("transaction"),Mt("lookupTable")]))}),da=zt({accountKeys:It(ha),signatures:It(Rt())}),pa=zt({parsed:Nt(),program:Rt(),programId:ro}),ya=zt({accounts:It(ro),data:Rt(),programId:ro}),ma=Ut(Zt([ya,pa]),Zt([zt({parsed:Nt(),program:Rt(),programId:Rt()}),zt({accounts:It(Rt()),data:Rt(),programId:Rt()})]),(function(e){return xt(e,"accounts"in e?ya:pa)})),ga=zt({signatures:It(Rt()),message:zt({accountKeys:It(ha),instructions:It(ma),recentBlockhash:Rt(),addressTableLookups:Ot(Bt(It(la)))})}),va=zt({accountIndex:Ct(),mint:Rt(),owner:Ot(Rt()),uiTokenAmount:Do}),ba=zt({writable:It(ro),readonly:It(ro)}),_a=zt({err:wo,fee:Ct(),innerInstructions:Ot(Bt(It(zt({index:Ct(),instructions:It(zt({accounts:It(Ct()),data:Rt(),programIdIndex:Ct()}))})))),preBalances:It(Ct()),postBalances:It(Ct()),logMessages:Ot(Bt(It(Rt()))),preTokenBalances:Ot(Bt(It(va))),postTokenBalances:Ot(Bt(It(va))),loadedAddresses:Ot(ba),computeUnitsConsumed:Ot(Ct())}),wa=zt({err:wo,fee:Ct(),innerInstructions:Ot(Bt(It(zt({index:Ct(),instructions:It(ma)})))),preBalances:It(Ct()),postBalances:It(Ct()),logMessages:Ot(Bt(It(Rt()))),preTokenBalances:Ot(Bt(It(va))),postTokenBalances:Ot(Bt(It(va))),loadedAddresses:Ot(ba),computeUnitsConsumed:Ot(Ct())}),xa=Zt([Mt(0),Mt("legacy")]),ka=zt({pubkey:Rt(),lamports:Ct(),postBalance:Bt(Ct()),rewardType:Bt(Rt()),commission:Ot(Bt(Ct()))}),Aa=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),transactions:It(zt({transaction:fa,meta:Bt(_a),version:Ot(xa)})),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Ea=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Ia=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),transactions:It(zt({transaction:da,meta:Bt(_a),version:Ot(xa)})),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Sa=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),transactions:It(zt({transaction:ga,meta:Bt(wa),version:Ot(xa)})),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Ta=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),transactions:It(zt({transaction:da,meta:Bt(wa),version:Ot(xa)})),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Ma=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),rewards:Ot(It(ka)),blockTime:Bt(Ct()),blockHeight:Bt(Ct())}))),Pa=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),transactions:It(zt({transaction:fa,meta:Bt(_a)})),rewards:Ot(It(ka)),blockTime:Bt(Ct())}))),Ba=lo(Bt(zt({blockhash:Rt(),previousBlockhash:Rt(),parentSlot:Ct(),signatures:It(Rt()),blockTime:Bt(Ct())}))),Ca=lo(Bt(zt({slot:Ct(),meta:_a,blockTime:Ot(Bt(Ct())),transaction:fa,version:Ot(xa)}))),Oa=lo(Bt(zt({slot:Ct(),transaction:ga,meta:Bt(wa),blockTime:Ot(Bt(Ct())),version:Ot(xa)}))),Da=fo(zt({blockhash:Rt(),feeCalculator:zt({lamportsPerSignature:Ct()})})),Ra=fo(zt({blockhash:Rt(),lastValidBlockHeight:Ct()})),La=lo(It(zt({slot:Ct(),numTransactions:Ct(),numSlots:Ct(),samplePeriodSecs:Ct()}))),za=fo(Bt(zt({feeCalculator:zt({lamportsPerSignature:Ct()})}))),Za=lo(Rt()),Na=lo(Rt()),Ua=zt({err:wo,logs:It(Rt()),signature:Rt()}),Fa=zt({result:ho(Ua),subscription:Ct()}),ja={"solana-client":"js/".concat("0.0.0-development")},Wa=function(){function e(t,n){var r,i,o,a,c,l;(0,y.Z)(this,e),this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,n&&"string"===typeof n?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,r=n.wsEndpoint,i=n.httpHeaders,o=n.fetch,a=n.fetchMiddleware,c=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=function(e){if(!1===/^https?:/.test(e))throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return e}(t),this._rpcWsEndpoint=r||function(e){var t=e.match(no);if(null==t)throw TypeError("Failed to validate endpoint URL `".concat(e,"`"));var n=(0,s.Z)(t,4),r=(n[0],n[1]),i=n[2],o=n[3],a=e.startsWith("https:")?"wss:":"ws:",u=null==i?null:parseInt(i.slice(1),10),c=null==u?"":":".concat(u+1);return"".concat(a,"//").concat(r).concat(c).concat(o)}(t),this._rpcClient=function(e,t,n,r,i,o){var a,s=n||$i;null!=o&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments."),r&&(a=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,i){try{r(t,n,(function(t,n){return e([t,n])}))}catch(o){i(o)}}));case 2:return i=e.sent,e.next=5,s.apply(void 0,(0,u.Z)(i));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());var c=new(jt())(function(){var n=(0,h.Z)((0,f.Z)().mark((function n(r,o){var u,c,l,h,d;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u={method:"POST",body:r,agent:void 0,headers:Object.assign({"Content-Type":"application/json"},t||{},ja)},n.prev=1,c=5,h=500;case 4:if(!a){n.next=10;break}return n.next=7,a(e,u);case 7:l=n.sent,n.next=13;break;case 10:return n.next=12,s(e,u);case 12:l=n.sent;case 13:if(429===l.status){n.next=15;break}return n.abrupt("break",26);case 15:if(!0!==i){n.next=17;break}return n.abrupt("break",26);case 17:if(0!==(c-=1)){n.next=20;break}return n.abrupt("break",26);case 20:return console.log("Server responded with ".concat(l.status," ").concat(l.statusText,".  Retrying after ").concat(h,"ms delay...")),n.next=23,Si(h);case 23:h*=2;case 24:n.next=4;break;case 26:return n.next=28,l.text();case 28:d=n.sent,l.ok?o(null,d):o(new Error("".concat(l.status," ").concat(l.statusText,": ").concat(d))),n.next=35;break;case 32:n.prev=32,n.t0=n.catch(1),n.t0 instanceof Error&&o(n.t0);case 35:case"end":return n.stop()}}),n,null,[[1,32]])})));return function(e,t){return n.apply(this,arguments)}}(),{});return c}(t,i,o,a,c,l),this._rpcRequest=function(e){return function(t,n){return new Promise((function(r,i){e.request(t,n,(function(e,t){e?i(e):r(t)}))}))}}(this._rpcClient),this._rpcBatchRequest=function(e){return function(t){return new Promise((function(n,r){0===t.length&&n([]);var i=t.map((function(t){return e.request(t.methodName,t.args)}));e.request(i,(function(e,t){e?r(e):n(t)}))}))}}(this._rpcClient),this._rpcWebSocket=new Ji(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}return(0,m.Z)(e,[{key:"commitment",get:function(){return this._commitment}},{key:"rpcEndpoint",get:function(){return this._rpcEndpoint}},{key:"getBalanceAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgs([t.toBase58()],i,void 0,o),e.next=4,this._rpcRequest("getBalance",a);case 4:if(s=e.sent,!("error"in(u=xt(s,fo(Ct()))))){e.next=8;break}throw new Qi(u.error,"failed to get balance for ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBalanceAndContext(t,n).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get balance of account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBlockTime",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getBlockTime",[t]);case 2:if(n=e.sent,!("error"in(r=xt(n,lo(Bt(Ct())))))){e.next=6;break}throw new Qi(r.error,"failed to get block time for slot ".concat(t));case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinimumLedgerSlot",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("minimumLedgerSlot",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,lo(Ct()))))){e.next=6;break}throw new Qi(n.error,"failed to get minimum ledger slot");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstAvailableBlock",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getFirstAvailableBlock",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,Co)))){e.next=6;break}throw new Qi(n.error,"failed to get first available block");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSupply",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},n="string"===typeof t?{commitment:t}:t?(0,a.Z)((0,a.Z)({},t),{},{commitment:t&&t.commitment||this.commitment}):{commitment:this.commitment},e.next=4,this._rpcRequest("getSupply",[n]);case 4:if(r=e.sent,!("error"in(i=xt(r,Oo)))){e.next=8;break}throw new Qi(i.error,"failed to get supply");case 8:return e.abrupt("return",i.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenSupply",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([t.toBase58()],n),e.next=3,this._rpcRequest("getTokenSupply",r);case 3:if(i=e.sent,!("error"in(o=xt(i,fo(Do))))){e.next=7;break}throw new Qi(o.error,"failed to get token supply");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTokenAccountBalance",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([t.toBase58()],n),e.next=3,this._rpcRequest("getTokenAccountBalance",r);case 3:if(i=e.sent,!("error"in(o=xt(i,fo(Do))))){e.next=7;break}throw new Qi(o.error,"failed to get token account balance");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTokenAccountsByOwner",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a,s,u,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=so(r),o=i.commitment,a=i.config,s=[t.toBase58()],"mint"in n?s.push({mint:n.mint.toBase58()}):s.push({programId:n.programId.toBase58()}),u=this._buildArgs(s,o,"base64",a),e.next=6,this._rpcRequest("getTokenAccountsByOwner",u);case 6:if(c=e.sent,!("error"in(l=xt(c,Lo)))){e.next=10;break}throw new Qi(l.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 10:return e.abrupt("return",l.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getParsedTokenAccountsByOwner",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=[t.toBase58()],"mint"in n?i.push({mint:n.mint.toBase58()}):i.push({programId:n.programId.toBase58()}),o=this._buildArgs(i,r,"jsonParsed"),e.next=5,this._rpcRequest("getTokenAccountsByOwner",o);case 5:if(a=e.sent,!("error"in(s=xt(a,Zo)))){e.next=9;break}throw new Qi(s.error,"failed to get token accounts owned by account ".concat(t.toBase58()));case 9:return e.abrupt("return",s.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getLargestAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,a.Z)((0,a.Z)({},t),{},{commitment:t&&t.commitment||this.commitment}),r=n.filter||n.commitment?[n]:[],e.next=4,this._rpcRequest("getLargestAccounts",r);case 4:if(i=e.sent,!("error"in(o=xt(i,No)))){e.next=8;break}throw new Qi(o.error,"failed to get largest accounts");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTokenLargestAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([t.toBase58()],n),e.next=3,this._rpcRequest("getTokenLargestAccounts",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Ro)))){e.next=7;break}throw new Qi(o.error,"failed to get token largest accounts");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAccountInfoAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgs([t.toBase58()],i,"base64",o),e.next=4,this._rpcRequest("getAccountInfo",a);case 4:if(s=e.sent,!("error"in(u=xt(s,fo(Bt(Uo)))))){e.next=8;break}throw new Qi(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedAccountInfo",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgs([t.toBase58()],i,"jsonParsed",o),e.next=4,this._rpcRequest("getAccountInfo",a);case 4:if(s=e.sent,!("error"in(u=xt(s,fo(Bt(Wo)))))){e.next=8;break}throw new Qi(u.error,"failed to get info about account ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAccountInfoAndContext(t,n);case 3:return r=e.sent,e.abrupt("return",r.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get info about account "+t.toBase58()+": "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultipleParsedAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=t.map((function(e){return e.toBase58()})),s=this._buildArgs([a],i,"jsonParsed",o),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=xt(u,fo(It(Bt(Wo))))))){e.next=9;break}throw new Qi(c.error,"failed to get info for accounts ".concat(a));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfoAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=t.map((function(e){return e.toBase58()})),s=this._buildArgs([a],i,"base64",o),e.next=5,this._rpcRequest("getMultipleAccounts",s);case 5:if(u=e.sent,!("error"in(c=xt(u,fo(It(Bt(Uo))))))){e.next=9;break}throw new Qi(c.error,"failed to get info for accounts ".concat(a));case 9:return e.abrupt("return",c.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultipleAccountsInfo",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMultipleAccountsInfoAndContext(t,n);case 2:return r=e.sent,e.abrupt("return",r.value);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getStakeActivation",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,s,u,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=so(n),o=i.commitment,s=i.config,u=this._buildArgs([t.toBase58()],o,void 0,(0,a.Z)((0,a.Z)({},s),{},{epoch:null!=r?r:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getStakeActivation",u);case 4:if(c=e.sent,!("error"in(l=xt(c,lo(Ko))))){e.next=8;break}throw new Qi(l.error,"failed to get Stake Activation ".concat(t.toBase58()));case 8:return e.abrupt("return",l.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getProgramAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var i,o,a,s,u,c,l,h,d;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=so(n),o=i.commitment,a=i.config,u=(s=a||{}).encoding,c=(0,r.Z)(s,Ir),l=this._buildArgs([t.toBase58()],o,u||"base64",c),e.next=5,this._rpcRequest("getProgramAccounts",l);case 5:if(h=e.sent,!("error"in(d=xt(h,lo(It(Fo)))))){e.next=9;break}throw new Qi(d.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 9:return e.abrupt("return",d.result);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedProgramAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgs([t.toBase58()],i,"jsonParsed",o),e.next=4,this._rpcRequest("getProgramAccounts",a);case 4:if(s=e.sent,!("error"in(u=xt(s,lo(It(Vo)))))){e.next=8;break}throw new Qi(u.error,"failed to get accounts owned by program ".concat(t.toBase58()));case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"confirmTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"!=typeof t){e.next=4;break}r=t,e.next=8;break;case 4:if(null===(i=(o=t).abortSignal)||void 0===i||!i.aborted){e.next=7;break}return e.abrupt("return",Promise.reject(o.abortSignal.reason));case 7:r=o.signature;case 8:e.prev=8,a=Ye().decode(r),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(8),new Error("signature must be base58 encoded: "+r);case 15:if(oi(64===a.length,"signature has invalid length"),"string"!==typeof t){e.next=22;break}return e.next=19,this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:r});case 19:return e.abrupt("return",e.sent);case 22:if(!("lastValidBlockHeight"in t)){e.next=28;break}return e.next=25,this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:t});case 25:return e.abrupt("return",e.sent);case 28:return e.next=30,this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:t});case 30:return e.abrupt("return",e.sent);case 31:case"end":return e.stop()}}),e,this,[[8,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCancellationPromise",value:function(e){return new Promise((function(t,n){null!=e&&(e.aborted?n(e.reason):e.addEventListener("abort",(function(){n(e.reason)})))}))}},{key:"getTransactionConfirmationPromise",value:function(e){var t,n,r=this,i=e.commitment,o=e.signature,a=!1;return{abortConfirmation:function(){n&&(n(),n=void 0),null!=t&&(r.removeSignatureListener(t),t=void 0)},confirmationPromise:new Promise((function(e,s){try{t=r.onSignature(o,(function(n,r){t=void 0;var i={context:r,value:n};e({__type:ai.PROCESSED,response:i})}),i);var u=new Promise((function(e){null==t?e():n=r._onSubscriptionStateChange(t,(function(t){"subscribed"===t&&e()}))}));(0,h.Z)((0,f.Z)().mark((function t(){var n,c,l;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u;case 2:if(!a){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,r.getSignatureStatus(o);case 6:if(n=t.sent,!a){t.next=9;break}return t.abrupt("return");case 9:if(null!=n){t.next=11;break}return t.abrupt("return");case 11:if(c=n.context,null!=(l=n.value)){t.next=14;break}return t.abrupt("return");case 14:if(null===l||void 0===l||!l.err){t.next=18;break}s(l.err),t.next=29;break;case 18:t.t0=i,t.next="confirmed"===t.t0||"single"===t.t0||"singleGossip"===t.t0?21:"finalized"===t.t0||"max"===t.t0||"root"===t.t0?24:("processed"===t.t0||t.t0,27);break;case 21:if("processed"!==l.confirmationStatus){t.next=23;break}return t.abrupt("return");case 23:return t.abrupt("break",27);case 24:if("processed"!==l.confirmationStatus&&"confirmed"!==l.confirmationStatus){t.next=26;break}return t.abrupt("return");case 26:return t.abrupt("break",27);case 27:a=!0,e({__type:ai.PROCESSED,response:{context:c,value:l}});case 29:case"end":return t.stop()}}),t)})))()}catch(c){s(c)}}))}}},{key:"confirmTransactionUsingBlockHeightExceedanceStrategy",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s,u,c,l,d,p,y,m,g=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commitment,r=t.strategy,i=r.abortSignal,o=r.lastValidBlockHeight,a=r.signature,s=!1,u=new Promise((function(e){var t=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.getBlockHeight(n);case 3:return t=e.sent,e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",-1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();(0,h.Z)((0,f.Z)().mark((function n(){var r;return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t();case 2:if(r=n.sent,!s){n.next=5;break}return n.abrupt("return");case 5:if(!(r<=o)){n.next=17;break}return n.next=8,Si(1e3);case 8:if(!s){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,t();case 12:if(r=n.sent,!s){n.next=15;break}return n.abrupt("return");case 15:n.next=5;break;case 17:e({__type:ai.BLOCKHEIGHT_EXCEEDED});case 18:case"end":return n.stop()}}),n)})))()})),c=this.getTransactionConfirmationPromise({commitment:n,signature:a}),l=c.abortConfirmation,d=c.confirmationPromise,p=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([p,d,u]);case 8:if((m=e.sent).__type!==ai.PROCESSED){e.next=13;break}y=m.response,e.next=14;break;case 13:throw new Yr(a);case 14:return e.prev=14,s=!0,l(),e.finish(14);case 18:return e.abrupt("return",y);case 19:case"end":return e.stop()}}),e,this,[[5,,14,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingDurableNonceStrategy",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s,u,c,l,d,p,y,m,g,v,b,_,w,x,k,A,E=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commitment,r=t.strategy,i=r.abortSignal,o=r.minContextSlot,a=r.nonceAccountPubkey,s=r.nonceValue,u=r.signature,c=!1,l=new Promise((function(e){var t=s,r=null,i=function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var i,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.getNonceAndContext(a,{commitment:n,minContextSlot:o});case 3:return i=e.sent,s=i.context,u=i.value,r=s.slot,e.abrupt("return",null===u||void 0===u?void 0:u.nonce);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,h.Z)((0,f.Z)().mark((function n(){return(0,f.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i();case 2:if(t=n.sent,!c){n.next=5;break}return n.abrupt("return");case 5:if(s===t){n.next=9;break}return e({__type:ai.NONCE_INVALID,slotInWhichNonceDidAdvance:r}),n.abrupt("return");case 9:return n.next=11,Si(2e3);case 11:if(!c){n.next=13;break}return n.abrupt("return");case 13:return n.next=15,i();case 15:if(t=n.sent,!c){n.next=18;break}return n.abrupt("return");case 18:n.next=5;break;case 20:case"end":return n.stop()}}),n)})))()})),d=this.getTransactionConfirmationPromise({commitment:n,signature:u}),p=d.abortConfirmation,y=d.confirmationPromise,m=this.getCancellationPromise(i),e.prev=5,e.next=8,Promise.race([m,y,l]);case 8:if((v=e.sent).__type!==ai.PROCESSED){e.next=13;break}g=v.response,e.next=47;break;case 13:return e.next=16,this.getSignatureStatus(u);case 16:if(null!=(x=e.sent)){e.next=19;break}return e.abrupt("break",27);case 19:if(!(x.context.slot<(null!==(w=v.slotInWhichNonceDidAdvance)&&void 0!==w?w:o))){e.next=23;break}return e.next=22,Si(400);case 22:return e.abrupt("continue",13);case 23:return _=x,e.abrupt("break",27);case 27:if(null===(b=_)||void 0===b||!b.value){e.next=46;break}k=n||"finalized",A=_.value.confirmationStatus,e.t0=k,e.next="processed"===e.t0||"recent"===e.t0?33:"confirmed"===e.t0||"single"===e.t0||"singleGossip"===e.t0?36:"finalized"===e.t0||"max"===e.t0||"root"===e.t0?39:42;break;case 33:if("processed"===A||"confirmed"===A||"finalized"===A){e.next=35;break}throw new Qr(u);case 35:case 38:case 41:return e.abrupt("break",43);case 36:if("confirmed"===A||"finalized"===A){e.next=38;break}throw new Qr(u);case 39:if("finalized"===A){e.next=41;break}throw new Qr(u);case 42:case 43:g={context:_.context,value:{err:_.value.err}},e.next=47;break;case 46:throw new Qr(u);case 47:return e.prev=47,c=!0,p(),e.finish(47);case 51:return e.abrupt("return",g);case 52:case"end":return e.stop()}}),e,this,[[5,,47,51]])})));return function(t){return e.apply(this,arguments)}}()},{key:"confirmTransactionUsingLegacyTimeoutStrategy",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s,u,c,l,h=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.commitment,r=t.signature,o=new Promise((function(e){var t=h._confirmTransactionInitialTimeout||6e4;switch(n){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":t=h._confirmTransactionInitialTimeout||3e4}i=setTimeout((function(){return e({__type:ai.TIMED_OUT,timeoutMs:t})}),t)})),a=this.getTransactionConfirmationPromise({commitment:n,signature:r}),s=a.abortConfirmation,u=a.confirmationPromise,e.prev=3,e.next=6,Promise.race([u,o]);case 6:if((l=e.sent).__type!==ai.PROCESSED){e.next=11;break}c=l.response,e.next=12;break;case 11:throw new Xr(r,l.timeoutMs/1e3);case 12:return e.prev=12,clearTimeout(i),s(),e.finish(12);case 16:return e.abrupt("return",c);case 17:case"end":return e.stop()}}),e,this,[[3,,12,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getClusterNodes",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getClusterNodes",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,lo(It(ra)))))){e.next=6;break}throw new Qi(n.error,"failed to get cluster nodes");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVoteAccounts",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([],t),e.next=3,this._rpcRequest("getVoteAccounts",n);case 3:if(r=e.sent,!("error"in(i=xt(r,oa)))){e.next=7;break}throw new Qi(i.error,"failed to get vote accounts");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlot",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getSlot",o);case 4:if(a=e.sent,!("error"in(s=xt(a,lo(Ct()))))){e.next=8;break}throw new Qi(s.error,"failed to get slot");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeader",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getSlotLeader",o);case 4:if(a=e.sent,!("error"in(s=xt(a,lo(Rt()))))){e.next=8;break}throw new Qi(s.error,"failed to get slot leader");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getSlotLeaders",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[t,n],e.next=3,this._rpcRequest("getSlotLeaders",r);case 3:if(i=e.sent,!("error"in(o=xt(i,lo(It(ro)))))){e.next=7;break}throw new Qi(o.error,"failed to get slot leaders");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSignatureStatus",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSignatureStatuses([t],n);case 2:return r=e.sent,i=r.context,oi(1===(o=r.value).length),a=o[0],e.abrupt("return",{context:i,value:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSignatureStatuses",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[t],n&&r.push(n),e.next=4,this._rpcRequest("getSignatureStatuses",r);case 4:if(i=e.sent,!("error"in(o=xt(i,ua)))){e.next=8;break}throw new Qi(o.error,"failed to get signature status");case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactionCount",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getTransactionCount",o);case 4:if(a=e.sent,!("error"in(s=xt(a,lo(Ct()))))){e.next=8;break}throw new Qi(s.error,"failed to get transaction count");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalSupply",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSupply({commitment:t,excludeNonCirculatingAccountsList:!0});case 2:return n=e.sent,e.abrupt("return",n.value.total);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationGovernor",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([],t),e.next=3,this._rpcRequest("getInflationGovernor",n);case 3:if(r=e.sent,!("error"in(i=xt(r,So)))){e.next=7;break}throw new Qi(i.error,"failed to get inflation");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getInflationReward",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,s,u,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=so(r),o=i.commitment,s=i.config,u=this._buildArgs([t.map((function(e){return e.toBase58()}))],o,void 0,(0,a.Z)((0,a.Z)({},s),{},{epoch:null!=n?n:null===s||void 0===s?void 0:s.epoch})),e.next=4,this._rpcRequest("getInflationReward",u);case 4:if(c=e.sent,!("error"in(l=xt(c,mo)))){e.next=8;break}throw new Qi(l.error,"failed to get inflation reward");case 8:return e.abrupt("return",l.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getInflationRate",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getInflationRate",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,To)))){e.next=6;break}throw new Qi(n.error,"failed to get inflation rate");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEpochInfo",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getEpochInfo",o);case 4:if(a=e.sent,!("error"in(s=xt(a,Mo)))){e.next=8;break}throw new Qi(s.error,"failed to get epoch info");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEpochSchedule",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getEpochSchedule",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,Po)))){e.next=6;break}throw new Qi(n.error,"failed to get epoch schedule");case 6:return r=n.result,e.abrupt("return",new qi(r.slotsPerEpoch,r.leaderScheduleSlotOffset,r.warmup,r.firstNormalEpoch,r.firstNormalSlot));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLeaderSchedule",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getLeaderSchedule",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,Bo)))){e.next=6;break}throw new Qi(n.error,"failed to get leader schedule");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getMinimumBalanceForRentExemption",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([t],n),e.next=3,this._rpcRequest("getMinimumBalanceForRentExemption",r);case 3:if(i=e.sent,!("error"in(o=xt(i,ca)))){e.next=8;break}return console.warn("Unable to fetch minimum balance for rent exemption"),e.abrupt("return",0);case 8:return e.abrupt("return",o.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRecentBlockhashAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._buildArgs([],t),e.next=3,this._rpcRequest("getRecentBlockhash",n);case 3:if(r=e.sent,!("error"in(i=xt(r,Da)))){e.next=7;break}throw new Qi(i.error,"failed to get recent blockhash");case 7:return e.abrupt("return",i.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentPerformanceSamples",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getRecentPerformanceSamples",t?[t]:[]);case 2:if(n=e.sent,!("error"in(r=xt(n,La)))){e.next=6;break}throw new Qi(r.error,"failed to get recent performance samples");case 6:return e.abrupt("return",r.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFeeCalculatorForBlockhash",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgs([t],n),e.next=3,this._rpcRequest("getFeeCalculatorForBlockhash",r);case 3:if(i=e.sent,!("error"in(o=xt(i,za)))){e.next=7;break}throw new Qi(o.error,"failed to get fee calculator");case 7:return a=o.result,s=a.context,u=a.value,e.abrupt("return",{context:s,value:null!==u?u.feeCalculator:null});case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFeeForMessage",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t.serialize()).toString("base64"),i=this._buildArgs([r],n),e.next=4,this._rpcRequest("getFeeForMessage",i);case 4:if(o=e.sent,!("error"in(a=xt(o,fo(Bt(Ct())))))){e.next=8;break}throw new Qi(a.error,"failed to get fee for message");case 8:if(null!==a.result){e.next=10;break}throw new Error("invalid blockhash");case 10:return e.abrupt("return",a.result);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRecentBlockhash",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRecentBlockhashAndContext(t);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhash",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getLatestBlockhashAndContext(t);case 3:return n=e.sent,e.abrupt("return",n.value);case 7:throw e.prev=7,e.t0=e.catch(0),new Error("failed to get recent blockhash: "+e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getLatestBlockhashAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getLatestBlockhash",o);case 4:if(a=e.sent,!("error"in(s=xt(a,Ra)))){e.next=8;break}throw new Qi(s.error,"failed to get latest blockhash");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getVersion",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getVersion",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,lo(Ao))))){e.next=6;break}throw new Qi(n.error,"failed to get version");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGenesisHash",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("getGenesisHash",[]);case 2:if(t=e.sent,!("error"in(n=xt(t,lo(Rt()))))){e.next=6;break}throw new Qi(n.error,"failed to get genesis hash");case 6:return e.abrupt("return",n.result);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlock",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,s,u,c,l,h,d;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,o),e.next=4,this._rpcRequest("getBlock",s);case 4:u=e.sent,e.prev=5,e.t0=null===o||void 0===o?void 0:o.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(c=xt(u,Ia)))){e.next=12;break}throw c.error;case 12:return e.abrupt("return",c.result);case 13:if(!("error"in(l=xt(u,Ea)))){e.next=16;break}throw l.error;case 16:return e.abrupt("return",l.result);case 17:if(!("error"in(h=xt(u,Aa)))){e.next=20;break}throw h.error;case 20:return d=h.result,e.abrupt("return",d?(0,a.Z)((0,a.Z)({},d),{},{transactions:d.transactions.map((function(e){var t=e.transaction,n=e.meta,r=e.version;return{meta:n,transaction:(0,a.Z)((0,a.Z)({},t),{},{message:po(r,t.message)}),version:r}}))}):null);case 22:e.next=27;break;case 24:throw e.prev=24,e.t1=e.catch(5),new Qi(e.t1,"failed to get confirmed block");case 27:case"end":return e.stop()}}),e,this,[[5,24]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedBlock",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",o),e.next=4,this._rpcRequest("getBlock",a);case 4:s=e.sent,e.prev=5,e.t0=null===o||void 0===o?void 0:o.transactionDetails,e.next="accounts"===e.t0?9:"none"===e.t0?13:17;break;case 9:if(!("error"in(u=xt(s,Ta)))){e.next=12;break}throw u.error;case 12:return e.abrupt("return",u.result);case 13:if(!("error"in(c=xt(s,Ma)))){e.next=16;break}throw c.error;case 16:return e.abrupt("return",c.result);case 17:if(!("error"in(l=xt(s,Sa)))){e.next=20;break}throw l.error;case 20:return e.abrupt("return",l.result);case 21:e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(5),new Qi(e.t1,"failed to get block");case 26:case"end":return e.stop()}}),e,this,[[5,23]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBlockHeight",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,void 0,i),e.next=4,this._rpcRequest("getBlockHeight",o);case 4:if(a=e.sent,!("error"in(s=xt(a,lo(Ct()))))){e.next=8;break}throw new Qi(s.error,"failed to get block height information");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getBlockProduction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,i,o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t?i=t:t&&(o=t.commitment,a=(0,r.Z)(t,Sr),i=o,n=a),s=this._buildArgs([],i,"base64",n),e.next=4,this._rpcRequest("getBlockProduction",s);case 4:if(u=e.sent,!("error"in(c=xt(u,Io)))){e.next=8;break}throw new Qi(c.error,"failed to get block production information");case 8:return e.abrupt("return",c.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,s,u,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,s=this._buildArgsAtLeastConfirmed([t],i,void 0,o),e.next=4,this._rpcRequest("getTransaction",s);case 4:if(u=e.sent,!("error"in(c=xt(u,Ca)))){e.next=8;break}throw new Qi(c.error,"failed to get transaction");case 8:if(l=c.result){e.next=11;break}return e.abrupt("return",l);case 11:return e.abrupt("return",(0,a.Z)((0,a.Z)({},l),{},{transaction:(0,a.Z)((0,a.Z)({},l.transaction),{},{message:po(l.version,l.transaction.message)})}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=this._buildArgsAtLeastConfirmed([t],i,"jsonParsed",o),e.next=4,this._rpcRequest("getTransaction",a);case 4:if(s=e.sent,!("error"in(u=xt(s,Oa)))){e.next=8;break}throw new Qi(u.error,"failed to get transaction");case 8:return e.abrupt("return",u.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedTransactions",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u,c=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,a=t.map((function(e){return{methodName:"getTransaction",args:c._buildArgsAtLeastConfirmed([e],i,"jsonParsed",o)}})),e.next=4,this._rpcBatchRequest(a);case 4:return s=e.sent,u=s.map((function(e){var t=xt(e,Oa);if("error"in t)throw new Qi(t.error,"failed to get transactions");return t.result})),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTransactions",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,s,u,c,l=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=so(n),i=r.commitment,o=r.config,s=t.map((function(e){return{methodName:"getTransaction",args:l._buildArgsAtLeastConfirmed([e],i,void 0,o)}})),e.next=4,this._rpcBatchRequest(s);case 4:return u=e.sent,c=u.map((function(e){var t=xt(e,Ca);if("error"in t)throw new Qi(t.error,"failed to get transactions");var n=t.result;return n?(0,a.Z)((0,a.Z)({},n),{},{transaction:(0,a.Z)((0,a.Z)({},n.transaction),{},{message:po(n.version,n.transaction.message)})}):n})),e.abrupt("return",c);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfirmedBlock",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgsAtLeastConfirmed([t],n),e.next=3,this._rpcRequest("getConfirmedBlock",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Pa)))){e.next=7;break}throw new Qi(o.error,"failed to get confirmed block");case 7:if(s=o.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return u=(0,a.Z)((0,a.Z)({},s),{},{transactions:s.transactions.map((function(e){var t=e.transaction,n=e.meta,r=new ui(t.message);return{meta:n,transaction:(0,a.Z)((0,a.Z)({},t),{},{message:r})}}))}),e.abrupt("return",(0,a.Z)((0,a.Z)({},u),{},{transactions:u.transactions.map((function(e){var t=e.transaction;return{meta:e.meta,transaction:di.populate(t.message,t.signatures)}}))}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed(void 0!==n?[t,n]:[t],r),e.next=3,this._rpcRequest("getBlocks",i);case 3:if(o=e.sent,!("error"in(a=xt(o,lo(It(Ct())))))){e.next=7;break}throw new Qi(a.error,"failed to get blocks");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getBlockSignatures",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgsAtLeastConfirmed([t],n,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getBlock",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Ba)))){e.next=7;break}throw new Qi(o.error,"failed to get block");case 7:if(a=o.result){e.next=10;break}throw new Error("Block "+t+" not found");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfirmedBlockSignatures",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgsAtLeastConfirmed([t],n,void 0,{transactionDetails:"signatures",rewards:!1}),e.next=3,this._rpcRequest("getConfirmedBlock",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Ba)))){e.next=7;break}throw new Qi(o.error,"failed to get confirmed block");case 7:if(a=o.result){e.next=10;break}throw new Error("Confirmed block "+t+" not found");case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfirmedTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgsAtLeastConfirmed([t],n),e.next=3,this._rpcRequest("getConfirmedTransaction",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Ca)))){e.next=7;break}throw new Qi(o.error,"failed to get transaction");case 7:if(s=o.result){e.next=10;break}return e.abrupt("return",s);case 10:return u=new ui(s.transaction.message),c=s.transaction.signatures,e.abrupt("return",(0,a.Z)((0,a.Z)({},s),{},{transaction:di.populate(u,c)}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this._buildArgsAtLeastConfirmed([t],n,"jsonParsed"),e.next=3,this._rpcRequest("getConfirmedTransaction",r);case 3:if(i=e.sent,!("error"in(o=xt(i,Oa)))){e.next=7;break}throw new Qi(o.error,"failed to get confirmed transaction");case 7:return e.abrupt("return",o.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getParsedConfirmedTransactions",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map((function(e){return{methodName:"getConfirmedTransaction",args:a._buildArgsAtLeastConfirmed([e],n,"jsonParsed")}})),e.next=3,this._rpcBatchRequest(r);case 3:return i=e.sent,o=i.map((function(e){var t=xt(e,Oa);if("error"in t)throw new Qi(t.error,"failed to get confirmed transactions");return t.result})),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={},e.next=3,this.getFirstAvailableBlock();case 3:o=e.sent;case 4:if("until"in i){e.next=24;break}if(!(--n<=0||n<o)){e.next=8;break}return e.abrupt("break",24);case 8:return e.prev=8,e.next=11,this.getConfirmedBlockSignatures(n,"finalized");case 11:(a=e.sent).signatures.length>0&&(i.until=a.signatures[a.signatures.length-1].toString()),e.next=22;break;case 15:if(e.prev=15,e.t0=e.catch(8),!(e.t0 instanceof Error&&e.t0.message.includes("skipped"))){e.next=21;break}return e.abrupt("continue",4);case 21:throw e.t0;case 22:e.next=4;break;case 24:return e.next=26,this.getSlot("finalized");case 26:s=e.sent;case 27:if("before"in i){e.next=47;break}if(!(++r>s)){e.next=31;break}return e.abrupt("break",47);case 31:return e.prev=31,e.next=34,this.getConfirmedBlockSignatures(r);case 34:(u=e.sent).signatures.length>0&&(i.before=u.signatures[u.signatures.length-1].toString()),e.next=45;break;case 38:if(e.prev=38,e.t1=e.catch(31),!(e.t1 instanceof Error&&e.t1.message.includes("skipped"))){e.next=44;break}return e.abrupt("continue",27);case 44:throw e.t1;case 45:e.next=27;break;case 47:return e.next=49,this.getConfirmedSignaturesForAddress2(t,i);case 49:return c=e.sent,e.abrupt("return",c.map((function(e){return e.signature})));case 51:case"end":return e.stop()}}),e,this,[[8,15],[31,38]])})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getConfirmedSignaturesForAddress2",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,n),e.next=3,this._rpcRequest("getConfirmedSignaturesForAddress2",i);case 3:if(o=e.sent,!("error"in(a=xt(o,Go)))){e.next=7;break}throw new Qi(a.error,"failed to get confirmed signatures for address");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getSignaturesForAddress",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this._buildArgsAtLeastConfirmed([t.toBase58()],r,void 0,n),e.next=3,this._rpcRequest("getSignaturesForAddress",i);case 3:if(o=e.sent,!("error"in(a=xt(o,Ho)))){e.next=7;break}throw new Qi(a.error,"failed to get signatures for address");case 7:return e.abrupt("return",a.result);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getAddressLookupTable",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,n);case 2:return r=e.sent,i=r.context,o=r.value,a=null,null!==o&&(a=new eo({key:t,state:eo.deserialize(o.data)})),e.abrupt("return",{context:i,value:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNonceAndContext",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getAccountInfoAndContext(t,n);case 2:return r=e.sent,i=r.context,o=r.value,a=null,null!==o&&(a=Di.fromAccountData(o.data)),e.abrupt("return",{context:i,value:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNonce",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getNonceAndContext(t,n).then((function(e){return e.value})).catch((function(e){throw new Error("failed to get nonce for account "+t.toBase58()+": "+e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestAirdrop",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._rpcRequest("requestAirdrop",[t.toBase58(),n]);case 2:if(r=e.sent,!("error"in(i=xt(r,Za)))){e.next=6;break}throw new Qi(i.error,"airdrop to ".concat(t.toBase58()," failed"));case 6:return e.abrupt("return",i.result);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_blockhashWithExpiryBlockHeight",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=10;break}case 1:if(!this._pollingBlockhash){e.next=6;break}return e.next=4,Si(100);case 4:e.next=1;break;case 6:if(n=Date.now()-this._blockhashInfo.lastFetch,r=n>=ao,null===this._blockhashInfo.latestBlockhash||r){e.next=10;break}return e.abrupt("return",this._blockhashInfo.latestBlockhash);case 10:return e.next=12,this._pollNewBlockhash();case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_pollNewBlockhash",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r,i,o;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._pollingBlockhash=!0,e.prev=1,t=Date.now(),n=this._blockhashInfo.latestBlockhash,r=n?n.blockhash:null,i=0;case 6:if(!(i<50)){e.next=18;break}return e.next=9,this.getLatestBlockhash("finalized");case 9:if(o=e.sent,r===o.blockhash){e.next=13;break}return this._blockhashInfo={latestBlockhash:o,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},e.abrupt("return",o);case 13:return e.next=15,Si(200);case 15:i++,e.next=6;break;case 18:throw new Error("Unable to obtain a new blockhash after ".concat(Date.now()-t,"ms"));case 19:return e.prev=19,this._pollingBlockhash=!1,e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[1,,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"getStakeMinimumDelegation",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=so(t),r=n.commitment,i=n.config,o=this._buildArgs([],r,"base64",i),e.next=4,this._rpcRequest("getStakeMinimumDelegation",o);case 4:if(a=e.sent,!("error"in(s=xt(a,fo(Ct()))))){e.next=8;break}throw new Qi(s.error,"failed to get stake minimum delegation");case 8:return e.abrupt("return",s.result);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"simulateTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a,s,c,l,h,d,p,y,m,v,b,_,w,x,k,A,E,I,S,T,M,P,B,C;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("message"in t)){e.next=17;break}if(i=t.serialize(),o=g.lW.from(i).toString("base64"),!Array.isArray(n)&&void 0===r){e.next=6;break}throw new Error("Invalid arguments");case 6:return(a=n||{}).encoding="base64","commitment"in a||(a.commitment=this.commitment),s=[o,a],e.next=12,this._rpcRequest("simulateTransaction",s);case 12:if(c=e.sent,!("error"in(l=xt(c,Eo)))){e.next=16;break}throw new Error("failed to simulate transaction: "+l.error.message);case 16:return e.abrupt("return",l.result);case 17:if(t instanceof di?(d=t,(h=new di).feePayer=d.feePayer,h.instructions=t.instructions,h.nonceInfo=d.nonceInfo,h.signatures=d.signatures):(h=di.populate(t))._message=h._json=void 0,void 0===n||Array.isArray(n)){e.next=20;break}throw new Error("Invalid arguments");case 20:if(p=n,!h.nonceInfo||!p){e.next=25;break}(y=h).sign.apply(y,(0,u.Z)(p)),e.next=45;break;case 25:m=this._disableBlockhashCaching;case 26:return e.next=28,this._blockhashWithExpiryBlockHeight(m);case 28:if(b=e.sent,h.lastValidBlockHeight=b.lastValidBlockHeight,h.recentBlockhash=b.blockhash,p){e.next=33;break}return e.abrupt("break",45);case 33:if((v=h).sign.apply(v,(0,u.Z)(p)),h.signature){e.next=36;break}throw new Error("!signature");case 36:if(_=h.signature.toString("base64"),this._blockhashInfo.simulatedSignatures.includes(_)||this._blockhashInfo.transactionSignatures.includes(_)){e.next=42;break}return this._blockhashInfo.simulatedSignatures.push(_),e.abrupt("break",45);case 42:m=!0;case 43:e.next=26;break;case 45:return w=h._compile(),x=w.serialize(),k=h._serialize(x),A=k.toString("base64"),E={encoding:"base64",commitment:this.commitment},r&&(I=(Array.isArray(r)?r:w.nonProgramIds()).map((function(e){return e.toBase58()})),E.accounts={encoding:"base64",addresses:I}),p&&(E.sigVerify=!0),S=[A,E],e.next=55,this._rpcRequest("simulateTransaction",S);case 55:if(T=e.sent,!("error"in(M=xt(T,Eo)))){e.next=60;break}throw"data"in M.error&&(P=M.error.data.logs)&&Array.isArray(P)&&(C=(B="\n    ")+P.join(B),console.error(M.error.message,C)),new Yi("failed to simulate transaction: "+M.error.message,P);case 60:return e.abrupt("return",M.result);case 61:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n,r){var i,o,a,s,c,l;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("version"in t)){e.next=7;break}if(!n||!Array.isArray(n)){e.next=3;break}throw new Error("Invalid arguments");case 3:return i=t.serialize(),e.next=6,this.sendRawTransaction(i,r);case 6:return e.abrupt("return",e.sent);case 7:if(void 0!==n&&Array.isArray(n)){e.next=9;break}throw new Error("Invalid arguments");case 9:if(o=n,!t.nonceInfo){e.next=14;break}t.sign.apply(t,(0,u.Z)(o)),e.next=32;break;case 14:a=this._disableBlockhashCaching;case 15:return e.next=17,this._blockhashWithExpiryBlockHeight(a);case 17:if(s=e.sent,t.lastValidBlockHeight=s.lastValidBlockHeight,t.recentBlockhash=s.blockhash,t.sign.apply(t,(0,u.Z)(o)),t.signature){e.next=23;break}throw new Error("!signature");case 23:if(c=t.signature.toString("base64"),this._blockhashInfo.transactionSignatures.includes(c)){e.next=29;break}return this._blockhashInfo.transactionSignatures.push(c),e.abrupt("break",32);case 29:a=!0;case 30:e.next=15;break;case 32:return l=t.serialize(),e.next=35,this.sendRawTransaction(l,r);case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"sendRawTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Lr(t).toString("base64"),e.next=3,this.sendEncodedTransaction(r,n);case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendEncodedTransaction",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r,i,o,a,s,u,c;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={encoding:"base64"},i=n&&n.skipPreflight,o=n&&n.preflightCommitment||this.commitment,n&&null!=n.maxRetries&&(r.maxRetries=n.maxRetries),n&&null!=n.minContextSlot&&(r.minContextSlot=n.minContextSlot),i&&(r.skipPreflight=i),o&&(r.preflightCommitment=o),a=[t,r],e.next=10,this._rpcRequest("sendTransaction",a);case 10:if(s=e.sent,!("error"in(u=xt(s,Na)))){e.next=15;break}throw"data"in u.error&&(c=u.error.data.logs),new Yi("failed to send transaction: "+u.error.message,c);case 15:return e.abrupt("return",u.result);case 16:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_wsOnOpen",value:function(){var e=this;this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval((function(){(0,h.Z)((0,f.Z)().mark((function t(){return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e._rpcWebSocket.notify("ping");case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:case"end":return t.stop()}}),t,null,[[0,5]])})))()}),5e3),this._updateSubscriptions()}},{key:"_wsOnError",value:function(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}},{key:"_wsOnClose",value:function(e){var t=this;this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),1e3!==e?(this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach((function(e){var n=(0,s.Z)(e,2),r=n[0],i=n[1];t._setSubscription(r,(0,a.Z)((0,a.Z)({},i),{},{state:"pending"}))}))):this._updateSubscriptions()}},{key:"_setSubscription",value:function(e,t){var n,r=null===(n=this._subscriptionsByHash[e])||void 0===n?void 0:n.state;if(this._subscriptionsByHash[e]=t,r!==t.state){var i=this._subscriptionStateChangeCallbacksByHash[e];i&&i.forEach((function(e){try{e(t.state)}catch(n){}}))}}},{key:"_onSubscriptionStateChange",value:function(e,t){var n,r=this,i=this._subscriptionHashByClientSubscriptionId[e];if(null==i)return function(){};var o=(n=this._subscriptionStateChangeCallbacksByHash)[i]||(n[i]=new Set);return o.add(t),function(){o.delete(t),0===o.size&&delete r._subscriptionStateChangeCallbacksByHash[i]}}},{key:"_updateSubscriptions",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(){var t,n,r=this;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==Object.keys(this._subscriptionsByHash).length){e.next=3;break}return this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout((function(){r._rpcWebSocketIdleTimeout=null;try{r._rpcWebSocket.close()}catch(e){e instanceof Error&&console.log("Error when closing socket connection: ".concat(e.message))}}),500)),e.abrupt("return");case 3:if(null!==this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),this._rpcWebSocketConnected){e.next=7;break}return this._rpcWebSocket.connect(),e.abrupt("return");case 7:return t=this._rpcWebSocketGeneration,n=function(){return t===r._rpcWebSocketGeneration},e.next=11,Promise.all(Object.keys(this._subscriptionsByHash).map(function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){var i;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(i=r._subscriptionsByHash[t])){e.next=3;break}return e.abrupt("return");case 3:e.t0=i.state,e.next="pending"===e.t0||"unsubscribed"===e.t0?6:"subscribed"===e.t0?15:19;break;case 6:if(0!==i.callbacks.size){e.next=12;break}return delete r._subscriptionsByHash[t],"unsubscribed"===i.state&&delete r._subscriptionCallbacksByServerSubscriptionId[i.serverSubscriptionId],e.next=11,r._updateSubscriptions();case 11:return e.abrupt("return");case 12:return e.next=14,(0,h.Z)((0,f.Z)().mark((function e(){var o,s,u;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.args,s=i.method,e.prev=1,r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"subscribing"})),e.next=5,r._rpcWebSocket.call(s,o);case 5:return u=e.sent,r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{serverSubscriptionId:u,state:"subscribed"})),r._subscriptionCallbacksByServerSubscriptionId[u]=i.callbacks,e.next=10,r._updateSubscriptions();case 10:e.next=20;break;case 12:if(e.prev=12,e.t0=e.catch(1),e.t0 instanceof Error&&console.error("".concat(s," error for argument"),o,e.t0.message),n()){e.next=17;break}return e.abrupt("return");case 17:return r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"pending"})),e.next=20,r._updateSubscriptions();case 20:case"end":return e.stop()}}),e,null,[[1,12]])})))();case 14:case 18:return e.abrupt("break",19);case 15:if(0!==i.callbacks.size){e.next=18;break}return e.next=18,(0,h.Z)((0,f.Z)().mark((function e(){var o,s;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=i.serverSubscriptionId,s=i.unsubscribeMethod,!r._subscriptionsAutoDisposedByRpc.has(o)){e.next=5;break}r._subscriptionsAutoDisposedByRpc.delete(o),e.next=21;break;case 5:return r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"unsubscribing"})),r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"unsubscribing"})),e.prev=7,e.next=10,r._rpcWebSocket.call(s,[o]);case 10:e.next=21;break;case 12:if(e.prev=12,e.t0=e.catch(7),e.t0 instanceof Error&&console.error("".concat(s," error:"),e.t0.message),n()){e.next=17;break}return e.abrupt("return");case 17:return r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"subscribed"})),e.next=20,r._updateSubscriptions();case 20:return e.abrupt("return");case 21:return r._setSubscription(t,(0,a.Z)((0,a.Z)({},i),{},{state:"unsubscribed"})),e.next=24,r._updateSubscriptions();case 24:case"end":return e.stop()}}),e,null,[[7,12]])})))();case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_handleServerNotification",value:function(e,t){var n=this._subscriptionCallbacksByServerSubscriptionId[e];void 0!==n&&n.forEach((function(e){try{e.apply(void 0,(0,u.Z)(t))}catch(n){console.error(n)}}))}},{key:"_wsOnAccountNotification",value:function(e){var t=xt(e,qo),n=t.result,r=t.subscription;this._handleServerNotification(r,[n.value,n.context])}},{key:"_makeSubscription",value:function(e,t){var n=this,r=this._nextClientSubscriptionId++,i=Gi([e.method,t]),o=this._subscriptionsByHash[i];return void 0===o?this._subscriptionsByHash[i]=(0,a.Z)((0,a.Z)({},e),{},{args:t,callbacks:new Set([e.callback]),state:"pending"}):o.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[r]=i,this._subscriptionDisposeFunctionsByClientSubscriptionId[r]=(0,h.Z)((0,f.Z)().mark((function t(){var o;return(0,f.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return delete n._subscriptionDisposeFunctionsByClientSubscriptionId[r],delete n._subscriptionHashByClientSubscriptionId[r],oi(void 0!==(o=n._subscriptionsByHash[i]),"Could not find a `Subscription` when tearing down client subscription #".concat(r)),o.callbacks.delete(e.callback),t.next=7,n._updateSubscriptions();case 7:case"end":return t.stop()}}),t)}))),this._updateSubscriptions(),r}},{key:"onAccountChange",value:function(e,t,n){var r=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64");return this._makeSubscription({callback:t,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},r)}},{key:"removeAccountChangeListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnProgramAccountNotification",value:function(e){var t=xt(e,Xo),n=t.result,r=t.subscription;this._handleServerNotification(r,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}},{key:"onProgramAccountChange",value:function(e,t,n,r){var i=this._buildArgs([e.toBase58()],n||this._commitment||"finalized","base64",r?{filters:r}:void 0);return this._makeSubscription({callback:t,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},i)}},{key:"removeProgramAccountChangeListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"program account change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onLogs",value:function(e,t,n){var r=this._buildArgs(["object"===typeof e?{mentions:[e.toString()]}:e],n||this._commitment||"finalized");return this._makeSubscription({callback:t,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}},{key:"removeOnLogsListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"logs");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnLogsNotification",value:function(e){var t=xt(e,Fa),n=t.result,r=t.subscription;this._handleServerNotification(r,[n.value,n.context])}},{key:"_wsOnSlotNotification",value:function(e){var t=xt(e,$o),n=t.result,r=t.subscription;this._handleServerNotification(r,[n])}},{key:"onSlotChange",value:function(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}},{key:"removeSlotChangeListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnSlotUpdatesNotification",value:function(e){var t=xt(e,ea),n=t.result,r=t.subscription;this._handleServerNotification(r,[n])}},{key:"onSlotUpdate",value:function(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}},{key:"removeSlotUpdateListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"slot update");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_unsubscribeClientSubscription",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t,n){var r;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=this._subscriptionDisposeFunctionsByClientSubscriptionId[t])){e.next=6;break}return e.next=4,r();case 4:e.next=7;break;case 6:console.warn("Ignored unsubscribe request because an active subscription with id "+"`".concat(t,"` for '").concat(n,"' events ")+"could not be found.");case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_buildArgs",value:function(e,t,n,r){var i=t||this._commitment;if(i||n||r){var o={};n&&(o.encoding=n),i&&(o.commitment=i),r&&(o=Object.assign(o,r)),e.push(o)}return e}},{key:"_buildArgsAtLeastConfirmed",value:function(e,t,n,r){var i=t||this._commitment;if(i&&!["confirmed","finalized"].includes(i))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,t,n,r)}},{key:"_wsOnSignatureNotification",value:function(e){var t=xt(e,ta),n=t.result,r=t.subscription;"receivedSignature"!==n.value&&this._subscriptionsAutoDisposedByRpc.add(r),this._handleServerNotification(r,"receivedSignature"===n.value?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}},{key:"onSignature",value:function(e,t,n){var r=this,i=this._buildArgs([e],n||this._commitment||"finalized"),o=this._makeSubscription({callback:function(e,n){if("status"===e.type){t(e.result,n);try{r.removeSignatureListener(o)}catch(i){}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},i);return o}},{key:"onSignatureWithOptions",value:function(e,t,n){var i=this,o=(0,a.Z)((0,a.Z)({},n),{},{commitment:n&&n.commitment||this._commitment||"finalized"}),s=o.commitment,u=(0,r.Z)(o,Tr),c=this._buildArgs([e],s,void 0,u),l=this._makeSubscription({callback:function(e,n){t(e,n);try{i.removeSignatureListener(l)}catch(r){}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},c);return l}},{key:"removeSignatureListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"signature result");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wsOnRootNotification",value:function(e){var t=xt(e,na),n=t.result,r=t.subscription;this._handleServerNotification(r,[n])}},{key:"onRootChange",value:function(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}},{key:"removeRootChangeListener",value:function(){var e=(0,h.Z)((0,f.Z)().mark((function e(t){return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._unsubscribeClientSubscription(t,"root change");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Va=function(){function e(t){(0,y.Z)(this,e),this._keypair=void 0,this._keypair=null!==t&&void 0!==t?t:Pr()}return(0,m.Z)(e,[{key:"publicKey",get:function(){return new Wr(this._keypair.publicKey)}},{key:"secretKey",get:function(){return new Uint8Array(this._keypair.secretKey)}}],[{key:"generate",value:function(){return new e(Pr())}},{key:"fromSecretKey",value:function(t,n){if(64!==t.byteLength)throw new Error("bad secret key size");var r=t.slice(32,64);if(!n||!n.skipValidation)for(var i=t.slice(0,32),o=Br(i),a=0;a<32;a++)if(r[a]!==o[a])throw new Error("provided secretKey is invalid");return new e({publicKey:r,secretKey:t})}},{key:"fromSeed",value:function(t){var n=Br(t),r=new Uint8Array(64);return r.set(t),r.set(n,32),new e({publicKey:n,secretKey:r})}}]),e}(),Ka=Object.freeze({CreateLookupTable:{index:0,layout:it.struct([it.u32("instruction"),Ri("recentSlot"),it.u8("bumpSeed")])},FreezeLookupTable:{index:1,layout:it.struct([it.u32("instruction")])},ExtendLookupTable:{index:2,layout:it.struct([it.u32("instruction"),Ri(),it.seq(Jr(),it.offset(it.u32(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:it.struct([it.u32("instruction")])},CloseLookupTable:{index:4,layout:it.struct([it.u32("instruction")])}}),Ga=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,n=it.u32("instruction").decode(e.data),r=0,i=Object.entries(Ka);r<i.length;r++){var o=(0,s.Z)(i[r],2),a=o[0];if(o[1].index==n){t=a;break}}if(!t)throw new Error("Invalid Instruction. Should be a LookupTable Instruction");return t}},{key:"decodeCreateLookupTable",value:function(e){this.checkProgramId(e.programId),this.checkKeysLength(e.keys,4);var t=Mi(Ka.CreateLookupTable,e.data).recentSlot;return{authority:e.keys[1].pubkey,payer:e.keys[2].pubkey,recentSlot:Number(t)}}},{key:"decodeExtendLookupTable",value:function(e){if(this.checkProgramId(e.programId),e.keys.length<2)throw new Error("invalid instruction; found ".concat(e.keys.length," keys, expected at least 2"));var t=Mi(Ka.ExtendLookupTable,e.data).addresses;return{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,payer:e.keys.length>2?e.keys[2].pubkey:void 0,addresses:t.map((function(e){return new Wr(e)}))}}},{key:"decodeCloseLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,3),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey,recipient:e.keys[2].pubkey}}},{key:"decodeFreezeLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"decodeDeactivateLookupTable",value:function(e){return this.checkProgramId(e.programId),this.checkKeysLength(e.keys,2),{lookupTable:e.keys[0].pubkey,authority:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(Ha.programId))throw new Error("invalid instruction; programId is not AddressLookupTable Program")}},{key:"checkKeysLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),Ha=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"createLookupTable",value:function(e){var t=Wr.findProgramAddressSync([e.authority.toBuffer(),(0,ot.toBufferLE)(BigInt(e.recentSlot),8)],this.programId),n=(0,s.Z)(t,2),r=n[0],i=n[1],o=Ti(Ka.CreateLookupTable,{recentSlot:BigInt(e.recentSlot),bumpSeed:i}),a=[{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Zi.programId,isSigner:!1,isWritable:!1}];return[new hi({programId:this.programId,keys:a,data:o}),r]}},{key:"freezeLookupTable",value:function(e){var t=Ti(Ka.FreezeLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new hi({programId:this.programId,keys:n,data:t})}},{key:"extendLookupTable",value:function(e){var t=Ti(Ka.ExtendLookupTable,{addresses:e.addresses.map((function(e){return e.toBytes()}))}),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return e.payer&&n.push({pubkey:e.payer,isSigner:!0,isWritable:!0},{pubkey:Zi.programId,isSigner:!1,isWritable:!1}),new hi({programId:this.programId,keys:n,data:t})}},{key:"deactivateLookupTable",value:function(e){var t=Ti(Ka.DeactivateLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1}];return new hi({programId:this.programId,keys:n,data:t})}},{key:"closeLookupTable",value:function(e){var t=Ti(Ka.CloseLookupTable),n=[{pubkey:e.lookupTable,isSigner:!1,isWritable:!0},{pubkey:e.authority,isSigner:!0,isWritable:!1},{pubkey:e.recipient,isSigner:!1,isWritable:!0}];return new hi({programId:this.programId,keys:n,data:t})}}]),e}();Ha.programId=new Wr("AddressLookupTab1e1111111111111111111111111");var qa=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,n=it.u8("instruction").decode(e.data),r=0,i=Object.entries(Ya);r<i.length;r++){var o=(0,s.Z)(i[r],2),a=o[0];if(o[1].index==n){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a ComputeBudgetInstruction");return t}},{key:"decodeRequestUnits",value:function(e){this.checkProgramId(e.programId);var t=Mi(Ya.RequestUnits,e.data);return{units:t.units,additionalFee:t.additionalFee}}},{key:"decodeRequestHeapFrame",value:function(e){return this.checkProgramId(e.programId),{bytes:Mi(Ya.RequestHeapFrame,e.data).bytes}}},{key:"decodeSetComputeUnitLimit",value:function(e){return this.checkProgramId(e.programId),{units:Mi(Ya.SetComputeUnitLimit,e.data).units}}},{key:"decodeSetComputeUnitPrice",value:function(e){return this.checkProgramId(e.programId),{microLamports:Mi(Ya.SetComputeUnitPrice,e.data).microLamports}}},{key:"checkProgramId",value:function(e){if(!e.equals(Xa.programId))throw new Error("invalid instruction; programId is not ComputeBudgetProgram")}}]),e}(),Ya=Object.freeze({RequestUnits:{index:0,layout:it.struct([it.u8("instruction"),it.u32("units"),it.u32("additionalFee")])},RequestHeapFrame:{index:1,layout:it.struct([it.u8("instruction"),it.u32("bytes")])},SetComputeUnitLimit:{index:2,layout:it.struct([it.u8("instruction"),it.u32("units")])},SetComputeUnitPrice:{index:3,layout:it.struct([it.u8("instruction"),Ri("microLamports")])}}),Xa=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"requestUnits",value:function(e){var t=Ti(Ya.RequestUnits,e);return new hi({keys:[],programId:this.programId,data:t})}},{key:"requestHeapFrame",value:function(e){var t=Ti(Ya.RequestHeapFrame,e);return new hi({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitLimit",value:function(e){var t=Ti(Ya.SetComputeUnitLimit,e);return new hi({keys:[],programId:this.programId,data:t})}},{key:"setComputeUnitPrice",value:function(e){var t=Ti(Ya.SetComputeUnitPrice,{microLamports:BigInt(e.microLamports)});return new hi({keys:[],programId:this.programId,data:t})}}]),e}();Xa.programId=new Wr("ComputeBudget111111111111111111111111111111");var Qa=it.struct([it.u8("numSignatures"),it.u8("padding"),it.u16("signatureOffset"),it.u16("signatureInstructionIndex"),it.u16("publicKeyOffset"),it.u16("publicKeyInstructionIndex"),it.u16("messageDataOffset"),it.u16("messageDataSize"),it.u16("messageInstructionIndex")]),$a=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"createInstructionWithPublicKey",value:function(t){var n=t.publicKey,r=t.message,i=t.signature,o=t.instructionIndex;oi(32===n.length,"Public Key must be ".concat(32," bytes but received ").concat(n.length," bytes")),oi(64===i.length,"Signature must be ".concat(64," bytes but received ").concat(i.length," bytes"));var a=Qa.span,s=a+n.length,u=s+i.length,c=g.lW.alloc(u+r.length),l=null==o?65535:o;return Qa.encode({numSignatures:1,padding:0,signatureOffset:s,signatureInstructionIndex:l,publicKeyOffset:a,publicKeyInstructionIndex:l,messageDataOffset:u,messageDataSize:r.length,messageInstructionIndex:l},c),c.fill(n,a),c.fill(i,s),c.fill(r,u),new hi({keys:[],programId:e.programId,data:c})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,n=e.message,r=e.instructionIndex;oi(64===t.length,"Private key must be ".concat(64," bytes but received ").concat(t.length," bytes"));try{var i=Va.fromSecretKey(t),o=i.publicKey.toBytes(),a=Dr(n,i.secretKey);return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:a,instructionIndex:r})}catch(s){throw new Error("Error creating instruction; ".concat(s))}}}]),e}();$a.programId=new Wr("Ed25519SigVerify111111111111111111111111111"),Ar.hmacSha256Sync=function(e){for(var t=bn.create(nt,e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.update(e)})),t.digest()};var Ja=function(e,t){return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=_r(e,t,r.extraEntropy),o=i.seed,a=i.m,s=i.d,u=new fr(On,Cn);for(u.reseedSync(o);!(n=pr(u.generateSync(),a,s,r.canonical));)u.reseedSync();return wr(n,r)}(e,t,{der:!1,recovered:!0})};Ar.isValidPrivateKey;var es=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wn.fromPrivateKey(e).toRawBytes(t)},ts=it.struct([it.u8("numSignatures"),it.u16("signatureOffset"),it.u8("signatureInstructionIndex"),it.u16("ethAddressOffset"),it.u8("ethAddressInstructionIndex"),it.u16("messageDataOffset"),it.u16("messageDataSize"),it.u8("messageInstructionIndex"),it.blob(20,"ethAddress"),it.blob(64,"signature"),it.u8("recoveryId")]),ns=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"publicKeyToEthAddress",value:function(e){oi(64===e.length,"Public key must be ".concat(64," bytes but received ").concat(e.length," bytes"));try{return g.lW.from(mn(Lr(e))).slice(-20)}catch(t){throw new Error("Error constructing Ethereum address: ".concat(t))}}},{key:"createInstructionWithPublicKey",value:function(t){var n=t.publicKey,r=t.message,i=t.signature,o=t.recoveryId,a=t.instructionIndex;return e.createInstructionWithEthAddress({ethAddress:e.publicKeyToEthAddress(n),message:r,signature:i,recoveryId:o,instructionIndex:a})}},{key:"createInstructionWithEthAddress",value:function(t){var n,r=t.ethAddress,i=t.message,o=t.signature,a=t.recoveryId,s=t.instructionIndex,u=void 0===s?0:s;oi(20===(n="string"===typeof r?r.startsWith("0x")?g.lW.from(r.substr(2),"hex"):g.lW.from(r,"hex"):r).length,"Address must be ".concat(20," bytes but received ").concat(n.length," bytes"));var c=12+n.length,l=c+o.length+1,f=g.lW.alloc(ts.span+i.length);return ts.encode({numSignatures:1,signatureOffset:c,signatureInstructionIndex:u,ethAddressOffset:12,ethAddressInstructionIndex:u,messageDataOffset:l,messageDataSize:i.length,messageInstructionIndex:u,signature:Lr(o),ethAddress:Lr(n),recoveryId:a},f),f.fill(Lr(i),ts.span),new hi({keys:[],programId:e.programId,data:f})}},{key:"createInstructionWithPrivateKey",value:function(e){var t=e.privateKey,n=e.message,r=e.instructionIndex;oi(32===t.length,"Private key must be ".concat(32," bytes but received ").concat(t.length," bytes"));try{var i=Lr(t),o=es(i,!1).slice(1),a=g.lW.from(mn(Lr(n))),u=Ja(a,i),c=(0,s.Z)(u,2),l=c[0],f=c[1];return this.createInstructionWithPublicKey({publicKey:o,message:n,signature:l,recoveryId:f,instructionIndex:r})}catch(h){throw new Error("Error creating instruction; ".concat(h))}}}]),e}();ns.programId=new Wr("KeccakSecp256k11111111111111111111111111111");var rs=new Wr("StakeConfig11111111111111111111111111111111"),is=(0,m.Z)((function e(t,n){(0,y.Z)(this,e),this.staker=void 0,this.withdrawer=void 0,this.staker=t,this.withdrawer=n})),os=(0,m.Z)((function e(t,n,r){(0,y.Z)(this,e),this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=t,this.epoch=n,this.custodian=r}));os.default=new os(0,0,Wr.default);var as=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,n=it.u32("instruction").decode(e.data),r=0,i=Object.entries(ss);r<i.length;r++){var o=(0,s.Z)(i[r],2),a=o[0];if(o[1].index==n){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a StakeInstruction");return t}},{key:"decodeInitialize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(ss.Initialize,e.data),n=t.authorized,r=t.lockup;return{stakePubkey:e.keys[0].pubkey,authorized:new is(new Wr(n.staker),new Wr(n.withdrawer)),lockup:new os(r.unixTimestamp,r.epoch,new Wr(r.custodian))}}},{key:"decodeDelegate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,6),Mi(ss.Delegate,e.data),{stakePubkey:e.keys[0].pubkey,votePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[5].pubkey}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(ss.Authorize,e.data),n=t.newAuthorized,r=t.stakeAuthorizationType,i={stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Wr(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(i.custodianPubkey=e.keys[3].pubkey),i}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,2);var t=Mi(ss.AuthorizeWithSeed,e.data),n=t.newAuthorized,r=t.stakeAuthorizationType,i=t.authoritySeed,o=t.authorityOwner,a={stakePubkey:e.keys[0].pubkey,authorityBase:e.keys[1].pubkey,authoritySeed:i,authorityOwner:new Wr(o),newAuthorizedPubkey:new Wr(n),stakeAuthorizationType:{index:r}};return e.keys.length>3&&(a.custodianPubkey=e.keys[3].pubkey),a}},{key:"decodeSplit",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(ss.Split,e.data).lamports;return{stakePubkey:e.keys[0].pubkey,splitStakePubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[2].pubkey,lamports:t}}},{key:"decodeMerge",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Mi(ss.Merge,e.data),{stakePubkey:e.keys[0].pubkey,sourceStakePubKey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,5);var t=Mi(ss.Withdraw,e.data).lamports,n={stakePubkey:e.keys[0].pubkey,toPubkey:e.keys[1].pubkey,authorizedPubkey:e.keys[4].pubkey,lamports:t};return e.keys.length>5&&(n.custodianPubkey=e.keys[5].pubkey),n}},{key:"decodeDeactivate",value:function(e){return this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3),Mi(ss.Deactivate,e.data),{stakePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(cs.programId))throw new Error("invalid instruction; programId is not StakeProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),ss=Object.freeze({Initialize:{index:0,layout:it.struct([it.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"authorized";return it.struct([Jr("staker"),Jr("withdrawer")],e)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"lockup";return it.struct([it.ns64("unixTimestamp"),it.ns64("epoch"),Jr("custodian")],e)}()])},Authorize:{index:1,layout:it.struct([it.u32("instruction"),Jr("newAuthorized"),it.u32("stakeAuthorizationType")])},Delegate:{index:2,layout:it.struct([it.u32("instruction")])},Split:{index:3,layout:it.struct([it.u32("instruction"),it.ns64("lamports")])},Withdraw:{index:4,layout:it.struct([it.u32("instruction"),it.ns64("lamports")])},Deactivate:{index:5,layout:it.struct([it.u32("instruction")])},Merge:{index:7,layout:it.struct([it.u32("instruction")])},AuthorizeWithSeed:{index:8,layout:it.struct([it.u32("instruction"),Jr("newAuthorized"),it.u32("stakeAuthorizationType"),ti("authoritySeed"),Jr("authorityOwner")])}}),us=Object.freeze({Staker:{index:0},Withdrawer:{index:1}}),cs=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"initialize",value:function(e){var t=e.stakePubkey,n=e.authorized,r=e.lockup||os.default,i=Ti(ss.Initialize,{authorized:{staker:Lr(n.staker.toBuffer()),withdrawer:Lr(n.withdrawer.toBuffer())},lockup:{unixTimestamp:r.unixTimestamp,epoch:r.epoch,custodian:Lr(r.custodian.toBuffer())}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:_i,isSigner:!1,isWritable:!1}],programId:this.programId,data:i};return new hi(o)}},{key:"createAccountWithSeed",value:function(e){var t=new di;t.add(Zi.createAccountWithSeed({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,basePubkey:e.basePubkey,seed:e.seed,lamports:e.lamports,space:this.space,programId:this.programId}));var n=e.stakePubkey,r=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}},{key:"createAccount",value:function(e){var t=new di;t.add(Zi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.stakePubkey,lamports:e.lamports,space:this.space,programId:this.programId}));var n=e.stakePubkey,r=e.authorized,i=e.lockup;return t.add(this.initialize({stakePubkey:n,authorized:r,lockup:i}))}},{key:"delegate",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=e.votePubkey,i=Ti(ss.Delegate);return(new di).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:rs,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"authorize",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=e.newAuthorizedPubkey,i=e.stakeAuthorizationType,o=e.custodianPubkey,a=Ti(ss.Authorize,{newAuthorized:Lr(r.toBuffer()),stakeAuthorizationType:i.index}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&s.push({pubkey:o,isSigner:!1,isWritable:!1}),(new di).add({keys:s,programId:this.programId,data:a})}},{key:"authorizeWithSeed",value:function(e){var t=e.stakePubkey,n=e.authorityBase,r=e.authoritySeed,i=e.authorityOwner,o=e.newAuthorizedPubkey,a=e.stakeAuthorizationType,s=e.custodianPubkey,u=Ti(ss.AuthorizeWithSeed,{newAuthorized:Lr(o.toBuffer()),stakeAuthorizationType:a.index,authoritySeed:r,authorityOwner:Lr(i.toBuffer())}),c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1},{pubkey:mi,isSigner:!1,isWritable:!1}];return s&&c.push({pubkey:s,isSigner:!1,isWritable:!1}),(new di).add({keys:c,programId:this.programId,data:u})}},{key:"splitInstruction",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=e.splitStakePubkey,i=e.lamports,o=Ti(ss.Split,{lamports:i});return new hi({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:o})}},{key:"split",value:function(e){var t=new di;return t.add(Zi.createAccount({fromPubkey:e.authorizedPubkey,newAccountPubkey:e.splitStakePubkey,lamports:0,space:this.space,programId:this.programId})),t.add(this.splitInstruction(e))}},{key:"splitWithSeed",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=e.splitStakePubkey,i=e.basePubkey,o=e.seed,a=e.lamports,s=new di;return s.add(Zi.allocate({accountPubkey:r,basePubkey:i,seed:o,space:this.space,programId:this.programId})),s.add(this.splitInstruction({stakePubkey:t,authorizedPubkey:n,splitStakePubkey:r,lamports:a}))}},{key:"merge",value:function(e){var t=e.stakePubkey,n=e.sourceStakePubKey,r=e.authorizedPubkey,i=Ti(ss.Merge);return(new di).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!0,isWritable:!1}],programId:this.programId,data:i})}},{key:"withdraw",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=e.toPubkey,i=e.lamports,o=e.custodianPubkey,a=Ti(ss.Withdraw,{lamports:i}),s=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:Ai,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return o&&s.push({pubkey:o,isSigner:!1,isWritable:!1}),(new di).add({keys:s,programId:this.programId,data:a})}},{key:"deactivate",value:function(e){var t=e.stakePubkey,n=e.authorizedPubkey,r=Ti(ss.Deactivate);return(new di).add({keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:r})}}]),e}();cs.programId=new Wr("Stake11111111111111111111111111111111111111"),cs.space=200;var ls=(0,m.Z)((function e(t,n,r,i){(0,y.Z)(this,e),this.nodePubkey=void 0,this.authorizedVoter=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.nodePubkey=t,this.authorizedVoter=n,this.authorizedWithdrawer=r,this.commission=i})),fs=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"decodeInstructionType",value:function(e){this.checkProgramId(e.programId);for(var t,n=it.u32("instruction").decode(e.data),r=0,i=Object.entries(hs);r<i.length;r++){var o=(0,s.Z)(i[r],2),a=o[0];if(o[1].index==n){t=a;break}}if(!t)throw new Error("Instruction type incorrect; not a VoteInstruction");return t}},{key:"decodeInitializeAccount",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,4);var t=Mi(hs.InitializeAccount,e.data).voteInit;return{votePubkey:e.keys[0].pubkey,nodePubkey:e.keys[3].pubkey,voteInit:new ls(new Wr(t.nodePubkey),new Wr(t.authorizedVoter),new Wr(t.authorizedWithdrawer),t.commission)}}},{key:"decodeAuthorize",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(hs.Authorize,e.data),n=t.newAuthorized,r=t.voteAuthorizationType;return{votePubkey:e.keys[0].pubkey,authorizedPubkey:e.keys[2].pubkey,newAuthorizedPubkey:new Wr(n),voteAuthorizationType:{index:r}}}},{key:"decodeAuthorizeWithSeed",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(hs.AuthorizeWithSeed,e.data).voteAuthorizeWithSeedArgs,n=t.currentAuthorityDerivedKeyOwnerPubkey,r=t.currentAuthorityDerivedKeySeed,i=t.newAuthorized,o=t.voteAuthorizationType;return{currentAuthorityDerivedKeyBasePubkey:e.keys[2].pubkey,currentAuthorityDerivedKeyOwnerPubkey:new Wr(n),currentAuthorityDerivedKeySeed:r,newAuthorizedPubkey:new Wr(i),voteAuthorizationType:{index:o},votePubkey:e.keys[0].pubkey}}},{key:"decodeWithdraw",value:function(e){this.checkProgramId(e.programId),this.checkKeyLength(e.keys,3);var t=Mi(hs.Withdraw,e.data).lamports;return{votePubkey:e.keys[0].pubkey,authorizedWithdrawerPubkey:e.keys[2].pubkey,lamports:t,toPubkey:e.keys[1].pubkey}}},{key:"checkProgramId",value:function(e){if(!e.equals(ps.programId))throw new Error("invalid instruction; programId is not VoteProgram")}},{key:"checkKeyLength",value:function(e,t){if(e.length<t)throw new Error("invalid instruction; found ".concat(e.length," keys, expected at least ").concat(t))}}]),e}(),hs=Object.freeze({InitializeAccount:{index:0,layout:it.struct([it.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteInit";return it.struct([Jr("nodePubkey"),Jr("authorizedVoter"),Jr("authorizedWithdrawer"),it.u8("commission")],e)}()])},Authorize:{index:1,layout:it.struct([it.u32("instruction"),Jr("newAuthorized"),it.u32("voteAuthorizationType")])},Withdraw:{index:3,layout:it.struct([it.u32("instruction"),it.ns64("lamports")])},AuthorizeWithSeed:{index:10,layout:it.struct([it.u32("instruction"),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"voteAuthorizeWithSeedArgs";return it.struct([it.u32("voteAuthorizationType"),Jr("currentAuthorityDerivedKeyOwnerPubkey"),ti("currentAuthorityDerivedKeySeed"),Jr("newAuthorized")],e)}()])}}),ds=Object.freeze({Voter:{index:0},Withdrawer:{index:1}}),ps=function(){function e(){(0,y.Z)(this,e)}return(0,m.Z)(e,null,[{key:"initializeAccount",value:function(e){var t=e.votePubkey,n=e.nodePubkey,r=e.voteInit,i=Ti(hs.InitializeAccount,{voteInit:{nodePubkey:Lr(r.nodePubkey.toBuffer()),authorizedVoter:Lr(r.authorizedVoter.toBuffer()),authorizedWithdrawer:Lr(r.authorizedWithdrawer.toBuffer()),commission:r.commission}}),o={keys:[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:_i,isSigner:!1,isWritable:!1},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}],programId:this.programId,data:i};return new hi(o)}},{key:"createAccount",value:function(e){var t=new di;return t.add(Zi.createAccount({fromPubkey:e.fromPubkey,newAccountPubkey:e.votePubkey,lamports:e.lamports,space:this.space,programId:this.programId})),t.add(this.initializeAccount({votePubkey:e.votePubkey,nodePubkey:e.voteInit.nodePubkey,voteInit:e.voteInit}))}},{key:"authorize",value:function(e){var t=e.votePubkey,n=e.authorizedPubkey,r=e.newAuthorizedPubkey,i=e.voteAuthorizationType,o=Ti(hs.Authorize,{newAuthorized:Lr(r.toBuffer()),voteAuthorizationType:i.index}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!0,isWritable:!1}];return(new di).add({keys:a,programId:this.programId,data:o})}},{key:"authorizeWithSeed",value:function(e){var t=e.currentAuthorityDerivedKeyBasePubkey,n=e.currentAuthorityDerivedKeyOwnerPubkey,r=e.currentAuthorityDerivedKeySeed,i=e.newAuthorizedPubkey,o=e.voteAuthorizationType,a=e.votePubkey,s=Ti(hs.AuthorizeWithSeed,{voteAuthorizeWithSeedArgs:{currentAuthorityDerivedKeyOwnerPubkey:Lr(n.toBuffer()),currentAuthorityDerivedKeySeed:r,newAuthorized:Lr(i.toBuffer()),voteAuthorizationType:o.index}}),u=[{pubkey:a,isSigner:!1,isWritable:!0},{pubkey:mi,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!0,isWritable:!1}];return(new di).add({keys:u,programId:this.programId,data:s})}},{key:"withdraw",value:function(e){var t=e.votePubkey,n=e.authorizedWithdrawerPubkey,r=e.lamports,i=e.toPubkey,o=Ti(hs.Withdraw,{lamports:r}),a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!0,isWritable:!1}];return(new di).add({keys:a,programId:this.programId,data:o})}},{key:"safeWithdraw",value:function(t,n,r){if(t.lamports>n-r)throw new Error("Withdraw will leave vote account with insuffcient funds.");return e.withdraw(t)}}]),e}();ps.programId=new Wr("Vote111111111111111111111111111111111111111"),ps.space=3731;var ys=new Wr("Va1idator1nfo111111111111111111111111111111"),ms=zt({name:Rt(),website:Ot(Rt()),details:Ot(Rt()),keybaseUsername:Ot(Rt())}),gs=function(){function e(t,n){(0,y.Z)(this,e),this.key=void 0,this.info=void 0,this.key=t,this.info=n}return(0,m.Z)(e,null,[{key:"fromConfigData",value:function(t){var n=(0,u.Z)(t);if(2!==ri(n))return null;for(var r=[],i=0;i<2;i++){var o=new Wr(n.slice(0,Fr)),a=1===(n=n.slice(Fr)).slice(0,1)[0];n=n.slice(1),r.push({publicKey:o,isSigner:a})}if(r[0].publicKey.equals(ys)&&r[1].isSigner){var s=ti().decode(g.lW.from(n)),c=JSON.parse(s);return wt(c,ms),new e(r[1].publicKey,c)}return null}}]),e}(),vs=new Wr("Vote111111111111111111111111111111111111111"),bs=it.struct([Jr("nodePubkey"),Jr("authorizedWithdrawer"),it.u8("commission"),it.nu64(),it.seq(it.struct([it.nu64("slot"),it.u32("confirmationCount")]),it.offset(it.u32(),-8),"votes"),it.u8("rootSlotValid"),it.nu64("rootSlot"),it.nu64(),it.seq(it.struct([it.nu64("epoch"),Jr("authorizedVoter")]),it.offset(it.u32(),-8),"authorizedVoters"),it.struct([it.seq(it.struct([Jr("authorizedPubkey"),it.nu64("epochOfLastAuthorizedSwitch"),it.nu64("targetEpoch")]),32,"buf"),it.nu64("idx"),it.u8("isEmpty")],"priorVoters"),it.nu64(),it.seq(it.struct([it.nu64("epoch"),it.nu64("credits"),it.nu64("prevCredits")]),it.offset(it.u32(),-8),"epochCredits"),it.struct([it.nu64("slot"),it.nu64("timestamp")],"lastTimestamp")]),_s=function(){function e(t){(0,y.Z)(this,e),this.nodePubkey=void 0,this.authorizedWithdrawer=void 0,this.commission=void 0,this.rootSlot=void 0,this.votes=void 0,this.authorizedVoters=void 0,this.priorVoters=void 0,this.epochCredits=void 0,this.lastTimestamp=void 0,this.nodePubkey=t.nodePubkey,this.authorizedWithdrawer=t.authorizedWithdrawer,this.commission=t.commission,this.rootSlot=t.rootSlot,this.votes=t.votes,this.authorizedVoters=t.authorizedVoters,this.priorVoters=t.priorVoters,this.epochCredits=t.epochCredits,this.lastTimestamp=t.lastTimestamp}return(0,m.Z)(e,null,[{key:"fromAccountData",value:function(t){var n=bs.decode(Lr(t),4),r=n.rootSlot;return n.rootSlotValid||(r=null),new e({nodePubkey:new Wr(n.nodePubkey),authorizedWithdrawer:new Wr(n.authorizedWithdrawer),commission:n.commission,votes:n.votes,rootSlot:r,authorizedVoters:n.authorizedVoters.map(ws),priorVoters:ks(n.priorVoters),epochCredits:n.epochCredits,lastTimestamp:n.lastTimestamp})}}]),e}();function ws(e){var t=e.authorizedVoter;return{epoch:e.epoch,authorizedVoter:new Wr(t)}}function xs(e){var t=e.authorizedPubkey,n=e.epochOfLastAuthorizedSwitch,r=e.targetEpoch;return{authorizedPubkey:new Wr(t),epochOfLastAuthorizedSwitch:n,targetEpoch:r}}function ks(e){var t=e.buf,n=e.idx;return e.isEmpty?[]:[].concat((0,u.Z)(t.slice(n+1).map(xs)),(0,u.Z)(t.slice(0,n).map(xs)))}var As={http:{devnet:"http://api.devnet.solana.com",testnet:"http://api.testnet.solana.com","mainnet-beta":"http://api.mainnet-beta.solana.com/"},https:{devnet:"https://api.devnet.solana.com",testnet:"https://api.testnet.solana.com","mainnet-beta":"https://api.mainnet-beta.solana.com/"}};function Es(e,t){var n=!1===t?"http":"https";if(!e)return As[n].devnet;var r=As[n][e];if(!r)throw new Error("Unknown ".concat(n," cluster: ").concat(e));return r}function Is(e,t,n,r){return Ss.apply(this,arguments)}function Ss(){return Ss=(0,h.Z)((0,f.Z)().mark((function e(t,n,r,i){var o,a,s,u,c,l,h;return(0,f.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r&&Object.prototype.hasOwnProperty.call(r,"lastValidBlockHeight")||r&&Object.prototype.hasOwnProperty.call(r,"nonceValue")?(o=r,a=i):a=r,s=a&&{skipPreflight:a.skipPreflight,preflightCommitment:a.preflightCommitment||a.commitment,minContextSlot:a.minContextSlot},e.next=4,t.sendRawTransaction(n,s);case 4:return u=e.sent,c=a&&a.commitment,l=o?t.confirmTransaction(o,c):t.confirmTransaction(u,c),e.next=9,l;case 9:if(!(h=e.sent.value).err){e.next=12;break}throw new Error("Raw transaction ".concat(u," failed (").concat(JSON.stringify(h),")"));case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),Ss.apply(this,arguments)}var Ts=1e9},87189:function(e,t,n){var r=n(12307);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},38443:function(e,t,n){"use strict";var r=n(56690).default,i=n(89728).default,o=n(66115).default,a=n(61655).default,s=n(26389).default,u=n(2009),c=n(84038),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=d,t.h2=50;var f=2147483647;function h(e){if(e>f)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|_(e,t),r=h(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return v(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return v(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return v(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);var i=function(e){if(d.isBuffer(e)){var t=0|b(e.length),n=h(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?h(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function y(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return y(e),h(e<0?0:0|b(e))}function g(e){for(var t=e.length<0?0:0|b(e.length),n=h(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function v(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function b(e){if(e>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|e}function _(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function x(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function I(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function S(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return y(e),e<=0?h(e):void 0!==t?"string"===typeof n?h(e).fill(t,n):h(e).fill(t):h(e)}(e,t,n)},d.allocUnsafe=function(e){return m(e)},d.allocUnsafeSlow=function(e){return m(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(d.isBuffer(o)||(o=d.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):w.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",n=t.h2;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){o=u[l],a=c[l];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),c.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),c.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),d.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),d.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),c.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),c.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),c.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),c.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=d.isBuffer(e)?e:d.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var V={};function K(e,t,n){V[e]=function(n){a(c,n);var u=s(c);function c(){var n;return r(this,c),n=u.call(this),Object.defineProperty(o(n),"message",{value:t.apply(o(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return i(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}},12307:function(e,t,n){"use strict";var r=n(82543).Buffer;e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var i=0;i<e.length;i++){var o=e.charAt(i),a=o.charCodeAt(0);if(255!==t[a])throw new TypeError(o+" is ambiguous");t[a]=i}var s=e.length,u=e.charAt(0),c=Math.log(s)/Math.log(256),l=Math.log(256)/Math.log(s);function f(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return r.alloc(0);for(var n=0,i=0,o=0;e[n]===u;)i++,n++;for(var a=(e.length-n)*c+1>>>0,l=new Uint8Array(a);e[n];){var f=t[e.charCodeAt(n)];if(255===f)return;for(var h=0,d=a-1;(0!==f||h<o)&&-1!==d;d--,h++)f+=s*l[d]>>>0,l[d]=f%256>>>0,f=f/256>>>0;if(0!==f)throw new Error("Non-zero carry");o=h,n++}for(var p=a-o;p!==a&&0===l[p];)p++;var y=r.allocUnsafe(i+(a-p));y.fill(0,0,i);for(var m=i;p!==a;)y[m++]=l[p++];return y}return{encode:function(t){if((Array.isArray(t)||t instanceof Uint8Array)&&(t=r.from(t)),!r.isBuffer(t))throw new TypeError("Expected Buffer");if(0===t.length)return"";for(var n=0,i=0,o=0,a=t.length;o!==a&&0===t[o];)o++,n++;for(var c=(a-o)*l+1>>>0,f=new Uint8Array(c);o!==a;){for(var h=t[o],d=0,p=c-1;(0!==h||d<i)&&-1!==p;p--,d++)h+=256*f[p]>>>0,f[p]=h%s>>>0,h=h/s>>>0;if(0!==h)throw new Error("Non-zero carry");i=d,o++}for(var y=c-i;y!==c&&0===f[y];)y++;for(var m=u.repeat(n);y<c;++y)m+=e.charAt(f[y]);return m},decodeUnsafe:f,decode:function(e){var t=f(e);if(t)return t;throw new Error("Non-base"+s+" character")}}}},2009:function(e,t){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,o=u(e),a=o[0],s=o[1],c=new i(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=16383,s=0,u=r-i;s<u;s+=a)o.push(c(e,s,s+a>u?u:s+a));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)n[a]=o[a],r[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},86070:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.toBigIntLE=function(e){var t=r.from(e);t.reverse();var n=t.toString("hex");return 0===n.length?BigInt(0):BigInt("0x".concat(n))},t.toBigIntBE=function(e){var t=e.toString("hex");return 0===t.length?BigInt(0):BigInt("0x".concat(t))},t.toBufferLE=function(e,t){var n=e.toString(16),i=r.from(n.padStart(2*t,"0").slice(0,2*t),"hex");return i.reverse(),i},t.toBufferBE=function(e,t){var n=e.toString(16);return r.from(n.padStart(2*t,"0").slice(0,2*t),"hex")}},17144:function(e,t,n){var r;!function(i){"use strict";var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,m=1e9;function g(e){var t=0|e;return e>0||e===t?t:t-1}function v(e){for(var t,n,r=1,i=e.length,o=e[0]+"";r<i;){for(t=e[r++]+"",n=h-t.length;n--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function b(e,t){var n,r,i=e.c,o=t.c,a=e.s,s=t.s,u=e.e,c=t.e;if(!a||!s)return null;if(n=i&&!i[0],r=o&&!o[0],n||r)return n?r?0:-s:a;if(a!=s)return a;if(n=a<0,r=u==c,!i||!o)return r?0:!i^n?1:-1;if(!r)return u>c^n?1:-1;for(s=(u=i.length)<(c=o.length)?u:c,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^n?1:-1;return u==c?0:u>c^n?1:-1}function _(e,t,n,r){if(e<t||e>n||e!==u(e))throw Error(c+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return g(e.e/h)==t&&e.c[t]%2!=0}function x(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function k(e,t,n){var r,i;if(t<0){for(i=n+".";++t;i+=n);e=i+e}else if(++t>(r=e.length)){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}o=function e(t){var n,r,i,o=z.prototype={constructor:z,toString:null,valueOf:null},A=new z(1),E=20,I=4,S=-7,T=21,M=-1e7,P=1e7,B=!1,C=1,O=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"\xa0",suffix:""},R="0123456789abcdefghijklmnopqrstuvwxyz",L=!0;function z(e,t){var n,o,s,c,f,p,y,m,g=this;if(!(g instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return g.s=e.s,void(!e.c||e.e>P?g.c=g.e=null:e.e<M?g.c=[g.e=0]:(g.e=e.e,g.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(g.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,f=e;f>=10;f/=10,c++);return void(c>P?g.c=g.e=null:(g.e=c,g.c=[e]))}m=String(e)}else{if(!a.test(m=String(e)))return i(g,m,p);g.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(c=m.indexOf("."))>-1&&(m=m.replace(".","")),(f=m.search(/e/i))>0?(c<0&&(c=f),c+=+m.slice(f+1),m=m.substring(0,f)):c<0&&(c=m.length)}else{if(_(t,2,R.length,"Base"),10==t&&L)return F(g=new z(e),E+g.e+1,I);if(m=String(e),p="number"==typeof e){if(0*e!=0)return i(g,m,p,t);if(g.s=1/e<0?(m=m.slice(1),-1):1,z.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else g.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(n=R.slice(0,t),c=f=0,y=m.length;f<y;f++)if(n.indexOf(o=m.charAt(f))<0){if("."==o){if(f>c){c=y;continue}}else if(!s&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){s=!0,f=-1,c=0;continue}return i(g,String(e),p,t)}p=!1,(c=(m=r(m,t,10,g.s)).indexOf("."))>-1?m=m.replace(".",""):c=m.length}for(f=0;48===m.charCodeAt(f);f++);for(y=m.length;48===m.charCodeAt(--y););if(m=m.slice(f,++y)){if(y-=f,p&&z.DEBUG&&y>15&&(e>d||e!==u(e)))throw Error(l+g.s*e);if((c=c-f-1)>P)g.c=g.e=null;else if(c<M)g.c=[g.e=0];else{if(g.e=c,g.c=[],f=(c+1)%h,c<0&&(f+=h),f<y){for(f&&g.c.push(+m.slice(0,f)),y-=h;f<y;)g.c.push(+m.slice(f,f+=h));f=h-(m=m.slice(f)).length}else f-=y;for(;f--;m+="0");g.c.push(+m)}}else g.c=[g.e=0]}function Z(e,t,n,r){var i,o,a,s,u;if(null==n?n=I:_(n,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)u=v(e.c),u=1==r||2==r&&(a<=S||a>=T)?x(u,a):k(u,a,"0");else if(o=(e=F(new z(e),t,n)).e,s=(u=v(e.c)).length,1==r||2==r&&(t<=o||o<=S)){for(;s<t;u+="0",s++);u=x(u,o)}else if(t-=a,u=k(u,o,"0"),o+1>s){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=o-s)>0)for(o+1==s&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function N(e,t){for(var n,r=1,i=new z(e[0]);r<e.length;r++){if(!(n=new z(e[r])).s){i=n;break}t.call(i,n)&&(i=n)}return i}function U(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*h-1)>P?e.c=e.e=null:n<M?e.c=[e.e=0]:(e.e=n,e.c=t),e}function F(e,t,n,r){var i,o,a,c,l,d,y,m=e.c,g=p;if(m){e:{for(i=1,c=m[0];c>=10;c/=10,i++);if((o=t-i)<0)o+=h,a=t,y=(l=m[d=0])/g[i-a-1]%10|0;else if((d=s((o+1)/h))>=m.length){if(!r)break e;for(;m.length<=d;m.push(0));l=y=0,i=1,a=(o%=h)-h+1}else{for(l=c=m[d],i=1;c>=10;c/=10,i++);y=(a=(o%=h)-h+i)<0?0:l/g[i-a-1]%10|0}if(r=r||t<0||null!=m[d+1]||(a<0?l:l%g[i-a-1]),r=n<4?(y||r)&&(0==n||n==(e.s<0?3:2)):y>5||5==y&&(4==n||r||6==n&&(o>0?a>0?l/g[i-a]:0:m[d-1])%10&1||n==(e.s<0?8:7)),t<1||!m[0])return m.length=0,r?(t-=e.e+1,m[0]=g[(h-t%h)%h],e.e=-t||0):m[0]=e.e=0,e;if(0==o?(m.length=d,c=1,d--):(m.length=d+1,c=g[h-o],m[d]=a>0?u(l/g[i-a]%g[a])*c:0),r)for(;;){if(0==d){for(o=1,a=m[0];a>=10;a/=10,o++);for(a=m[0]+=c,c=1;a>=10;a/=10,c++);o!=c&&(e.e++,m[0]==f&&(m[0]=1));break}if(m[d]+=c,m[d]!=f)break;m[d--]=0,c=1}for(o=m.length;0===m[--o];m.pop());}e.e>P?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function j(e){var t,n=e.e;return null===n?e.toString():(t=v(e.c),t=n<=S||n>=T?x(t,n):k(t,n,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(c+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(_(n=e[t],0,m,t),E=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(_(n=e[t],0,8,t),I=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(_(n[0],-m,0,t),_(n[1],0,m,t),S=n[0],T=n[1]):(_(n,-m,m,t),S=-(T=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)_(n[0],-m,-1,t),_(n[1],1,m,t),M=n[0],P=n[1];else{if(_(n,-m,m,t),!n)throw Error(c+t+" cannot be zero: "+n);M=-(P=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(c+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw B=!n,Error(c+"crypto unavailable");B=n}else B=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(_(n=e[t],0,9,t),C=n),e.hasOwnProperty(t="POW_PRECISION")&&(_(n=e[t],0,m,t),O=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(c+t+" not an object: "+n);D=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(c+t+" invalid: "+n);L="0123456789"==n.slice(0,10),R=n}}return{DECIMAL_PLACES:E,ROUNDING_MODE:I,EXPONENTIAL_AT:[S,T],RANGE:[M,P],CRYPTO:B,MODULO_MODE:C,POW_PRECISION:O,FORMAT:D,ALPHABET:R}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,n,r=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&i>=-m&&i<=m&&i===u(i)){if(0===r[0]){if(0===i&&1===r.length)return!0;break e}if((t=(i+1)%h)<1&&(t+=h),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=f||n!==u(n))break e;if(0!==n)return!0}}}else if(null===r&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(c+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return N(arguments,o.lt)},z.minimum=z.min=function(){return N(arguments,o.gt)},z.random=function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return u(Math.random()*e)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)};return function(e){var n,r,i,o,a,l=0,f=[],d=new z(A);if(null==e?e=E:_(e,0,m),o=s(e/h),B)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(a=131072*n[l]+(n[l+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[l]=r[0],n[l+1]=r[1]):(f.push(a%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw B=!1,Error(c+"crypto unavailable");for(n=crypto.randomBytes(o*=7);l<o;)(a=281474976710656*(31&n[l])+1099511627776*n[l+1]+4294967296*n[l+2]+16777216*n[l+3]+(n[l+4]<<16)+(n[l+5]<<8)+n[l+6])>=9e15?crypto.randomBytes(7).copy(n,l):(f.push(a%1e14),l+=7);l=o/7}if(!B)for(;l<o;)(a=t())<9e15&&(f[l++]=a%1e14);for(o=f[--l],e%=h,o&&e&&(a=p[h-e],f[l]=u(o/a)*a);0===f[l];f.pop(),l--);if(l<0)f=[i=0];else{for(i=-1;0===f[0];f.splice(0,1),i-=h);for(l=1,a=f[0];a>=10;a/=10,l++);l<h&&(i-=h-l)}return d.e=i,d.c=f,d}}(),z.sum=function(){for(var e=1,t=arguments,n=new z(t[0]);e<t.length;)n=n.plus(t[e++]);return n},r=function(){var e="0123456789";function t(e,t,n,r){for(var i,o,a=[0],s=0,u=e.length;s<u;){for(o=a.length;o--;a[o]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,o,a,s){var u,c,l,f,h,d,p,y,m=r.indexOf("."),g=E,b=I;for(m>=0&&(f=O,O=0,r=r.replace(".",""),d=(y=new z(i)).pow(r.length-m),O=f,y.c=t(k(v(d.c),d.e,"0"),10,o,e),y.e=y.c.length),l=f=(p=t(r,i,o,s?(u=R,e):(u=e,R))).length;0==p[--f];p.pop());if(!p[0])return u.charAt(0);if(m<0?--l:(d.c=p,d.e=l,d.s=a,p=(d=n(d,y,g,b,o)).c,h=d.r,l=d.e),m=p[c=l+g+1],f=o/2,h=h||c<0||null!=p[c+1],h=b<4?(null!=m||h)&&(0==b||b==(d.s<0?3:2)):m>f||m==f&&(4==b||h||6==b&&1&p[c-1]||b==(d.s<0?8:7)),c<1||!p[0])r=h?k(u.charAt(1),-g,u.charAt(0)):u.charAt(0);else{if(p.length=c,h)for(--o;++p[--c]>o;)p[c]=0,c||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(m=0,r="";m<=f;r+=u.charAt(p[m++]));r=k(r,l,u.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,i,o,a,s=0,u=e.length,c=t%y,l=t/y|0;for(e=e.slice();u--;)s=((i=c*(o=e[u]%y)+(r=l*o+(a=e[u]/y|0)*c)%y*y+s)/n|0)+(r/y|0)+l*a,e[u]=i%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,o,a,s){var c,l,d,p,y,m,v,b,_,w,x,k,A,E,I,S,T,M=r.s==i.s?1:-1,P=r.c,B=i.c;if(!P||!P[0]||!B||!B[0])return new z(r.s&&i.s&&(P?!B||P[0]!=B[0]:B)?P&&0==P[0]||!B?0*M:M/0:NaN);for(_=(b=new z(M)).c=[],M=o+(l=r.e-i.e)+1,s||(s=f,l=g(r.e/h)-g(i.e/h),M=M/h|0),d=0;B[d]==(P[d]||0);d++);if(B[d]>(P[d]||0)&&l--,M<0)_.push(1),p=!0;else{for(E=P.length,S=B.length,d=0,M+=2,(y=u(s/(B[0]+1)))>1&&(B=e(B,y,s),P=e(P,y,s),S=B.length,E=P.length),A=S,x=(w=P.slice(0,S)).length;x<S;w[x++]=0);T=B.slice(),T=[0].concat(T),I=B[0],B[1]>=s/2&&I++;do{if(y=0,(c=t(B,w,S,x))<0){if(k=w[0],S!=x&&(k=k*s+(w[1]||0)),(y=u(k/I))>1)for(y>=s&&(y=s-1),v=(m=e(B,y,s)).length,x=w.length;1==t(m,w,v,x);)y--,n(m,S<v?T:B,v,s),v=m.length,c=1;else 0==y&&(c=y=1),v=(m=B.slice()).length;if(v<x&&(m=[0].concat(m)),n(w,m,x,s),x=w.length,-1==c)for(;t(B,w,S,x)<1;)y++,n(w,S<x?T:B,x,s),x=w.length}else 0===c&&(y++,w=[0]);_[d++]=y,w[0]?w[x++]=P[A]||0:(w=[P[A]],x=1)}while((A++<E||null!=w[0])&&M--);p=null!=w[0],_[0]||_.splice(0,1)}if(s==f){for(d=1,M=_[0];M>=10;M/=10,d++);F(b,o+(b.e=d+l*h-1)+1,a,p)}else b.e=l,b.r=+p;return b}}(),i=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(o,a,s,u){var l,f=s?a:a.replace(i,"");if(r.test(f))o.s=isNaN(f)?null:f<0?-1:1;else{if(!s&&(f=f.replace(e,(function(e,t,n){return l="x"==(n=n.toLowerCase())?16:"b"==n?2:8,u&&u!=l?e:t})),u&&(l=u,f=f.replace(t,"$1").replace(n,"0.$1")),a!=f))return new z(f,l);if(z.DEBUG)throw Error(c+"Not a"+(u?" base "+u:"")+" number: "+a);o.s=null}o.c=o.e=null}}(),o.absoluteValue=o.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},o.comparedTo=function(e,t){return b(this,new z(e,t))},o.decimalPlaces=o.dp=function(e,t){var n,r,i,o=this;if(null!=e)return _(e,0,m),null==t?t=I:_(t,0,8),F(new z(o),e+o.e+1,t);if(!(n=o.c))return null;if(r=((i=n.length-1)-g(this.e/h))*h,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},o.dividedBy=o.div=function(e,t){return n(this,new z(e,t),E,I)},o.dividedToIntegerBy=o.idiv=function(e,t){return n(this,new z(e,t),0,1)},o.exponentiatedBy=o.pow=function(e,t){var n,r,i,o,a,l,f,d,p=this;if((e=new z(e)).c&&!e.isInteger())throw Error(c+"Exponent not an integer: "+j(e));if(null!=t&&(t=new z(t)),a=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new z(Math.pow(+j(p),a?e.s*(2-w(e)):+j(e))),t?d.mod(t):d;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(r=!l&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||a&&p.c[1]>=24e7:p.c[0]<8e13||a&&p.c[0]<=9999975e7)))return o=p.s<0&&w(e)?-0:0,p.e>-1&&(o=1/o),new z(l?1/o:o);O&&(o=s(O/h+2))}for(a?(n=new z(.5),l&&(e.s=1),f=w(e)):f=(i=Math.abs(+j(e)))%2,d=new z(A);;){if(f){if(!(d=d.times(p)).c)break;o?d.c.length>o&&(d.c.length=o):r&&(d=d.mod(t))}if(i){if(0===(i=u(i/2)))break;f=i%2}else if(F(e=e.times(n),e.e+1,1),e.e>14)f=w(e);else{if(0===(i=+j(e)))break;f=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):r&&(p=p.mod(t))}return r?d:(l&&(d=A.div(d)),t?d.mod(t):o?F(d,O,I,undefined):d)},o.integerValue=function(e){var t=new z(this);return null==e?e=I:_(e,0,8),F(t,t.e+1,e)},o.isEqualTo=o.eq=function(e,t){return 0===b(this,new z(e,t))},o.isFinite=function(){return!!this.c},o.isGreaterThan=o.gt=function(e,t){return b(this,new z(e,t))>0},o.isGreaterThanOrEqualTo=o.gte=function(e,t){return 1===(t=b(this,new z(e,t)))||0===t},o.isInteger=function(){return!!this.c&&g(this.e/h)>this.c.length-2},o.isLessThan=o.lt=function(e,t){return b(this,new z(e,t))<0},o.isLessThanOrEqualTo=o.lte=function(e,t){return-1===(t=b(this,new z(e,t)))||0===t},o.isNaN=function(){return!this.s},o.isNegative=function(){return this.s<0},o.isPositive=function(){return this.s>0},o.isZero=function(){return!!this.c&&0==this.c[0]},o.minus=function(e,t){var n,r,i,o,a=this,s=a.s;if(t=(e=new z(e,t)).s,!s||!t)return new z(NaN);if(s!=t)return e.s=-t,a.plus(e);var u=a.e/h,c=e.e/h,l=a.c,d=e.c;if(!u||!c){if(!l||!d)return l?(e.s=-t,e):new z(d?a:NaN);if(!l[0]||!d[0])return d[0]?(e.s=-t,e):new z(l[0]?a:3==I?-0:0)}if(u=g(u),c=g(c),l=l.slice(),s=u-c){for((o=s<0)?(s=-s,i=l):(c=u,i=d),i.reverse(),t=s;t--;i.push(0));i.reverse()}else for(r=(o=(s=l.length)<(t=d.length))?s:t,s=t=0;t<r;t++)if(l[t]!=d[t]){o=l[t]<d[t];break}if(o&&(i=l,l=d,d=i,e.s=-e.s),(t=(r=d.length)-(n=l.length))>0)for(;t--;l[n++]=0);for(t=f-1;r>s;){if(l[--r]<d[r]){for(n=r;n&&!l[--n];l[n]=t);--l[n],l[r]+=f}l[r]-=d[r]}for(;0==l[0];l.splice(0,1),--c);return l[0]?U(e,l,c):(e.s=3==I?-1:1,e.c=[e.e=0],e)},o.modulo=o.mod=function(e,t){var r,i,o=this;return e=new z(e,t),!o.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||o.c&&!o.c[0]?new z(o):(9==C?(i=e.s,e.s=1,r=n(o,e,0,3),e.s=i,r.s*=i):r=n(o,e,0,C),(e=o.minus(r.times(e))).c[0]||1!=C||(e.s=o.s),e)},o.multipliedBy=o.times=function(e,t){var n,r,i,o,a,s,u,c,l,d,p,m,v,b,_,w=this,x=w.c,k=(e=new z(e,t)).c;if(!x||!k||!x[0]||!k[0])return!w.s||!e.s||x&&!x[0]&&!k||k&&!k[0]&&!x?e.c=e.e=e.s=null:(e.s*=w.s,x&&k?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=g(w.e/h)+g(e.e/h),e.s*=w.s,(u=x.length)<(d=k.length)&&(v=x,x=k,k=v,i=u,u=d,d=i),i=u+d,v=[];i--;v.push(0));for(b=f,_=y,i=d;--i>=0;){for(n=0,p=k[i]%_,m=k[i]/_|0,o=i+(a=u);o>i;)n=((c=p*(c=x[--a]%_)+(s=m*c+(l=x[a]/_|0)*p)%_*_+v[o]+n)/b|0)+(s/_|0)+m*l,v[o--]=c%b;v[o]=n}return n?++r:v.splice(0,1),U(e,v,r)},o.negated=function(){var e=new z(this);return e.s=-e.s||null,e},o.plus=function(e,t){var n,r=this,i=r.s;if(t=(e=new z(e,t)).s,!i||!t)return new z(NaN);if(i!=t)return e.s=-t,r.minus(e);var o=r.e/h,a=e.e/h,s=r.c,u=e.c;if(!o||!a){if(!s||!u)return new z(i/0);if(!s[0]||!u[0])return u[0]?e:new z(s[0]?r:0*i)}if(o=g(o),a=g(a),s=s.slice(),i=o-a){for(i>0?(a=o,n=u):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for((i=s.length)-(t=u.length)<0&&(n=u,u=s,s=n,t=i),i=0;t;)i=(s[--t]=s[t]+u[t]+i)/f|0,s[t]=f===s[t]?0:s[t]%f;return i&&(s=[i].concat(s),++a),U(e,s,a)},o.precision=o.sd=function(e,t){var n,r,i,o=this;if(null!=e&&e!==!!e)return _(e,1,m),null==t?t=I:_(t,0,8),F(new z(o),e,t);if(!(n=o.c))return null;if(r=(i=n.length-1)*h+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&o.e+1>r&&(r=o.e+1),r},o.shiftedBy=function(e){return _(e,-d,d),this.times("1e"+e)},o.squareRoot=o.sqrt=function(){var e,t,r,i,o,a=this,s=a.c,u=a.s,c=a.e,l=E+4,f=new z("0.5");if(1!==u||!s||!s[0])return new z(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(u=Math.sqrt(+j(a)))||u==1/0?(((t=v(s)).length+c)%2==0&&(t+="0"),u=Math.sqrt(+t),c=g((c+1)/2)-(c<0||c%2),r=new z(t=u==1/0?"5e"+c:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+c)):r=new z(u+""),r.c[0])for((u=(c=r.e)+l)<3&&(u=0);;)if(o=r,r=f.times(o.plus(n(a,o,l,1))),v(o.c).slice(0,u)===(t=v(r.c)).slice(0,u)){if(r.e<c&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(F(r,r.e+E+2,1),e=!r.times(r).eq(a));break}if(!i&&(F(o,o.e+E+2,0),o.times(o).eq(a))){r=o;break}l+=4,u+=4,i=1}return F(r,r.e+E+1,I,e)},o.toExponential=function(e,t){return null!=e&&(_(e,0,m),e++),Z(this,e,t,1)},o.toFixed=function(e,t){return null!=e&&(_(e,0,m),e=e+this.e+1),Z(this,e,t)},o.toFormat=function(e,t,n){var r,i=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=D;else if("object"!=typeof n)throw Error(c+"Argument not an object: "+n);if(r=i.toFixed(e,t),i.c){var o,a=r.split("."),s=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",f=a[0],h=a[1],d=i.s<0,p=d?f.slice(1):f,y=p.length;if(u&&(o=s,s=u,u=o,y-=o),s>0&&y>0){for(o=y%s||s,f=p.substr(0,o);o<y;o+=s)f+=l+p.substr(o,s);u>0&&(f+=l+p.slice(o)),d&&(f="-"+f)}r=h?f+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):h):f}return(n.prefix||"")+r+(n.suffix||"")},o.toFraction=function(e){var t,r,i,o,a,s,u,l,f,d,y,m,g=this,b=g.c;if(null!=e&&(!(u=new z(e)).isInteger()&&(u.c||1!==u.s)||u.lt(A)))throw Error(c+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+j(u));if(!b)return new z(g);for(t=new z(A),f=r=new z(A),i=l=new z(A),m=v(b),a=t.e=m.length-g.e-1,t.c[0]=p[(s=a%h)<0?h+s:s],e=!e||u.comparedTo(t)>0?a>0?t:f:u,s=P,P=1/0,u=new z(m),l.c[0]=0;d=n(u,t,0,1),1!=(o=r.plus(d.times(i))).comparedTo(e);)r=i,i=o,f=l.plus(d.times(o=f)),l=o,t=u.minus(d.times(o=t)),u=o;return o=n(e.minus(r),i,0,1),l=l.plus(o.times(f)),r=r.plus(o.times(i)),l.s=f.s=g.s,y=n(f,i,a*=2,I).minus(g).abs().comparedTo(n(l,r,a,I).minus(g).abs())<1?[f,i]:[l,r],P=s,y},o.toNumber=function(){return+j(this)},o.toPrecision=function(e,t){return null!=e&&_(e,1,m),Z(this,e,t,2)},o.toString=function(e){var t,n=this,i=n.s,o=n.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=S||o>=T?x(v(n.c),o):k(v(n.c),o,"0"):10===e&&L?t=k(v((n=F(new z(n),E+o+1,I)).c),n.e,"0"):(_(e,2,R.length,"Base"),t=r(k(v(n.c),o,"0"),10,e,i,!0)),i<0&&n.c[0]&&(t="-"+t)),t},o.valueOf=o.toJSON=function(){return j(this)},o._isBigNumber=!0,null!=t&&z.set(t),z}(),o.default=o.BigNumber=o,void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},80518:function(e,t,n){!function(e,t){"use strict";function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function i(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function o(e,t,n){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}var a;"object"===typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{a="undefined"!==typeof window&&"undefined"!==typeof window.Buffer?window.Buffer:n(46601).Buffer}catch(T){}function s(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function u(e,t,n){var r=s(e,n);return n-1>=t&&(r|=s(e,n-1)<<4),r}function c(e,t,n,i){for(var o=0,a=0,s=Math.min(e.length,n),u=t;u<s;u++){var c=e.charCodeAt(u)-48;o*=i,a=c>=49?c-49+10:c>=17?c-17+10:c,r(c>=0&&a<i,"Invalid character"),o+=a}return o}function l(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"===typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"===typeof e)return this._initNumber(e,t,n);if("object"===typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var i=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<e.length&&(16===t?this._parseHex(e,i,n):(this._parseBase(e,t,i),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var o,a,s=0;if("be"===n)for(i=e.length-1,o=0;i>=0;i-=3)a=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);else if("le"===n)for(i=0,o=0;i<e.length;i+=3)a=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[o]|=a<<s&67108863,this.words[o+1]=a>>>26-s&67108863,(s+=24)>=26&&(s-=26,o++);return this._strip()},o.prototype._parseHex=function(e,t,n){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,o=0,a=0;if("be"===n)for(r=e.length-1;r>=t;r-=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;else for(r=(e.length-t)%2===0?t+1:t;r<e.length;r+=2)i=u(e,t,r)<<o,this.words[a]|=67108863&i,o>=18?(o-=18,a+=1,this.words[a]|=i>>>26):o+=8;this._strip()},o.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var o=e.length-n,a=o%r,s=Math.min(o,o-a)+n,u=0,l=n;l<s;l+=r)u=c(e,l,l+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==a){var f=1;for(u=c(e,l,e.length,t),l=0;l<a;l++)f*=t;this.imuln(f),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){l(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=f}catch(T){o.prototype.inspect=f}else o.prototype.inspect=f;function f(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=(16777215&(s<<i|o)).toString(16);o=s>>>24-i&16777215,(i+=2)>=26&&(i-=26,a--),n=0!==o||a!==this.length-1?h[6-u.length]+u+n:u+n}for(0!==o&&(n=o.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var c=d[e],l=p[e];n="";var f=this.clone();for(f.negative=0;!f.isZero();){var y=f.modrn(l).toString(e);n=(f=f.idivn(l)).isZero()?y+n:h[c-y.length]+y+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},a&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(a,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function y(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],o=0|t.words[0],a=i*o,s=67108863&a,u=a/67108864|0;n.words[0]=s;for(var c=1;c<r;c++){for(var l=u>>>26,f=67108863&u,h=Math.min(c,t.length-1),d=Math.max(0,c-e.length+1);d<=h;d++){var p=c-d|0;l+=(a=(i=0|e.words[p])*(o=0|t.words[d])+f)/67108864|0,f=67108863&a}n.words[c]=0|f,u=0|l}return 0!==u?n.words[c]=0|u:n.length--,n._strip()}o.prototype.toArrayLike=function(e,t,n){this._strip();var i=this.byteLength(),o=n||Math.max(1,i);r(i<=o,"byte array longer than desired length"),r(o>0,"Requested array length <= 0");var a=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,o);return this["_toArrayLike"+("le"===t?"LE":"BE")](a,i),a},o.prototype._toArrayLikeLE=function(e,t){for(var n=0,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n++]=255&a,n<e.length&&(e[n++]=a>>8&255),n<e.length&&(e[n++]=a>>16&255),6===o?(n<e.length&&(e[n++]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n<e.length)for(e[n++]=r;n<e.length;)e[n++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var n=e.length-1,r=0,i=0,o=0;i<this.length;i++){var a=this.words[i]<<o|r;e[n--]=255&a,n>=0&&(e[n--]=a>>8&255),n>=0&&(e[n--]=a>>16&255),6===o?(n>=0&&(e[n--]=a>>24&255),r=0,o=0):(r=a>>>24,o+=2)}if(n>=0)for(e[n--]=r;n>=0;)e[n--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return n>0&&(this.words[i]=~this.words[i]&67108863>>26-n),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"===typeof e&&e>=0);var n=e/26|0,i=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<i:this.words[n]&~(1<<i),this._strip()},o.prototype.iadd=function(e){var t,n,r;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,o=0;o<r.length;o++)t=(0|n.words[o])+(0|r.words[o])+i,this.words[o]=67108863&t,i=t>>>26;for(;0!==i&&o<n.length;o++)t=(0|n.words[o])+i,this.words[o]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;o<n.length;o++)this.words[o]=n.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n,r,i=this.cmp(e);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(n=this,r=e):(n=e,r=this);for(var o=0,a=0;a<r.length;a++)o=(t=(0|n.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&t;for(;0!==o&&a<n.length;a++)o=(t=(0|n.words[a])+o)>>26,this.words[a]=67108863&t;if(0===o&&a<n.length&&n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this.length=Math.max(this.length,a),n!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,n){var r,i,o,a=e.words,s=t.words,u=n.words,c=0,l=0|a[0],f=8191&l,h=l>>>13,d=0|a[1],p=8191&d,y=d>>>13,m=0|a[2],g=8191&m,v=m>>>13,b=0|a[3],_=8191&b,w=b>>>13,x=0|a[4],k=8191&x,A=x>>>13,E=0|a[5],I=8191&E,S=E>>>13,T=0|a[6],M=8191&T,P=T>>>13,B=0|a[7],C=8191&B,O=B>>>13,D=0|a[8],R=8191&D,L=D>>>13,z=0|a[9],Z=8191&z,N=z>>>13,U=0|s[0],F=8191&U,j=U>>>13,W=0|s[1],V=8191&W,K=W>>>13,G=0|s[2],H=8191&G,q=G>>>13,Y=0|s[3],X=8191&Y,Q=Y>>>13,$=0|s[4],J=8191&$,ee=$>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],oe=8191&ie,ae=ie>>>13,se=0|s[7],ue=8191&se,ce=se>>>13,le=0|s[8],fe=8191&le,he=le>>>13,de=0|s[9],pe=8191&de,ye=de>>>13;n.negative=e.negative^t.negative,n.length=19;var me=(c+(r=Math.imul(f,F))|0)+((8191&(i=(i=Math.imul(f,j))+Math.imul(h,F)|0))<<13)|0;c=((o=Math.imul(h,j))+(i>>>13)|0)+(me>>>26)|0,me&=67108863,r=Math.imul(p,F),i=(i=Math.imul(p,j))+Math.imul(y,F)|0,o=Math.imul(y,j);var ge=(c+(r=r+Math.imul(f,V)|0)|0)+((8191&(i=(i=i+Math.imul(f,K)|0)+Math.imul(h,V)|0))<<13)|0;c=((o=o+Math.imul(h,K)|0)+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(g,F),i=(i=Math.imul(g,j))+Math.imul(v,F)|0,o=Math.imul(v,j),r=r+Math.imul(p,V)|0,i=(i=i+Math.imul(p,K)|0)+Math.imul(y,V)|0,o=o+Math.imul(y,K)|0;var ve=(c+(r=r+Math.imul(f,H)|0)|0)+((8191&(i=(i=i+Math.imul(f,q)|0)+Math.imul(h,H)|0))<<13)|0;c=((o=o+Math.imul(h,q)|0)+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(_,F),i=(i=Math.imul(_,j))+Math.imul(w,F)|0,o=Math.imul(w,j),r=r+Math.imul(g,V)|0,i=(i=i+Math.imul(g,K)|0)+Math.imul(v,V)|0,o=o+Math.imul(v,K)|0,r=r+Math.imul(p,H)|0,i=(i=i+Math.imul(p,q)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,q)|0;var be=(c+(r=r+Math.imul(f,X)|0)|0)+((8191&(i=(i=i+Math.imul(f,Q)|0)+Math.imul(h,X)|0))<<13)|0;c=((o=o+Math.imul(h,Q)|0)+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(k,F),i=(i=Math.imul(k,j))+Math.imul(A,F)|0,o=Math.imul(A,j),r=r+Math.imul(_,V)|0,i=(i=i+Math.imul(_,K)|0)+Math.imul(w,V)|0,o=o+Math.imul(w,K)|0,r=r+Math.imul(g,H)|0,i=(i=i+Math.imul(g,q)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,q)|0,r=r+Math.imul(p,X)|0,i=(i=i+Math.imul(p,Q)|0)+Math.imul(y,X)|0,o=o+Math.imul(y,Q)|0;var _e=(c+(r=r+Math.imul(f,J)|0)|0)+((8191&(i=(i=i+Math.imul(f,ee)|0)+Math.imul(h,J)|0))<<13)|0;c=((o=o+Math.imul(h,ee)|0)+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(I,F),i=(i=Math.imul(I,j))+Math.imul(S,F)|0,o=Math.imul(S,j),r=r+Math.imul(k,V)|0,i=(i=i+Math.imul(k,K)|0)+Math.imul(A,V)|0,o=o+Math.imul(A,K)|0,r=r+Math.imul(_,H)|0,i=(i=i+Math.imul(_,q)|0)+Math.imul(w,H)|0,o=o+Math.imul(w,q)|0,r=r+Math.imul(g,X)|0,i=(i=i+Math.imul(g,Q)|0)+Math.imul(v,X)|0,o=o+Math.imul(v,Q)|0,r=r+Math.imul(p,J)|0,i=(i=i+Math.imul(p,ee)|0)+Math.imul(y,J)|0,o=o+Math.imul(y,ee)|0;var we=(c+(r=r+Math.imul(f,ne)|0)|0)+((8191&(i=(i=i+Math.imul(f,re)|0)+Math.imul(h,ne)|0))<<13)|0;c=((o=o+Math.imul(h,re)|0)+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(M,F),i=(i=Math.imul(M,j))+Math.imul(P,F)|0,o=Math.imul(P,j),r=r+Math.imul(I,V)|0,i=(i=i+Math.imul(I,K)|0)+Math.imul(S,V)|0,o=o+Math.imul(S,K)|0,r=r+Math.imul(k,H)|0,i=(i=i+Math.imul(k,q)|0)+Math.imul(A,H)|0,o=o+Math.imul(A,q)|0,r=r+Math.imul(_,X)|0,i=(i=i+Math.imul(_,Q)|0)+Math.imul(w,X)|0,o=o+Math.imul(w,Q)|0,r=r+Math.imul(g,J)|0,i=(i=i+Math.imul(g,ee)|0)+Math.imul(v,J)|0,o=o+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=(i=i+Math.imul(p,re)|0)+Math.imul(y,ne)|0,o=o+Math.imul(y,re)|0;var xe=(c+(r=r+Math.imul(f,oe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ae)|0)+Math.imul(h,oe)|0))<<13)|0;c=((o=o+Math.imul(h,ae)|0)+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(C,F),i=(i=Math.imul(C,j))+Math.imul(O,F)|0,o=Math.imul(O,j),r=r+Math.imul(M,V)|0,i=(i=i+Math.imul(M,K)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,K)|0,r=r+Math.imul(I,H)|0,i=(i=i+Math.imul(I,q)|0)+Math.imul(S,H)|0,o=o+Math.imul(S,q)|0,r=r+Math.imul(k,X)|0,i=(i=i+Math.imul(k,Q)|0)+Math.imul(A,X)|0,o=o+Math.imul(A,Q)|0,r=r+Math.imul(_,J)|0,i=(i=i+Math.imul(_,ee)|0)+Math.imul(w,J)|0,o=o+Math.imul(w,ee)|0,r=r+Math.imul(g,ne)|0,i=(i=i+Math.imul(g,re)|0)+Math.imul(v,ne)|0,o=o+Math.imul(v,re)|0,r=r+Math.imul(p,oe)|0,i=(i=i+Math.imul(p,ae)|0)+Math.imul(y,oe)|0,o=o+Math.imul(y,ae)|0;var ke=(c+(r=r+Math.imul(f,ue)|0)|0)+((8191&(i=(i=i+Math.imul(f,ce)|0)+Math.imul(h,ue)|0))<<13)|0;c=((o=o+Math.imul(h,ce)|0)+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(R,F),i=(i=Math.imul(R,j))+Math.imul(L,F)|0,o=Math.imul(L,j),r=r+Math.imul(C,V)|0,i=(i=i+Math.imul(C,K)|0)+Math.imul(O,V)|0,o=o+Math.imul(O,K)|0,r=r+Math.imul(M,H)|0,i=(i=i+Math.imul(M,q)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,q)|0,r=r+Math.imul(I,X)|0,i=(i=i+Math.imul(I,Q)|0)+Math.imul(S,X)|0,o=o+Math.imul(S,Q)|0,r=r+Math.imul(k,J)|0,i=(i=i+Math.imul(k,ee)|0)+Math.imul(A,J)|0,o=o+Math.imul(A,ee)|0,r=r+Math.imul(_,ne)|0,i=(i=i+Math.imul(_,re)|0)+Math.imul(w,ne)|0,o=o+Math.imul(w,re)|0,r=r+Math.imul(g,oe)|0,i=(i=i+Math.imul(g,ae)|0)+Math.imul(v,oe)|0,o=o+Math.imul(v,ae)|0,r=r+Math.imul(p,ue)|0,i=(i=i+Math.imul(p,ce)|0)+Math.imul(y,ue)|0,o=o+Math.imul(y,ce)|0;var Ae=(c+(r=r+Math.imul(f,fe)|0)|0)+((8191&(i=(i=i+Math.imul(f,he)|0)+Math.imul(h,fe)|0))<<13)|0;c=((o=o+Math.imul(h,he)|0)+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(Z,F),i=(i=Math.imul(Z,j))+Math.imul(N,F)|0,o=Math.imul(N,j),r=r+Math.imul(R,V)|0,i=(i=i+Math.imul(R,K)|0)+Math.imul(L,V)|0,o=o+Math.imul(L,K)|0,r=r+Math.imul(C,H)|0,i=(i=i+Math.imul(C,q)|0)+Math.imul(O,H)|0,o=o+Math.imul(O,q)|0,r=r+Math.imul(M,X)|0,i=(i=i+Math.imul(M,Q)|0)+Math.imul(P,X)|0,o=o+Math.imul(P,Q)|0,r=r+Math.imul(I,J)|0,i=(i=i+Math.imul(I,ee)|0)+Math.imul(S,J)|0,o=o+Math.imul(S,ee)|0,r=r+Math.imul(k,ne)|0,i=(i=i+Math.imul(k,re)|0)+Math.imul(A,ne)|0,o=o+Math.imul(A,re)|0,r=r+Math.imul(_,oe)|0,i=(i=i+Math.imul(_,ae)|0)+Math.imul(w,oe)|0,o=o+Math.imul(w,ae)|0,r=r+Math.imul(g,ue)|0,i=(i=i+Math.imul(g,ce)|0)+Math.imul(v,ue)|0,o=o+Math.imul(v,ce)|0,r=r+Math.imul(p,fe)|0,i=(i=i+Math.imul(p,he)|0)+Math.imul(y,fe)|0,o=o+Math.imul(y,he)|0;var Ee=(c+(r=r+Math.imul(f,pe)|0)|0)+((8191&(i=(i=i+Math.imul(f,ye)|0)+Math.imul(h,pe)|0))<<13)|0;c=((o=o+Math.imul(h,ye)|0)+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(Z,V),i=(i=Math.imul(Z,K))+Math.imul(N,V)|0,o=Math.imul(N,K),r=r+Math.imul(R,H)|0,i=(i=i+Math.imul(R,q)|0)+Math.imul(L,H)|0,o=o+Math.imul(L,q)|0,r=r+Math.imul(C,X)|0,i=(i=i+Math.imul(C,Q)|0)+Math.imul(O,X)|0,o=o+Math.imul(O,Q)|0,r=r+Math.imul(M,J)|0,i=(i=i+Math.imul(M,ee)|0)+Math.imul(P,J)|0,o=o+Math.imul(P,ee)|0,r=r+Math.imul(I,ne)|0,i=(i=i+Math.imul(I,re)|0)+Math.imul(S,ne)|0,o=o+Math.imul(S,re)|0,r=r+Math.imul(k,oe)|0,i=(i=i+Math.imul(k,ae)|0)+Math.imul(A,oe)|0,o=o+Math.imul(A,ae)|0,r=r+Math.imul(_,ue)|0,i=(i=i+Math.imul(_,ce)|0)+Math.imul(w,ue)|0,o=o+Math.imul(w,ce)|0,r=r+Math.imul(g,fe)|0,i=(i=i+Math.imul(g,he)|0)+Math.imul(v,fe)|0,o=o+Math.imul(v,he)|0;var Ie=(c+(r=r+Math.imul(p,pe)|0)|0)+((8191&(i=(i=i+Math.imul(p,ye)|0)+Math.imul(y,pe)|0))<<13)|0;c=((o=o+Math.imul(y,ye)|0)+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(Z,H),i=(i=Math.imul(Z,q))+Math.imul(N,H)|0,o=Math.imul(N,q),r=r+Math.imul(R,X)|0,i=(i=i+Math.imul(R,Q)|0)+Math.imul(L,X)|0,o=o+Math.imul(L,Q)|0,r=r+Math.imul(C,J)|0,i=(i=i+Math.imul(C,ee)|0)+Math.imul(O,J)|0,o=o+Math.imul(O,ee)|0,r=r+Math.imul(M,ne)|0,i=(i=i+Math.imul(M,re)|0)+Math.imul(P,ne)|0,o=o+Math.imul(P,re)|0,r=r+Math.imul(I,oe)|0,i=(i=i+Math.imul(I,ae)|0)+Math.imul(S,oe)|0,o=o+Math.imul(S,ae)|0,r=r+Math.imul(k,ue)|0,i=(i=i+Math.imul(k,ce)|0)+Math.imul(A,ue)|0,o=o+Math.imul(A,ce)|0,r=r+Math.imul(_,fe)|0,i=(i=i+Math.imul(_,he)|0)+Math.imul(w,fe)|0,o=o+Math.imul(w,he)|0;var Se=(c+(r=r+Math.imul(g,pe)|0)|0)+((8191&(i=(i=i+Math.imul(g,ye)|0)+Math.imul(v,pe)|0))<<13)|0;c=((o=o+Math.imul(v,ye)|0)+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(Z,X),i=(i=Math.imul(Z,Q))+Math.imul(N,X)|0,o=Math.imul(N,Q),r=r+Math.imul(R,J)|0,i=(i=i+Math.imul(R,ee)|0)+Math.imul(L,J)|0,o=o+Math.imul(L,ee)|0,r=r+Math.imul(C,ne)|0,i=(i=i+Math.imul(C,re)|0)+Math.imul(O,ne)|0,o=o+Math.imul(O,re)|0,r=r+Math.imul(M,oe)|0,i=(i=i+Math.imul(M,ae)|0)+Math.imul(P,oe)|0,o=o+Math.imul(P,ae)|0,r=r+Math.imul(I,ue)|0,i=(i=i+Math.imul(I,ce)|0)+Math.imul(S,ue)|0,o=o+Math.imul(S,ce)|0,r=r+Math.imul(k,fe)|0,i=(i=i+Math.imul(k,he)|0)+Math.imul(A,fe)|0,o=o+Math.imul(A,he)|0;var Te=(c+(r=r+Math.imul(_,pe)|0)|0)+((8191&(i=(i=i+Math.imul(_,ye)|0)+Math.imul(w,pe)|0))<<13)|0;c=((o=o+Math.imul(w,ye)|0)+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(Z,J),i=(i=Math.imul(Z,ee))+Math.imul(N,J)|0,o=Math.imul(N,ee),r=r+Math.imul(R,ne)|0,i=(i=i+Math.imul(R,re)|0)+Math.imul(L,ne)|0,o=o+Math.imul(L,re)|0,r=r+Math.imul(C,oe)|0,i=(i=i+Math.imul(C,ae)|0)+Math.imul(O,oe)|0,o=o+Math.imul(O,ae)|0,r=r+Math.imul(M,ue)|0,i=(i=i+Math.imul(M,ce)|0)+Math.imul(P,ue)|0,o=o+Math.imul(P,ce)|0,r=r+Math.imul(I,fe)|0,i=(i=i+Math.imul(I,he)|0)+Math.imul(S,fe)|0,o=o+Math.imul(S,he)|0;var Me=(c+(r=r+Math.imul(k,pe)|0)|0)+((8191&(i=(i=i+Math.imul(k,ye)|0)+Math.imul(A,pe)|0))<<13)|0;c=((o=o+Math.imul(A,ye)|0)+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(Z,ne),i=(i=Math.imul(Z,re))+Math.imul(N,ne)|0,o=Math.imul(N,re),r=r+Math.imul(R,oe)|0,i=(i=i+Math.imul(R,ae)|0)+Math.imul(L,oe)|0,o=o+Math.imul(L,ae)|0,r=r+Math.imul(C,ue)|0,i=(i=i+Math.imul(C,ce)|0)+Math.imul(O,ue)|0,o=o+Math.imul(O,ce)|0,r=r+Math.imul(M,fe)|0,i=(i=i+Math.imul(M,he)|0)+Math.imul(P,fe)|0,o=o+Math.imul(P,he)|0;var Pe=(c+(r=r+Math.imul(I,pe)|0)|0)+((8191&(i=(i=i+Math.imul(I,ye)|0)+Math.imul(S,pe)|0))<<13)|0;c=((o=o+Math.imul(S,ye)|0)+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(Z,oe),i=(i=Math.imul(Z,ae))+Math.imul(N,oe)|0,o=Math.imul(N,ae),r=r+Math.imul(R,ue)|0,i=(i=i+Math.imul(R,ce)|0)+Math.imul(L,ue)|0,o=o+Math.imul(L,ce)|0,r=r+Math.imul(C,fe)|0,i=(i=i+Math.imul(C,he)|0)+Math.imul(O,fe)|0,o=o+Math.imul(O,he)|0;var Be=(c+(r=r+Math.imul(M,pe)|0)|0)+((8191&(i=(i=i+Math.imul(M,ye)|0)+Math.imul(P,pe)|0))<<13)|0;c=((o=o+Math.imul(P,ye)|0)+(i>>>13)|0)+(Be>>>26)|0,Be&=67108863,r=Math.imul(Z,ue),i=(i=Math.imul(Z,ce))+Math.imul(N,ue)|0,o=Math.imul(N,ce),r=r+Math.imul(R,fe)|0,i=(i=i+Math.imul(R,he)|0)+Math.imul(L,fe)|0,o=o+Math.imul(L,he)|0;var Ce=(c+(r=r+Math.imul(C,pe)|0)|0)+((8191&(i=(i=i+Math.imul(C,ye)|0)+Math.imul(O,pe)|0))<<13)|0;c=((o=o+Math.imul(O,ye)|0)+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(Z,fe),i=(i=Math.imul(Z,he))+Math.imul(N,fe)|0,o=Math.imul(N,he);var Oe=(c+(r=r+Math.imul(R,pe)|0)|0)+((8191&(i=(i=i+Math.imul(R,ye)|0)+Math.imul(L,pe)|0))<<13)|0;c=((o=o+Math.imul(L,ye)|0)+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863;var De=(c+(r=Math.imul(Z,pe))|0)+((8191&(i=(i=Math.imul(Z,ye))+Math.imul(N,pe)|0))<<13)|0;return c=((o=Math.imul(N,ye))+(i>>>13)|0)+(De>>>26)|0,De&=67108863,u[0]=me,u[1]=ge,u[2]=ve,u[3]=be,u[4]=_e,u[5]=we,u[6]=xe,u[7]=ke,u[8]=Ae,u[9]=Ee,u[10]=Ie,u[11]=Se,u[12]=Te,u[13]=Me,u[14]=Pe,u[15]=Be,u[16]=Ce,u[17]=Oe,u[18]=De,0!==c&&(u[19]=c,n.length++),n};function g(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,o=0;o<n.length-1;o++){var a=i;i=0;for(var s=67108863&r,u=Math.min(o,t.length-1),c=Math.max(0,o-e.length+1);c<=u;c++){var l=o-c,f=(0|e.words[l])*(0|t.words[c]),h=67108863&f;s=67108863&(h=h+s|0),i+=(a=(a=a+(f/67108864|0)|0)+(h>>>26)|0)>>>26,a&=67108863}n.words[o]=s,r=a,a=i}return 0!==r?n.words[o]=r:n.length--,n._strip()}function v(e,t,n){return g(e,t,n)}function b(e,t){this.x=e,this.y=t}Math.imul||(m=y),o.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):n<63?y(this,e,t):n<1024?g(this,e,t):v(this,e,t)},b.prototype.makeRBT=function(e){for(var t=new Array(e),n=o.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},b.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},b.prototype.permute=function(e,t,n,r,i,o){for(var a=0;a<o;a++)r[a]=t[e[a]],i[a]=n[e[a]]},b.prototype.transform=function(e,t,n,r,i,o){this.permute(o,e,t,n,r,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),c=Math.sin(2*Math.PI/s),l=0;l<i;l+=s)for(var f=u,h=c,d=0;d<a;d++){var p=n[l+d],y=r[l+d],m=n[l+d+a],g=r[l+d+a],v=f*m-h*g;g=f*g+h*m,m=v,n[l+d]=p+m,r[l+d]=y+g,n[l+d+a]=p-m,r[l+d+a]=y-g,d!==s&&(v=u*f-c*h,h=u*h+c*f,f=v)}},b.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},b.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},b.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},b.prototype.convert13b=function(e,t,n,i){for(var o=0,a=0;a<t;a++)o+=0|e[a],n[2*a]=8191&o,o>>>=13,n[2*a+1]=8191&o,o>>>=13;for(a=2*t;a<i;++a)n[a]=0;r(0===o),r(0===(-8192&o))},b.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},b.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),o=this.stub(r),a=new Array(r),s=new Array(r),u=new Array(r),c=new Array(r),l=new Array(r),f=new Array(r),h=n.words;h.length=r,this.convert13b(e.words,e.length,a,r),this.convert13b(t.words,t.length,c,r),this.transform(a,o,s,u,r,i),this.transform(c,o,l,f,r,i);for(var d=0;d<r;d++){var p=s[d]*l[d]-u[d]*f[d];u[d]=s[d]*f[d]+u[d]*l[d],s[d]=p}return this.conjugate(s,u,r),this.transform(s,u,h,o,r,i),this.conjugate(h,o,r),this.normalize13b(h,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n._strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),v(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"===typeof e),r(e<67108864);for(var n=0,i=0;i<this.length;i++){var o=(0|this.words[i])*e,a=(67108863&o)+(67108863&n);n>>=26,n+=o/67108864|0,n+=a>>>26,this.words[i]=67108863&a}return 0!==n&&(this.words[i]=n,this.length++),t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=e.words[r]>>>i&1}return t}(e);if(0===t.length)return new o(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var i=n.sqr();r<t.length;r++,i=i.sqr())0!==t[r]&&(n=n.mul(i));return n},o.prototype.iushln=function(e){r("number"===typeof e&&e>=0);var t,n=e%26,i=(e-n)/26,o=67108863>>>26-n<<26-n;if(0!==n){var a=0;for(t=0;t<this.length;t++){var s=this.words[t]&o,u=(0|this.words[t])-s<<n;this.words[t]=u|a,a=s>>>26-n}a&&(this.words[t]=a,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this._strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var i;r("number"===typeof e&&e>=0),i=t?(t-t%26)/26:0;var o=e%26,a=Math.min((e-o)/26,this.length),s=67108863^67108863>>>o<<o,u=n;if(i-=a,i=Math.max(0,i),u){for(var c=0;c<a;c++)u.words[c]=this.words[c];u.length=a}if(0===a);else if(this.length>a)for(this.length-=a,c=0;c<this.length;c++)this.words[c]=this.words[c+a];else this.words[0]=0,this.length=1;var l=0;for(c=this.length-1;c>=0&&(0!==l||c>=i);c--){var f=0|this.words[c];this.words[c]=l<<26-o|f>>>o,l=f&s}return u&&0!==l&&(u.words[u.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"===typeof e&&e>=0);var t=e%26,n=(e-t)/26,i=1<<t;return!(this.length<=n)&&!!(this.words[n]&i)},o.prototype.imaskn=function(e){r("number"===typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"===typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"===typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var i,o,a=e.length+n;this._expand(a);var s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+n])+s;var u=(0|e.words[i])*t;s=((o-=67108863&u)>>26)-(u/67108864|0),this.words[i+n]=67108863&o}for(;i<this.length-n;i++)s=(o=(0|this.words[i+n])+s)>>26,this.words[i+n]=67108863&o;if(0===s)return this._strip();for(r(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var n=(this.length,e.length),r=this.clone(),i=e,a=0|i.words[i.length-1];0!==(n=26-this._countBits(a))&&(i=i.ushln(n),r.iushln(n),a=0|i.words[i.length-1]);var s,u=r.length-i.length;if("mod"!==t){(s=new o(null)).length=u+1,s.words=new Array(s.length);for(var c=0;c<s.length;c++)s.words[c]=0}var l=r.clone()._ishlnsubmul(i,1,u);0===l.negative&&(r=l,s&&(s.words[u]=1));for(var f=u-1;f>=0;f--){var h=67108864*(0|r.words[i.length+f])+(0|r.words[i.length+f-1]);for(h=Math.min(h/a|0,67108863),r._ishlnsubmul(i,h,f);0!==r.negative;)h--,r.negative=0,r._ishlnsubmul(i,1,f),r.isZero()||(r.negative^=1);s&&(s.words[f]=h)}return s&&s._strip(),r._strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(i=s.div.neg()),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.iadd(e)),{div:i,mod:a}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(i=s.div.neg()),{div:i,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(a=s.mod.neg(),n&&0!==a.negative&&a.isub(e)),{div:s.div,mod:a}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,a,s},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),o=n.cmp(r);return o<0||1===i&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,i=0,o=this.length-1;o>=0;o--)i=(n*i+(0|this.words[o]))%e;return t?-i:i},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,i=this.length-1;i>=0;i--){var o=(0|this.words[i])+67108864*n;this.words[i]=o/e|0,n=o%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),c=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++c;for(var l=n.clone(),f=t.clone();!t.isZero();){for(var h=0,d=1;0===(t.words[0]&d)&&h<26;++h,d<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(l),a.isub(f)),i.iushrn(1),a.iushrn(1);for(var p=0,y=1;0===(n.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(l),u.isub(f)),s.iushrn(1),u.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(s),a.isub(u)):(n.isub(t),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:n.iushln(c)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,a=new o(1),s=new o(0),u=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var c=0,l=1;0===(t.words[0]&l)&&c<26;++c,l<<=1);if(c>0)for(t.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var f=0,h=1;0===(n.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(n.iushrn(f);f-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);t.cmp(n)>=0?(t.isub(n),a.isub(s)):(n.isub(t),s.isub(a))}return(i=0===t.cmpn(1)?a:s).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var o=t;t=n,n=o}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0===(1&this.words[0])},o.prototype.isOdd=function(){return 1===(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"===typeof e);var t=e%26,n=(e-t)/26,i=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=i,this;for(var o=i,a=n;0!==o&&a<this.length;a++){var s=0|this.words[a];o=(s+=o)>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var i=0|this.words[0];t=i===e?0:i<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var _={k256:null,p224:null,p192:null,p25519:null};function w(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function x(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function k(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function A(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"===typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function S(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}w.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},w.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),t=(n=(n=this.imulK(n)).iadd(this.tmp)).bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):void 0!==n.strip?n.strip():n._strip(),n},w.prototype.split=function(e,t){e.iushrn(this.n,0,t)},w.prototype.imulK=function(e){return e.imul(this.k)},i(x,w),x.prototype.split=function(e,t){for(var n=4194303,r=Math.min(e.length,9),i=0;i<r;i++)t.words[i]=e.words[i];if(t.length=r,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&n,i=10;i<e.length;i++){var a=0|e.words[i];e.words[i-10]=(a&n)<<4|o>>>22,o=a}o>>>=22,e.words[i-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},x.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},i(k,w),i(A,w),i(E,w),E.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(_[e])return _[e];var t;if("k256"===e)t=new x;else if("p224"===e)t=new k;else if("p192"===e)t=new A;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new E}return _[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(l(e,e.umod(this.m)._forceRed(this)),e)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},I.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2===1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);r(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),c=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,c).cmp(u);)l.redIAdd(u);for(var f=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),d=this.pow(e,i),p=a;0!==d.cmp(s);){for(var y=d,m=0;0!==y.cmp(s);m++)y=y.redSqr();r(m<p);var g=this.pow(f,new o(1).iushln(p-m-1));h=h.redMul(g),f=g.redSqr(),d=d.redMul(f),p=m}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new o(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var i=n[0],a=0,s=0,u=t.bitLength()%26;for(0===u&&(u=26),r=t.length-1;r>=0;r--){for(var c=t.words[r],l=u-1;l>=0;l--){var f=c>>l&1;i!==n[0]&&(i=this.sqr(i)),0!==f||0!==a?(a<<=1,a|=f,(4===++s||0===r&&0===l)&&(i=this.mul(i,n[a]),s=0,a=0)):s=0}u=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new S(e)},i(S,I),S.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},S.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},S.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):i.cmpn(0)<0&&(o=i.iadd(this.m)),o._forceRed(this)},S.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},S.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=n.nmd(e),this)},35127:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(38416).default,o=n(27424).default,a=n(74704).default,s=n(56690).default,u=n(89728).default,c=n(61655).default,l=n(26389).default,f=n(33496).default,h=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(o<3?i(a):o>3?i(t,n,a):i(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},y=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&h(t,e,n);return d(t,e),t},m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.deserializeUnchecked=t.deserialize=t.serialize=t.BinaryReader=t.BinaryWriter=t.BorshError=t.baseDecode=t.baseEncode=void 0;var g=m(n(80518)),v=m(n(59969)),b=y(n(9344)),_=new("function"!==typeof TextDecoder?b.TextDecoder:TextDecoder)("utf-8",{fatal:!0});t.baseEncode=function(e){return"string"===typeof e&&(e=r.from(e,"utf8")),v.default.encode(r.from(e))},t.baseDecode=function(e){return r.from(v.default.decode(e))};var w=1024,x=function(e){c(n,e);var t=l(n);function n(e){var r;return s(this,n),(r=t.call(this,e)).fieldPath=[],r.originalMessage=e,r}return u(n,[{key:"addToFieldPath",value:function(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}]),n}(f(Error));t.BorshError=x;var k=function(){function e(){s(this,e),this.buf=r.alloc(w),this.length=0}return u(e,[{key:"maybeResize",value:function(){this.buf.length<16+this.length&&(this.buf=r.concat([this.buf,r.alloc(w)]))}},{key:"writeU8",value:function(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}},{key:"writeU16",value:function(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}},{key:"writeU32",value:function(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}},{key:"writeU64",value:function(e){this.maybeResize(),this.writeBuffer(r.from(new g.default(e).toArray("le",8)))}},{key:"writeU128",value:function(e){this.maybeResize(),this.writeBuffer(r.from(new g.default(e).toArray("le",16)))}},{key:"writeU256",value:function(e){this.maybeResize(),this.writeBuffer(r.from(new g.default(e).toArray("le",32)))}},{key:"writeU512",value:function(e){this.maybeResize(),this.writeBuffer(r.from(new g.default(e).toArray("le",64)))}},{key:"writeBuffer",value:function(e){this.buf=r.concat([r.from(this.buf.subarray(0,this.length)),e,r.alloc(w)]),this.length+=e.length}},{key:"writeString",value:function(e){this.maybeResize();var t=r.from(e,"utf8");this.writeU32(t.length),this.writeBuffer(t)}},{key:"writeFixedArray",value:function(e){this.writeBuffer(r.from(e))}},{key:"writeArray",value:function(e,t){this.maybeResize(),this.writeU32(e.length);var n,r=a(e);try{for(r.s();!(n=r.n()).done;){var i=n.value;this.maybeResize(),t(i)}}catch(o){r.e(o)}finally{r.f()}}},{key:"toArray",value:function(){return this.buf.subarray(0,this.length)}}]),e}();function A(e,t,n){var r=n.value;n.value=function(){try{for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,t)}catch(o){if(o instanceof RangeError){var i=o.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(i)>=0)throw new x("Reached the end of buffer when deserializing")}throw o}}}t.BinaryWriter=k;var E=function(){function e(t){s(this,e),this.buf=t,this.offset=0}return u(e,[{key:"readU8",value:function(){var e=this.buf.readUInt8(this.offset);return this.offset+=1,e}},{key:"readU16",value:function(){var e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}},{key:"readU32",value:function(){var e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}},{key:"readU64",value:function(){var e=this.readBuffer(8);return new g.default(e,"le")}},{key:"readU128",value:function(){var e=this.readBuffer(16);return new g.default(e,"le")}},{key:"readU256",value:function(){var e=this.readBuffer(32);return new g.default(e,"le")}},{key:"readU512",value:function(){var e=this.readBuffer(64);return new g.default(e,"le")}},{key:"readBuffer",value:function(e){if(this.offset+e>this.buf.length)throw new x("Expected buffer length ".concat(e," isn't within bounds"));var t=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,t}},{key:"readString",value:function(){var e=this.readU32(),t=this.readBuffer(e);try{return _.decode(t)}catch(n){throw new x("Error decoding UTF-8 string: ".concat(n))}}},{key:"readFixedArray",value:function(e){return new Uint8Array(this.readBuffer(e))}},{key:"readArray",value:function(e){for(var t=this.readU32(),n=Array(),r=0;r<t;++r)n.push(e());return n}}]),e}();function I(e){return e.charAt(0).toUpperCase()+e.slice(1)}function S(e,t,n,r,i){try{if("string"===typeof r)i["write".concat(I(r))](n);else if(r instanceof Array)if("number"===typeof r[0]){if(n.length!==r[0])throw new x("Expecting byte array of length ".concat(r[0],", but got ").concat(n.length," bytes"));i.writeFixedArray(n)}else if(2===r.length&&"number"===typeof r[1]){if(n.length!==r[1])throw new x("Expecting byte array of length ".concat(r[1],", but got ").concat(n.length," bytes"));for(var o=0;o<r[1];o++)S(e,null,n[o],r[0],i)}else i.writeArray(n,(function(n){S(e,t,n,r[0],i)}));else if(void 0!==r.kind)switch(r.kind){case"option":null===n||void 0===n?i.writeU8(0):(i.writeU8(1),S(e,t,n,r.type,i));break;case"map":i.writeU32(n.size),n.forEach((function(n,o){S(e,t,o,r.key,i),S(e,t,n,r.value,i)}));break;default:throw new x("FieldType ".concat(r," unrecognized"))}else T(e,n,i)}catch(a){throw a instanceof x&&a.addToFieldPath(t),a}}function T(e,t,n){if("function"!==typeof t.borshSerialize){var r=e.get(t.constructor);if(!r)throw new x("Class ".concat(t.constructor.name," is missing in schema"));if("struct"===r.kind)r.fields.map((function(r){var i=o(r,2),a=i[0],s=i[1];S(e,a,t[a],s,n)}));else{if("enum"!==r.kind)throw new x("Unexpected schema kind: ".concat(r.kind," for ").concat(t.constructor.name));for(var i=t[r.field],a=0;a<r.values.length;++a){var s=o(r.values[a],2),u=s[0],c=s[1];if(u===i){n.writeU8(a),S(e,u,t[u],c,n);break}}}}else t.borshSerialize(n)}function M(e,t,n,r){try{if("string"===typeof n)return r["read".concat(I(n))]();if(n instanceof Array){if("number"===typeof n[0])return r.readFixedArray(n[0]);if("number"===typeof n[1]){for(var i=[],o=0;o<n[1];o++)i.push(M(e,null,n[0],r));return i}return r.readArray((function(){return M(e,t,n[0],r)}))}if("option"===n.kind)return r.readU8()?M(e,t,n.type,r):void 0;if("map"===n.kind){for(var a=new Map,s=r.readU32(),u=0;u<s;u++){var c=M(e,t,n.key,r),l=M(e,t,n.value,r);a.set(c,l)}return a}return P(e,n,r)}catch(f){throw f instanceof x&&f.addToFieldPath(t),f}}function P(e,t,n){if("function"===typeof t.borshDeserialize)return t.borshDeserialize(n);var r=e.get(t);if(!r)throw new x("Class ".concat(t.name," is missing in schema"));if("struct"===r.kind){var s,u={},c=a(e.get(t).fields);try{for(c.s();!(s=c.n()).done;){var l=o(s.value,2),f=l[0],h=l[1];u[f]=M(e,f,h,n)}}catch(g){c.e(g)}finally{c.f()}return new t(u)}if("enum"===r.kind){var d=n.readU8();if(d>=r.values.length)throw new x("Enum index: ".concat(d," is out of range"));var p=o(r.values[d],2),y=p[0],m=M(e,y,p[1],n);return new t(i({},y,m))}throw new x("Unexpected schema kind: ".concat(r.kind," for ").concat(t.constructor.name))}p([A],E.prototype,"readU8",null),p([A],E.prototype,"readU16",null),p([A],E.prototype,"readU32",null),p([A],E.prototype,"readU64",null),p([A],E.prototype,"readU128",null),p([A],E.prototype,"readU256",null),p([A],E.prototype,"readU512",null),p([A],E.prototype,"readString",null),p([A],E.prototype,"readFixedArray",null),p([A],E.prototype,"readArray",null),t.BinaryReader=E,t.serialize=function(e,t){var n=new(arguments.length>2&&void 0!==arguments[2]?arguments[2]:k);return T(e,t,n),n.toArray()},t.deserialize=function(e,t,n){var r=new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:E)(n),i=P(e,t,r);if(r.offset<n.length)throw new x("Unexpected ".concat(n.length-r.offset," bytes after deserialized data"));return i},t.deserializeUnchecked=function(e,t,n){return P(e,t,new(arguments.length>3&&void 0!==arguments[3]?arguments[3]:E)(n))}},59969:function(e,t,n){var r=n(12307);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},66315:function(e,t,n){var r=n(114);e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")},114:function(e){"use strict";e.exports=function(e){if(e.length>=255)throw new TypeError("Alphabet too long");for(var t=new Uint8Array(256),n=0;n<t.length;n++)t[n]=255;for(var r=0;r<e.length;r++){var i=e.charAt(r),o=i.charCodeAt(0);if(255!==t[o])throw new TypeError(i+" is ambiguous");t[o]=r}var a=e.length,s=e.charAt(0),u=Math.log(a)/Math.log(256),c=Math.log(256)/Math.log(a);function l(e){if("string"!==typeof e)throw new TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var n=0,r=0,i=0;e[n]===s;)r++,n++;for(var o=(e.length-n)*u+1>>>0,c=new Uint8Array(o);e[n];){var l=t[e.charCodeAt(n)];if(255===l)return;for(var f=0,h=o-1;(0!==l||f<i)&&-1!==h;h--,f++)l+=a*c[h]>>>0,c[h]=l%256>>>0,l=l/256>>>0;if(0!==l)throw new Error("Non-zero carry");i=f,n++}for(var d=o-i;d!==o&&0===c[d];)d++;for(var p=new Uint8Array(r+(o-d)),y=r;d!==o;)p[y++]=c[d++];return p}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(0===t.length)return"";for(var n=0,r=0,i=0,o=t.length;i!==o&&0===t[i];)i++,n++;for(var u=(o-i)*c+1>>>0,l=new Uint8Array(u);i!==o;){for(var f=t[i],h=0,d=u-1;(0!==f||h<r)&&-1!==d;d--,h++)f+=256*l[d]>>>0,l[d]=f%a>>>0,f=f/a>>>0;if(0!==f)throw new Error("Non-zero carry");r=h,i++}for(var p=u-r;p!==u&&0===l[p];)p++;for(var y=s.repeat(n);p<u;++p)y+=e.charAt(l[p]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw new Error("Non-base"+a+" character")}}}},19778:function(e,t,n){"use strict";var r=n(56690).default,i=n(89728).default,o=n(66115).default,a=n(61655).default,s=n(26389).default,u=n(2009),c=n(84038),l="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=function(e){+e!=e&&(e=0);return d.alloc(+e)},t.INSPECT_MAX_BYTES=50;var f=2147483647;function h(e){if(e>f)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return m(e)}return p(e,t,n)}function p(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|_(e,t),r=h(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(ee(e,Uint8Array)){var t=new Uint8Array(e);return v(t.buffer,t.byteOffset,t.byteLength)}return g(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(ee(e,ArrayBuffer)||e&&ee(e.buffer,ArrayBuffer))return v(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(ee(e,SharedArrayBuffer)||e&&ee(e.buffer,SharedArrayBuffer)))return v(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return d.from(r,t,n);var i=function(e){if(d.isBuffer(e)){var t=0|b(e.length),n=h(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||te(e.length)?h(0):g(e);if("Buffer"===e.type&&Array.isArray(e.data))return g(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function y(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function m(e){return y(e),h(e<0?0:0|b(e))}function g(e){for(var t=e.length<0?0:0|b(e.length),n=h(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function v(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,d.prototype),r}function b(e){if(e>=f)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+f.toString(16)+" bytes");return 0|e}function _(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||ee(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(e).length;default:if(i)return r?-1:Q(e).length;t=(""+t).toLowerCase(),i=!0}}function w(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return B(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return D(this,t,n);case"base64":return P(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function x(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function k(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),te(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=d.from(t,r)),d.isBuffer(t))return 0===t.length?-1:A(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):A(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function A(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function E(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(te(s))return o;e[n+o]=s}return o}function I(e,t,n,r){return J(Q(t,e.length-n),e,n,r)}function S(e,t,n,r){return J(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function T(e,t,n,r){return J($(t),e,n,r)}function M(e,t,n,r){return J(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function P(e,t,n){return 0===t&&n===e.length?u.fromByteArray(e):u.fromByteArray(e.slice(t,n))}function B(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=C));return n}(r)}t.kMaxLength=f,d.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return p(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return y(e),e<=0?h(e):void 0!==t?"string"===typeof n?h(e).fill(t,n):h(e).fill(t):h(e)}(e,t,n)},d.allocUnsafe=function(e){return m(e)},d.allocUnsafeSlow=function(e){return m(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),ee(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=d.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(ee(o,Uint8Array))i+o.length>r.length?(d.isBuffer(o)||(o=d.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!d.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},d.byteLength=_,d.prototype._isBuffer=!0,d.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)x(this,t,t+1);return this},d.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},d.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},d.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?B(this,0,e):w.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},l&&(d.prototype[l]=d.prototype.inspect),d.prototype.compare=function(e,t,n,r,i){if(ee(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),c=e.slice(t,n),l=0;l<s;++l)if(u[l]!==c[l]){o=u[l],a=c[l];break}return o<a?-1:a<o?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return k(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return k(this,e,t,n,!1)},d.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return E(this,e,t,n);case"utf8":case"utf-8":return I(this,e,t,n);case"ascii":case"latin1":case"binary":return S(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function D(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=ne[e[o]];return i}function L(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function z(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Z(e,t,n,r,i,o){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function U(e,t,n,r,i){H(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function F(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,4),c.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,i){return t=+t,n>>>=0,i||F(e,0,n,8),c.write(e,t,n,r,52,8),n+8}d.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,d.prototype),r},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||z(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),d.prototype.readBigUInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||z(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},d.prototype.readInt8=function(e,t){return e>>>=0,t||z(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||z(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||z(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),d.prototype.readBigInt64BE=re((function(e){q(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||Y(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||z(e,4,this.length),c.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||z(e,4,this.length),c.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||z(e,8,this.length),c.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||z(e,8,this.length),c.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||Z(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Z(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Z(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=re((function(e){return N(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=re((function(e){return U(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,r){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},d.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!d.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=d.isBuffer(e)?e:d.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var V={};function K(e,t,n){V[e]=function(n){a(c,n);var u=s(c);function c(){var n;return r(this,c),n=u.call(this),Object.defineProperty(o(n),"message",{value:t.apply(o(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return i(c,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),c}(n)}function G(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function H(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new V.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){q(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||Y(t,e.length-(n+1))}(r,i,o)}function q(e,t){if("number"!==typeof e)throw new V.ERR_INVALID_ARG_TYPE(t,"number",e)}function Y(e,t,n){if(Math.floor(e)!==e)throw q(e,n),new V.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new V.ERR_BUFFER_OUT_OF_BOUNDS;throw new V.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}K("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),K("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),K("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=G(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=G(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(e){return u.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function J(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function ee(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function te(e){return e!==e}var ne=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function re(e){return"undefined"===typeof BigInt?ie:e}function ie(){throw new Error("BigInt not supported")}},75090:function(e,t,n){"use strict";var r=n(17061).default,i=n(42122).default,o=n(17156).default,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:void 0,s=function(e){for(var t=new DataView(e),n="",r=0;r<t.byteLength;r+=4)n+=t.getUint32(r).toString(16).padStart(8,"0");return n},u=function(e){return function(){var t=o(r().mark((function t(n,o){var u;return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"string"===typeof n&&(n=(new a.TextEncoder).encode(n)),o=i({outputFormat:"hex"},o),t.next=4,a.crypto.subtle.digest(e,n);case 4:return u=t.sent,t.abrupt("return","hex"===o.outputFormat?s(u):u);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};u("SHA-1"),t.JQ=u("SHA-256"),u("SHA-384"),u("SHA-512")},97143:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var u,c,l=this._events[s],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,i),!0;case 5:return l.fn.call(l.context,t,r,i,o),!0;case 6:return l.fn.call(l.context,t,r,i,o,a),!0}for(c=1,u=new Array(f-1);c<f;c++)u[c-1]=arguments[c];l.fn.apply(l.context,u)}else{var h,d=l.length;for(c=0;c<d;c++)switch(l[c].once&&this.removeListener(e,l[c].fn,void 0,!0),f){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,t);break;case 3:l[c].fn.call(l[c].context,t,r);break;case 4:l[c].fn.call(l[c].context,t,r,i);break;default:if(!u)for(h=1,u=new Array(f-1);h<f;h++)u[h-1]=arguments[h];l[c].fn.apply(l[c].context,u)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var u=0,c=[],l=s.length;u<l;u++)(s[u].fn!==t||i&&!s[u].once||r&&s[u].context!==r)&&c.push(s[u]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},47465:function(e){"use strict";var t,n="object"===typeof Reflect?Reflect:null,r=n&&"function"===typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&y(e,"error",t,n)}(e,i,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,n,r){var i,o,a,c;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"===typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,c=l,console&&console.warn&&console.warn(c)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"===typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):p(i,i.length)}function d(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"===typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"===typeof u)r(u,this,t);else{var c=u.length,l=p(u,c);for(n=0;n<c;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):d.call(e,t)},o.prototype.listenerCount=d,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},84038:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}},29976:function(e,t,n){"use strict";var r=n(33741).v4,i=n(89353),o=function e(t,n){if(!(this instanceof e))return new e(t,n);n||(n={}),this.options={reviver:"undefined"!==typeof n.reviver?n.reviver:null,replacer:"undefined"!==typeof n.replacer?n.replacer:null,generator:"undefined"!==typeof n.generator?n.generator:function(){return r()},version:"undefined"!==typeof n.version?n.version:2,notificationIdNull:"boolean"===typeof n.notificationIdNull&&n.notificationIdNull},this.callServer=t};e.exports=o,o.prototype.request=function(e,t,n,r){var o,a=this,s=null,u=Array.isArray(e)&&"function"===typeof t;if(1===this.options.version&&u)throw new TypeError("JSON-RPC 1.0 does not support batching");if(u||!u&&e&&"object"===typeof e&&"function"===typeof t)r=t,s=e;else{"function"===typeof n&&(r=n,n=void 0);var c="function"===typeof r;try{s=i(e,t,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(l){if(c)return r(l);throw l}if(!c)return s}try{o=JSON.stringify(s,this.options.replacer)}catch(l){return r(l)}return this.callServer(o,(function(e,t){a._parseResponse(e,t,r)})),s},o.prototype._parseResponse=function(e,t,n){if(e)n(e);else{if(!t)return n();var r;try{r=JSON.parse(t,this.options.reviver)}catch(e){return n(e)}if(3===n.length){if(Array.isArray(r)){var i=function(e){return"undefined"!==typeof e.error};return n(null,r.filter(i),r.filter((function(e){return!i(e)})))}return n(null,r.error,r.result)}n(null,r)}}},89353:function(e,t,n){"use strict";var r=n(33741).v4;e.exports=function(e,t,n,i){if("string"!==typeof e)throw new TypeError(e+" must be a string");var o="number"===typeof(i=i||{}).version?i.version:2;if(1!==o&&2!==o)throw new TypeError(o+" must be 1 or 2");var a={method:e};if(2===o&&(a.jsonrpc="2.0"),t){if("object"!==typeof t&&!Array.isArray(t))throw new TypeError(t+" must be an object, array or omitted");a.params=t}if("undefined"===typeof n){var s="function"===typeof i.generator?i.generator:function(){return r()};a.id=s(a,i)}else 2===o&&null===n?i.notificationIdNull&&(a.id=null):a.id=n;return a}},1426:function(e){var t,n,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"===typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"===typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,u=[],c=!1,l=-1;function f(){c&&s&&(c=!1,s.length?u=s.concat(u):l=-1,u.length&&h())}function h(){if(!c){var e=a(f);c=!0;for(var t=u.length;t;){for(s=u,u=[];++l<t;)s&&s[l].run();l=-1,t=u.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{return n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||c||a(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},34463:function(e,t,n){"use strict";var r=n(72791),i=n(45296);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function y(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new y(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new y(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new y(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new y(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new y(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new y(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,v);m[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),C=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,z=Object.assign;function Z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var N=!1;function U(e,t){if(!e||N)return"";N=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var u="\n"+i[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=a&&0<=s);break}}}finally{N=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Z(e):""}function F(e){switch(e.tag){case 5:return Z(e.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case E:return"Profiler";case A:return"StrictMode";case M:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case B:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case C:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=V(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function $(e,t){Q(e,t);var n=V(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,V(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+V(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:V(n)}}function oe(e,t){var n=V(t.value),r=V(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ye(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ye(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ge=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ae=null;function Ee(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Ie(e){ke?Ae?Ae.push(e):Ae=[e]:ke=e}function Se(){if(ke){var e=ke,t=Ae;if(Ae=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Te(e,t){return e(t)}function Me(){}var Pe=!1;function Be(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Te(e,t,n)}finally{Pe=!1,(null!==ke||null!==Ae)&&(Me(),Se())}}function Ce(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Oe=!1;if(l)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(le){Oe=!1}function Re(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,ze=null,Ze=!1,Ne=null,Ue={onError:function(e){Le=!0,ze=e}};function Fe(e,t,n,r,i,o,a,s,u){Le=!1,ze=null,Re.apply(Ue,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ve(e){if(je(e)!==e)throw Error(o(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return Ve(i),e;if(a===r)return Ve(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=a;break}if(u===r){s=!0,r=i,n=a;break}u=u.sibling}if(!s){for(u=a.child;u;){if(u===n){s=!0,n=a,r=i;break}if(u===r){s=!0,r=a,n=i;break}u=u.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,Qe=i.unstable_now,$e=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ut|0)|0},st=Math.log,ut=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ft(s):0!==(o&=a)&&(r=ft(o))}else 0!==(a=n&~i)?r=ft(a):0!==o&&(r=ft(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function yt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,At,Et,It=!1,St=[],Tt=null,Mt=null,Pt=null,Bt=new Map,Ct=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Mt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Bt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ct.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function zt(e){var t=vi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Nt(e,t,n){Zt(e)&&n.delete(t)}function Ut(){It=!1,null!==Tt&&Zt(Tt)&&(Tt=null),null!==Mt&&Zt(Mt)&&(Mt=null),null!==Pt&&Zt(Pt)&&(Pt=null),Bt.forEach(Nt),Ct.forEach(Nt)}function Ft(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function jt(e){function t(t){return Ft(t,e)}if(0<St.length){Ft(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&Ft(Tt,e),null!==Mt&&Ft(Mt,e),null!==Pt&&Ft(Pt,e),Bt.forEach(t),Ct.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)zt(n),null===n.blockedOn&&Ot.shift()}var Wt=_.ReactCurrentBatchConfig,Vt=!0;function Kt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=1,Ht(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Gt(e,t,n,r){var i=bt,o=Wt.transition;Wt.transition=null;try{bt=4,Ht(e,t,n,r)}finally{bt=i,Wt.transition=o}}function Ht(e,t,n,r){if(Vt){var i=Yt(e,t,n,r);if(null===i)Vr(e,t,r,qt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return Mt=Lt(Mt,e,t,n,r,i),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Bt.set(o,Lt(Bt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ct.set(o,Lt(Ct.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&wt(o),null===(o=Yt(e,t,n,r))&&Vr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Vr(e,t,r,null,n)}}var qt=null;function Yt(e,t,n,r){if(qt=null,null!==(e=vi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Qt=null,$t=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=$t,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=on(cn),fn=z({},cn,{view:0,detail:0}),hn=on(fn),dn=z({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(an=e.screenX-un.screenX,sn=e.screenY-un.screenY):sn=an=0,un=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(dn),yn=on(z({},dn,{dataTransfer:0})),mn=on(z({},fn,{relatedTarget:0})),gn=on(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(vn),_n=on(z({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return An}var In=z({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=on(In),Tn=on(z({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mn=on(z({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Pn=on(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Bn=z({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Cn=on(Bn),On=[9,13,27,32],Dn=l&&"CompositionEvent"in window,Rn=null;l&&"documentMode"in document&&(Rn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Rn,zn=l&&(!Dn||Rn&&8<Rn&&11>=Rn),Zn=String.fromCharCode(32),Nn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ie(r),0<(t=Gr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Hn=null;function qn(e){Zr(e,0)}function Yn(e){if(H(_i(e)))return e}function Xn(e,t){if("change"===e)return t}var Qn=!1;if(l){var $n;if(l){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Hn=Gn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Kn(t,Hn,e,we(e)),Be(qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=lr(n,o);var a=lr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var yr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,vr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&ur(vr,r)||(vr=r,0<(r=Gr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},Ar={};function Er(e){if(kr[e])return kr[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return kr[e]=n[t];return e}l&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ir=Er("animationend"),Sr=Er("animationiteration"),Tr=Er("animationstart"),Mr=Er("transitionend"),Pr=new Map,Br="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){Pr.set(e,t),u(t,[e])}for(var Or=0;Or<Br.length;Or++){var Dr=Br[Or];Cr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Cr(Ir,"onAnimationEnd"),Cr(Sr,"onAnimationIteration"),Cr(Tr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(Mr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function zr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,u,c){if(Fe.apply(this,arguments),Le){if(!Le)throw Error(o(198));var l=ze;Le=!1,ze=null,Ze||(Ze=!0,Ne=l)}}(r,t,void 0,e),e.currentTarget=null}function Zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,c=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;zr(i,s,c),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,c=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;zr(i,s,c),o=u}}}if(Ze)throw e=Ne,Ze=!1,Ne=null,e}function Nr(e,t){var n=t[yi];void 0===n&&(n=t[yi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function Ur(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Fr]){e[Fr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Ur(t,!1,e),Ur(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Fr]||(t[Fr]=!0,Ur("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Gt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Vr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vi(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}Be((function(){var r=o,i=we(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var u=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":u=Sn;break;case"focusin":c="focus",u=mn;break;case"focusout":c="blur",u=mn;break;case"beforeblur":case"afterblur":u=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mn;break;case Ir:case Sr:case Tr:u=gn;break;case Mr:u=Pn;break;case"scroll":u=hn;break;case"wheel":u=Cn;break;case"copy":case"cut":case"paste":u=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Tn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==s?s+"Capture":null:s;l=[];for(var d,p=r;null!==p;){var y=(d=p).stateNode;if(5===d.tag&&null!==y&&(d=y,null!==h&&(null!=(y=Ce(p,h))&&l.push(Kr(p,y,d)))),f)break;p=p.return}0<l.length&&(s=new u(s,c,null,n,i),a.push({event:s,listeners:l}))}}if(0===(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(f=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(u=null,c=r),u!==c)){if(l=pn,y="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tn,y="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==u?s:_i(u),d=null==c?s:_i(c),(s=new l(y,p+"leave",u,n,i)).target=f,s.relatedTarget=d,y=null,vi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,y=l),f=y,u&&c)e:{for(h=c,p=0,d=l=u;d;d=Hr(d))p++;for(d=0,y=h;y;y=Hr(y))d++;for(;0<p-d;)l=Hr(l),p--;for(;0<d-p;)h=Hr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Hr(l),h=Hr(h)}l=null}else l=null;null!==u&&qr(a,s,u,l,!1),null!==c&&null!==f&&qr(a,f,c,l,!0)}if("select"===(u=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var m=Xn;else if(Vn(s))if(Qn)m=ar;else{m=ir;var g=rr}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=or);switch(m&&(m=m(e,r))?Kn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?_i(r):window,e){case"focusin":(Vn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,vr=null);break;case"focusout":vr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(a,n,i);break;case"selectionchange":if(yr)break;case"keydown":case"keyup":_r(a,n,i)}var v;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(zn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==b?"onCompositionEnd"===b&&jn&&(v=en()):($t="value"in(Qt=i)?Qt.value:Qt.textContent,jn=!0)),0<(g=Gr(r,b)).length&&(b=new _n(b,e,null,n,i),a.push({event:b,listeners:g}),v?b.data=v:null!==(v=Fn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return Fn(t);case"keypress":return 32!==t.which?null:(Nn=!0,Zn);case"textInput":return(e=t.data)===Zn&&Nn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Dn&&Un(e,t)?(e=en(),Jt=$t=Qt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Zr(a,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Ce(e,n))&&r.unshift(Kr(e,o,i)),null!=(o=Ce(e,t))&&r.push(Kr(e,o,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,c=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(u=Ce(n,o))&&a.unshift(Kr(n,u,s)):i||null!=(u=Ce(n,o))&&a.push(Kr(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function $r(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(o(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,yi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function vi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wi(e){return e[di]||null}var xi=[],ki=-1;function Ai(e){return{current:e}}function Ei(e){0>ki||(e.current=xi[ki],xi[ki]=null,ki--)}function Ii(e,t){ki++,xi[ki]=e.current,e.current=t}var Si={},Ti=Ai(Si),Mi=Ai(!1),Pi=Si;function Bi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ci(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Ei(Mi),Ei(Ti)}function Di(e,t,n){if(Ti.current!==Si)throw Error(o(168));Ii(Ti,t),Ii(Mi,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,W(e)||"Unknown",i));return z({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Pi=Ti.current,Ii(Ti,e),Ii(Mi,Mi.current),!0}function zi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Ri(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ei(Mi),Ei(Ti),Ii(Ti,e)):Ei(Mi),Ii(Mi,n)}var Zi=null,Ni=!1,Ui=!1;function Fi(e){null===Zi?Zi=[e]:Zi.push(e)}function ji(){if(!Ui&&null!==Zi){Ui=!0;var e=0,t=bt;try{var n=Zi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Zi=null,Ni=!1}catch(i){throw null!==Zi&&(Zi=Zi.slice(e+1)),He(Je,ji),i}finally{bt=t,Ui=!1}}return null}var Wi=[],Vi=0,Ki=null,Gi=0,Hi=[],qi=0,Yi=null,Xi=1,Qi="";function $i(e,t){Wi[Vi++]=Gi,Wi[Vi++]=Ki,Ki=e,Gi=t}function Ji(e,t,n){Hi[qi++]=Xi,Hi[qi++]=Qi,Hi[qi++]=Yi,Yi=e;var r=Xi;e=Qi;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Xi=1<<32-at(t)+i|n<<i|r,Qi=o+e}else Xi=1<<o|n<<i|r,Qi=e}function eo(e){null!==e.return&&($i(e,1),Ji(e,1,0))}function to(e){for(;e===Ki;)Ki=Wi[--Vi],Wi[Vi]=null,Gi=Wi[--Vi],Wi[Vi]=null;for(;e===Yi;)Yi=Hi[--qi],Hi[qi]=null,Qi=Hi[--qi],Hi[qi]=null,Xi=Hi[--qi],Hi[qi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Cc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(uo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(uo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function fo(e){if(e!==no)return!1;if(!io)return lo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(uo(e))throw ho(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function ho(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function yo(e){null===oo?oo=[e]:oo.push(e)}var mo=_.ReactCurrentBatchConfig;function go(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vo=Ai(null),bo=null,_o=null,wo=null;function xo(){wo=_o=bo=null}function ko(e){var t=vo.current;Ei(vo),e._currentValue=t}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Eo(e,t){bo=e,wo=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Io(e){var t=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===bo)throw Error(o(308));_o=e,bo.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var So=null;function To(e){null===So?So=[e]:So.push(e)}function Mo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,To(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Bo=!1;function Co(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ro(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Mu)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,To(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Lo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Zo(e,t,n,r){var i=e.updateQueue;Bo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,c=u.next;u.next=null,null===a?o=c:a.next=c,a=u;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==a&&(null===s?l.firstBaseUpdate=c:s.next=c,l.lastBaseUpdate=u))}if(null!==o){var f=i.baseState;for(a=0,l=c=u=null,s=o;;){var h=s.lane,d=s.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,y=s;switch(h=t,d=n,y.tag){case 1:if("function"===typeof(p=y.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=y.payload)?p.call(d,f,h):p)||void 0===h)break e;f=z({},f,h);break e;case 2:Bo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else d={eventTime:d,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(c=l=d,u=f):l=l.next=d,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);zu|=a,e.lanes=a,e.memoizedState=f}}function No(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Uo=(new r.Component).refs;function Fo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var jo={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=Do(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Ro(e,o,i))&&(rc(t,e,i,r),Lo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Do(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Ro(e,i,r))&&(rc(t,e,r,n),Lo(t,e,r))}};function Wo(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Vo(e,t,n){var r=!1,i=Si,o=t.contextType;return"object"===typeof o&&null!==o?o=Io(o):(i=Ci(t)?Pi:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Bi(e,i):Si),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=jo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ko(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function Go(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Uo,Co(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Io(o):(o=Ci(t)?Pi:Ti.current,i.context=Bi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Fo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&jo.enqueueReplaceState(i,i.state,null),Zo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ho(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;t===Uo&&(t=i.refs={}),null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function u(e,t,n,r){return null===t||6!==t.tag?((t=Zc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===k?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===C&&Yo(o)===t.type)?((r=i(t,n.props)).ref=Ho(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Ho(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Nc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,o){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ho(e,null,t),n.return=e,n;case x:return(t=Nc(t,e.mode,n)).return=e,t;case C:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Lc(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:u(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case C:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:f(e,t,n,r,null);qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return u(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case C:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return f(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function y(i,o,s,u){for(var c=null,l=null,f=o,y=o=0,m=null;null!==f&&y<s.length;y++){f.index>y?(m=f,f=null):m=f.sibling;var g=d(i,f,s[y],u);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),o=a(g,o,y),null===l?c=g:l.sibling=g,l=g,f=m}if(y===s.length)return n(i,f),io&&$i(i,y),c;if(null===f){for(;y<s.length;y++)null!==(f=h(i,s[y],u))&&(o=a(f,o,y),null===l?c=f:l.sibling=f,l=f);return io&&$i(i,y),c}for(f=r(i,f);y<s.length;y++)null!==(m=p(f,i,y,s[y],u))&&(e&&null!==m.alternate&&f.delete(null===m.key?y:m.key),o=a(m,o,y),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),io&&$i(i,y),c}function m(i,s,u,c){var l=R(u);if("function"!==typeof l)throw Error(o(150));if(null==(u=l.call(u)))throw Error(o(151));for(var f=l=null,y=s,m=s=0,g=null,v=u.next();null!==y&&!v.done;m++,v=u.next()){y.index>m?(g=y,y=null):g=y.sibling;var b=d(i,y,v.value,c);if(null===b){null===y&&(y=g);break}e&&y&&null===b.alternate&&t(i,y),s=a(b,s,m),null===f?l=b:f.sibling=b,f=b,y=g}if(v.done)return n(i,y),io&&$i(i,m),l;if(null===y){for(;!v.done;m++,v=u.next())null!==(v=h(i,v.value,c))&&(s=a(v,s,m),null===f?l=v:f.sibling=v,f=v);return io&&$i(i,m),l}for(y=r(i,y);!v.done;m++,v=u.next())null!==(v=p(y,i,m,v.value,c))&&(e&&null!==v.alternate&&y.delete(null===v.key?m:v.key),s=a(v,s,m),null===f?l=v:f.sibling=v,f=v);return e&&y.forEach((function(e){return t(i,e)})),io&&$i(i,m),l}return function e(r,o,a,u){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,l=o;null!==l;){if(l.key===c){if((c=a.type)===k){if(7===l.tag){n(r,l.sibling),(o=i(l,a.props.children)).return=r,r=o;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===C&&Yo(c)===l.type){n(r,l.sibling),(o=i(l,a.props)).ref=Ho(r,l,a),o.return=r,r=o;break e}n(r,l);break}t(r,l),l=l.sibling}a.type===k?((o=Lc(a.props.children,r.mode,u,a.key)).return=r,r=o):((u=Rc(a.type,a.key,a.props,null,r.mode,u)).ref=Ho(r,o,a),u.return=r,r=u)}return s(r);case x:e:{for(l=a.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Nc(a,r.mode,u)).return=r,r=o}return s(r);case C:return e(r,o,(l=a._init)(a._payload),u)}if(te(a))return y(r,o,a,u);if(R(a))return m(r,o,a,u);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Zc(a,r.mode,u)).return=r,r=o),s(r)):n(r,o)}}var Qo=Xo(!0),$o=Xo(!1),Jo={},ea=Ai(Jo),ta=Ai(Jo),na=Ai(Jo);function ra(e){if(e===Jo)throw Error(o(174));return e}function ia(e,t){switch(Ii(na,t),Ii(ta,e),Ii(ea,Jo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(ea),Ii(ea,t)}function oa(){Ei(ea),Ei(ta),Ei(na)}function aa(e){ra(na.current);var t=ra(ea.current),n=ue(t,e.type);t!==n&&(Ii(ta,e),Ii(ea,n))}function sa(e){ta.current===e&&(Ei(ea),Ei(ta))}var ua=Ai(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var la=[];function fa(){for(var e=0;e<la.length;e++)la[e]._workInProgressVersionPrimary=null;la.length=0}var ha=_.ReactCurrentDispatcher,da=_.ReactCurrentBatchConfig,pa=0,ya=null,ma=null,ga=null,va=!1,ba=!1,_a=0,wa=0;function xa(){throw Error(o(321))}function ka(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function Aa(e,t,n,r,i,a){if(pa=a,ya=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=null===e||null===e.memoizedState?ss:us,e=n(r,i),ba){a=0;do{if(ba=!1,_a=0,25<=a)throw Error(o(301));a+=1,ga=ma=null,t.updateQueue=null,ha.current=cs,e=n(r,i)}while(ba)}if(ha.current=as,t=null!==ma&&null!==ma.next,pa=0,ga=ma=ya=null,va=!1,t)throw Error(o(300));return e}function Ea(){var e=0!==_a;return _a=0,e}function Ia(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ga?ya.memoizedState=ga=e:ga=ga.next=e,ga}function Sa(){if(null===ma){var e=ya.alternate;e=null!==e?e.memoizedState:null}else e=ma.next;var t=null===ga?ya.memoizedState:ga.next;if(null!==t)ga=t,ma=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ma=e).memoizedState,baseState:ma.baseState,baseQueue:ma.baseQueue,queue:ma.queue,next:null},null===ga?ya.memoizedState=ga=e:ga=ga.next=e}return ga}function Ta(e,t){return"function"===typeof t?t(e):t}function Ma(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=ma,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var u=s=null,c=null,l=a;do{var f=l.lane;if((pa&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(u=c=h,s=r):c=c.next=h,ya.lanes|=f,zu|=f}l=l.next}while(null!==l&&l!==a);null===c?s=r:c.next=u,sr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,ya.lanes|=a,zu|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Sa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(_s=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Ba(){}function Ca(e,t){var n=ya,r=Sa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,_s=!0),r=r.queue,Va(Ra.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ga&&1&ga.memoizedState.tag){if(n.flags|=2048,Na(9,Da.bind(null,n,r,i,t),void 0,null),null===Pu)throw Error(o(349));0!==(30&pa)||Oa(n,t,i)}return i}function Oa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Da(e,t,n,r){t.value=n,t.getSnapshot=r,La(t)&&za(e)}function Ra(e,t,n){return n((function(){La(t)&&za(e)}))}function La(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function za(e){var t=Po(e,1);null!==t&&rc(t,e,1,-1)}function Za(e){var t=Ia();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ta,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,ya,e),[t.memoizedState,e]}function Na(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ya.updateQueue)?(t={lastEffect:null,stores:null},ya.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ua(){return Sa().memoizedState}function Fa(e,t,n,r){var i=Ia();ya.flags|=e,i.memoizedState=Na(1|t,n,void 0,void 0===r?null:r)}function ja(e,t,n,r){var i=Sa();r=void 0===r?null:r;var o=void 0;if(null!==ma){var a=ma.memoizedState;if(o=a.destroy,null!==r&&ka(r,a.deps))return void(i.memoizedState=Na(t,n,o,r))}ya.flags|=e,i.memoizedState=Na(1|t,n,o,r)}function Wa(e,t){return Fa(8390656,8,e,t)}function Va(e,t){return ja(2048,8,e,t)}function Ka(e,t){return ja(4,2,e,t)}function Ga(e,t){return ja(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,ja(4,4,Ha.bind(null,t,e),n)}function Ya(){}function Xa(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Sa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ka(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function $a(e,t,n){return 0===(21&pa)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(sr(n,t)||(n=yt(),ya.lanes|=n,zu|=n,e.baseState=!0),t)}function Ja(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=da.transition;da.transition={};try{e(!1),t()}finally{bt=n,da.transition=r}}function es(){return Sa().memoizedState}function ts(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Mo(e,t,n,r))){rc(n,e,r,tc()),os(n,t,r)}}function ns(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var u=t.interleaved;return null===u?(i.next=i,To(t)):(i.next=u.next,u.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Mo(e,t,i,r))&&(rc(n,e,r,i=tc()),os(n,t,r))}}function rs(e){var t=e.alternate;return e===ya||null!==t&&t===ya}function is(e,t){ba=va=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function os(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var as={readContext:Io,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useInsertionEffect:xa,useLayoutEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useMutableSource:xa,useSyncExternalStore:xa,useId:xa,unstable_isNewReconciler:!1},ss={readContext:Io,useCallback:function(e,t){return Ia().memoizedState=[e,void 0===t?null:t],e},useContext:Io,useEffect:Wa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fa(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Fa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Fa(4,2,e,t)},useMemo:function(e,t){var n=Ia();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ia();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,ya,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ia().memoizedState=e},useState:Za,useDebugValue:Ya,useDeferredValue:function(e){return Ia().memoizedState=e},useTransition:function(){var e=Za(!1),t=e[0];return e=Ja.bind(null,e[1]),Ia().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ya,i=Ia();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Pu)throw Error(o(349));0!==(30&pa)||Oa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Wa(Ra.bind(null,r,a,e),[e]),r.flags|=2048,Na(9,Da.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Ia(),t=Pu.identifierPrefix;if(io){var n=Qi;t=":"+t+"R"+(n=(Xi&~(1<<32-at(Xi)-1)).toString(32)+n),0<(n=_a++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Io,useCallback:Xa,useContext:Io,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ka,useLayoutEffect:Ga,useMemo:Qa,useReducer:Ma,useRef:Ua,useState:function(){return Ma(Ta)},useDebugValue:Ya,useDeferredValue:function(e){return $a(Sa(),ma.memoizedState,e)},useTransition:function(){return[Ma(Ta)[0],Sa().memoizedState]},useMutableSource:Ba,useSyncExternalStore:Ca,useId:es,unstable_isNewReconciler:!1},cs={readContext:Io,useCallback:Xa,useContext:Io,useEffect:Va,useImperativeHandle:qa,useInsertionEffect:Ka,useLayoutEffect:Ga,useMemo:Qa,useReducer:Pa,useRef:Ua,useState:function(){return Pa(Ta)},useDebugValue:Ya,useDeferredValue:function(e){var t=Sa();return null===ma?t.memoizedState=e:$a(t,ma.memoizedState,e)},useTransition:function(){return[Pa(Ta)[0],Sa().memoizedState]},useMutableSource:Ba,useSyncExternalStore:Ca,useId:es,unstable_isNewReconciler:!1};function ls(e,t){try{var n="",r=t;do{n+=F(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function fs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ku||(Ku=!0,Gu=r),hs(0,t)},n}function ys(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Hu?Hu=new Set([this]):Hu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Ro(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=_.ReactCurrentOwner,_s=!1;function ws(e,t,n,r){t.child=null===e?$o(t,null,n,r):Qo(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var o=t.ref;return Eo(t,i),r=Aa(e,t,n,r,o,i),n=Ea(),null===e||_s?(io&&n&&eo(t),t.flags|=1,ws(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function ks(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,As(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ks(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function As(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ks(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Ss(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Du,Ou),Ou|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Du,Ou),Ou|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ii(Du,Ou),Ou|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ii(Du,Ou),Ou|=r;return ws(e,t,i,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ss(e,t,n,r,i){var o=Ci(n)?Pi:Ti.current;return o=Bi(t,o),Eo(t,i),n=Aa(e,t,n,r,o,i),r=Ea(),null===e||_s?(io&&r&&eo(t),t.flags|=1,ws(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ks(e,t,i))}function Ts(e,t,n,r,i){if(Ci(n)){var o=!0;Li(t)}else o=!1;if(Eo(t,i),null===t.stateNode)Vs(e,t),Vo(t,n,r),Go(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Io(c):c=Bi(t,c=Ci(n)?Pi:Ti.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;f||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&Ko(t,a,r,c),Bo=!1;var h=t.memoizedState;a.state=h,Zo(t,r,a,i),u=t.memoizedState,s!==r||h!==u||Mi.current||Bo?("function"===typeof l&&(Fo(t,n,l,r),u=t.memoizedState),(s=Bo||Wo(t,n,s,r,h,u,c))?(f||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Oo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:go(t.type,s),a.props=c,f=t.pendingProps,h=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=Io(u):u=Bi(t,u=Ci(n)?Pi:Ti.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==f||h!==u)&&Ko(t,a,r,u),Bo=!1,h=t.memoizedState,a.state=h,Zo(t,r,a,i);var p=t.memoizedState;s!==f||h!==p||Mi.current||Bo?("function"===typeof d&&(Fo(t,n,d,r),p=t.memoizedState),(c=Bo||Wo(t,n,c,r,h,p,u)||!1)?(l||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Ms(e,t,n,r,o,i)}function Ms(e,t,n,r,i,o){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&zi(t,n,!1),Ks(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):ws(e,t,s,o),t.memoizedState=r.state,i&&zi(t,n,!0),t.child}function Ps(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),ia(e,t.containerInfo)}function Bs(e,t,n,r,i){return po(),yo(i),t.flags|=256,ws(e,t,n,r),t.child}var Cs,Os,Ds,Rs,Ls={dehydrated:null,treeContext:null,retryLane:0};function zs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zs(e,t,n){var r,i=t.pendingProps,a=ua.current,s=!1,u=0!==(128&t.flags);if((r=u)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ii(ua,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(u=i.children,e=i.fallback,s?(i=t.mode,s=t.child,u={mode:"hidden",children:u},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=u):s=zc(u,i,0,null),e=Lc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=zs(n),t.memoizedState=Ls,e):Ns(t,u));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=fs(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=zc({mode:"visible",children:r.children},i,0,null),(a=Lc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=zs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var u=r.dgst;return r=u,Us(e,t,s,r=fs(a=Error(o(419)),r,void 0))}if(u=0!==(s&e.childLanes),_s||u){if(null!==(r=Pu)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Po(e,i),rc(r,e,i,-1))}return mc(),Us(e,t,s,r=fs(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(Hi[qi++]=Xi,Hi[qi++]=Qi,Hi[qi++]=Yi,Xi=e.id,Qi=e.overflow,Yi=t),t=Ns(t,r.children),t.flags|=4096,t)}(e,t,u,i,r,a,n);if(s){s=i.fallback,u=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&u)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=Lc(s,u,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,u=null===(u=e.child.memoizedState)?zs(n):{baseLanes:u.baseLanes|n,cachePool:null,transitions:u.transitions},s.memoizedState=u,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ns(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&yo(r),Qo(t,e.child,null,n),(e=Ns(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function js(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ws(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(ws(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fs(e,n,t);else if(19===e.tag)Fs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,o);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ks(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zu|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(t),null;case 1:case 17:return Ci(t.type)&&Oi(),Hs(t),null;case 3:return r=t.stateNode,oa(),Ei(Mi),Ei(Ti),fa(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Os(e,t),Hs(t),null;case 5:sa(t);var i=ra(na.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Hs(t),null}if(e=ra(ea.current),fo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[di]=a,e=0!==(1&t.mode),n){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Nr(Rr[i],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":X(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":ie(r,a),Nr("invalid",r)}for(var u in ve(n,a),i=null,a)if(a.hasOwnProperty(u)){var c=a[u];"children"===u?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&$r(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(u)&&null!=c&&"onScroll"===u&&Nr("scroll",r)}switch(n){case"input":G(r),J(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{u=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=u.createElement(n,{is:r.is}):(e=u.createElement(n),"select"===n&&(u=e,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):e=u.createElementNS(e,n),e[hi]=t,e[di]=r,Cs(e,t,!1,!1),t.stateNode=e;e:{switch(u=be(n,r),n){case"dialog":Nr("cancel",e),Nr("close",e),i=r;break;case"iframe":case"object":case"embed":Nr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Nr(Rr[i],e);i=r;break;case"source":Nr("error",e),i=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),i=r;break;case"details":Nr("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Nr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=z({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Nr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var l=c[a];"style"===a?me(e,l):"dangerouslySetInnerHTML"===a?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===a?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=l&&"onScroll"===a&&Nr("scroll",e):null!=l&&b(e,a,l,u))}switch(n){case"input":G(e),J(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hs(t),null;case 6:if(e&&null!=t.stateNode)Rs(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=ra(na.current),ra(ea.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:$r(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&$r(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hs(t),null;case 13:if(Ei(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))ho(),po(),t.flags|=98560,a=!1;else if(a=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hs(t),a=!1}else null!==oo&&(sc(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Ru&&(Ru=3):mc())),null!==t.updateQueue&&(t.flags|=4),Hs(t),null);case 4:return oa(),Os(e,t),null===e&&jr(t.stateNode.containerInfo),Hs(t),null;case 10:return ko(t.type._context),Hs(t),null;case 19:if(Ei(ua),null===(a=t.memoizedState))return Hs(t),null;if(r=0!==(128&t.flags),null===(u=a.rendering))if(r)Gs(a,!1);else{if(0!==Ru||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(u=ca(e))){for(t.flags|=128,Gs(a,!1),null!==(r=u.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(u=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=u.childLanes,a.lanes=u.lanes,a.child=u.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=u.memoizedProps,a.memoizedState=u.memoizedState,a.updateQueue=u.updateQueue,a.type=u.type,e=u.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(ua,1&ua.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Wu&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(u))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Gs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!u.alternate&&!io)return Hs(t),null}else 2*Qe()-a.renderingStartTime>Wu&&1073741824!==n&&(t.flags|=128,r=!0,Gs(a,!1),t.lanes=4194304);a.isBackwards?(u.sibling=t.child,t.child=u):(null!==(n=a.last)?n.sibling=u:t.child=u,a.last=u)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ii(ua,r?1&n|2:1&n),t):(Hs(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ou)&&(Hs(t),6&t.subtreeFlags&&(t.flags|=8192)):Hs(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ys(e,t){switch(to(t),t.tag){case 1:return Ci(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return oa(),Ei(Mi),Ei(Ti),fa(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return sa(t),null;case 13:if(Ei(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(ua),null;case 4:return oa(),null;case 10:return ko(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Cs=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Os=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ra(ea.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=z({},i,{value:void 0}),r=z({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(l in ve(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var u=i[l];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var c=r[l];if(u=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==u&&(null!=c||null!=u))if("style"===l)if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(a=a||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Nr("scroll",e),a||u===c||(a=[])):(a=a||[]).push(l,c))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Rs=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xs=!1,Qs=!1,$s="function"===typeof WeakSet?WeakSet:Set,Js=null;function eu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function tu(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var nu=!1;function ru(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tu(t,n,o)}i=i.next}while(i!==r)}}function iu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ou(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function au(e){var t=e.alternate;null!==t&&(e.alternate=null,au(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[yi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function su(e){return 5===e.tag||3===e.tag||4===e.tag}function uu(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||su(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(cu(e,t,n),e=e.sibling;null!==e;)cu(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var fu=null,hu=!1;function du(e,t,n){for(n=n.child;null!==n;)pu(e,t,n),n=n.sibling}function pu(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Qs||eu(n,t);case 6:var r=fu,i=hu;fu=null,du(e,t,n),hu=i,null!==(fu=r)&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fu.removeChild(n.stateNode));break;case 18:null!==fu&&(hu?(e=fu,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),jt(e)):ui(fu,n.stateNode));break;case 4:r=fu,i=hu,fu=n.stateNode.containerInfo,hu=!0,du(e,t,n),fu=r,hu=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tu(n,t,a),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Qs&&(eu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Qs=(r=Qs)||null!==n.memoizedState,du(e,t,n),Qs=r):du(e,t,n);break;default:du(e,t,n)}}function yu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $s),t.forEach((function(t){var r=Mc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function mu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,u=s;e:for(;null!==u;){switch(u.tag){case 5:fu=u.stateNode,hu=!1;break e;case 3:case 4:fu=u.stateNode.containerInfo,hu=!0;break e}u=u.return}if(null===fu)throw Error(o(160));pu(a,s,i),fu=null,hu=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gu(t,e),t=t.sibling}function gu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mu(t,e),vu(e),4&r){try{ru(3,e,e.return),iu(3,e)}catch(m){Ec(e,e.return,m)}try{ru(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:mu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return);break;case 5:if(mu(t,e),vu(e),512&r&&null!==n&&eu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ec(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===a.type&&null!=a.name&&Q(i,a),be(u,s);var l=be(u,a);for(s=0;s<c.length;s+=2){var f=c[s],h=c[s+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):b(i,f,h,l)}switch(u){case"input":$(i,a);break;case"textarea":oe(i,a);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):d!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[di]=a}catch(m){Ec(e,e.return,m)}}break;case 6:if(mu(t,e),vu(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Ec(e,e.return,m)}}break;case 3:if(mu(t,e),vu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:mu(t,e),vu(e);break;case 13:mu(t,e),vu(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(ju=Qe())),4&r&&yu(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Qs=(l=Qs)||f,mu(t,e),Qs=l):mu(t,e),vu(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Js=e,f=e.child;null!==f;){for(h=Js=f;null!==Js;){switch(p=(d=Js).child,d.tag){case 0:case 11:case 14:case 15:ru(4,d,d.return);break;case 1:eu(d,d.return);var y=d.stateNode;if("function"===typeof y.componentWillUnmount){r=d,n=d.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(m){Ec(r,n,m)}}break;case 5:eu(d,d.return);break;case 22:if(null!==d.memoizedState){xu(h);continue}}null!==p?(p.return=d,Js=p):xu(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(u=h.stateNode,s=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=ye("display",s))}catch(m){Ec(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:mu(t,e),vu(e),4&r&&yu(e);case 21:}}function vu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(su(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),lu(e,uu(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;cu(e,uu(e),a);break;default:throw Error(o(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bu(e,t,n){Js=e,_u(e,t,n)}function _u(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xs;if(!a){var s=i.alternate,u=null!==s&&null!==s.memoizedState||Qs;s=Xs;var c=Qs;if(Xs=a,(Qs=u)&&!c)for(Js=i;null!==Js;)u=(a=Js).child,22===a.tag&&null!==a.memoizedState?ku(i):null!==u?(u.return=a,Js=u):ku(i);for(;null!==o;)Js=o,_u(o,t,n),o=o.sibling;Js=i,Xs=s,Qs=c}wu(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):wu(e)}}function wu(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qs||iu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Qs)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:go(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&No(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}No(t,s,n)}break;case 5:var u=t.stateNode;if(null===n&&4&t.flags){n=u;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(o(163))}Qs||512&t.flags&&ou(t)}catch(d){Ec(t,t.return,d)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function xu(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function ku(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{iu(4,t)}catch(u){Ec(t,n,u)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(u){Ec(t,i,u)}}var o=t.return;try{ou(t)}catch(u){Ec(t,o,u)}break;case 5:var a=t.return;try{ou(t)}catch(u){Ec(t,a,u)}}}catch(u){Ec(t,t.return,u)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Au,Eu=Math.ceil,Iu=_.ReactCurrentDispatcher,Su=_.ReactCurrentOwner,Tu=_.ReactCurrentBatchConfig,Mu=0,Pu=null,Bu=null,Cu=0,Ou=0,Du=Ai(0),Ru=0,Lu=null,zu=0,Zu=0,Nu=0,Uu=null,Fu=null,ju=0,Wu=1/0,Vu=null,Ku=!1,Gu=null,Hu=null,qu=!1,Yu=null,Xu=0,Qu=0,$u=null,Ju=-1,ec=0;function tc(){return 0!==(6&Mu)?Qe():-1!==Ju?Ju:Ju=Qe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Mu)&&0!==Cu?Cu&-Cu:null!==mo.transition?(0===ec&&(ec=yt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<Qu)throw Qu=0,$u=null,Error(o(185));gt(e,n,r),0!==(2&Mu)&&e===Pu||(e===Pu&&(0===(2&Mu)&&(Zu|=n),4===Ru&&uc(e,Cu)),ic(e,r),1===n&&0===Mu&&0===(1&t.mode)&&(Wu=Qe()+500,Ni&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,u=i[a];-1===u?0!==(s&n)&&0===(s&r)||(i[a]=dt(s,t)):u<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ht(e,e===Pu?Cu:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Ni=!0,Fi(e)}(cc.bind(null,e)):Fi(cc.bind(null,e)),ai((function(){0===(6&Mu)&&ji()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if(Ju=-1,ec=0,0!==(6&Mu))throw Error(o(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var r=ht(e,e===Pu?Cu:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Mu;Mu|=2;var a=yc();for(Pu===e&&Cu===t||(Vu=null,Wu=Qe()+500,dc(e,t));;)try{bc();break}catch(u){pc(e,u)}xo(),Iu.current=a,Mu=i,null!==Bu?t=0:(Pu=null,Cu=0,t=Ru)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Lu,dc(e,0),uc(e,r),ic(e,Qe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=ac(e,a))),1===t))throw n=Lu,dc(e,0),uc(e,r),ic(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:xc(e,Fu,Vu);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=ju+500-Qe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,Fu,Vu),t);break}xc(e,Fu,Vu);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Eu(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,Fu,Vu),r);break}xc(e,Fu,Vu);break;default:throw Error(o(329))}}}return ic(e,Qe()),e.callbackNode===n?oc.bind(null,e):null}function ac(e,t){var n=Uu;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Fu,Fu=n,null!==t&&sc(t)),e}function sc(e){null===Fu?Fu=e:Fu.push.apply(Fu,e)}function uc(e,t){for(t&=~Nu,t&=~Zu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Mu))throw Error(o(327));kc();var t=ht(e,0);if(0===(1&t))return ic(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Lu,dc(e,0),uc(e,t),ic(e,Qe()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Fu,Vu),ic(e,Qe()),null}function lc(e,t){var n=Mu;Mu|=1;try{return e(t)}finally{0===(Mu=n)&&(Wu=Qe()+500,Ni&&ji())}}function fc(e){null!==Yu&&0===Yu.tag&&0===(6&Mu)&&kc();var t=Mu;Mu|=1;var n=Tu.transition,r=bt;try{if(Tu.transition=null,bt=1,e)return e()}finally{bt=r,Tu.transition=n,0===(6&(Mu=t))&&ji()}}function hc(){Ou=Du.current,Ei(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Bu)for(n=Bu.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:oa(),Ei(Mi),Ei(Ti),fa();break;case 5:sa(r);break;case 4:oa();break;case 13:case 19:Ei(ua);break;case 10:ko(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Pu=e,Bu=e=Dc(e.current,null),Cu=Ou=t,Ru=0,Lu=null,Nu=Zu=zu=0,Fu=Uu=null,null!==So){for(t=0;t<So.length;t++)if(null!==(r=(n=So[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}So=null}return e}function pc(e,t){for(;;){var n=Bu;try{if(xo(),ha.current=as,va){for(var r=ya.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}va=!1}if(pa=0,ga=ma=ya=null,ba=!1,_a=0,Su.current=null,null===n||null===n.return){Ru=1,Lu=t,Bu=null;break}e:{var a=e,s=n.return,u=n,c=t;if(t=Cu,u.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=u,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,u,0,t),1&p.mode&&ms(a,l,t),c=l;var y=(t=p).updateQueue;if(null===y){var m=new Set;m.add(c),t.updateQueue=m}else y.add(c);break e}if(0===(1&t)){ms(a,l,t),mc();break e}c=Error(o(426))}else if(io&&1&u.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),vs(g,s,u,0,t),yo(ls(c,u));break e}}a=c=ls(c,u),4!==Ru&&(Ru=2),null===Uu?Uu=[a]:Uu.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zo(a,ps(0,c,t));break e;case 1:u=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hu||!Hu.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,zo(a,ys(a,u,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(_){t=_,Bu===n&&null!==n&&(Bu=n=n.return);continue}break}}function yc(){var e=Iu.current;return Iu.current=as,null===e?as:e}function mc(){0!==Ru&&3!==Ru&&2!==Ru||(Ru=4),null===Pu||0===(268435455&zu)&&0===(268435455&Zu)||uc(Pu,Cu)}function gc(e,t){var n=Mu;Mu|=2;var r=yc();for(Pu===e&&Cu===t||(Vu=null,dc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(xo(),Mu=n,Iu.current=r,null!==Bu)throw Error(o(261));return Pu=null,Cu=0,Ru}function vc(){for(;null!==Bu;)_c(Bu)}function bc(){for(;null!==Bu&&!Ye();)_c(Bu)}function _c(e){var t=Au(e.alternate,e,Ou);e.memoizedProps=e.pendingProps,null===t?wc(e):Bu=t,Su.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Ou)))return void(Bu=n)}else{if(null!==(n=Ys(n,t)))return n.flags&=32767,void(Bu=n);if(null===e)return Ru=6,void(Bu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bu=t);Bu=t=e}while(null!==t);0===Ru&&(Ru=5)}function xc(e,t,n){var r=bt,i=Tu.transition;try{Tu.transition=null,bt=1,function(e,t,n,r){do{kc()}while(null!==Yu);if(0!==(6&Mu))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Pu&&(Bu=Pu=null,Cu=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||qu||(qu=!0,Pc(tt,(function(){return kc(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tu.transition,Tu.transition=null;var s=bt;bt=1;var u=Mu;Mu|=4,Su.current=null,function(e,t){if(ei=Vt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var s=0,u=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(u=s+i),h!==a||0!==r&&3!==h.nodeType||(c=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(u=s),d===a&&++f===r&&(c=s),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===u||-1===c?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Vt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var y=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==y){var m=y.memoizedProps,g=y.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:go(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}y=nu,nu=!1}(e,n),gu(n,e),pr(ti),Vt=!!ei,ti=ei=null,e.current=n,bu(n,e,i),Xe(),Mu=u,bt=s,Tu.transition=a}else e.current=n;if(qu&&(qu=!1,Yu=e,Xu=i),a=e.pendingLanes,0===a&&(Hu=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ku)throw Ku=!1,e=Gu,Gu=null,e;0!==(1&Xu)&&0!==e.tag&&kc(),a=e.pendingLanes,0!==(1&a)?e===$u?Qu++:(Qu=0,$u=e):Qu=0,ji()}(e,t,n,r)}finally{Tu.transition=i,bt=r}return null}function kc(){if(null!==Yu){var e=_t(Xu),t=Tu.transition,n=bt;try{if(Tu.transition=null,bt=16>e?16:e,null===Yu)var r=!1;else{if(e=Yu,Yu=null,Xu=0,0!==(6&Mu))throw Error(o(331));var i=Mu;for(Mu|=4,Js=e.current;null!==Js;){var a=Js,s=a.child;if(0!==(16&Js.flags)){var u=a.deletions;if(null!==u){for(var c=0;c<u.length;c++){var l=u[c];for(Js=l;null!==Js;){var f=Js;switch(f.tag){case 0:case 11:case 15:ru(8,f,a)}var h=f.child;if(null!==h)h.return=f,Js=h;else for(;null!==Js;){var d=(f=Js).sibling,p=f.return;if(au(f),f===l){Js=null;break}if(null!==d){d.return=p,Js=d;break}Js=p}}}var y=a.alternate;if(null!==y){var m=y.child;if(null!==m){y.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Js=s;else e:for(;null!==Js;){if(0!==(2048&(a=Js).flags))switch(a.tag){case 0:case 11:case 15:ru(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Js=v;break e}Js=a.return}}var b=e.current;for(Js=b;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else e:for(s=b;null!==Js;){if(0!==(2048&(u=Js).flags))try{switch(u.tag){case 0:case 11:case 15:iu(9,u)}}catch(x){Ec(u,u.return,x)}if(u===s){Js=null;break e}var w=u.sibling;if(null!==w){w.return=u.return,Js=w;break e}Js=u.return}}if(Mu=i,ji(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{bt=n,Tu.transition=t}}return!1}function Ac(e,t,n){e=Ro(e,t=ps(0,t=ls(n,t),1),1),t=tc(),null!==e&&(gt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ac(e,e,n);else for(;null!==t;){if(3===t.tag){Ac(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hu||!Hu.has(r))){t=Ro(t,e=ys(t,e=ls(n,e),1),1),e=tc(),null!==t&&(gt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pu===e&&(Cu&n)===n&&(4===Ru||3===Ru&&(130023424&Cu)===Cu&&500>Qe()-ju?dc(e,0):Nu|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Po(e,t))&&(gt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Mc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Sc(e,n)}function Pc(e,t){return He(e,t)}function Bc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new Bc(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Cc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Oc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Lc(n.children,i,a,t);case A:s=8,i|=8;break;case E:return(e=Cc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case M:return(e=Cc(13,n,t,i)).elementType=M,e.lanes=a,e;case P:return(e=Cc(19,n,t,i)).elementType=P,e.lanes=a,e;case O:return zc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:s=10;break e;case S:s=9;break e;case T:s=11;break e;case B:s=14;break e;case C:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Cc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Lc(e,t,n,r){return(e=Cc(7,e,r,t)).lanes=n,e}function zc(e,t,n,r){return(e=Cc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Zc(e,t,n){return(e=Cc(6,e,null,t)).lanes=n,e}function Nc(e,t,n){return(t=Cc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,r,i,o,a,s,u){return e=new Uc(e,t,n,s,u),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Cc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Co(o),e}function jc(e){if(!e)return Si;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ci(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ci(n))return Ri(e,n,t)}return t}function Wc(e,t,n,r,i,o,a,s,u){return(e=Fc(n,r,!0,e,0,o,0,s,u)).context=jc(null),n=e.current,(o=Do(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Ro(n,o,i),e.current.lanes=i,gt(e,i,r),ic(e,r),e}function Vc(e,t,n,r){var i=t.current,o=tc(),a=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ro(i,t,a))&&(rc(e,i,a,o),Lo(e,i,a)),a}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Au=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mi.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Ps(t),po();break;case 5:aa(t);break;case 1:Ci(t.type)&&Li(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(vo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zs(e,t,n):(Ii(ua,1&ua.current),null!==(e=Ks(e,t,n))?e.sibling:null);Ii(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ws(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Ks(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,io&&0!==(1048576&t.flags)&&Ji(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Bi(t,Ti.current);Eo(t,n),i=Aa(null,t,r,e,i,n);var a=Ea();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ci(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Co(t),i.updater=jo,t.stateNode=i,i._reactInternals=t,Go(t,r,e,n),t=Ms(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),ws(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===B)return 14}return 2}(r),e=go(r,e),i){case 0:t=Ss(null,t,r,e,n);break e;case 1:t=Ts(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,go(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ss(e,t,r,i=t.elementType===r?i:go(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ts(e,t,r,i=t.elementType===r?i:go(r,i),n);case 3:e:{if(Ps(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,Oo(e,t),Zo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Bs(e,t,r,n,i=ls(Error(o(423)),t));break e}if(r!==i){t=Bs(e,t,r,n,i=ls(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=$o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Ks(e,t,n);break e}ws(e,t,r,n)}t=t.child}return t;case 5:return aa(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Is(e,t),ws(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Zs(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):ws(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:go(r,i),n);case 7:return ws(e,t,t.pendingProps,n),t.child;case 8:case 12:return ws(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ii(vo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Mi.current){t=Ks(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var u=a.dependencies;if(null!==u){s=a.child;for(var c=u.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Do(-1,n&-n)).tag=2;var l=a.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ao(a.return,n,t),u.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),Ao(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}ws(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Eo(t,n),r=r(i=Io(i)),t.flags|=1,ws(e,t,r,n),t.child;case 14:return i=go(r=t.type,t.pendingProps),ks(e,t,r,i=go(r.type,i),n);case 15:return As(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:go(r,i),Vs(e,t),t.tag=1,Ci(r)?(e=!0,Li(t)):e=!1,Eo(t,n),Vo(t,r,i),Go(t,r,i,n),Ms(null,t,r,!0,e,n);case 19:return Ws(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function el(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Kc(a);s.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Kc(a);o.call(e)}}var a=Wc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,jr(8===e.nodeType?e.parentNode:e),fc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Kc(u);s.call(e)}}var u=Fc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=u,e[pi]=u.current,jr(8===e.nodeType?e.parentNode:e),fc((function(){Vc(t,u,n,r)})),u}(n,t,e,i,r);return Kc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Vc(null,e,null,null)})),t[pi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&zt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(vt(t,1|n),ic(t,Qe()),0===(6&Mu)&&(Wu=Qe()+500,ji()))}break;case 13:fc((function(){var t=Po(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},xt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=Po(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},At=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if($(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(o(90));H(r),$(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=lc,Me=fc;var tl={usingClientEntryPoint:!1,Events:[bi,_i,wi,Ie,Se,lc]},nl={findFiberByHostInstance:vi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),ot=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Qc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Wc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(o(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(o(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1250:function(e,t,n){"use strict";var r=n(54164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},54164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(34463)},66374:function(e,t,n){"use strict";var r=n(72791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)a.call(t,r)&&!u.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},59117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=g.prototype;var _=b.prototype=new v;_.constructor=b,y(_,g.prototype),_.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)x.call(t,i)&&!A.hasOwnProperty(i)&&(o[i]=t[i]);var u=arguments.length-2;if(1===u)o.children=r;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];o.children=c}if(e&&e.defaultProps)for(i in u=e.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:k.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function M(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0}}if(u)return a=a(u=e),e=""===o?"."+T(u,0):o,w(a)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),M(a,t,i,"",(function(e){return e}))):null!=a&&(I(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(S,"$&/")+"/")+e)),t.push(a)),1;if(u=0,o=""===o?".":o+":",w(e))for(var c=0;c<e.length;c++){var l=o+T(s=e[c],c);u+=M(s,t,i,l,a)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=M(s=s.value,t,i,l=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return u}function P(e,t,n){if(null==e)return e;var r=[],i=0;return M(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function B(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},O={transition:null},D={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=y({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=k.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(c in t)x.call(t,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==u?u[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){u=Array(c);for(var l=0;l<c;l++)u[l]=arguments[l+2];i.children=u}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:B}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,n){return C.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,n){return C.current.useReducer(e,t,n)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.current.useTransition()},t.version="18.2.0"},72791:function(e,t,n){"use strict";e.exports=n(59117)},80184:function(e,t,n){"use strict";e.exports=n(66374)},14641:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(64836);t.Z=void 0;var o=i(n(64687)),a=i(n(17156)),s=i(n(18698)),u=i(n(56690)),c=i(n(89728)),l=i(n(61655)),f=i(n(94993)),h=i(n(73808)),d=n(97143);function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,h.default)(e);if(t){var i=(0,h.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}var y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},m=function(e){(0,l.default)(n,e);var t=p(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ws://localhost:8080",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;(0,u.default)(this,n);var s=o.autoconnect,c=void 0===s||s,l=o.reconnect,f=void 0===l||l,h=o.reconnect_interval,d=void 0===h?1e3:h,p=o.max_reconnects,m=void 0===p?5:p,g=y(o,["autoconnect","reconnect","reconnect_interval","max_reconnects"]);return(r=t.call(this)).webSocketFactory=e,r.queue={},r.rpc_id=0,r.address=i,r.autoconnect=c,r.ready=!1,r.reconnect=f,r.reconnect_timer_id=void 0,r.reconnect_interval=d,r.max_reconnects=m,r.rest_options=g,r.current_reconnects=0,r.generate_request_id=a||function(){return++r.rpc_id},r.autoconnect&&r._connect(r.address,Object.assign({autoconnect:r.autoconnect,reconnect:r.reconnect,reconnect_interval:r.reconnect_interval,max_reconnects:r.max_reconnects},r.rest_options)),r}return(0,c.default)(n,[{key:"connect",value:function(){this.socket||this._connect(this.address,Object.assign({autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects},this.rest_options))}},{key:"call",value:function(e,t,n,r){var i=this;return r||"object"!==(0,s.default)(n)||(r=n,n=null),new Promise((function(o,a){if(!i.ready)return a(new Error("socket not ready"));var s=i.generate_request_id(e,t),u={jsonrpc:"2.0",method:e,params:t||null,id:s};i.socket.send(JSON.stringify(u),r,(function(e){if(e)return a(e);i.queue[s]={promise:[o,a]},n&&(i.queue[s].timeout=setTimeout((function(){delete i.queue[s],a(new Error("reply timeout"))}),n))}))}))}},{key:"login",value:function(){var e=(0,a.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("rpc.login",t);case 2:if(n=e.sent){e.next=5;break}throw new Error("authentication failed");case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"listMethods",value:function(){var e=(0,a.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.call("__listMethods");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notify",value:function(e,t){var n=this;return new Promise((function(r,i){if(!n.ready)return i(new Error("socket not ready"));var o={jsonrpc:"2.0",method:e,params:t||null};n.socket.send(JSON.stringify(o),(function(e){if(e)return i(e);r()}))}))}},{key:"subscribe",value:function(){var e=(0,a.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.on",t);case 3:if(n=e.sent,"string"!==typeof t||"ok"===n[t]){e.next=6;break}throw new Error("Failed subscribing to an event '"+t+"' with: "+n[t]);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribe",value:function(){var e=(0,a.default)(o.default.mark((function e(t){var n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"string"===typeof t&&(t=[t]),e.next=3,this.call("rpc.off",t);case 3:if(n=e.sent,"string"!==typeof t||"ok"===n[t]){e.next=6;break}throw new Error("Failed unsubscribing from an event with: "+n);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"close",value:function(e,t){this.socket.close(e||1e3,t)}},{key:"_connect",value:function(e,t){var n=this;clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,t),this.socket.addEventListener("open",(function(){n.ready=!0,n.emit("open"),n.current_reconnects=0})),this.socket.addEventListener("message",(function(e){var t=e.data;t instanceof ArrayBuffer&&(t=r.from(t).toString());try{t=JSON.parse(t)}catch(a){return}if(t.notification&&n.listeners(t.notification).length){if(!Object.keys(t.params).length)return n.emit(t.notification);var i=[t.notification];if(t.params.constructor===Object)i.push(t.params);else for(var o=0;o<t.params.length;o++)i.push(t.params[o]);return Promise.resolve().then((function(){n.emit.apply(n,i)}))}if(!n.queue[t.id])return t.method&&t.params?Promise.resolve().then((function(){n.emit(t.method,t.params)})):void 0;"error"in t==="result"in t&&n.queue[t.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),n.queue[t.id].timeout&&clearTimeout(n.queue[t.id].timeout),t.error?n.queue[t.id].promise[1](t.error):n.queue[t.id].promise[0](t.result),delete n.queue[t.id]})),this.socket.addEventListener("error",(function(e){return n.emit("error",e)})),this.socket.addEventListener("close",(function(r){var i=r.code,o=r.reason;n.ready&&setTimeout((function(){return n.emit("close",i,o)}),0),n.ready=!1,n.socket=void 0,1e3!==i&&(n.current_reconnects++,n.reconnect&&(n.max_reconnects>n.current_reconnects||0===n.max_reconnects)&&(n.reconnect_timer_id=setTimeout((function(){return n._connect(e,t)}),n.reconnect_interval)))}))}}]),n}(d.EventEmitter);t.Z=m},55421:function(e,t,n){"use strict";var r=n(64836);t.Z=function(e,t){return new l(e,t)};var i=r(n(56690)),o=r(n(89728)),a=r(n(61655)),s=r(n(94993)),u=r(n(73808));function c(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,u.default)(e);if(t){var i=(0,u.default)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return(0,s.default)(this,n)}}var l=function(e){(0,a.default)(n,e);var t=c(n);function n(e,r,o){var a;return(0,i.default)(this,n),(a=t.call(this)).socket=new window.WebSocket(e,o),a.socket.onopen=function(){return a.emit("open")},a.socket.onmessage=function(e){return a.emit("message",e.data)},a.socket.onerror=function(e){return a.emit("error",e)},a.socket.onclose=function(e){a.emit("close",e.code,e.reason)},a}return(0,o.default)(n,[{key:"send",value:function(e,t,n){var r=n||t;try{this.socket.send(e),r()}catch(i){r(i)}}},{key:"close",value:function(e,t){this.socket.close(e,t)}},{key:"addEventListener",value:function(e,t,n){this.socket.addEventListener(e,t,n)}}]),n}(n(97143).EventEmitter)},82543:function(e,t,n){var r=n(19778),i=r.Buffer;function o(e,t){for(var n in e)t[n]=e[n]}function a(e,t,n){return i(e,t,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(e,t,n){if("number"===typeof e)throw new TypeError("Argument must not be a number");return i(e,t,n)},a.alloc=function(e,t,n){if("number"!==typeof e)throw new TypeError("Argument must be a number");var r=i(e);return void 0!==t?"string"===typeof n?r.fill(t,n):r.fill(t):r.fill(0),r},a.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i(e)},a.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}},36813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,u=e[s],c=s+1,l=e[c];if(0>o(u,n))c<i&&0>o(l,u)?(e[r]=l,e[c]=n,r=c):(e[r]=u,e[s]=n,r=s);else{if(!(c<i&&0>o(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],l=[],f=1,h=null,d=3,p=!1,y=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,_(e),!y)if(null!==r(c))y=!0,O(x);else{var t=r(l);null!==t&&D(w,t.startTime-e)}}function x(e,n){y=!1,m&&(m=!1,v(I),I=-1),p=!0;var o=d;try{for(_(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!M());){var a=h.callback;if("function"===typeof a){h.callback=null,d=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(c)&&i(c),_(n)}else i(c);h=r(c)}if(null!==h)var u=!0;else{var f=r(l);null!==f&&D(w,f.startTime-n),u=!1}return u}finally{h=null,d=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,A=!1,E=null,I=-1,S=5,T=-1;function M(){return!(t.unstable_now()-T<S)}function P(){if(null!==E){var e=t.unstable_now();T=e;var n=!0;try{n=E(!0,e)}finally{n?k():(A=!1,E=null)}}else A=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var B=new MessageChannel,C=B.port2;B.port1.onmessage=P,k=function(){C.postMessage(null)}}else k=function(){g(P,0)};function O(e){E=e,A||(A=!0,k())}function D(e,n){I=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(l,e),null===r(c)&&e===r(l)&&(m?(v(I),I=-1):m=!0,D(w,o-a))):(e.sortIndex=s,n(c,e),y||p||(y=!0,O(x))),e},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},45296:function(e,t,n){"use strict";e.exports=n(36813)},33741:function(e,t,n){"use strict";n.d(t,{v4:function(){return r.Z}});var r=n(92810)},92810:function(e,t,n){"use strict";var r;n.d(t,{Z:function(){return f}});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var s=function(e){return"string"===typeof e&&a.test(e)},u=[],c=0;c<256;++c)u.push((c+256).toString(16).substr(1));var l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var f=function(e,t,n){var r=(e=e||{}).random||(e.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return l(r)}},89752:function(e,t,n){"use strict";n.r(t),t.default={}},83373:function(e){e.exports=function(){"use strict";var e,t,n;function r(r,i){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),n=i(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(n.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=i;else e=i}return r(["exports"],(function(e){var t="undefined"!=typeof self?self:{},n="2.13.0";let r;const i={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(null==r){const e=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{r=null!={NODE_ENV:"production",PUBLIC_URL:"/ohr",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX?new RegExp({NODE_ENV:"production",PUBLIC_URL:"/ohr",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.API_URL_REGEX):e}catch(t){r=e}}return r},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},o={supported:!1,testSupport:function(e){!u&&s&&(c?l(e):a=e)}};let a,s,u=!1,c=!1;function l(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,s),e.isContextLost())return;o.supported=!0}catch(e){}e.deleteTexture(t),u=!0}t.document&&(s=t.document.createElement("img"),s.onload=function(){a&&l(a),a=null,c=!0},s.onerror=function(){u=!0,a=null},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const f="01";var h=d;function d(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=n,this.p2y=r}d.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var n=e,r=0;r<8;r++){var i=this.sampleCurveX(n)-e;if(Math.abs(i)<t)return n;var o=this.sampleCurveDerivativeX(n);if(Math.abs(o)<1e-6)break;n-=i/o}var a=0,s=1;for(n=e,r=0;r<20&&(i=this.sampleCurveX(n),!(Math.abs(i-e)<t));r++)e>i?a=n:s=n,n=.5*(s-a)+a;return n},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}};var p=y;function y(e,t){this.x=e,this.y=t}y.prototype={clone:function(){return new y(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=n*this.x+t*this.y;return this.x=t*this.x-n*this.y,this.y=r,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=t.x+n*(this.x-t.x)-r*(this.y-t.y),this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},y.convert=function(e){return e instanceof y?e:Array.isArray(e)?new y(e[0],e[1]):e};const m=Math.PI/180,g=180/Math.PI;function v(e){return e*m}function b(e){return e*g}const _=[[0,0],[1,0],[1,1],[0,1]];function w(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function x(e,t,n,r){const i=new h(e,t,n,r);return function(e){return i.solve(e)}}const k=x(.25,.1,.25,1);function A(e,t,n){return Math.min(n,Math.max(t,e))}function E(e,t,n){return(n=A((n-e)/(t-e),0,1))*n*(3-2*n)}function I(e,t,n){const r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i}function S(e,t,n){if(!e.length)return n(null,[]);let r=e.length;const i=new Array(e.length);let o=null;e.forEach(((e,a)=>{t(e,((e,t)=>{e&&(o=e),i[a]=t,0==--r&&n(o,i)}))}))}function T(e){const t=[];for(const n in e)t.push(e[n]);return t}function M(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}let P=1;function B(){return P++}function C(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()}function O(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function D(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)}function R(e,t){e.forEach((e=>{t[e]&&(t[e]=t[e].bind(t))}))}function L(e,t){return-1!==e.indexOf(t,e.length-t.length)}function z(e,t,n){const r={};for(const i in e)r[i]=t.call(n||this,e[i],i,e);return r}function Z(e,t,n){const r={};for(const i in e)t.call(n||this,e[i],i,e)&&(r[i]=e[i]);return r}function N(e){return Array.isArray(e)?e.map(N):"object"==typeof e&&e?z(e,N):e}const U={};function F(e){U[e]||("undefined"!=typeof console&&console.warn(e),U[e]=!0)}function j(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)}function W(e){let t=0;for(let n,r,i=0,o=e.length,a=o-1;i<o;a=i++)n=e[i],r=e[a],t+=(r.x-n.x)*(n.y+r.y);return t}function V(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function K(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((e,n,r,i)=>{const o=r||i;return t[n]=!o||o.toLowerCase(),""})),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let G=null;function H(e){if(null==G){const t=e.navigator?e.navigator.userAgent:null;G=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return G}function q(e){try{const n=t[e];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch(e){return!1}}function Y(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}const X="mapbox-tiles";let Q,$,J=500,ee=50;function te(){try{return t.caches}catch(e){}}function ne(){te()&&!Q&&(Q=t.caches.open(X))}function re(e){const t=e.indexOf("?");if(t<0)return e;const n=function(e){const t=e.indexOf("?");return t>0?e.slice(t+1).split("&"):[]}(e),r=n.filter((e=>{const t=e.split("=");return"language"===t[0]||"worldview"===t[0]}));return r.length?`${e.slice(0,t)}?${r.join("&")}`:e.slice(0,t)}let ie=1/0;const oe={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(oe);class ae extends Error{constructor(e,t,n){401===t&&ge(n)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=n}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const se=V()?()=>self.worker&&self.worker.referrer:()=>("blob:"===t.location.protocol?t.parent:t).location.href,ue=function(e,n){if(!(/^file:/.test(r=e.url)||/^file:/.test(se())&&!/^\w+:/.test(r))){if(t.fetch&&t.Request&&t.AbortController&&t.Request.prototype.hasOwnProperty("signal"))return function(e,n){const r=new t.AbortController,i=new t.Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:se(),signal:r.signal});let o=!1,a=!1;const s=(u=i.url).indexOf("sku=")>0&&ge(u);var u;"json"===e.type&&i.headers.set("Accept","application/json");const c=(r,o,u)=>{if(a)return;if(r&&"SecurityError"!==r.message&&F(r),o&&u)return l(o);const c=Date.now();t.fetch(i).then((t=>{if(t.ok){const e=s?t.clone():null;return l(t,e,c)}return n(new ae(t.statusText,t.status,e.url))})).catch((t=>{"AbortError"!==t.name&&n(new Error(`${t.message} ${e.url}`))}))},l=(r,s,u)=>{("arrayBuffer"===e.type?r.arrayBuffer():"json"===e.type?r.json():r.text()).then((e=>{a||(s&&u&&function(e,n,r){if(ne(),!Q)return;const i={status:n.status,statusText:n.statusText,headers:new t.Headers};n.headers.forEach(((e,t)=>i.headers.set(t,e)));const o=K(n.headers.get("Cache-Control")||"");if(o["no-store"])return;o["max-age"]&&i.headers.set("Expires",new Date(r+1e3*o["max-age"]).toUTCString());const a=i.headers.get("Expires");a&&(new Date(a).getTime()-r<42e4||function(e,t){if(void 0===$)try{new Response(new ReadableStream),$=!0}catch(e){$=!1}$?t(e.body):e.blob().then(t)}(n,(n=>{const r=new t.Response(n,i);ne(),Q&&Q.then((t=>t.put(re(e.url),r))).catch((e=>F(e.message)))})))}(i,s,u),o=!0,n(null,e,r.headers.get("Cache-Control"),r.headers.get("Expires")))})).catch((e=>{a||n(new Error(e.message))}))};return s?function(e,t){if(ne(),!Q)return t(null);const n=re(e.url);Q.then((e=>{e.match(n).then((r=>{const i=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),n=K(e.headers.get("Cache-Control")||"");return t>Date.now()&&!n["no-cache"]}(r);e.delete(n),i&&e.put(n,r.clone()),t(null,r,i)})).catch(t)})).catch(t)}(i,c):c(null,null),{cancel:()=>{a=!0,o||r.abort()}}}(e,n);if(V()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",e,n,void 0,!0)}var r;return function(e,n){const r=new t.XMLHttpRequest;r.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(r.responseType="arraybuffer");for(const t in e.headers)r.setRequestHeader(t,e.headers[t]);return"json"===e.type&&(r.responseType="text",r.setRequestHeader("Accept","application/json")),r.withCredentials="include"===e.credentials,r.onerror=()=>{n(new Error(r.statusText))},r.onload=()=>{if((r.status>=200&&r.status<300||0===r.status)&&null!==r.response){let t=r.response;if("json"===e.type)try{t=JSON.parse(r.response)}catch(e){return n(e)}n(null,t,r.getResponseHeader("Cache-Control"),r.getResponseHeader("Expires"))}else n(new ae(r.statusText,r.status,e.url))},r.send(e.body),{cancel:()=>r.abort()}}(e,n)},ce=function(e,t){return ue(M(e,{type:"arrayBuffer"}),t)};function le(e){const n=t.document.createElement("a");return n.href=e,n.protocol===t.document.location.protocol&&n.host===t.document.location.host}const fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let he,de;he=[],de=0;const pe=function(e,n){if(o.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),de>=i.MAX_PARALLEL_IMAGE_REQUESTS){const t={requestParameters:e,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return he.push(t),t}de++;let r=!1;const a=()=>{if(!r)for(r=!0,de--;he.length&&de<i.MAX_PARALLEL_IMAGE_REQUESTS;){const e=he.shift(),{requestParameters:t,callback:n,cancelled:r}=e;r||(e.cancel=pe(t,n).cancel)}},s=ce(e,((e,r,i,o)=>{a(),e?n(e):r&&(t.createImageBitmap?function(e,n){const r=new t.Blob([new Uint8Array(e)],{type:"image/png"});t.createImageBitmap(r).then((e=>{n(null,e)})).catch((e=>{n(new Error(`Could not load image because of ${e.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))}))}(r,((e,t)=>n(e,t,i,o))):function(e,n){const r=new t.Image,i=t.URL;r.onload=()=>{n(null,r),i.revokeObjectURL(r.src),r.onload=null,t.requestAnimationFrame((()=>{r.src=fe}))},r.onerror=()=>n(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const o=new t.Blob([new Uint8Array(e)],{type:"image/png"});r.src=e.byteLength?i.createObjectURL(o):fe}(r,((e,t)=>n(e,t,i,o))))}));return{cancel:()=>{s.cancel(),a()}}},ye="NO_ACCESS_TOKEN";function me(e){return 0===e.indexOf("mapbox:")}function ge(e){return i.API_URL_REGEX.test(e)}function ve(e){return i.API_CDN_URL_REGEX.test(e)}function be(e){return i.API_STYLE_REGEX.test(e)&&!_e(e)}function _e(e){return i.API_SPRITE_REGEX.test(e)}const we=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function xe(e){const t=e.match(we);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function ke(e){const t=e.params.length?`?${e.params.join("&")}`:"";return`${e.protocol}://${e.authority}${e.path}${t}`}function Ae(e){if(!e)return null;const n=e.split(".");if(!n||3!==n.length)return null;try{return JSON.parse(decodeURIComponent(t.atob(n[1]).split("").map((e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2))).join("")))}catch(e){return null}}class Ee{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(e){const n=Ae(i.ACCESS_TOKEN);let r="";return r=n&&n.u?t.btoa(encodeURIComponent(n.u).replace(/%([0-9A-F]{2})/g,((e,t)=>String.fromCharCode(Number("0x"+t))))):i.ACCESS_TOKEN||"",e?`mapbox.eventData.${e}:${r}`:`mapbox.eventData:${r}`}fetchEventData(){const e=q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{const e=t.localStorage.getItem(n);e&&(this.eventData=JSON.parse(e));const i=t.localStorage.getItem(r);i&&(this.anonId=i)}catch(e){F("Unable to read from LocalStorage")}}saveEventData(){const e=q("localStorage"),n=this.getStorageKey(),r=this.getStorageKey("uuid");if(e)try{t.localStorage.setItem(r,this.anonId),Object.keys(this.eventData).length>=1&&t.localStorage.setItem(n,JSON.stringify(this.eventData))}catch(e){F("Unable to write to LocalStorage")}}processRequests(e){}postEvent(e,t,n,r){if(!i.EVENTS_URL)return;const o=xe(i.EVENTS_URL);o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={event:this.type,created:new Date(e).toISOString()},s=t?M(a,t):a,u={url:ke(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=function(e,t){return ue(M(e,{method:"POST"}),t)}(u,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const Ie=new class extends Ee{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(e,t){i.EVENTS_URL&&i.ACCESS_TOKEN&&Array.isArray(e)&&e.some((e=>me(e)||ge(e)))&&this.queueRequest(Date.now(),t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const t=Ae(i.ACCESS_TOKEN),r=t?t.u:i.ACCESS_TOKEN;let o=r!==this.eventData.tokenU;D(this.anonId)||(this.anonId=C(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),n=(a-this.eventData.lastSuccess)/864e5;o=o||n>=1||n<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:f,"enabled.telemetry":!1,userId:this.anonId},(e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=r)}),e):this.processRequests()}},Se=Ie.postTurnstileEvent.bind(Ie),Te=new class extends Ee{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(e,t,n,r){this.skuToken=t,this.errorCb=r,i.EVENTS_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:r}=this.queue.shift();t&&this.success[t]||(this.anonId||this.fetchEventData(),D(this.anonId)||(this.anonId=C()),this.postEvent(r,{sdkIdentifier:"mapbox-gl-js",sdkVersion:n,skuId:f,skuToken:this.skuToken,userId:this.anonId},(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e))}},Me=Te.postMapLoadEvent.bind(Te),Pe=new class extends Ee{constructor(){super("gljs.performance")}postPerformanceEvent(e,t){i.EVENTS_URL&&(e||i.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:t},e)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:r,performanceData:i}=this.queue.shift(),o=function(e){const r=t.performance.getEntriesByType("resource"),i=t.performance.getEntriesByType("mark"),o=function(e){const t={};if(e)for(const n in e)if("other"!==n)for(const r of e[n]){const e=`${n}ResolveRangeMin`,i=`${n}ResolveRangeMax`,o=`${n}RequestCount`,a=`${n}RequestCachedCount`;t[e]=Math.min(t[e]||1/0,r.startTime),t[i]=Math.max(t[i]||-1/0,r.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return t}(function(e,t){const n={};if(e)for(const r of e){const e=t(r);void 0===n[e]&&(n[e]=[]),n[e].push(r)}return n}(r,ze)),a=t.devicePixelRatio,s=t.navigator.connection||t.navigator.mozConnection||t.navigator.webkitConnection,u={counters:[],metadata:[],attributes:[]},c=(e,t,n)=>{null!=n&&e.push({name:t,value:n.toString()})};for(const t in o)c(u.counters,t,o[t]);if(e.interactionRange[0]!==1/0&&e.interactionRange[1]!==-1/0&&(c(u.counters,"interactionRangeMin",e.interactionRange[0]),c(u.counters,"interactionRangeMax",e.interactionRange[1])),i)for(const t of Object.keys(Re)){const e=Re[t],n=i.find((t=>t.name===e));n&&c(u.counters,e,n.startTime)}return c(u.counters,"visibilityHidden",e.visibilityHidden),c(u.attributes,"style",function(e){if(e)for(const t of e){const e=t.name.split("?")[0];if(be(e)){const t=e.split("/").slice(-2);if(2===t.length)return`mapbox://styles/${t[0]}/${t[1]}`}}}(r)),c(u.attributes,"terrainEnabled",e.terrainEnabled?"true":"false"),c(u.attributes,"fogEnabled",e.fogEnabled?"true":"false"),c(u.attributes,"projection",e.projection),c(u.attributes,"zoom",e.zoom),c(u.metadata,"devicePixelRatio",a),c(u.metadata,"connectionEffectiveType",s?s.effectiveType:void 0),c(u.metadata,"navigatorUserAgent",t.navigator.userAgent),c(u.metadata,"screenWidth",t.screen.width),c(u.metadata,"screenHeight",t.screen.height),c(u.metadata,"windowWidth",t.innerWidth),c(u.metadata,"windowHeight",t.innerHeight),c(u.metadata,"mapWidth",e.width/a),c(u.metadata,"mapHeight",e.height/a),c(u.metadata,"webglRenderer",e.renderer),c(u.metadata,"webglVendor",e.vendor),c(u.metadata,"sdkVersion",n),c(u.metadata,"sdkIdentifier","mapbox-gl-js"),u}(i);for(const t of o.metadata);for(const t of o.counters);for(const t of o.attributes);this.postEvent(r,o,(()=>{}),e)}},Be=Pe.postPerformanceEvent.bind(Pe),Ce=new class extends Ee{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(e,t,n,r){if(!i.API_URL||!i.SESSION_PATH)return;const o=xe(i.API_URL+i.SESSION_PATH);o.params.push(`sku=${t||""}`),o.params.push(`access_token=${r||i.ACCESS_TOKEN||""}`);const a={url:ke(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(e,t){return ue(M(e,{method:"GET"}),t)}(a,(e=>{this.pendingRequest=null,n(e),this.saveEventData(),this.processRequests(r)}))}getSessionAPI(e,t,n,r){this.skuToken=t,this.errorCb=r,i.SESSION_PATH&&i.API_URL&&(n||i.ACCESS_TOKEN?this.queueRequest({id:e,timestamp:Date.now()},n):this.errorCb(new Error(ye)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:n}=this.queue.shift();t&&this.success[t]||this.getSession(n,this.skuToken,(e=>{e?this.errorCb(e):t&&(this.success[t]=!0)}),e)}},Oe=Ce.getSessionAPI.bind(Ce),De=new Set,Re={create:"create",load:"load",fullLoad:"fullLoad"},Le={mark(e){t.performance.mark(e)},measure(e,n,r){t.performance.measure(e,n,r)}};function ze(e){const t=e.name.split("?")[0];return ve(t)&&t.includes("mapbox-gl.js")?"javascript":ve(t)&&t.includes("mapbox-gl.css")?"css":function(e){return i.API_FONTS_REGEX.test(e)}(t)?"fontRange":_e(t)?"sprite":be(t)?"style":function(e){return i.API_TILEJSON_REGEX.test(e)}(t)?"tilejson":"other"}const Ze=t.performance;function Ne(e){const t=e?e.url.toString():void 0;return Ze.getEntriesByName(t)}let Ue,Fe,je,We;const Ve={now:()=>void 0!==je?je:t.performance.now(),setNow(e){je=e},restoreNow(){je=void 0},frame(e){const n=t.requestAnimationFrame(e);return{cancel:()=>t.cancelAnimationFrame(n)}},getImageData(e,n=0){const{width:r,height:i}=e;We||(We=t.document.createElement("canvas"));const o=We.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return(r>We.width||i>We.height)&&(We.width=r,We.height=i),o.clearRect(-n,-n,r+2*n,i+2*n),o.drawImage(e,0,0,r,i),o.getImageData(-n,-n,r+2*n,i+2*n)},resolveURL:e=>(Ue||(Ue=t.document.createElement("a")),Ue.href=e,Ue.href),get devicePixelRatio(){return t.devicePixelRatio},get prefersReducedMotion(){return!!t.matchMedia&&(null==Fe&&(Fe=t.matchMedia("(prefers-reduced-motion: reduce)")),Fe.matches)}};function Ke(e,t,n){n[e]&&-1!==n[e].indexOf(t)||(n[e]=n[e]||[],n[e].push(t))}function Ge(e,t,n){if(n&&n[e]){const r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}class He{constructor(e,t={}){M(this,t),this.type=e}}class qe extends He{constructor(e,t={}){super("error",M({error:e},t))}}class Ye{on(e,t){return this._listeners=this._listeners||{},Ke(e,t,this._listeners),this}off(e,t){return Ge(e,t,this._listeners),Ge(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Ke(e,t,this._oneTimeListeners),this):new Promise((t=>this.once(e,t)))}fire(e,t){"string"==typeof e&&(e=new He(e,t||{}));const n=e.type;if(this.listens(n)){e.target=this;const t=this._listeners&&this._listeners[n]?this._listeners[n].slice():[];for(const n of t)n.call(this,e);const r=this._oneTimeListeners&&this._oneTimeListeners[n]?this._oneTimeListeners[n].slice():[];for(const o of r)Ge(n,o,this._oneTimeListeners),o.call(this,e);const i=this._eventedParent;i&&(M(e,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),i.fire(e))}else e instanceof qe&&console.error(e.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}var Xe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Qe(e,...t){for(const n of t)for(const t in n)e[t]=n[t];return e}function $e(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Je(e){if(Array.isArray(e))return e.map(Je);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const n in e)t[n]=Je(e[n]);return t}return $e(e)}class et extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var tt=et;class nt{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new nt(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}var rt=nt;const it={kind:"null"},ot={kind:"number"},at={kind:"string"},st={kind:"boolean"},ut={kind:"color"},ct={kind:"object"},lt={kind:"value"},ft={kind:"collator"},ht={kind:"formatted"},dt={kind:"resolvedImage"};function pt(e,t){return{kind:"array",itemType:e,N:t}}function yt(e){if("array"===e.kind){const t=yt(e.itemType);return"number"==typeof e.N?`array<${t}, ${e.N}>`:"value"===e.itemType.kind?"array":`array<${t}>`}return e.kind}const mt=[it,ot,at,st,ut,ht,ct,pt(lt),dt];function gt(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!gt(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of mt)if(!gt(e,t))return null}return`Expected ${yt(e)} but found ${yt(t)} instead.`}function vt(e,t){return t.some((t=>t.kind===e.kind))}function bt(e,t){return t.some((t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e))}var _t,wt={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function xt(e){return(e=Math.round(e))<0?0:e>255?255:e}function kt(e){return xt("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function At(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function Et(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}try{_t={}.parseCSSColor=function(e){var t,n=e.replace(/ /g,"").toLowerCase();if(n in wt)return wt[n].slice();if("#"===n[0])return 4===n.length?(t=parseInt(n.substr(1),16))>=0&&t<=4095?[(3840&t)>>4|(3840&t)>>8,240&t|(240&t)>>4,15&t|(15&t)<<4,1]:null:7===n.length&&(t=parseInt(n.substr(1),16))>=0&&t<=16777215?[(16711680&t)>>16,(65280&t)>>8,255&t,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=At(a.pop());case"rgb":return 3!==a.length?null:[kt(a[0]),kt(a[1]),kt(a[2]),s];case"hsla":if(4!==a.length)return null;s=At(a.pop());case"hsl":if(3!==a.length)return null;var u=(parseFloat(a[0])%360+360)%360/360,c=At(a[1]),l=At(a[2]),f=l<=.5?l*(c+1):l+c-l*c,h=2*l-f;return[xt(255*Et(h,f,u+1/3)),xt(255*Et(h,f,u)),xt(255*Et(h,f,u-1/3)),s];default:return null}}return null}}catch(e){}class It{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof It)return e;if("string"!=typeof e)return;const t=_t(e);return t?new It(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3]):void 0}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[255*e/r,255*t/r,255*n/r,r]}toArray01(){const{r:e,g:t,b:n,a:r}=this;return 0===r?[0,0,0,0]:[e/r,t/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:r}=this;return[e,t,n,r]}}It.black=new It(0,0,0,1),It.white=new It(1,1,1,1),It.transparent=new It(0,0,0,0),It.red=new It(1,0,0,1),It.blue=new It(0,0,1,1);var St=It;class Tt{constructor(e,t,n){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Mt{constructor(e,t,n,r,i){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=i}}class Pt{constructor(e){this.sections=e}static fromString(e){return new Pt([new Mt(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((e=>0!==e.text.length||e.image&&0!==e.image.name.length))}static factory(e){return e instanceof Pt?e:Pt.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map((e=>e.text)).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Bt{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Bt({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Ct(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:`Invalid rgba value [${[e,t,n,r].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ot(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof St)return!0;if(e instanceof Tt)return!0;if(e instanceof Pt)return!0;if(e instanceof Bt)return!0;if(Array.isArray(e)){for(const t of e)if(!Ot(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Ot(e[t]))return!1;return!0}return!1}function Dt(e){if(null===e)return it;if("string"==typeof e)return at;if("boolean"==typeof e)return st;if("number"==typeof e)return ot;if(e instanceof St)return ut;if(e instanceof Tt)return ft;if(e instanceof Pt)return ht;if(e instanceof Bt)return dt;if(Array.isArray(e)){const t=e.length;let n;for(const r of e){const e=Dt(r);if(n){if(n===e)continue;n=lt;break}n=e}return pt(n||lt,t)}return ct}function Rt(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof St||e instanceof Pt||e instanceof Bt?e.toString():JSON.stringify(e)}class Lt{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!Ot(e[1]))return t.error("invalid value");const n=e[1];let r=Dt(n);const i=t.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new Lt(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof St?["rgba"].concat(this.value.toArray()):this.value instanceof Pt?this.value.serialize():this.value}}var zt=Lt,Zt=class{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}};const Nt={string:at,number:ot,boolean:st,object:ct};class Ut{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n,r=1;const i=e[0];if("array"===i){let i,o;if(e.length>2){const n=e[1];if("string"!=typeof n||!(n in Nt)||"object"===n)return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=Nt[n],r++}else i=lt;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}n=pt(i,o)}else n=Nt[i];const o=[];for(;r<e.length;r++){const n=t.parse(e[r],r,lt);if(!n)return null;o.push(n)}return new Ut(n,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(!gt(this.type,Dt(n)))return n;if(t===this.args.length-1)throw new Zt(`Expected value to be of type ${yt(this.type)}, but found ${yt(Dt(n))} instead.`)}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const n=e.itemType;if("string"===n.kind||"number"===n.kind||"boolean"===n.kind){t.push(n.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map((e=>e.serialize())))}}var Ft=Ut;class jt{constructor(e){this.type=ht,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&"object"==typeof n)return t.error("First argument must be an image or text section.");const r=[];let i=!1;for(let o=1;o<=e.length-1;++o){const n=e[o];if(i&&"object"==typeof n&&!Array.isArray(n)){i=!1;let e=null;if(n["font-scale"]&&(e=t.parse(n["font-scale"],1,ot),!e))return null;let o=null;if(n["text-font"]&&(o=t.parse(n["text-font"],1,pt(at)),!o))return null;let a=null;if(n["text-color"]&&(a=t.parse(n["text-color"],1,ut),!a))return null;const s=r[r.length-1];s.scale=e,s.font=o,s.textColor=a}else{const n=t.parse(e[o],1,lt);if(!n)return null;const a=n.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:n,scale:null,font:null,textColor:null})}}return new jt(r)}evaluate(e){return new Pt(this.sections.map((t=>{const n=t.content.evaluate(e);return Dt(n)===dt?new Mt("",n,null,null,null):new Mt(Rt(n),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)})))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class Wt{constructor(e){this.type=dt,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,at);return n?new Wt(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Bt.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const Vt={"to-boolean":st,"to-color":ut,"to-number":ot,"to-string":at};class Kt{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if(("to-boolean"===n||"to-string"===n)&&2!==e.length)return t.error("Expected one argument.");const r=Vt[n],i=[];for(let o=1;o<e.length;o++){const n=t.parse(e[o],o,lt);if(!n)return null;i.push(n)}return new Kt(r,i)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof St)return t;if("string"==typeof t){const n=e.parseColor(t);if(n)return n}else if(Array.isArray(t)&&(n=t.length<3||t.length>4?`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Ct(t[0],t[1],t[2],t[3]),!n))return new St(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Zt(n||`Could not parse color from value '${"string"==typeof t?t:String(JSON.stringify(t))}'`)}if("number"===this.type.kind){let t=null;for(const n of this.args){if(t=n.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Zt(`Could not convert ${JSON.stringify(t)} to number.`)}return"formatted"===this.type.kind?Pt.fromString(Rt(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Bt.fromString(Rt(this.args[0].evaluate(e))):Rt(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){if("formatted"===this.type.kind)return new jt([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Wt(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Gt=Kt;const Ht=["Unknown","Point","LineString","Polygon"];var qt=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ht[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(n*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=St.parse(e)),t}};class Yt{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map((e=>e.serialize())))}static parse(e,t){const n=e[0],r=Yt.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const i=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((([t])=>!Array.isArray(t)||t.length===e.length-1));let s=null;for(const[u,c]of a){s=new kn(t.registry,t.path,null,t.scope);const r=[];let o=!1;for(let t=1;t<e.length;t++){const n=e[t],i=Array.isArray(u)?u[t-1]:u.type,a=s.parse(n,1+r.length,i);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(u)&&u.length!==r.length)s.error(`Expected ${u.length} arguments, but found ${r.length} instead.`);else{for(let e=0;e<r.length;e++){const t=Array.isArray(u)?u[e]:u.type,n=r[e];s.concat(e+1).checkSubtype(t,n.type)}if(0===s.errors.length)return new Yt(n,i,c,r)}}if(1===a.length)t.errors.push(...s.errors);else{const n=(a.length?a:o).map((([e])=>{return t=e,Array.isArray(t)?`(${t.map(yt).join(", ")})`:`(${yt(t.type)}...)`;var t})).join(" | "),r=[];for(let i=1;i<e.length;i++){const n=t.parse(e[i],1+r.length);if(!n)return null;r.push(yt(n.type))}t.error(`Expected arguments of type ${n}, but found (${r.join(", ")}) instead.`)}return null}static register(e,t){Yt.definitions=t;for(const n in t)e[n]=Yt}}var Xt=Yt;class Qt{constructor(e,t,n){this.type=ft,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const n=e[1];if("object"!=typeof n||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,st);if(!r)return null;const i=t.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,st);if(!i)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,at),!o)?null:new Qt(r,i,o)}evaluate(e){return new Tt(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const $t=8192;function Jt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function en(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function tn(e,t){const n=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,i=Math.pow(2,t.z);return[Math.round(n*i*$t),Math.round(r*i*$t)]}function nn(e,t,n){const r=e[0]-t[0],i=e[1]-t[1],o=e[0]-n[0],a=e[1]-n[1];return r*a-o*i==0&&r*o<=0&&i*a<=0}function rn(e,t){let n=!1;for(let a=0,s=t.length;a<s;a++){const s=t[a];for(let t=0,a=s.length;t<a-1;t++){if(nn(e,s[t],s[t+1]))return!1;(i=s[t])[1]>(r=e)[1]!=(o=s[t+1])[1]>r[1]&&r[0]<(o[0]-i[0])*(r[1]-i[1])/(o[1]-i[1])+i[0]&&(n=!n)}}var r,i,o;return n}function on(e,t){for(let n=0;n<t.length;n++)if(rn(e,t[n]))return!0;return!1}function an(e,t,n,r){const i=r[0]-n[0],o=r[1]-n[1],a=(e[0]-n[0])*o-i*(e[1]-n[1]),s=(t[0]-n[0])*o-i*(t[1]-n[1]);return a>0&&s<0||a<0&&s>0}function sn(e,t,n){for(const c of n)for(let n=0;n<c.length-1;++n)if(0!=(s=[(a=c[n+1])[0]-(o=c[n])[0],a[1]-o[1]])[0]*(u=[(i=t)[0]-(r=e)[0],i[1]-r[1]])[1]-s[1]*u[0]&&an(r,i,o,a)&&an(o,a,r,i))return!0;var r,i,o,a,s,u;return!1}function un(e,t){for(let n=0;n<e.length;++n)if(!rn(e[n],t))return!1;for(let n=0;n<e.length-1;++n)if(sn(e[n],e[n+1],t))return!1;return!0}function cn(e,t){for(let n=0;n<t.length;n++)if(un(e,t[n]))return!0;return!1}function ln(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=[];for(let r=0;r<e[i].length;r++){const a=tn(e[i][r],n);Jt(t,a),o.push(a)}r.push(o)}return r}function fn(e,t,n){const r=[];for(let i=0;i<e.length;i++){const o=ln(e[i],t,n);r.push(o)}return r}function hn(e,t,n,r){if(e[0]<n[0]||e[0]>n[2]){const t=.5*r;let i=e[0]-n[0]>t?-r:n[0]-e[0]>t?r:0;0===i&&(i=e[0]-n[2]>t?-r:n[2]-e[0]>t?r:0),e[0]+=i}Jt(t,e)}function dn(e,t,n,r){const i=Math.pow(2,r.z)*$t,o=[r.x*$t,r.y*$t],a=[];if(!e)return a;for(const s of e)for(const e of s){const r=[e.x+o[0],e.y+o[1]];hn(r,t,n,i),a.push(r)}return a}function pn(e,t,n,r){const i=Math.pow(2,r.z)*$t,o=[r.x*$t,r.y*$t],a=[];if(!e)return a;for(const u of e){const e=[];for(const n of u){const r=[n.x+o[0],n.y+o[1]];Jt(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=i/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)hn(r,t,n,i)}var s;return a}class yn{constructor(e,t){this.type=st,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(Ot(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const n=t.features[e].geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new yn(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new yn(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new yn(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=ln(t.coordinates,r,i),a=dn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!rn(e,o))return!1}if("MultiPolygon"===t.type){const o=fn(t.coordinates,r,i),a=dn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!on(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=e.canonicalID();if(!i)return!1;if("Polygon"===t.type){const o=ln(t.coordinates,r,i),a=pn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!un(e,o))return!1}if("MultiPolygon"===t.type){const o=fn(t.coordinates,r,i),a=pn(e.geometry(),n,r,i);if(!en(n,r))return!1;for(const e of a)if(!cn(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var mn=yn;function gn(e){if(e instanceof Xt){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof mn)return!1;let t=!0;return e.eachChild((e=>{t&&!gn(e)&&(t=!1)})),t}function vn(e){if(e instanceof Xt&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild((e=>{t&&!vn(e)&&(t=!1)})),t}function bn(e,t){if(e instanceof Xt&&t.indexOf(e.name)>=0)return!1;let n=!0;return e.eachChild((e=>{n&&!bn(e,t)&&(n=!1)})),n}class _n{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new _n(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var wn=_n;class xn{constructor(e,t=[],n,r=new rt,i=[]){this.registry=e,this.path=t,this.key=t.map((e=>`[${e}]`)).join(""),this.scope=r,this.errors=i,this.expectedType=n}parse(e,t,n,r,i={}){return t?this.concat(t,n,r)._parse(e,i):this._parse(e,i)}_parse(e,t){function n(e,t,n){return"assert"===n?new Ft(t,[e]):"coerce"===n?new Gt(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if("string"!=typeof r)return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const i=this.registry[r];if(i){let r=i.parse(e,this);if(!r)return null;if(this.expectedType){const e=this.expectedType,i=r.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==i.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==i.kind&&"string"!==i.kind){if(this.checkSubtype(e,i))return null}else r=n(r,e,t.typeAnnotation||"coerce");else r=n(r,e,t.typeAnnotation||"assert")}if(!(r instanceof zt)&&"resolvedImage"!==r.type.kind&&An(r)){const t=new qt;try{r=new zt(r.type,r.evaluate(t))}catch(e){return this.error(e.message),null}}return r}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new xn(this.registry,r,t||null,i,this.errors)}error(e,...t){const n=`${this.key}${t.map((e=>`[${e}]`)).join("")}`;this.errors.push(new tt(n,e))}checkSubtype(e,t){const n=gt(e,t);return n&&this.error(n),n}}var kn=xn;function An(e){if(e instanceof wn)return An(e.boundExpression);if(e instanceof Xt&&"error"===e.name)return!1;if(e instanceof Qt)return!1;if(e instanceof mn)return!1;const t=e instanceof Gt||e instanceof Ft;let n=!0;return e.eachChild((e=>{n=t?n&&An(e):n&&e instanceof zt})),!!n&&gn(e)&&bn(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function En(e,t){const n=e.length-1;let r,i,o=0,a=n,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],i=e[s+1],r<=t){if(s===n||t<i)return s;o=s+1}else{if(!(r>t))throw new Zt("Input is not a number.");a=s-1}return 0}class In{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,i]of n)this.labels.push(r),this.outputs.push(i)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,ot);if(!n)return null;const r=[];let i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(let o=1;o<e.length;o+=2){const n=1===o?-1/0:e[o],a=e[o+1],s=o,u=o+1;if("number"!=typeof n)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=n)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,u,i);if(!c)return null;i=i||c.type,r.push([n,c])}return new In(i,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[En(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Sn=In;function Tn(e,t,n){return e*(1-n)+t*n}var Mn=Object.freeze({__proto__:null,number:Tn,color:function(e,t,n){return new St(Tn(e.r,t.r,n),Tn(e.g,t.g,n),Tn(e.b,t.b,n),Tn(e.a,t.a,n))},array:function(e,t,n){return e.map(((e,r)=>Tn(e,t[r],n)))}});const Pn=.95047,Bn=1.08883,Cn=4/29,On=6/29,Dn=3*On*On,Rn=Math.PI/180,Ln=180/Math.PI;function zn(e){return e>.008856451679035631?Math.pow(e,1/3):e/Dn+Cn}function Zn(e){return e>On?e*e*e:Dn*(e-Cn)}function Nn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Un(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Fn(e){const t=Un(e.r),n=Un(e.g),r=Un(e.b),i=zn((.4124564*t+.3575761*n+.1804375*r)/Pn),o=zn((.2126729*t+.7151522*n+.072175*r)/1);return{l:116*o-16,a:500*(i-o),b:200*(o-zn((.0193339*t+.119192*n+.9503041*r)/Bn)),alpha:e.a}}function jn(e){let t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*Zn(t),n=Pn*Zn(n),r=Bn*Zn(r),new St(Nn(3.2404542*n-1.5371385*t-.4985314*r),Nn(-.969266*n+1.8760108*t+.041556*r),Nn(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function Wn(e,t,n){const r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}const Vn={forward:Fn,reverse:jn,interpolate:function(e,t,n){return{l:Tn(e.l,t.l,n),a:Tn(e.a,t.a,n),b:Tn(e.b,t.b,n),alpha:Tn(e.alpha,t.alpha,n)}}},Kn={forward:function(e){const{l:t,a:n,b:r}=Fn(e),i=Math.atan2(r,n)*Ln;return{h:i<0?i+360:i,c:Math.sqrt(n*n+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*Rn,n=e.c;return jn({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})},interpolate:function(e,t,n){return{h:Wn(e.h,t.h,n),c:Tn(e.c,t.c,n),l:Tn(e.l,t.l,n),alpha:Tn(e.alpha,t.alpha,n)}}};var Gn=Object.freeze({__proto__:null,lab:Vn,hcl:Kn});class Hn{constructor(e,t,n,r,i){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of i)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,r){let i=0;if("exponential"===e.name)i=qn(t,e.base,n,r);else if("linear"===e.name)i=qn(t,1,n,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;i=new h(o[0],o[1],o[2],o[3]).solve(qn(t,1,n,r))}return i}static parse(e,t){let[n,r,i,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);{const e=r.slice(1);if(4!==e.length||e.some((e=>"number"!=typeof e||e<0||e>1)))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(i=t.parse(i,2,ot),!i)return null;const a=[];let s=null;"interpolate-hcl"===n||"interpolate-lab"===n?s=ut:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let u=0;u<o.length;u+=2){const e=o[u],n=o[u+1],r=u+3,i=u+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(n,i,s);if(!c)return null;s=s||c.type,a.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new Hn(s,n,r,i,a):t.error(`Type ${yt(s)} is not interpolatable.`)}evaluate(e){const t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);const o=En(t,r),a=Hn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=n[o].evaluate(e),u=n[o+1].evaluate(e);return"interpolate"===this.operator?Mn[this.type.kind.toLowerCase()](s,u,a):"interpolate-hcl"===this.operator?Kn.reverse(Kn.interpolate(Kn.forward(s),Kn.forward(u),a)):Vn.reverse(Vn.interpolate(Vn.forward(s),Vn.forward(u),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function qn(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}var Yn=Hn;class Xn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&"value"!==r.kind&&(n=r);const i=[];for(const a of e.slice(1)){const e=t.parse(a,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!e)return null;n=n||e.type,i.push(e)}const o=r&&i.some((e=>gt(r,e.type)));return new Xn(o?lt:n,i)}evaluate(e){let t,n=null,r=0;for(const i of this.args){if(r++,n=i.evaluate(e),n&&n instanceof Bt&&!n.available&&(t||(t=n),n=null,r===this.args.length))return t;if(null!==n)break}return n}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every((e=>e.outputDefined()))}serialize(){const e=["coalesce"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var Qn=Xn;class $n{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let i=1;i<e.length-1;i+=2){const r=e[i];if("string"!=typeof r)return t.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);const o=t.parse(e[i+1],i+1);if(!o)return null;n.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new $n(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var Jn=$n;class er{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,ot),r=t.parse(e[2],2,pt(t.expectedType||lt));return n&&r?new er(r.type.itemType,n,r):null}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Zt(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Zt(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Zt(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var tr=er;class nr{constructor(e,t){this.type=st,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,lt),r=t.parse(e[2],2,lt);return n&&r?vt(n.type,[st,at,ot,it,lt])?new nr(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${yt(n.type)} instead`):null}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(null==n)return!1;if(!bt(t,["boolean","string","number","null"]))throw new Zt(`Expected first argument to be of type boolean, string, number or null, but found ${yt(Dt(t))} instead.`);if(!bt(n,["string","array"]))throw new Zt(`Expected second argument to be of type array or string, but found ${yt(Dt(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var rr=nr;class ir{constructor(e,t,n){this.type=ot,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,lt),r=t.parse(e[2],2,lt);if(!n||!r)return null;if(!vt(n.type,[st,at,ot,it,lt]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${yt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ot);return i?new ir(n,r,i):null}return new ir(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!bt(t,["boolean","string","number","null"]))throw new Zt(`Expected first argument to be of type boolean, string, number or null, but found ${yt(Dt(t))} instead.`);if(!bt(n,["string","array"]))throw new Zt(`Expected second argument to be of type array or string, but found ${yt(Dt(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var or=ir;class ar{constructor(e,t,n,r,i,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!=1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const i={},o=[];for(let u=2;u<e.length-1;u+=2){let a=e[u];const s=e[u+1];Array.isArray(a)||(a=[a]);const c=t.concat(u);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(n){if(c.checkSubtype(n,Dt(e)))return null}else n=Dt(e);if(void 0!==i[String(e)])return c.error("Branch labels must be unique.");i[String(e)]=o.length}const l=t.parse(s,u,r);if(!l)return null;r=r||l.type,o.push(l)}const a=t.parse(e[1],1,lt);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(n,a.type)?null:new ar(n,r,a,i,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(Dt(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every((e=>e.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const o of t){const e=r[this.cases[o]];void 0===e?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[e][1].push(o)}const i=e=>"number"===this.inputType.kind?Number(e):e;for(const[o,a]of n)e.push(1===a.length?i(a[0]):a.map(i)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var sr=ar;class ur{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const i=t.parse(e[o],o,st);if(!i)return null;const a=t.parse(e[o+1],o+1,n);if(!a)return null;r.push([i,a]),n=n||a.type}const i=t.parse(e[e.length-1],e.length-1,n);return i?new ur(n,r,i):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every((([e,t])=>t.outputDefined()))&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild((t=>{e.push(t.serialize())})),e}}var cr=ur;class lr{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,lt),r=t.parse(e[2],2,ot);if(!n||!r)return null;if(!vt(n.type,[pt(lt),at,lt]))return t.error(`Expected first argument to be of type array or string, but found ${yt(n.type)} instead`);if(4===e.length){const i=t.parse(e[3],3,ot);return i?new lr(n.type,n,r,i):null}return new lr(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!bt(t,["string","array"]))throw new Zt(`Expected first argument to be of type array or string, but found ${yt(Dt(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var fr=lr;function hr(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function dr(e,t,n,r){return 0===r.compare(t,n)}function pr(e,t,n){const r="=="!==e&&"!="!==e;return class i{constructor(e,t,n){this.type=st,this.lhs=e,this.rhs=t,this.collator=n,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const n=e[0];let o=t.parse(e[1],1,lt);if(!o)return null;if(!hr(n,o.type))return t.concat(1).error(`"${n}" comparisons are not supported for type '${yt(o.type)}'.`);let a=t.parse(e[2],2,lt);if(!a)return null;if(!hr(n,a.type))return t.concat(2).error(`"${n}" comparisons are not supported for type '${yt(a.type)}'.`);if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error(`Cannot compare types '${yt(o.type)}' and '${yt(a.type)}'.`);r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Ft(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Ft(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,ft),!s)return null}return new i(o,a,s)}evaluate(i){const o=this.lhs.evaluate(i),a=this.rhs.evaluate(i);if(r&&this.hasUntypedArgument){const t=Dt(o),n=Dt(a);if(t.kind!==n.kind||"string"!==t.kind&&"number"!==t.kind)throw new Zt(`Expected arguments for "${e}" to be (string, string) or (number, number), but found (${t.kind}, ${n.kind}) instead.`)}if(this.collator&&!r&&this.hasUntypedArgument){const e=Dt(o),n=Dt(a);if("string"!==e.kind||"string"!==n.kind)return t(i,o,a)}return this.collator?n(i,o,a,this.collator.evaluate(i)):t(i,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild((e=>{t.push(e.serialize())})),t}}}const yr=pr("==",(function(e,t,n){return t===n}),dr),mr=pr("!=",(function(e,t,n){return t!==n}),(function(e,t,n,r){return!dr(0,t,n,r)})),gr=pr("<",(function(e,t,n){return t<n}),(function(e,t,n,r){return r.compare(t,n)<0})),vr=pr(">",(function(e,t,n){return t>n}),(function(e,t,n,r){return r.compare(t,n)>0})),br=pr("<=",(function(e,t,n){return t<=n}),(function(e,t,n,r){return r.compare(t,n)<=0})),_r=pr(">=",(function(e,t,n){return t>=n}),(function(e,t,n,r){return r.compare(t,n)>=0}));class wr{constructor(e,t,n,r,i,o){this.type=at,this.number=e,this.locale=t,this.currency=n,this.unit=r,this.minFractionDigits=i,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const n=t.parse(e[1],1,ot);if(!n)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let i=null;if(r.locale&&(i=t.parse(r.locale,1,at),!i))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,at),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,at),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parse(r["min-fraction-digits"],1,ot),!s))return null;let u=null;return r["max-fraction-digits"]&&(u=t.parse(r["max-fraction-digits"],1,ot),!u)?null:new wr(n,i,o,a,s,u)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class xr{constructor(e){this.type=ot,this.input=e}static parse(e,t){if(2!==e.length)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?t.error(`Expected argument of type string or array, but found ${yt(n.type)} instead.`):new xr(n):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new Zt(`Expected value to be of type string or array, but found ${yt(Dt(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild((t=>{e.push(t.serialize())})),e}}const kr={"==":yr,"!=":mr,">":vr,"<":gr,">=":_r,"<=":br,array:Ft,at:tr,boolean:Ft,case:cr,coalesce:Qn,collator:Qt,format:jt,image:Wt,in:rr,"index-of":or,interpolate:Yn,"interpolate-hcl":Yn,"interpolate-lab":Yn,length:xr,let:Jn,literal:zt,match:sr,number:Ft,"number-format":wr,object:Ft,slice:fr,step:Sn,string:Ft,"to-boolean":Gt,"to-color":Gt,"to-number":Gt,"to-string":Gt,var:wn,within:mn};function Ar(e,[t,n,r,i]){t=t.evaluate(e),n=n.evaluate(e),r=r.evaluate(e);const o=i?i.evaluate(e):1,a=Ct(t,n,r,o);if(a)throw new Zt(a);return new St(t/255*o,n/255*o,r/255*o,o)}function Er(e,t){return e in t}function Ir(e,t){const n=t[e];return void 0===n?null:n}function Sr(e){return{type:e}}Xt.register(kr,{error:[{kind:"error"},[at],(e,[t])=>{throw new Zt(t.evaluate(e))}],typeof:[at,[lt],(e,[t])=>yt(Dt(t.evaluate(e)))],"to-rgba":[pt(ot,4),[ut],(e,[t])=>t.evaluate(e).toArray()],rgb:[ut,[ot,ot,ot],Ar],rgba:[ut,[ot,ot,ot,ot],Ar],has:{type:st,overloads:[[[at],(e,[t])=>Er(t.evaluate(e),e.properties())],[[at,ct],(e,[t,n])=>Er(t.evaluate(e),n.evaluate(e))]]},get:{type:lt,overloads:[[[at],(e,[t])=>Ir(t.evaluate(e),e.properties())],[[at,ct],(e,[t,n])=>Ir(t.evaluate(e),n.evaluate(e))]]},"feature-state":[lt,[at],(e,[t])=>Ir(t.evaluate(e),e.featureState||{})],properties:[ct,[],e=>e.properties()],"geometry-type":[at,[],e=>e.geometryType()],id:[lt,[],e=>e.id()],zoom:[ot,[],e=>e.globals.zoom],pitch:[ot,[],e=>e.globals.pitch||0],"distance-from-center":[ot,[],e=>e.distanceFromCenter()],"heatmap-density":[ot,[],e=>e.globals.heatmapDensity||0],"line-progress":[ot,[],e=>e.globals.lineProgress||0],"sky-radial-progress":[ot,[],e=>e.globals.skyRadialProgress||0],accumulated:[lt,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[ot,Sr(ot),(e,t)=>{let n=0;for(const r of t)n+=r.evaluate(e);return n}],"*":[ot,Sr(ot),(e,t)=>{let n=1;for(const r of t)n*=r.evaluate(e);return n}],"-":{type:ot,overloads:[[[ot,ot],(e,[t,n])=>t.evaluate(e)-n.evaluate(e)],[[ot],(e,[t])=>-t.evaluate(e)]]},"/":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)/n.evaluate(e)],"%":[ot,[ot,ot],(e,[t,n])=>t.evaluate(e)%n.evaluate(e)],ln2:[ot,[],()=>Math.LN2],pi:[ot,[],()=>Math.PI],e:[ot,[],()=>Math.E],"^":[ot,[ot,ot],(e,[t,n])=>Math.pow(t.evaluate(e),n.evaluate(e))],sqrt:[ot,[ot],(e,[t])=>Math.sqrt(t.evaluate(e))],log10:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN10],ln:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))],log2:[ot,[ot],(e,[t])=>Math.log(t.evaluate(e))/Math.LN2],sin:[ot,[ot],(e,[t])=>Math.sin(t.evaluate(e))],cos:[ot,[ot],(e,[t])=>Math.cos(t.evaluate(e))],tan:[ot,[ot],(e,[t])=>Math.tan(t.evaluate(e))],asin:[ot,[ot],(e,[t])=>Math.asin(t.evaluate(e))],acos:[ot,[ot],(e,[t])=>Math.acos(t.evaluate(e))],atan:[ot,[ot],(e,[t])=>Math.atan(t.evaluate(e))],min:[ot,Sr(ot),(e,t)=>Math.min(...t.map((t=>t.evaluate(e))))],max:[ot,Sr(ot),(e,t)=>Math.max(...t.map((t=>t.evaluate(e))))],abs:[ot,[ot],(e,[t])=>Math.abs(t.evaluate(e))],round:[ot,[ot],(e,[t])=>{const n=t.evaluate(e);return n<0?-Math.round(-n):Math.round(n)}],floor:[ot,[ot],(e,[t])=>Math.floor(t.evaluate(e))],ceil:[ot,[ot],(e,[t])=>Math.ceil(t.evaluate(e))],"filter-==":[st,[at,lt],(e,[t,n])=>e.properties()[t.value]===n.value],"filter-id-==":[st,[lt],(e,[t])=>e.id()===t.value],"filter-type-==":[st,[at],(e,[t])=>e.geometryType()===t.value],"filter-<":[st,[at,lt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<i}],"filter-id-<":[st,[lt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<r}],"filter->":[st,[at,lt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>i}],"filter-id->":[st,[lt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>r}],"filter-<=":[st,[at,lt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r<=i}],"filter-id-<=":[st,[lt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n<=r}],"filter->=":[st,[at,lt],(e,[t,n])=>{const r=e.properties()[t.value],i=n.value;return typeof r==typeof i&&r>=i}],"filter-id->=":[st,[lt],(e,[t])=>{const n=e.id(),r=t.value;return typeof n==typeof r&&n>=r}],"filter-has":[st,[lt],(e,[t])=>t.value in e.properties()],"filter-has-id":[st,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[st,[pt(at)],(e,[t])=>t.value.indexOf(e.geometryType())>=0],"filter-id-in":[st,[pt(lt)],(e,[t])=>t.value.indexOf(e.id())>=0],"filter-in-small":[st,[at,pt(lt)],(e,[t,n])=>n.value.indexOf(e.properties()[t.value])>=0],"filter-in-large":[st,[at,pt(lt)],(e,[t,n])=>function(e,t,n,r){for(;n<=r;){const i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}(e.properties()[t.value],n.value,0,n.value.length-1)],all:{type:st,overloads:[[[st,st],(e,[t,n])=>t.evaluate(e)&&n.evaluate(e)],[Sr(st),(e,t)=>{for(const n of t)if(!n.evaluate(e))return!1;return!0}]]},any:{type:st,overloads:[[[st,st],(e,[t,n])=>t.evaluate(e)||n.evaluate(e)],[Sr(st),(e,t)=>{for(const n of t)if(n.evaluate(e))return!0;return!1}]]},"!":[st,[st],(e,[t])=>!t.evaluate(e)],"is-supported-script":[st,[at],(e,[t])=>{const n=e.globals&&e.globals.isSupportedScript;return!n||n(t.evaluate(e))}],upcase:[at,[at],(e,[t])=>t.evaluate(e).toUpperCase()],downcase:[at,[at],(e,[t])=>t.evaluate(e).toLowerCase()],concat:[at,Sr(lt),(e,t)=>t.map((t=>Rt(t.evaluate(e)))).join("")],"resolved-locale":[at,[ft],(e,[t])=>t.evaluate(e).resolvedLocale()]});var Tr=kr;function Mr(e){return{result:"success",value:e}}function Pr(e){return{result:"error",value:e}}function Br(e){return"data-driven"===e["property-type"]}function Cr(e){return!!e.expression&&e.expression.parameters.indexOf("zoom")>-1}function Or(e){return!!e.expression&&e.expression.interpolated}function Dr(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}function Rr(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Lr(e){return e}function zr(e,t){const n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||!(r||void 0!==e.property),o=e.type||(Or(t)?"exponential":"interval");if(n&&((e=Qe({},e)).stops&&(e.stops=e.stops.map((e=>[e[0],St.parse(e[1])]))),e.default=St.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Gn[e.colorSpace])throw new Error(`Unknown color space: ${e.colorSpace}`);let a,s,u;if("exponential"===o)a=Fr;else if("interval"===o)a=Ur;else if("categorical"===o){a=Nr,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];u=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error(`Unknown function type "${o}"`);a=jr}if(r){const n={},r=[];for(let t=0;t<e.stops.length;t++){const i=e.stops[t],o=i[0].zoom;void 0===n[o]&&(n[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),n[o].stops.push([i[0].value,i[1]])}const i=[];for(const e of r)i.push([n[e].zoom,zr(n[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:Yn.interpolationFactor.bind(void 0,o),zoomStops:i.map((e=>e[0])),evaluate:({zoom:n},r)=>Fr({stops:i,base:e.base},t,n).evaluate(n,r)}}if(i){const n="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:n,interpolationFactor:Yn.interpolationFactor.bind(void 0,n),zoomStops:e.stops.map((e=>e[0])),evaluate:({zoom:n})=>a(e,t,n,s,u)}}return{kind:"source",evaluate(n,r){const i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?Zr(e.default,t.default):a(e,t,i,s,u)}}}function Zr(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function Nr(e,t,n,r,i){return Zr(typeof n===i?r[n]:void 0,e.default,t.default)}function Ur(e,t,n){if("number"!==Dr(n))return Zr(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];const i=En(e.stops.map((e=>e[0])),n);return e.stops[i][1]}function Fr(e,t,n){const r=void 0!==e.base?e.base:1;if("number"!==Dr(n))return Zr(e.default,t.default);const i=e.stops.length;if(1===i)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[i-1][0])return e.stops[i-1][1];const o=En(e.stops.map((e=>e[0])),n),a=function(e,t,n,r){const i=r-n,o=e-n;return 0===i?0:1===t?o/i:(Math.pow(t,o)-1)/(Math.pow(t,i)-1)}(n,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],u=e.stops[o+1][1];let c=Mn[t.type]||Lr;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Gn[e.colorSpace];c=(e,n)=>t.reverse(t.interpolate(t.forward(e),t.forward(n),a))}return"function"==typeof s.evaluate?{evaluate(...e){const t=s.evaluate.apply(void 0,e),n=u.evaluate.apply(void 0,e);if(void 0!==t&&void 0!==n)return c(t,n,a)}}:c(s,u,a)}function jr(e,t,n){return"color"===t.type?n=St.parse(n):"formatted"===t.type?n=Pt.fromString(n.toString()):"resolvedImage"===t.type?n=Bt.fromString(n.toString()):Dr(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),Zr(n,e.default,t.default)}class Wr{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new qt,this._defaultValue=t?function(e){return"color"===e.type&&(Rr(e.default)||Array.isArray(e.default))?new St(0,0,0,0):"color"===e.type?St.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,i,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,i,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new Zt(`Expected value to be one of ${Object.keys(this._enumValues).map((e=>JSON.stringify(e))).join(", ")}, but found ${JSON.stringify(e)} instead.`);return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}}}function Vr(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in Tr}function Kr(e,t){const n=new kn(Tr,[],t?function(e){const t={color:ut,string:at,number:ot,enum:at,boolean:st,formatted:ht,resolvedImage:dt};return"array"===e.type?pt(t[e.value]||lt,e.length):t[e.type]}(t):void 0),r=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return r?Mr(new Wr(r,t)):Pr(n.errors)}class Gr{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent="constant"!==e&&!vn(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}}class Hr{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent="camera"!==e&&!vn(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,i,o)}evaluate(e,t,n,r,i,o){return this._styleExpression.evaluate(e,t,n,r,i,o)}interpolationFactor(e,t,n){return this.interpolationType?Yn.interpolationFactor(this.interpolationType,e,t,n):0}}function qr(e,t){if("error"===(e=Kr(e,t)).result)return e;const n=e.value.expression,r=gn(n);if(!r&&!Br(t))return Pr([new tt("","data expressions not supported")]);const i=bn(n,["zoom","pitch","distance-from-center"]);if(!i&&!Cr(t))return Pr([new tt("","zoom expressions not supported")]);const o=Xr(n);return o||i?o instanceof tt?Pr([o]):o instanceof Yn&&!Or(t)?Pr([new tt("",'"interpolate" expressions cannot be used with this property')]):Mr(o?new Hr(r?"camera":"composite",e.value,o.labels,o instanceof Yn?o.interpolation:void 0):new Gr(r?"constant":"source",e.value)):Pr([new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Yr{constructor(e,t){this._parameters=e,this._specification=t,Qe(this,zr(this._parameters,this._specification))}static deserialize(e){return new Yr(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function Xr(e){let t=null;if(e instanceof Jn)t=Xr(e.result);else if(e instanceof Qn){for(const n of e.args)if(t=Xr(n),t)break}else(e instanceof Sn||e instanceof Yn)&&e.input instanceof Xt&&"zoom"===e.input.name&&(t=e);return t instanceof tt||e.eachChild((e=>{const n=Xr(e);n instanceof tt?t=n:!t&&n?t=new tt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new tt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}class Qr{constructor(e,t,n,r){this.message=(e?`${e}: `:"")+n,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function $r(e){const t=e.key,n=e.value,r=e.valueSpec||{},i=e.objectElementValidators||{},o=e.style,a=e.styleSpec;let s=[];const u=Dr(n);if("object"!==u)return[new Qr(t,n,`object expected, ${u} found`)];for(const c in n){const e=c.split(".")[0],u=r[e]||r["*"];let l;i[e]?l=i[e]:r[e]?l=Ci:i["*"]?l=i["*"]:r["*"]&&(l=Ci),l?s=s.concat(l({key:(t?`${t}.`:t)+c,value:n[c],valueSpec:u,style:o,styleSpec:a,object:n,objectKey:c},n)):s.push(new Qr(t,n[c],`unknown property "${c}"`))}for(const c in r)i[c]||r[c].required&&void 0===r[c].default&&void 0===n[c]&&s.push(new Qr(t,n,`missing required property "${c}"`));return s}function Jr(e){const t=e.value,n=e.valueSpec,r=e.style,i=e.styleSpec,o=e.key,a=e.arrayElementValidator||Ci;if("array"!==Dr(t))return[new Qr(o,t,`array expected, ${Dr(t)} found`)];if(n.length&&t.length!==n.length)return[new Qr(o,t,`array length ${n.length} expected, length ${t.length} found`)];if(n["min-length"]&&t.length<n["min-length"])return[new Qr(o,t,`array length at least ${n["min-length"]} expected, length ${t.length} found`)];let s={type:n.value,values:n.values,minimum:n.minimum,maximum:n.maximum,function:void 0};i.$version<7&&(s.function=n.function),"object"===Dr(n.value)&&(s=n.value);let u=[];for(let c=0;c<t.length;c++)u=u.concat(a({array:t,arrayIndex:c,value:t[c],valueSpec:s,style:r,styleSpec:i,key:`${o}[${c}]`}));return u}function ei(e){const t=e.key,n=e.value,r=e.valueSpec;let i=Dr(n);if("number"===i&&n!=n&&(i="NaN"),"number"!==i)return[new Qr(t,n,`number expected, ${i} found`)];if("minimum"in r){let i=r.minimum;if("array"===Dr(r.minimum)&&(i=r.minimum[e.arrayIndex]),n<i)return[new Qr(t,n,`${n} is less than the minimum value ${i}`)]}if("maximum"in r){let i=r.maximum;if("array"===Dr(r.maximum)&&(i=r.maximum[e.arrayIndex]),n>i)return[new Qr(t,n,`${n} is greater than the maximum value ${i}`)]}return[]}function ti(e){const t=e.valueSpec,n=$e(e.value.type);let r,i,o,a={};const s="categorical"!==n&&void 0===e.value.property,u=!s,c="array"===Dr(e.value.stops)&&"array"===Dr(e.value.stops[0])&&"object"===Dr(e.value.stops[0][0]),l=$r({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:function(e){if("identity"===n)return[new Qr(e.key,e.value,'identity function may not have a "stops" property')];let t=[];const r=e.value;return t=t.concat(Jr({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:f})),"array"===Dr(r)&&0===r.length&&t.push(new Qr(e.key,r,"array must have at least one stop")),t},default:function(e){return Ci({key:e.key,value:e.value,valueSpec:t,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===n&&s&&l.push(new Qr(e.key,e.value,'missing required property "property"')),"identity"===n||e.value.stops||l.push(new Qr(e.key,e.value,'missing required property "stops"')),"exponential"===n&&e.valueSpec.expression&&!Or(e.valueSpec)&&l.push(new Qr(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(u&&!Br(e.valueSpec)?l.push(new Qr(e.key,e.value,"property functions not supported")):s&&!Cr(e.valueSpec)&&l.push(new Qr(e.key,e.value,"zoom functions not supported"))),"categorical"!==n&&!c||void 0!==e.value.property||l.push(new Qr(e.key,e.value,'"property" property is required')),l;function f(e){let n=[];const r=e.value,s=e.key;if("array"!==Dr(r))return[new Qr(s,r,`array expected, ${Dr(r)} found`)];if(2!==r.length)return[new Qr(s,r,`array length 2 expected, length ${r.length} found`)];if(c){if("object"!==Dr(r[0]))return[new Qr(s,r,`object expected, ${Dr(r[0])} found`)];if(void 0===r[0].zoom)return[new Qr(s,r,"object stop key must have zoom")];if(void 0===r[0].value)return[new Qr(s,r,"object stop key must have value")];const t=$e(r[0].zoom);if("number"!=typeof t)return[new Qr(s,r[0].zoom,"stop zoom values must be numbers")];if(o&&o>t)return[new Qr(s,r[0].zoom,"stop zoom values must appear in ascending order")];t!==o&&(o=t,i=void 0,a={}),n=n.concat($r({key:`${s}[0]`,value:r[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:ei,value:h}}))}else n=n.concat(h({key:`${s}[0]`,value:r[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},r));return Vr(Je(r[1]))?n.concat([new Qr(`${s}[1]`,r[1],"expressions are not allowed in function stops.")]):n.concat(Ci({key:`${s}[1]`,value:r[1],valueSpec:t,style:e.style,styleSpec:e.styleSpec}))}function h(e,o){const s=Dr(e.value),u=$e(e.value),c=null!==e.value?e.value:o;if(r){if(s!==r)return[new Qr(e.key,c,`${s} stop domain type must match previous stop domain type ${r}`)]}else r=s;if("number"!==s&&"string"!==s&&"boolean"!==s&&"number"!=typeof u&&"string"!=typeof u&&"boolean"!=typeof u)return[new Qr(e.key,c,"stop domain value must be a number, string, or boolean")];if("number"!==s&&"categorical"!==n){let r=`number expected, ${s} found`;return Br(t)&&void 0===n&&(r+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Qr(e.key,c,r)]}return"categorical"!==n||"number"!==s||"number"==typeof u&&isFinite(u)&&Math.floor(u)===u?"categorical"!==n&&"number"===s&&"number"==typeof u&&"number"==typeof i&&void 0!==i&&u<i?[new Qr(e.key,c,"stop domain values must appear in ascending order")]:(i=u,"categorical"===n&&u in a?[new Qr(e.key,c,"stop domain values must be unique")]:(a[u]=!0,[])):[new Qr(e.key,c,`integer expected, found ${String(u)}`)]}}function ni(e){const t=("property"===e.expressionContext?qr:Kr)(Je(e.value),e.valueSpec);if("error"===t.result)return t.value.map((t=>new Qr(`${e.key}${t.key}`,e.value,t.message)));const n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new Qr(e.key,e.value,`Invalid data expression for "${e.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===e.expressionContext&&"layout"===e.propertyType&&!vn(n))return[new Qr(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext)return ri(n,e);if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!bn(n,["zoom","feature-state"]))return[new Qr(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!gn(n))return[new Qr(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ri(e,t){const n=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(t.valueSpec&&t.valueSpec.expression)for(const i of t.valueSpec.expression.parameters)n.delete(i);if(0===n.size)return[];const r=[];return e instanceof Xt&&n.has(e.name)?[new Qr(t.key,t.value,`["${e.name}"] expression is not supported in a filter for a ${t.object.type} layer with id: ${t.object.id}`)]:(e.eachChild((e=>{r.push(...ri(e,t))})),r)}function ii(e){const t=e.key,n=e.value,r=e.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf($e(n))&&i.push(new Qr(t,n,`expected one of [${r.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(r.values).indexOf($e(n))&&i.push(new Qr(t,n,`expected one of [${Object.keys(r.values).join(", ")}], ${JSON.stringify(n)} found`)),i}function oi(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!oi(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function ai(e,t="fill"){if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};oi(e)||(e=di(e));const n=e;let r=!0;try{r=function(e){if(!ci(e))return e;let t=Je(e);return ui(t),t=si(t),t}(n)}catch(e){console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${JSON.stringify(n,null,2)}\n        `)}const i=Xe[`filter_${t}`],o=Kr(r,i);let a=null;if("error"===o.result)throw new Error(o.value.map((e=>`${e.key}: ${e.message}`)).join(", "));a=(e,t,n)=>o.value.evaluate(e,t,{},n);let s=null,u=null;if(r!==n){const e=Kr(n,i);if("error"===e.result)throw new Error(e.value.map((e=>`${e.key}: ${e.message}`)).join(", "));s=(t,n,r,i,o)=>e.value.evaluate(t,n,{},r,void 0,void 0,i,o),u=!gn(e.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:hi(r),needFeature:!!u}}function si(e){if(!Array.isArray(e))return e;const t=function(e){if(li.has(e[0]))for(let t=1;t<e.length;t++)if(ci(e[t]))return!0;return e}(e);return!0===t?t:t.map((e=>si(e)))}function ui(e){let t=!1;const n=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||ci(e[r]),n.push(e[r+1]);n.push(e[e.length-1])}else if("match"===e[0]){t=t||ci(e[1]);for(let t=2;t<e.length-1;t+=2)n.push(e[t+1]);n.push(e[e.length-1])}else if("step"===e[0]){t=t||ci(e[1]);for(let t=1;t<e.length-1;t+=2)n.push(e[t+1])}t&&(e.length=0,e.push("any",...n));for(let r=1;r<e.length;r++)ui(e[r])}function ci(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let n=1;n<e.length;n++)if(ci(e[n]))return!0;return!1}const li=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function fi(e,t){return e<t?-1:e>t?1:0}function hi(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(let t=1;t<e.length;t++)if(hi(e[t]))return!0;return!1}function di(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?pi(e[1],e[2],"=="):"!="===t?gi(pi(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?pi(e[1],e[2],t):"any"===t?(n=e.slice(1),["any"].concat(n.map(di))):"all"===t?["all"].concat(e.slice(1).map(di)):"none"===t?["all"].concat(e.slice(1).map(di).map(gi)):"in"===t?yi(e[1],e.slice(2)):"!in"===t?gi(yi(e[1],e.slice(2))):"has"===t?mi(e[1]):"!has"===t?gi(mi(e[1])):"within"!==t||e;var n}function pi(e,t,n){switch(e){case"$type":return[`filter-type-${n}`,t];case"$id":return[`filter-id-${n}`,t];default:return[`filter-${n}`,e,t]}}function yi(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((e=>typeof e!=typeof t[0]))?["filter-in-large",e,["literal",t.sort(fi)]]:["filter-in-small",e,["literal",t]]}}function mi(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function gi(e){return["!",e]}function vi(e){return oi(Je(e.value))?ni(Qe({},e,{expressionContext:"filter",valueSpec:e.styleSpec[`filter_${e.layerType||"fill"}`]})):bi(e)}function bi(e){const t=e.value,n=e.key;if("array"!==Dr(t))return[new Qr(n,t,`array expected, ${Dr(t)} found`)];const r=e.styleSpec;let i,o=[];if(t.length<1)return[new Qr(n,t,"filter array must have at least 1 element")];switch(o=o.concat(ii({key:`${n}[0]`,value:t[0],valueSpec:r.filter_operator,style:e.style,styleSpec:e.styleSpec})),$e(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===$e(t[1])&&o.push(new Qr(n,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":3!==t.length&&o.push(new Qr(n,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(i=Dr(t[1]),"string"!==i&&o.push(new Qr(`${n}[1]`,t[1],`string expected, ${i} found`)));for(let a=2;a<t.length;a++)i=Dr(t[a]),"$type"===$e(t[1])?o=o.concat(ii({key:`${n}[${a}]`,value:t[a],valueSpec:r.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==i&&"number"!==i&&"boolean"!==i&&o.push(new Qr(`${n}[${a}]`,t[a],`string, number, or boolean expected, ${i} found`));break;case"any":case"all":case"none":for(let r=1;r<t.length;r++)o=o.concat(bi({key:`${n}[${r}]`,value:t[r],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":i=Dr(t[1]),2!==t.length?o.push(new Qr(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"string"!==i&&o.push(new Qr(`${n}[1]`,t[1],`string expected, ${i} found`));break;case"within":i=Dr(t[1]),2!==t.length?o.push(new Qr(n,t,`filter array for "${t[0]}" operator must have 2 elements`)):"object"!==i&&o.push(new Qr(`${n}[1]`,t[1],`object expected, ${i} found`))}return o}function _i(e,t){const n=e.key,r=e.style,i=e.styleSpec,o=e.value,a=e.objectKey,s=i[`${t}_${e.layerType}`];if(!s)return[];const u=a.match(/^(.*)-transition$/);if("paint"===t&&u&&s[u[1]]&&s[u[1]].transition)return Ci({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});const c=e.valueSpec||s[a];if(!c)return[new Qr(n,o,`unknown property "${a}"`)];let l;if("string"===Dr(o)&&Br(c)&&!c.tokens&&(l=/^{([^}]+)}$/.exec(o)))return[new Qr(n,o,`"${a}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(l[1])} }\`.`)];const f=[];return"symbol"===e.layerType&&("text-field"===a&&r&&!r.glyphs&&f.push(new Qr(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Rr(Je(o))&&"identity"===$e(o.type)&&f.push(new Qr(n,o,'"text-font" does not support identity functions'))),f.concat(Ci({key:e.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:t,propertyKey:a}))}function wi(e){return _i(e,"paint")}function xi(e){return _i(e,"layout")}function ki(e){let t=[];const n=e.value,r=e.key,i=e.style,o=e.styleSpec;n.type||n.ref||t.push(new Qr(r,n,'either "type" or "ref" is required'));let a=$e(n.type);const s=$e(n.ref);if(n.id){const o=$e(n.id);for(let a=0;a<e.arrayIndex;a++){const e=i.layers[a];$e(e.id)===o&&t.push(new Qr(r,n.id,`duplicate layer id "${n.id}", previously used at line ${e.id.__line__}`))}}if("ref"in n){let e;["type","source","source-layer","filter","layout"].forEach((e=>{e in n&&t.push(new Qr(r,n[e],`"${e}" is prohibited for ref layers`))})),i.layers.forEach((t=>{$e(t.id)===s&&(e=t)})),e?e.ref?t.push(new Qr(r,n.ref,"ref cannot reference another ref layer")):a=$e(e.type):"string"==typeof s&&t.push(new Qr(r,n.ref,`ref layer "${s}" not found`))}else if("background"!==a&&"sky"!==a)if(n.source){const e=i.sources&&i.sources[n.source],o=e&&$e(e.type);e?"vector"===o&&"raster"===a?t.push(new Qr(r,n.source,`layer "${n.id}" requires a raster source`)):"raster"===o&&"raster"!==a?t.push(new Qr(r,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==o||n["source-layer"]?"raster-dem"===o&&"hillshade"!==a?t.push(new Qr(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==a||!n.paint||!n.paint["line-gradient"]&&!n.paint["line-trim-offset"]||"geojson"===o&&e.lineMetrics||t.push(new Qr(r,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new Qr(r,n,`layer "${n.id}" must specify a "source-layer"`)):t.push(new Qr(r,n.source,`source "${n.source}" not found`))}else t.push(new Qr(r,n,'missing required property "source"'));return t=t.concat($r({key:r,value:n,valueSpec:o.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ci({key:`${r}.type`,value:n.type,valueSpec:o.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"}),filter:e=>vi(Qe({layerType:a},e)),layout:e=>$r({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>xi(Qe({layerType:a},e))}}),paint:e=>$r({layer:n,key:e.key,value:e.value,valueSpec:{},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":e=>wi(Qe({layerType:a},e))}})}})),t}function Ai(e){const t=e.value,n=e.key,r=Dr(t);return"string"!==r?[new Qr(n,t,`string expected, ${r} found`)]:[]}const Ei={promoteId:function({key:e,value:t}){if("string"===Dr(t))return Ai({key:e,value:t});{const n=[];for(const r in t)n.push(...Ai({key:`${e}.${r}`,value:t[r]}));return n}}};function Ii(e){const t=e.value,n=e.key,r=e.styleSpec,i=e.style;if(!t.type)return[new Qr(n,t,'"type" is required')];const o=$e(t.type);let a;switch(o){case"vector":case"raster":case"raster-dem":return a=$r({key:n,value:t,valueSpec:r[`source_${o.replace("-","_")}`],style:e.style,styleSpec:r,objectElementValidators:Ei}),a;case"geojson":if(a=$r({key:n,value:t,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:Ei}),t.cluster)for(const e in t.clusterProperties){const[r,i]=t.clusterProperties[e],o="string"==typeof r?[r,["accumulated"],["get",e]]:r;a.push(...ni({key:`${n}.${e}.map`,value:i,expressionContext:"cluster-map"})),a.push(...ni({key:`${n}.${e}.reduce`,value:o,expressionContext:"cluster-reduce"}))}return a;case"video":return $r({key:n,value:t,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return $r({key:n,value:t,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new Qr(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ii({key:`${n}.type`,value:t.type,valueSpec:{values:Si(r)},style:i,styleSpec:r})}}function Si(e){return e.source.reduce(((t,n)=>{const r=e[n];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t}),[])}function Ti(e){const t=e.value,n=e.styleSpec,r=n.light,i=e.style;let o=[];const a=Dr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Qr("light",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&r[e[1]]&&r[e[1]].transition?Ci({key:s,value:t[s],valueSpec:n.transition,style:i,styleSpec:n}):r[s]?Ci({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}):[new Qr(s,t[s],`unknown property "${s}"`)])}return o}function Mi(e){const t=e.value,n=e.key,r=e.style,i=e.styleSpec,o=i.terrain;let a=[];const s=Dr(t);if(void 0===t)return a;if("object"!==s)return a=a.concat([new Qr("terrain",t,`object expected, ${s} found`)]),a;for(const u in t){const e=u.match(/^(.*)-transition$/);a=a.concat(e&&o[e[1]]&&o[e[1]].transition?Ci({key:u,value:t[u],valueSpec:i.transition,style:r,styleSpec:i}):o[u]?Ci({key:u,value:t[u],valueSpec:o[u],style:r,styleSpec:i}):[new Qr(u,t[u],`unknown property "${u}"`)])}if(t.source){const e=r.sources&&r.sources[t.source],i=e&&$e(e.type);e?"raster-dem"!==i&&a.push(new Qr(n,t.source,`terrain cannot be used with a source of type ${String(i)}, it only be used with a "raster-dem" source type`)):a.push(new Qr(n,t.source,`source "${t.source}" not found`))}else a.push(new Qr(n,t,'terrain is missing required property "source"'));return a}function Pi(e){const t=e.value,n=e.style,r=e.styleSpec,i=r.fog;let o=[];const a=Dr(t);if(void 0===t)return o;if("object"!==a)return o=o.concat([new Qr("fog",t,`object expected, ${a} found`)]),o;for(const s in t){const e=s.match(/^(.*)-transition$/);o=o.concat(e&&i[e[1]]&&i[e[1]].transition?Ci({key:s,value:t[s],valueSpec:r.transition,style:n,styleSpec:r}):i[s]?Ci({key:s,value:t[s],valueSpec:i[s],style:n,styleSpec:r}):[new Qr(s,t[s],`unknown property "${s}"`)])}return o}const Bi={"*":()=>[],array:Jr,boolean:function(e){const t=e.value,n=e.key,r=Dr(t);return"boolean"!==r?[new Qr(n,t,`boolean expected, ${r} found`)]:[]},number:ei,color:function(e){const t=e.key,n=e.value,r=Dr(n);return"string"!==r?[new Qr(t,n,`color expected, ${r} found`)]:null===_t(n)?[new Qr(t,n,`color expected, "${n}" found`)]:[]},enum:ii,filter:vi,function:ti,layer:ki,object:$r,source:Ii,light:Ti,terrain:Mi,fog:Pi,string:Ai,formatted:function(e){return 0===Ai(e).length?[]:ni(e)},resolvedImage:function(e){return 0===Ai(e).length?[]:ni(e)},projection:function(e){const t=e.value,n=e.styleSpec,r=n.projection,i=e.style;let o=[];const a=Dr(t);if("object"===a)for(const s in t)o=o.concat(Ci({key:s,value:t[s],valueSpec:r[s],style:i,styleSpec:n}));else"string"!==a&&(o=o.concat([new Qr("projection",t,`object or string expected, ${a} found`)]));return o}};function Ci(e){const t=e.value,n=e.valueSpec,r=e.styleSpec;return n.expression&&Rr($e(t))?ti(e):n.expression&&Vr(Je(t))?ni(e):n.type&&Bi[n.type]?Bi[n.type](e):$r(Qe({},e,{valueSpec:n.type?r[n.type]:n}))}function Oi(e){const t=e.value,n=e.key,r=Ai(e);return r.length||(-1===t.indexOf("{fontstack}")&&r.push(new Qr(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new Qr(n,t,'"glyphs" url must include a "{range}" token'))),r}function Di(e,t=Xe){return zi(Ci({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:Oi,"*":()=>[]}}))}const Ri=e=>zi(wi(e)),Li=e=>zi(xi(e));function zi(e){return e.slice().sort(((e,t)=>e.line&&t.line?e.line-t.line:0))}function Zi(e,t){let n=!1;if(t&&t.length)for(const r of t)e.fire(new qe(new Error(r.message))),n=!0;return n}var Ni=Ui;function Ui(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var i=new Int32Array(this.arrayBuffer);e=i[0],this.d=(t=i[1])+2*(n=i[2]);for(var o=0;o<this.d*this.d;o++){var a=i[3+o],s=i[3+o+1];r.push(a===s?null:i.subarray(a,s))}var u=i[3+r.length+1];this.keys=i.subarray(i[3+r.length],u),this.bboxes=i.subarray(u),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var c=0;c<this.d*this.d;c++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var l=n/t*e;this.min=-l,this.max=e+l}Ui.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},Ui.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Ui.prototype._insertCell=function(e,t,n,r,i,o){this.cells[i].push(o)},Ui.prototype.query=function(e,t,n,r,i){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=n&&a<=r&&!i)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,n,r,this._queryCell,s,{},i),s},Ui.prototype._queryCell=function(e,t,n,r,i,o,a,s){var u=this.cells[i];if(null!==u)for(var c=this.keys,l=this.bboxes,f=0;f<u.length;f++){var h=u[f];if(void 0===a[h]){var d=4*h;(s?s(l[d+0],l[d+1],l[d+2],l[d+3]):e<=l[d+2]&&t<=l[d+3]&&n>=l[d+0]&&r>=l[d+1])?(a[h]=!0,o.push(c[h])):a[h]=!1}}},Ui.prototype._forEachCell=function(e,t,n,r,i,o,a,s){for(var u=this._convertToCellCoord(e),c=this._convertToCellCoord(t),l=this._convertToCellCoord(n),f=this._convertToCellCoord(r),h=u;h<=l;h++)for(var d=c;d<=f;d++){var p=this.d*d+h;if((!s||s(this._convertFromCellCoord(h),this._convertFromCellCoord(d),this._convertFromCellCoord(h+1),this._convertFromCellCoord(d+1)))&&i.call(this,e,t,n,r,p,o,a,s))return}},Ui.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},Ui.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},Ui.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=3+this.cells.length+1+1,n=0,r=0;r<this.cells.length;r++)n+=this.cells[r].length;var i=new Int32Array(t+n+this.keys.length+this.bboxes.length);i[0]=this.extent,i[1]=this.n,i[2]=this.padding;for(var o=t,a=0;a<e.length;a++){var s=e[a];i[3+a]=o,i.set(s,o),o+=s.length}return i[3+e.length]=o,i.set(this.keys,o),i[3+e.length+1]=o+=this.keys.length,i.set(this.bboxes,o),o+=this.bboxes.length,i.buffer};const Fi={};function ji(e,t,n={}){Object.defineProperty(e,"_classRegistryKey",{value:t,writeable:!1}),Fi[t]={klass:e,omit:n.omit||[]}}ji(Object,"Object"),Ni.serialize=function(e,t){const n=e.toArrayBuffer();return t&&t.push(n),{buffer:n}},Ni.deserialize=function(e){return new Ni(e.buffer)},Object.defineProperty(Ni,"name",{value:"Grid"}),ji(Ni,"Grid"),ji(St,"Color"),ji(Error,"Error"),ji(ae,"AJAXError"),ji(Bt,"ResolvedImage"),ji(Yr,"StylePropertyFunction"),ji(Wr,"StyleExpression",{omit:["_evaluator"]}),ji(Hr,"ZoomDependentExpression"),ji(Gr,"ZoomConstantExpression"),ji(Xt,"CompoundExpression",{omit:["_evaluate"]});for(const gy in Tr)Fi[Tr[gy]._classRegistryKey]||ji(Tr[gy],`Expression${gy}`);function Wi(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Vi(e){return t.ImageBitmap&&e instanceof t.ImageBitmap}function Ki(e,n){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(Wi(e)||Vi(e))return n&&n.push(e),e;if(ArrayBuffer.isView(e)){const t=e;return n&&n.push(t.buffer),t}if(e instanceof t.ImageData)return n&&n.push(e.data.buffer),e;if(Array.isArray(e)){const t=[];for(const r of e)t.push(Ki(r,n));return t}if("object"==typeof e){const t=e.constructor,r=t._classRegistryKey;if(!r)throw new Error(`can't serialize object of unregistered class ${r}`);const i=t.serialize?t.serialize(e,n):{};if(!t.serialize){for(const t in e)e.hasOwnProperty(t)&&(Fi[r].omit.indexOf(t)>=0||(i[t]=Ki(e[t],n)));e instanceof Error&&(i.message=e.message)}if(i.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(i.$name=r),i}throw new Error("can't serialize object of type "+typeof e)}function Gi(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||Wi(e)||Vi(e)||ArrayBuffer.isView(e)||e instanceof t.ImageData)return e;if(Array.isArray(e))return e.map(Gi);if("object"==typeof e){const t=e.$name||"Object",{klass:n}=Fi[t];if(!n)throw new Error(`can't deserialize unregistered class ${t}`);if(n.deserialize)return n.deserialize(e);const r=Object.create(n.prototype);for(const i of Object.keys(e))"$name"!==i&&(r[i]=Gi(e[i]));return r}throw new Error("can't deserialize object of type "+typeof e)}const Hi=e=>e>=1536&&e<=1791,qi=e=>e>=1872&&e<=1919,Yi=e=>e>=2208&&e<=2303,Xi=e=>e>=11904&&e<=12031,Qi=e=>e>=12032&&e<=12255,$i=e=>e>=12272&&e<=12287,Ji=e=>e>=12288&&e<=12351,eo=e=>e>=12352&&e<=12447,to=e=>e>=12448&&e<=12543,no=e=>e>=12544&&e<=12591,ro=e=>e>=12704&&e<=12735,io=e=>e>=12736&&e<=12783,oo=e=>e>=12784&&e<=12799,ao=e=>e>=12800&&e<=13055,so=e=>e>=13056&&e<=13311,uo=e=>e>=13312&&e<=19903,co=e=>e>=19968&&e<=40959,lo=e=>e>=40960&&e<=42127,fo=e=>e>=42128&&e<=42191,ho=e=>e>=44032&&e<=55215,po=e=>e>=63744&&e<=64255,yo=e=>e>=64336&&e<=65023,mo=e=>e>=65040&&e<=65055,go=e=>e>=65072&&e<=65103,vo=e=>e>=65104&&e<=65135,bo=e=>e>=65136&&e<=65279,_o=e=>e>=65280&&e<=65519;function wo(e){for(const t of e)if(Ao(t.charCodeAt(0)))return!0;return!1}function xo(e){for(const t of e)if(!ko(t.charCodeAt(0)))return!1;return!0}function ko(e){return!(Hi(e)||qi(e)||Yi(e)||yo(e)||bo(e))}function Ao(e){return!(746!==e&&747!==e&&(e<4352||!(ro(e)||no(e)||go(e)&&!(e>=65097&&e<=65103)||po(e)||so(e)||Xi(e)||io(e)||!(!Ji(e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||uo(e)||co(e)||ao(e)||(e=>e>=12592&&e<=12687)(e)||(e=>e>=43360&&e<=43391)(e)||(e=>e>=55216&&e<=55295)(e)||(e=>e>=4352&&e<=4607)(e)||ho(e)||eo(e)||$i(e)||(e=>e>=12688&&e<=12703)(e)||Qi(e)||oo(e)||to(e)&&12540!==e||!(!_o(e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!vo(e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||(e=>e>=5120&&e<=5759)(e)||(e=>e>=6320&&e<=6399)(e)||mo(e)||(e=>e>=19904&&e<=19967)(e)||lo(e)||fo(e))))}function Eo(e){return!(Ao(e)||function(e){return!!((e=>e>=128&&e<=255)(e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||(e=>e>=8192&&e<=8303)(e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||(e=>e>=8448&&e<=8527)(e)||(e=>e>=8528&&e<=8591)(e)||(e=>e>=8960&&e<=9215)(e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||(e=>e>=9216&&e<=9279)(e)&&9251!==e||(e=>e>=9280&&e<=9311)(e)||(e=>e>=9312&&e<=9471)(e)||(e=>e>=9632&&e<=9727)(e)||(e=>e>=9728&&e<=9983)(e)&&!(e>=9754&&e<=9759)||(e=>e>=11008&&e<=11263)(e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Ji(e)||to(e)||(e=>e>=57344&&e<=63743)(e)||go(e)||vo(e)||_o(e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function Io(e){return e>=1424&&e<=2303||yo(e)||bo(e)}function So(e,t){return!(!t&&Io(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||(e=>e>=6016&&e<=6143)(e))}function To(e){for(const t of e)if(Io(t.charCodeAt(0)))return!0;return!1}const Mo="deferred",Po="loading",Bo="loaded";let Co=null,Oo="unavailable",Do=null;const Ro=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(Oo="error"),Co&&Co(e)};function Lo(){zo.fire(new He("pluginStateChange",{pluginStatus:Oo,pluginURL:Do}))}const zo=new Ye,Zo=function(){return Oo},No=function(){if(Oo!==Mo||!Do)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Oo=Po,Lo(),Do&&ce({url:Do},(e=>{e?Ro(e):(Oo=Bo,Lo())}))},Uo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Oo===Bo||null!=Uo.applyArabicShaping,isLoading:()=>Oo===Po,setState(e){Oo=e.pluginStatus,Do=e.pluginURL},isParsed:()=>null!=Uo.applyArabicShaping&&null!=Uo.processBidirectionalText&&null!=Uo.processStyledBidirectionalText,getPluginURL:()=>Do};class Fo{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(e){return function(e,t){for(const n of e)if(!So(n.charCodeAt(0),t))return!1;return!0}(e,Uo.isLoaded())}}class jo{constructor(e,t){this.property=e,this.value=t,this.expression=function(e,t){if(Rr(e))return new Yr(e,t);if(Vr(e)){const n=qr(e,t);if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));return n.value}{let n=e;return"string"==typeof e&&"color"===t.type&&(n=St.parse(e)),{kind:"constant",evaluate:()=>n}}}(void 0===t?e.specification.default:t,e.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,n){return this.property.possiblyEvaluate(this,e,t,n)}}class Wo{constructor(e){this.property=e,this.value=new jo(e,void 0)}transitioned(e,t){return new Ko(this.property,this.value,t,M({},e.transition,this.transition),e.now)}untransitioned(){return new Ko(this.property,this.value,null,{},0)}}class Vo{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)}getValue(e){return N(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Wo(this._values[e].property)),this._values[e].value=new jo(this._values[e].property,null===t?void 0:N(t))}getTransition(e){return N(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new Wo(this._values[e].property)),this._values[e].transition=N(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n);const r=this.getTransition(t);void 0!==r&&(e[`${t}-transition`]=r)}return e}transitioned(e,t){const n=new Go(this._properties);for(const r of Object.keys(this._values))n._values[r]=this._values[r].transitioned(e,t._values[r]);return n}untransitioned(){const e=new Go(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ko{constructor(e,t,n,r,i){const o=r.delay||0,a=r.duration||0;i=i||0,this.property=e,this.value=t,this.begin=i+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)}possiblyEvaluate(e,t,n){const r=e.now||0,i=this.value.possiblyEvaluate(e,t,n),o=this.prior;if(o){if(r>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(r<this.begin)return o.possiblyEvaluate(e,t,n);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,n),i,w(a))}}return i}}class Go{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,n){const r=new Yo(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class Ho{constructor(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)}getValue(e){return N(this._values[e].value)}setValue(e,t){this._values[e]=new jo(this._values[e].property,null===t?void 0:N(t))}serialize(){const e={};for(const t of Object.keys(this._values)){const n=this.getValue(t);void 0!==n&&(e[t]=n)}return e}possiblyEvaluate(e,t,n){const r=new Yo(this._properties);for(const i of Object.keys(this._values))r._values[i]=this._values[i].possiblyEvaluate(e,t,n);return r}}class qo{constructor(e,t,n){this.property=e,this.value=t,this.parameters=n}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,n,r){return this.property.evaluate(this.value,this.parameters,e,t,n,r)}}class Yo{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Xo{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,n){const r=Mn[this.specification.type];return r?r(e,t,n):e}}class Qo{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,n,r){return new qo(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},n,r)}:e.expression,t)}interpolate(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new qo(this,{kind:"constant",value:void 0},e.parameters);const r=Mn[this.specification.type];return r?new qo(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.parameters):e}evaluate(e,t,n,r,i,o){return"constant"===e.kind?e.value:e.evaluate(t,n,r,i,o)}}class $o{constructor(e){this.specification=e}possiblyEvaluate(e,t,n,r){return!!e.expression.evaluate(t,null,{},n,r)}interpolate(){return!1}}class Jo{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new Fo(0,{});for(const n in e){const r=e[n];r.specification.overridable&&this.overridableProperties.push(n);const i=this.defaultPropertyValues[n]=new jo(r,void 0),o=this.defaultTransitionablePropertyValues[n]=new Wo(r);this.defaultTransitioningPropertyValues[n]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate(t)}}}function ea(e,t){return 256*(e=A(Math.floor(e),0,255))+A(Math.floor(t),0,255)}ji(Qo,"DataDrivenProperty"),ji(Xo,"DataConstantProperty"),ji($o,"ColorRampProperty");const ta={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class na{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ra{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function ia(e,t=1){let n=0,r=0;return{members:e.map((e=>{const i=ta[e.type].BYTES_PER_ELEMENT,o=n=oa(n,Math.max(t,i)),a=e.components||1;return r=Math.max(r,i),n+=i*a,{name:e.name,type:e.type,components:a,offset:o}})),size:oa(n,Math.max(r,t)),alignment:t}}function oa(e,t){return Math.ceil(e/t)*t}class aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=n,e}}aa.prototype.bytesPerElement=4,ji(aa,"StructArrayLayout2i4");class sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.int16[i+0]=t,this.int16[i+1]=n,this.int16[i+2]=r,e}}sa.prototype.bytesPerElement=6,ji(sa,"StructArrayLayout3i6");class ua extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=n,this.int16[o+2]=r,this.int16[o+3]=i,e}}ua.prototype.bytesPerElement=8,ji(ua,"StructArrayLayout4i8");class ca extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const u=6*e,c=12*e,l=3*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.uint8[c+4]=r,this.uint8[c+5]=i,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[l+2]=s,e}}ca.prototype.bytesPerElement=12,ji(ca,"StructArrayLayout2i4ub1f12");class la extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=n,this.float32[o+2]=r,this.float32[o+3]=i,e}}la.prototype.bytesPerElement=16,ji(la,"StructArrayLayout4f16");class fa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=n,this.uint16[a+2]=r,this.uint16[a+3]=i,this.float32[s+2]=o,e}}fa.prototype.bytesPerElement=12,ji(fa,"StructArrayLayout4ui1f12");class ha extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=n,this.uint16[o+2]=r,this.uint16[o+3]=i,e}}ha.prototype.bytesPerElement=8,ji(ha,"StructArrayLayout4ui8");class da extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.int16[s+3]=i,this.int16[s+4]=o,this.int16[s+5]=a,e}}da.prototype.bytesPerElement=12,ji(da,"StructArrayLayout6i12");class pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,u,c,l,f){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,n,r,i,o,a,s,u,c,l,f)}emplace(e,t,n,r,i,o,a,s,u,c,l,f,h){const d=12*e;return this.int16[d+0]=t,this.int16[d+1]=n,this.int16[d+2]=r,this.int16[d+3]=i,this.uint16[d+4]=o,this.uint16[d+5]=a,this.uint16[d+6]=s,this.uint16[d+7]=u,this.int16[d+8]=c,this.int16[d+9]=l,this.int16[d+10]=f,this.int16[d+11]=h,e}}pa.prototype.bytesPerElement=24,ji(pa,"StructArrayLayout4i4ui4i24");class ya extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,n,r,i,o)}emplace(e,t,n,r,i,o,a){const s=10*e,u=5*e;return this.int16[s+0]=t,this.int16[s+1]=n,this.int16[s+2]=r,this.float32[u+2]=i,this.float32[u+3]=o,this.float32[u+4]=a,e}}ya.prototype.bytesPerElement=20,ji(ya,"StructArrayLayout3i3f20");class ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}ma.prototype.bytesPerElement=4,ji(ma,"StructArrayLayout1ul4");class ga extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,u,c,l,f,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,n,r,i,o,a,s,u,c,l,f,h)}emplace(e,t,n,r,i,o,a,s,u,c,l,f,h,d){const p=20*e,y=10*e;return this.int16[p+0]=t,this.int16[p+1]=n,this.int16[p+2]=r,this.int16[p+3]=i,this.int16[p+4]=o,this.float32[y+3]=a,this.float32[y+4]=s,this.float32[y+5]=u,this.float32[y+6]=c,this.int16[p+14]=l,this.uint32[y+8]=f,this.uint16[p+18]=h,this.uint16[p+19]=d,e}}ga.prototype.bytesPerElement=40,ji(ga,"StructArrayLayout5i4f1i1ul2ui40");class va extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,n,r,i,o,a)}emplace(e,t,n,r,i,o,a,s){const u=8*e;return this.int16[u+0]=t,this.int16[u+1]=n,this.int16[u+2]=r,this.int16[u+4]=i,this.int16[u+5]=o,this.int16[u+6]=a,this.int16[u+7]=s,e}}va.prototype.bytesPerElement=16,ji(va,"StructArrayLayout3i2i2i16");class ba extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.int16[s+6]=i,this.int16[s+7]=o,e}}ba.prototype.bytesPerElement=16,ji(ba,"StructArrayLayout2f1f2i16");class _a extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=12*e,a=3*e;return this.uint8[o+0]=t,this.uint8[o+1]=n,this.float32[a+1]=r,this.float32[a+2]=i,e}}_a.prototype.bytesPerElement=12,ji(_a,"StructArrayLayout2ub2f12");class wa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.float32[i+0]=t,this.float32[i+1]=n,this.float32[i+2]=r,e}}wa.prototype.bytesPerElement=12,ji(wa,"StructArrayLayout3f12");class xa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,n)}emplace(e,t,n,r){const i=3*e;return this.uint16[i+0]=t,this.uint16[i+1]=n,this.uint16[i+2]=r,e}}xa.prototype.bytesPerElement=6,ji(xa,"StructArrayLayout3ui6");class ka extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_){const w=this.length;return this.resize(w+1),this.emplace(w,e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_)}emplace(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_,w){const x=30*e,k=15*e,A=60*e;return this.int16[x+0]=t,this.int16[x+1]=n,this.int16[x+2]=r,this.float32[k+2]=i,this.float32[k+3]=o,this.uint16[x+8]=a,this.uint16[x+9]=s,this.uint32[k+5]=u,this.uint32[k+6]=c,this.uint32[k+7]=l,this.uint16[x+16]=f,this.uint16[x+17]=h,this.uint16[x+18]=d,this.float32[k+10]=p,this.float32[k+11]=y,this.uint8[A+48]=m,this.uint8[A+49]=g,this.uint8[A+50]=v,this.uint32[k+13]=b,this.int16[x+28]=_,this.uint8[A+58]=w,e}}ka.prototype.bytesPerElement=60,ji(ka,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Aa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M){const P=this.length;return this.resize(P+1),this.emplace(P,e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M)}emplace(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P){const B=38*e,C=19*e;return this.int16[B+0]=t,this.int16[B+1]=n,this.int16[B+2]=r,this.float32[C+2]=i,this.float32[C+3]=o,this.int16[B+8]=a,this.int16[B+9]=s,this.int16[B+10]=u,this.int16[B+11]=c,this.int16[B+12]=l,this.int16[B+13]=f,this.uint16[B+14]=h,this.uint16[B+15]=d,this.uint16[B+16]=p,this.uint16[B+17]=y,this.uint16[B+18]=m,this.uint16[B+19]=g,this.uint16[B+20]=v,this.uint16[B+21]=b,this.uint16[B+22]=_,this.uint16[B+23]=w,this.uint16[B+24]=x,this.uint16[B+25]=k,this.uint16[B+26]=A,this.uint16[B+27]=E,this.uint16[B+28]=I,this.uint32[C+15]=S,this.float32[C+16]=T,this.float32[C+17]=M,this.float32[C+18]=P,e}}Aa.prototype.bytesPerElement=76,ji(Aa,"StructArrayLayout3i2f6i15ui1ul3f76");class Ea extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}Ea.prototype.bytesPerElement=4,ji(Ea,"StructArrayLayout1f4");class Ia extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,n,r,i){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,n,r,i)}emplace(e,t,n,r,i,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=n,this.float32[a+2]=r,this.float32[a+3]=i,this.float32[a+4]=o,e}}Ia.prototype.bytesPerElement=20,ji(Ia,"StructArrayLayout5f20");class Sa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,n,r){const i=this.length;return this.resize(i+1),this.emplace(i,e,t,n,r)}emplace(e,t,n,r,i){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=n,this.uint16[o+3]=r,this.uint16[o+4]=i,e}}Sa.prototype.bytesPerElement=12,ji(Sa,"StructArrayLayout1ul3ui12");class Ta extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=n,e}}Ta.prototype.bytesPerElement=4,ji(Ta,"StructArrayLayout2ui4");class Ma extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Ma.prototype.bytesPerElement=2,ji(Ma,"StructArrayLayout1ui2");class Pa extends ra{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const n=this.length;return this.resize(n+1),this.emplace(n,e,t)}emplace(e,t,n){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=n,e}}Pa.prototype.bytesPerElement=8,ji(Pa,"StructArrayLayout2f8");class Ba extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Ba.prototype.size=40;class Ca extends ga{get(e){return new Ba(this,e)}}ji(Ca,"CollisionBoxArray");class Oa extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Oa.prototype.size=60;class Da extends ka{get(e){return new Oa(this,e)}}ji(Da,"PlacedSymbolArray");class Ra extends na{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(e){this._structArray.uint32[this._pos4+15]=e}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}Ra.prototype.size=76;class La extends Aa{get(e){return new Ra(this,e)}}ji(La,"SymbolInstanceArray");class za extends Ea{getoffsetX(e){return this.float32[1*e+0]}}ji(za,"GlyphOffsetArray");class Za extends aa{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}ji(Za,"SymbolLineVertexArray");class Na extends na{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Na.prototype.size=12;class Ua extends Sa{get(e){return new Na(this,e)}}ji(Ua,"FeatureIndexArray");class Fa extends Ta{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}ji(Fa,"FillExtrusionCentroidArray");const ja=ia([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),Wa=ia([{name:"a_dash",components:4,type:"Uint16"}]);var Va={},Ka={get exports(){return Va},set exports(e){Va=e}},Ga={};({get exports(){return Ga},set exports(e){Ga=e}}).exports=function(e,t){var n,r,i,o,a,s,u,c;for(r=e.length-(n=3&e.length),i=t,a=3432918353,s=461845907,c=0;c<r;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,i=27492+(65535&(o=5*(65535&(i=(i^=u=(65535&(u=(u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295)<<13|i>>>19))+((5*(i>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(u=0,n){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:i^=u=(65535&(u=(u=(65535&(u^=255&e.charCodeAt(c)))*a+(((u>>>16)*a&65535)<<16)&4294967295)<<15|u>>>17))*s+(((u>>>16)*s&65535)<<16)&4294967295}return i^=e.length,i=2246822507*(65535&(i^=i>>>16))+((2246822507*(i>>>16)&65535)<<16)&4294967295,i=3266489909*(65535&(i^=i>>>13))+((3266489909*(i>>>16)&65535)<<16)&4294967295,(i^=i>>>16)>>>0};var Ha={};({get exports(){return Ha},set exports(e){Ha=e}}).exports=function(e,t){for(var n,r=e.length,i=t^r,o=0;r>=4;)n=1540483477*(65535&(n=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(n>>>16)&65535)<<16),i=1540483477*(65535&i)+((1540483477*(i>>>16)&65535)<<16)^(n=1540483477*(65535&(n^=n>>>24))+((1540483477*(n>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:i^=(255&e.charCodeAt(o+2))<<16;case 2:i^=(255&e.charCodeAt(o+1))<<8;case 1:i=1540483477*(65535&(i^=255&e.charCodeAt(o)))+((1540483477*(i>>>16)&65535)<<16)}return i=1540483477*(65535&(i^=i>>>13))+((1540483477*(i>>>16)&65535)<<16),(i^=i>>>15)>>>0};var qa=Ga,Ya=Ha;Ka.exports=qa,Va.murmur3=qa,Va.murmur2=Ya;class Xa{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(e,t,n,r){this.ids.push(Qa(e)),this.positions.push(t,n,r)}getPositions(e){const t=Qa(e);let n=0,r=this.ids.length-1;for(;n<r;){const e=n+r>>1;this.ids[e]>=t?r=e:n=e+1}const i=[];for(;this.ids[n]===t;)i.push({index:this.positions[3*n],start:this.positions[3*n+1],end:this.positions[3*n+2]}),n++;return i}static serialize(e,t){const n=new Float64Array(e.ids),r=new Uint32Array(e.positions);return $a(n,r,0,n.length-1),t&&t.push(n.buffer,r.buffer),{ids:n,positions:r}}static deserialize(e){const t=new Xa;return t.ids=e.ids,t.positions=e.positions,t.indexed=!0,t}}function Qa(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Va(String(e))}function $a(e,t,n,r){for(;n<r;){const i=e[n+r>>1];let o=n-1,a=r+1;for(;;){do{o++}while(e[o]<i);do{a--}while(e[a]>i);if(o>=a)break;Ja(e,o,a),Ja(t,3*o,3*a),Ja(t,3*o+1,3*a+1),Ja(t,3*o+2,3*a+2)}a-n<r-a?($a(e,t,n,a),n=a+1):($a(e,t,a+1,r),r=a)}}function Ja(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}ji(Xa,"FeaturePositionMap");class es{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}}class ts extends es{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ns extends es{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3])))}}class rs extends es{constructor(e){super(e),this.current=St.transparent}set(e,t,n){this.fetchUniformLocation(e,t)&&(n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a)))}}const is=new Float32Array(16),os=new Float32Array(9),as=new Float32Array(4);function ss(e){return[ea(255*e.r,255*e.g),ea(255*e.b,255*e.a)]}class us{constructor(e,t,n){this.value=e,this.uniformNames=t.map((e=>`u_${e}`)),this.type=n}setUniform(e,t,n,r,i){t.set(e,i,r.constantOr(this.value))}getBinding(e,t){return"color"===this.type?new rs(e):new ts(e)}}class cs{constructor(e,t){this.uniformNames=t.map((e=>`u_${e}`)),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(e){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br)}setUniform(e,t,n,r,i){const o="u_pattern"===i||"u_dash"===i?this.pattern:"u_pixel_ratio"===i?this.pixelRatio:null;o&&t.set(e,i,o)}getBinding(e,t){return"u_pattern"===t||"u_dash"===t?new ns(e):new ts(e)}}class ls{constructor(e,t,n,r){this.expression=e,this.type=n,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?2:1,offset:0}))),this.paintVertexArray=new r}populatePaintArray(e,t,n,r,i,o){const a=this.paintVertexArray.length,s=this.expression.evaluate(new Fo(0),t,{},i,r,o);this.paintVertexArray.resize(e),this._setPaintValue(a,e,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:0},n,r,void 0,i);this._setPaintValue(e,t,o)}_setPaintValue(e,t,n){if("color"===this.type){const r=ss(n);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,r[0],r[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,n);this.maxValue=Math.max(this.maxValue,Math.abs(n))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class fs{constructor(e,t,n,r,i,o){this.expression=e,this.uniformNames=t.map((e=>`u_${e}_t`)),this.type=n,this.useIntegerZoom=r,this.zoom=i,this.maxValue=0,this.paintVertexAttributes=t.map((e=>({name:`a_${e}`,type:"Float32",components:"color"===n?4:2,offset:0}))),this.paintVertexArray=new o}populatePaintArray(e,t,n,r,i,o){const a=this.expression.evaluate(new Fo(this.zoom),t,{},i,r,o),s=this.expression.evaluate(new Fo(this.zoom+1),t,{},i,r,o),u=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(u,e,a,s)}updatePaintArray(e,t,n,r,i){const o=this.expression.evaluate({zoom:this.zoom},n,r,void 0,i),a=this.expression.evaluate({zoom:this.zoom+1},n,r,void 0,i);this._setPaintValue(e,t,o,a)}_setPaintValue(e,t,n,r){if("color"===this.type){const i=ss(n),o=ss(r);for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],o[0],o[1])}else{for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n,r);this.maxValue=Math.max(this.maxValue,Math.abs(n),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,n,r,i){const o=this.useIntegerZoom?Math.floor(n.zoom):n.zoom,a=A(this.expression.interpolationFactor(o,this.zoom,this.zoom+1),0,1);t.set(e,i,a)}getBinding(e,t){return new ts(e)}}class hs{constructor(e,t,n,r,i){this.expression=e,this.layerId=i,this.paintVertexAttributes=("array"===n?Wa:ja).members;for(let o=0;o<t.length;++o);this.paintVertexArray=new r}populatePaintArray(e,t,n){const r=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(r,e,t.patterns&&t.patterns[this.layerId],n)}updatePaintArray(e,t,n,r,i,o){this._setPaintValues(e,t,n.patterns&&n.patterns[this.layerId],o)}_setPaintValues(e,t,n,r){if(!r||!n)return;const i=r[n];if(!i)return;const{tl:o,br:a,pixelRatio:s}=i;for(let u=e;u<t;u++)this.paintVertexArray.emplace(u,o[0],o[1],a[0],a[1],s)}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ds{constructor(e,t,n=(()=>!0)){this.binders={},this._buffers=[];const r=[];for(const i in e.paint._values){if(!n(i))continue;const o=e.paint.get(i);if(!(o instanceof qo&&Br(o.property.specification)))continue;const a=ms(i,e.type),s=o.value,u=o.property.specification.type,c=o.property.useIntegerZoom,l="line-dasharray"===i||i.endsWith("pattern"),f="line-dasharray"===i&&"constant"!==e.layout.get("line-cap").value.kind;if("constant"!==s.kind||f)if("source"===s.kind||f||l){const t=bs(i,u,"source");this.binders[i]=l?new hs(s,a,u,t,e.id):new ls(s,a,u,t),r.push(`/a_${i}`)}else{const e=bs(i,u,"composite");this.binders[i]=new fs(s,a,u,c,t,e),r.push(`/z_${i}`)}else this.binders[i]=l?new cs(s.value,a):new us(s.value,a,u),r.push(`/u_${i}`)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof ls||t instanceof fs?t.maxValue:0}populatePaintArrays(e,t,n,r,i,o){for(const a in this.binders){const s=this.binders[a];(s instanceof ls||s instanceof fs||s instanceof hs)&&s.populatePaintArray(e,t,n,r,i,o)}}setConstantPatternPositions(e){for(const t in this.binders){const n=this.binders[t];n instanceof cs&&n.setConstantPatternPositions(e)}}updatePaintArrays(e,t,n,r,i,o){let a=!1;for(const s in e){const u=t.getPositions(s);for(const t of u){const u=n.feature(t.index);for(const n in this.binders){const c=this.binders[n];if((c instanceof ls||c instanceof fs||c instanceof hs)&&!0===c.expression.isStateDependent){const l=r.paint.get(n);c.expression=l.value,c.updatePaintArray(t.start,t.end,u,e[s],i,o),a=!0}}}}return a}defines(){const e=[];for(const t in this.binders){const n=this.binders[t];(n instanceof us||n instanceof cs)&&e.push(...n.uniformNames.map((e=>`#define HAS_UNIFORM_${e}`)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof ls||n instanceof fs||n instanceof hs)for(let t=0;t<n.paintVertexAttributes.length;t++)e.push(n.paintVertexAttributes[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const n=this.binders[t];if(n instanceof us||n instanceof cs||n instanceof fs)for(const t of n.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const n in this.binders){const r=this.binders[n];if(r instanceof us||r instanceof cs||r instanceof fs)for(const i of r.uniformNames)t.push({name:i,property:n,binding:r.getBinding(e,i)})}return t}setUniforms(e,t,n,r,i){for(const{name:o,property:a,binding:s}of n)this.binders[a].setUniform(e,s,i,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof ls||t instanceof fs||t instanceof hs)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer)}}upload(e){for(const t in this.binders){const n=this.binders[t];(n instanceof ls||n instanceof fs||n instanceof hs)&&n.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof ls||t instanceof fs||t instanceof hs)&&t.destroy()}}}class ps{constructor(e,t,n=(()=>!0)){this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new ds(r,t,n);this.needsUpload=!1,this._featureMap=new Xa,this._bufferOffset=0}populatePaintArrays(e,t,n,r,i,o,a){for(const s in this.programConfigurations)this.programConfigurations[s].populatePaintArrays(e,t,r,i,o,a);void 0!==t.id&&this._featureMap.add(t.id,n,this._bufferOffset,e),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,n,r,i){for(const o of n)this.needsUpload=this.programConfigurations[o.id].updatePaintArrays(e,this._featureMap,t,o,r,i)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const ys={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function ms(e,t){return ys[e]||[e.replace(`${t}-`,"").replace(/-/g,"_")]}const gs={"line-pattern":{source:fa,composite:fa},"fill-pattern":{source:fa,composite:fa},"fill-extrusion-pattern":{source:fa,composite:fa},"line-dasharray":{source:ha,composite:ha}},vs={color:{source:Pa,composite:la},number:{source:Ea,composite:Pa}};function bs(e,t,n){const r=gs[e];return r&&r[n]||vs[t][n]}ji(us,"ConstantBinder"),ji(cs,"PatternConstantBinder"),ji(ls,"SourceExpressionBinder"),ji(hs,"PatternCompositeBinder"),ji(fs,"CompositeExpressionBinder"),ji(ds,"ProgramConfiguration",{omit:["_buffers"]}),ji(ps,"ProgramConfigurationSet");const _s="-transition";class ws extends Ye{constructor(e,t){if(super(),this.id=e.id,this.type=e.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,"custom"!==e.type&&(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,"background"!==e.type&&"sky"!==e.type&&(this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter),t.layout&&(this._unevaluatedLayout=new Ho(t.layout)),t.paint)){this._transitionablePaint=new Vo(t.paint);for(const t in e.paint)this.setPaintProperty(t,e.paint[t],{validate:!1});for(const t in e.layout)this.setLayoutProperty(t,e.layout[t],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Yo(t.paint)}}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t,n={}){null!=t&&this._validate(Li,`layers.${this.id}.layout.${e}`,e,t,n)||("visibility"!==e?this._unevaluatedLayout.setValue(e,t):this.visibility=t)}getPaintProperty(e){return L(e,_s)?this._transitionablePaint.getTransition(e.slice(0,-_s.length)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t,n={}){if(null!=t&&this._validate(Ri,`layers.${this.id}.paint.${e}`,e,t,n))return!1;if(L(e,_s))return this._transitionablePaint.setTransition(e.slice(0,-_s.length),t||void 0),!1;{const n=this._transitionablePaint._values[e],r=n.value.isDataDriven(),i=n.value;this._transitionablePaint.setValue(e,t),this._handleSpecialPaintPropertyUpdate(e);const o=this._transitionablePaint._values[e].value,a=o.isDataDriven(),s=L(e,"pattern")||"line-dasharray"===e;return a||r||s||this._handleOverridablePaintPropertyUpdate(e,i,o)}}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getProgramConfiguration(e){return null}_handleOverridablePaintPropertyUpdate(e,t,n){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){const e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(e.layout=e.layout||{},e.layout.visibility=this.visibility),Z(e,((e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)))}_validate(e,t,n,r,i={}){return(!i||!1!==i.validate)&&Zi(this,e.call(Di,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:Xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof qo&&Br(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=ai(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const xs=ia([{name:"a_pos",components:2,type:"Int16"}],4),ks=ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class As{constructor(e=[]){this.segments=e}prepareSegment(e,t,n,r){let i=this.segments[this.segments.length-1];return e>As.MAX_VERTEX_ARRAY_LENGTH&&F(`Max vertices per segment is ${As.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${e}`),(!i||i.vertexLength+e>As.MAX_VERTEX_ARRAY_LENGTH||i.sortKey!==r)&&(i={vertexOffset:t.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},void 0!==r&&(i.sortKey=r),this.segments.push(i)),i}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,n,r){return new As([{vertexOffset:e,primitiveOffset:t,vertexLength:n,primitiveLength:r,vaos:{},sortKey:0}])}}As.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ji(As,"SegmentVector");var Es=8192;class Is{constructor(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))}setNorthEast(e){return this._ne=e instanceof nc?new nc(e.lng,e.lat):nc.convert(e),this}setSouthWest(e){return this._sw=e instanceof nc?new nc(e.lng,e.lat):nc.convert(e),this}extend(e){const t=this._sw,n=this._ne;let r,i;if(e instanceof nc)r=e,i=e;else{if(!(e instanceof Is))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(Is.convert(e)):this.extend(nc.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&e.hasOwnProperty("lon")?this.extend(nc.convert(e)):this;if(r=e._sw,i=e._ne,!r||!i)return this}return t||n?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),n.lng=Math.max(i.lng,n.lng),n.lat=Math.max(i.lat,n.lat)):(this._sw=new nc(r.lng,r.lat),this._ne=new nc(i.lng,i.lat)),this}getCenter(){return new nc((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new nc(this.getWest(),this.getNorth())}getSouthEast(){return new nc(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:n}=nc.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=n&&n<=this._ne.lat&&r}static convert(e){return!e||e instanceof Is?e:new Is(e)}}var Ss=1e-6,Ts="undefined"!=typeof Float32Array?Float32Array:Array;function Ms(){var e=new Ts(9);return Ts!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ps(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=n[0],d=n[1],p=n[2],y=n[3],m=n[4],g=n[5],v=n[6],b=n[7],_=n[8];return e[0]=h*r+d*a+p*c,e[1]=h*i+d*s+p*l,e[2]=h*o+d*u+p*f,e[3]=y*r+m*a+g*c,e[4]=y*i+m*s+g*l,e[5]=y*o+m*u+g*f,e[6]=v*r+b*a+_*c,e[7]=v*i+b*s+_*l,e[8]=v*o+b*u+_*f,e}function Bs(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cs(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8],f=t[9],h=t[10],d=t[11],p=t[12],y=t[13],m=t[14],g=t[15],v=n*s-r*a,b=n*u-i*a,_=n*c-o*a,w=r*u-i*s,x=r*c-o*s,k=i*c-o*u,A=l*y-f*p,E=l*m-h*p,I=l*g-d*p,S=f*m-h*y,T=f*g-d*y,M=h*g-d*m,P=v*M-b*T+_*S+w*I-x*E+k*A;return P?(e[0]=(s*M-u*T+c*S)*(P=1/P),e[1]=(i*T-r*M-o*S)*P,e[2]=(y*k-m*x+g*w)*P,e[3]=(h*x-f*k-d*w)*P,e[4]=(u*I-a*M-c*E)*P,e[5]=(n*M-i*I+o*E)*P,e[6]=(m*_-p*k-g*b)*P,e[7]=(l*k-h*_+d*b)*P,e[8]=(a*T-s*I+c*A)*P,e[9]=(r*I-n*T-o*A)*P,e[10]=(p*x-y*_+g*v)*P,e[11]=(f*_-l*x-d*v)*P,e[12]=(s*E-a*S-u*A)*P,e[13]=(n*S-r*E+i*A)*P,e[14]=(y*b-p*w-m*v)*P,e[15]=(l*w-f*b+h*v)*P,e):null}function Os(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],y=t[12],m=t[13],g=t[14],v=t[15],b=n[0],_=n[1],w=n[2],x=n[3];return e[0]=b*r+_*s+w*f+x*y,e[1]=b*i+_*u+w*h+x*m,e[2]=b*o+_*c+w*d+x*g,e[3]=b*a+_*l+w*p+x*v,e[4]=(b=n[4])*r+(_=n[5])*s+(w=n[6])*f+(x=n[7])*y,e[5]=b*i+_*u+w*h+x*m,e[6]=b*o+_*c+w*d+x*g,e[7]=b*a+_*l+w*p+x*v,e[8]=(b=n[8])*r+(_=n[9])*s+(w=n[10])*f+(x=n[11])*y,e[9]=b*i+_*u+w*h+x*m,e[10]=b*o+_*c+w*d+x*g,e[11]=b*a+_*l+w*p+x*v,e[12]=(b=n[12])*r+(_=n[13])*s+(w=n[14])*f+(x=n[15])*y,e[13]=b*i+_*u+w*h+x*m,e[14]=b*o+_*c+w*d+x*g,e[15]=b*a+_*l+w*p+x*v,e}function Ds(e,t,n){var r,i,o,a,s,u,c,l,f,h,d,p,y=n[0],m=n[1],g=n[2];return t===e?(e[12]=t[0]*y+t[4]*m+t[8]*g+t[12],e[13]=t[1]*y+t[5]*m+t[9]*g+t[13],e[14]=t[2]*y+t[6]*m+t[10]*g+t[14],e[15]=t[3]*y+t[7]*m+t[11]*g+t[15]):(i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],l=t[7],f=t[8],h=t[9],d=t[10],p=t[11],e[0]=r=t[0],e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=u,e[6]=c,e[7]=l,e[8]=f,e[9]=h,e[10]=d,e[11]=p,e[12]=r*y+s*m+f*g+t[12],e[13]=i*y+u*m+h*g+t[13],e[14]=o*y+c*m+d*g+t[14],e[15]=a*y+l*m+p*g+t[15]),e}function Rs(e,t,n){var r=n[0],i=n[1],o=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ls(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[4],a=t[5],s=t[6],u=t[7],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+c*r,e[5]=a*i+l*r,e[6]=s*i+f*r,e[7]=u*i+h*r,e[8]=c*i-o*r,e[9]=l*i-a*r,e[10]=f*i-s*r,e[11]=h*i-u*r,e}function zs(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[8],l=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-c*r,e[1]=a*i-l*r,e[2]=s*i-f*r,e[3]=u*i-h*r,e[8]=o*r+c*i,e[9]=a*r+l*i,e[10]=s*r+f*i,e[11]=u*r+h*i,e}function Zs(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ns(e,t,n){var r,i,o,a=n[0],s=n[1],u=n[2],c=Math.hypot(a,s,u);return c<Ss?null:(a*=c=1/c,s*=c,u*=c,r=Math.sin(t),i=Math.cos(t),e[0]=a*a*(o=1-i)+i,e[1]=s*a*o+u*r,e[2]=u*a*o-s*r,e[3]=0,e[4]=a*s*o-u*r,e[5]=s*s*o+i,e[6]=u*s*o+a*r,e[7]=0,e[8]=a*u*o+s*r,e[9]=s*u*o-a*r,e[10]=u*u*o+i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var Us=Os;function Fs(){var e=new Ts(3);return Ts!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function js(e){var t=new Ts(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function Ws(e){return Math.hypot(e[0],e[1],e[2])}function Vs(e,t,n){var r=new Ts(3);return r[0]=e,r[1]=t,r[2]=n,r}function Ks(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function Gs(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function Hs(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function qs(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Ys(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Xs(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function Qs(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function $s(e,t){var n=t[0],r=t[1],i=t[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Js(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function eu(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[0],s=n[1],u=n[2];return e[0]=i*u-o*s,e[1]=o*a-r*u,e[2]=r*s-i*a,e}function tu(e,t,n){var r=t[0],i=t[1],o=t[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return e[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/(a=a||1),e[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,e[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,e}function nu(e,t,n){var r=n[0],i=n[1],o=n[2],a=t[0],s=t[1],u=t[2],c=i*u-o*s,l=o*a-r*u,f=r*s-i*a,h=i*f-o*l,d=o*c-r*f,p=r*l-i*c,y=2*n[3];return l*=y,f*=y,d*=2,p*=2,e[0]=a+(c*=y)+(h*=2),e[1]=s+l+d,e[2]=u+f+p,e}var ru,iu=Gs,ou=Hs,au=Ws;function su(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}function uu(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=r*a,e[2]=i*a,e[3]=o*a,e}function cu(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,e[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,e[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,e[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,e}function lu(){var e=new Ts(4);return Ts!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function fu(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function hu(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+a*s,e[1]=i*u+o*s,e[2]=o*u-i*s,e[3]=a*u-r*s,e}function du(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u-o*s,e[1]=i*u+a*s,e[2]=o*u+r*s,e[3]=a*u-i*s,e}Fs(),ru=new Ts(4),Ts!=Float32Array&&(ru[0]=0,ru[1]=0,ru[2]=0,ru[3]=0);var pu=uu;Fs(),Vs(1,0,0),Vs(0,1,0),lu(),lu(),Ms();const yu=ia([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:mu}=yu,gu=ia([{name:"a_pos_3",components:3,type:"Int16"}]);var vu=ia([{name:"a_pos",type:"Int16",components:2}]);class bu{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,n){const r=Js(t,this.dir);if(Math.abs(r)<1e-6)return!1;const i=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return n[0]=this.pos[0]+this.dir[0]*i,n[1]=this.pos[1]+this.dir[1]*i,n[2]=this.pos[2]+this.dir[2]*i,!0}closestPointOnSphere(e,t,n){if(function(e,t){var n=e[0],r=e[1],i=e[2],o=t[0],a=t[1],s=t[2];return Math.abs(n-o)<=Ss*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=Ss*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=Ss*Math.max(1,Math.abs(i),Math.abs(s))}(this.pos,e)||0===t)return n[0]=n[1]=n[2]=0,!1;const[r,i,o]=this.dir,a=this.pos[0]-e[0],s=this.pos[1]-e[1],u=this.pos[2]-e[2],c=r*r+i*i+o*o,l=2*(a*r+s*i+u*o),f=l*l-4*c*(a*a+s*s+u*u-t*t);if(f<0){const e=Math.max(-l/2,0),c=a+r*e,f=s+i*e,h=u+o*e,d=Math.hypot(c,f,h);return n[0]=c*t/d,n[1]=f*t/d,n[2]=h*t/d,!1}{const e=(-l-Math.sqrt(f))/(2*c);if(e<0){const e=Math.hypot(a,s,u);return n[0]=a*t/e,n[1]=s*t/e,n[2]=u*t/e,!1}return n[0]=a+r*e,n[1]=s+i*e,n[2]=u+o*e,!0}}}class _u{constructor(e,t,n,r,i){this.TL=e,this.TR=t,this.BR=n,this.BL=r,this.horizon=i}static fromInvProjectionMatrix(e,t,n){const r=[-1,1,1],i=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=tu(r,r,e),u=tu(i,i,e),c=tu(o,o,e),l=tu(a,a,e);return new _u(s,u,c,l,t/n)}}class wu{constructor(e,t){this.points=e,this.planes=t}static fromInvProjectionMatrix(e,t,n,r){const i=Math.pow(2,n),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((n=>{const o=cu([],n,e),a=1/o[3]/t*i;return function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e}(o,o,[a,a,r?1/o[3]:a,a])})),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((e=>{const t=$s([],eu([],iu([],o[e[0]],o[e[1]]),iu([],o[e[2]],o[e[1]]))),n=-Js(t,o[e[1]]);return t.concat(n)}));return new wu(o,a)}}class xu{static fromPoints(e){const t=[1/0,1/0,1/0],n=[-1/0,-1/0,-1/0];for(const r of e)qs(t,t,r),Ys(n,n,r);return new xu(t,n)}static applyTransform(e,t){const n=e.getCorners();for(let r=0;r<n.length;++r)tu(n[r],n[r],t);return xu.fromPoints(n)}constructor(e,t){this.min=e,this.max=t,this.center=Xs([],Ks([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],n=js(this.min),r=js(this.max);for(let i=0;i<t.length;i++)n[i]=t[i]?this.min[i]:this.center[i],r[i]=t[i]?this.center[i]:this.max[i];return r[2]=this.max[2],new xu(n,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){const t=this.getCorners();let n=!0;for(let r=0;r<e.planes.length;r++){const i=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=Js(i,t[e])+i[3]>=0;if(0===o)return 0;o!==t.length&&(n=!1)}if(n)return 2;for(let r=0;r<3;r++){let t=Number.MAX_VALUE,n=-Number.MAX_VALUE;for(let i=0;i<e.points.length;i++){const o=e.points[i][r]-this.min[r];t=Math.min(t,o),n=Math.max(n,o)}if(n<0||t>this.max[r]-this.min[r])return 0}return 1}}const ku=Es/Math.PI/2,Au=64,Eu=[Au,32,16],Iu=-ku,Su=ku,Tu=[new xu([Iu,Iu,Iu],[Su,Su,Su]),new xu([Iu,Iu,Iu],[0,0,Su]),new xu([0,Iu,Iu],[Su,0,Su]),new xu([Iu,0,Iu],[0,Su,Su]),new xu([0,0,Iu],[Su,Su,Su])];function Mu(e){return e*ku/ec}function Pu(e,t,n,r=!0){const i=Xs([],e._camera.position,e.worldSize),o=[t,n,1,1];cu(o,o,e.pixelMatrixInverse),su(o,o,1/o[3]);const a=$s([],iu([],o,i)),s=e.globeMatrix,u=[s[12],s[13],s[14]],c=iu([],u,i),l=Ws(c),f=$s([],c),h=e.worldSize/(2*Math.PI),d=Js(f,a),p=Math.asin(h/l);if(p<Math.acos(d)){if(!r)return null;const e=[],t=[];Xs(e,a,l/d),$s(t,iu(t,e,c)),$s(a,Ks(a,c,Xs(a,t,Math.tan(p)*l)))}const y=[];new bu(i,a).closestPointOnSphere(u,h,y);const m=$s([],Y(s,0)),g=$s([],Y(s,1)),v=$s([],Y(s,2)),_=Js(m,y),w=Js(g,y),x=Js(v,y),k=b(Math.asin(-w/h));let E=b(Math.atan2(_,x));E=e.center.lng+function(e,t){const n=(t-e+180)%360-180;return n<-180?n+360:n}(e.center.lng,E);const I=ic(E),S=A(oc(k),0,1);return new hc(I,S)}class Bu{constructor(e,t,n){this.a=iu([],e,n),this.b=iu([],t,n),this.center=n;const r=$s([],this.a),i=$s([],this.b);this.angle=Math.acos(Js(r,i))}}function Cu(e,t){if(0===e.angle)return null;let n;return n=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),n<0||n>1?null:function(e,t,n,r){const i=Math.sin(n);return e*(Math.sin((1-r)*n)/i)+t*(Math.sin(r*n)/i)}(e.a[t],e.b[t],e.angle,A(n,0,1))+e.center[t]}function Ou(e){if(e.z<=1)return Tu[e.z+2*e.y+e.x];const t=Nu(Zu(e));return xu.fromPoints(t)}function Du(e,t,n){return Xs(e,e,1-n),Qs(e,e,t,n)}function Ru(e,t){const n=qu(t.zoom);if(0===n)return Ou(e);const r=Zu(e),i=Nu(r),o=ic(r.getWest())*t.worldSize,a=ic(r.getEast())*t.worldSize,s=oc(r.getNorth())*t.worldSize,u=oc(r.getSouth())*t.worldSize,c=[o,s,0],l=[a,s,0],f=[o,u,0],h=[a,u,0],d=Cs([],t.globeMatrix);return tu(c,c,d),tu(l,l,d),tu(f,f,d),tu(h,h,d),i[0]=Du(i[0],f,n),i[1]=Du(i[1],h,n),i[2]=Du(i[2],l,n),i[3]=Du(i[3],c,n),xu.fromPoints(i)}function Lu(e,t,n){for(const r of e)tu(r,r,t),Xs(r,r,n)}function zu(e,t,n){const r=t/e.worldSize,i=e.globeMatrix;if(n.z<=1){const e=Ou(n).getCorners();return Lu(e,i,r),xu.fromPoints(e)}const o=Zu(n),a=Nu(o);Lu(a,i,r);const s=Number.MAX_VALUE,u=[-s,-s,-s],c=[s,s,s];if(o.contains(e.center)){for(const e of a)qs(c,c,e),Ys(u,u,e);u[2]=0;const t=e.point,n=[t.x*r,t.y*r,0];return qs(c,c,n),Ys(u,u,n),new xu(c,u)}const l=[i[12]*r,i[13]*r,i[14]*r],f=o.getCenter(),h=A(e.center.lat,-lc,lc),d=A(f.lat,-lc,lc),p=ic(e.center.lng),y=oc(h);let m=p-ic(f.lng);const g=y-oc(d);m>.5?m-=1:m<-.5&&(m+=1);let b=0;Math.abs(m)>Math.abs(g)?b=m>=0?1:3:(b=g>=0?0:2,Qs(l,l,[i[4]*r,i[5]*r,i[6]*r],-Math.sin(v(g>=0?o.getSouth():o.getNorth()))*ku));const _=a[b],w=a[(b+1)%4],x=new Bu(_,w,l),k=[Cu(x,0)||_[0],Cu(x,1)||_[1],Cu(x,2)||_[2]],E=qu(e.zoom);if(E>0){const r=function({x:e,y:t,z:n},r,i,o,a){const s=1/(1<<n);let u=e*s,c=u+s,l=t*s,f=l+s,h=0;const d=(u+c)/2-o;return d>.5?h=-1:d<-.5&&(h=1),u=((u+h)*r-(o*=r))*i+o,c=((c+h)*r-o)*i+o,l=(l*r-(a*=r))*i+a,f=(f*r-a)*i+a,[[u,f,0],[c,f,0],[c,l,0],[u,l,0]]}(n,t,e._pixelsPerMercatorPixel,p,y);for(let e=0;e<a.length;e++)Du(a[e],r[e],E);const i=Ks([],r[b],r[(b+1)%4]);Xs(i,i,.5),Du(k,i,E)}for(const v of a)qs(c,c,v),Ys(u,u,v);return c[2]=Math.min(_[2],w[2]),qs(c,c,k),Ys(u,u,k),new xu(c,u)}function Zu({x:e,y:t,z:n}){const r=1/(1<<n),i=new nc(sc(e*r),uc((t+1)*r)),o=new nc(sc((e+1)*r),uc(t*r));return new Is(i,o)}function Nu(e){const t=v(e.getNorth()),n=v(e.getSouth()),r=Math.cos(t),i=Math.cos(n),o=Math.sin(t),a=Math.sin(n),s=e.getWest(),u=e.getEast();return[Uu(i,a,s),Uu(i,a,u),Uu(r,o,u),Uu(r,o,s)]}function Uu(e,t,n,r=ku){return n=v(n),[e*Math.sin(n)*r,-t*r,e*Math.cos(n)*r]}function Fu(e,t,n){return Uu(Math.cos(v(e)),Math.sin(v(e)),t,n)}function ju(e,t,n,r){const i=1<<n.z,o=(e/Es+n.x)/i;return Fu(uc((t/Es+n.y)/i),sc(o),r)}function Wu({min:e,max:t}){return 16383/Math.max(t[0]-e[0],t[1]-e[1],t[2]-e[2])}const Vu=new Float64Array(16);function Ku(e){const t=Wu(e),n=Zs(Vu,[t,t,t]);return Ds(n,n,((r=[])[0]=-(i=e.min)[0],r[1]=-i[1],r[2]=-i[2],r));var r,i}function Gu(e){const t=(r=e.min,(n=Vu)[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=1,n[6]=0,n[7]=0,n[8]=0,n[9]=0,n[10]=1,n[11]=0,n[12]=r[0],n[13]=r[1],n[14]=r[2],n[15]=1,n);var n,r;const i=1/Wu(e);return Rs(t,t,[i,i,i])}function Hu(e,t,n,r,i){const o=function(e){const t=Es/(2*Math.PI);return e/(2*Math.PI)/t}(n),a=[e,t,-n/(2*Math.PI)],s=Bs(new Float64Array(16));return Ds(s,s,a),Rs(s,s,[o,o,o]),Ls(s,s,v(-i)),zs(s,s,v(-r)),s}function qu(e){return E(5,6,e)}function Yu(e,t){const n=Fu(t.lat,t.lng),r=function(e){const t=Fu(e._center.lat,e._center.lng);let n=eu([],Vs(0,1,0),t);const r=Ns([],-e.angle,t);n=tu(n,n,r),Ns(r,-e._pitch,n);const i=$s([],t);return Xs(i,i,Mu(e.cameraToCenterDistance/e.pixelsPerMeter)),tu(i,i,r),Ks([],t,i)}(e);return a=(i=Gs([],r,n))[0],s=i[1],u=i[2],c=(o=n)[0],l=o[1],f=o[2],d=(h=Math.sqrt(a*a+s*s+u*u)*Math.sqrt(c*c+l*l+f*f))&&Js(i,o)/h,Math.acos(Math.min(Math.max(d,-1),1));var i,o,a,s,u,c,l,f,h,d}function Xu(e,t){return Yu(e,t)>Math.PI/2*1.01}const Qu=v(85),$u=Math.cos(Qu),Ju=Math.sin(Qu),ec=6371008.8,tc=2*Math.PI*ec;class nc{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error(`Invalid LngLat object: (${e}, ${t})`);if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new nc(I(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(e){const t=Math.PI/180,n=this.lat*t,r=e.lat*t,i=Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return ec*Math.acos(Math.min(i,1))}toBounds(e=0){const t=360*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return new Is(new nc(this.lng-n,this.lat-t),new nc(this.lng+n,this.lat+t))}toEcef(e){const t=Mu(e);return Fu(this.lat,this.lng,ku+t)}static convert(e){if(e instanceof nc)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new nc(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new nc(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function rc(e){return tc*Math.cos(e*Math.PI/180)}function ic(e){return(180+e)/360}function oc(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function ac(e,t){return e/rc(t)}function sc(e){return 360*e-180}function uc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function cc(e,t){return e*rc(uc(t))}const lc=85.051129;function fc(e){return 1/Math.cos(e*Math.PI/180)}class hc{constructor(e,t,n=0){this.x=+e,this.y=+t,this.z=+n}static fromLngLat(e,t=0){const n=nc.convert(e);return new hc(ic(n.lng),oc(n.lat),ac(t,n.lat))}toLngLat(){return new nc(sc(this.x),uc(this.y))}toAltitude(){return cc(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/tc*fc(uc(this.y))}}function dc(e,t,n,r,i,o,a,s,u){const c=(t+r)/2,l=(n+i)/2,f=new p(c,l);s(f),function(e,t,n,r,i,o){const a=n-i,s=r-o;return Math.abs((r-t)*a-(n-e)*s)/Math.hypot(a,s)}(f.x,f.y,o.x,o.y,a.x,a.y)>=u?(dc(e,t,n,c,l,o,f,s,u),dc(e,c,l,r,i,f,a,s,u)):e.push(a)}function pc(e,t,n){let r=e[0],i=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const u=e[s],{x:c,y:l}=u;t(u),dc(a,i,o,c,l,r,u,t,n),i=c,o=l,r=u}return a}function yc(e,t,n,r){if(r(t,n)){const i=t.add(n)._mult(.5);yc(e,t,i,r),yc(e,i,n,r)}else e.push(n)}function mc(e,t){let n=e[0];const r=[n];for(let i=1;i<e.length;i++){const o=e[i];yc(r,n,o,t),n=o}return r}const gc=Math.pow(2,14)-1,vc=-gc-1;function bc(e,t){const n=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=A(n,vc,gc),e.y=A(r,vc,gc),(n<e.x||n>e.x+1||r<e.y||r>e.y+1)&&F("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function _c(e,t,n){const r=e.loadGeometry(),i=e.extent,o=Es/i;if(t&&n&&n.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:u,projection:c}=n,l=e=>{const n=sc((t.x+e.x/i)/o),r=uc((t.y+e.y/i)/o),l=c.project(n,r);e.x=(l.x*a-s)*i,e.y=(l.y*a-u)*i};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=pc(r[t],l,1);else{const e=[];for(const n of r[t])n.x<0||n.x>=i||n.y<0||n.y>=i||(l(n),e.push(n));r[t]=e}}for(const a of r)for(const e of a)bc(e,o);return r}function wc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?_c(e):[]}}function xc(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}function kc(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class Ac{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new aa,this.indexArray=new xa,this.segments=new As,this.programConfigurations=new ps(e.layers,e.zoom),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){const i=this.layers[0],o=[];let a=null;"circle"===i.type&&(a=i.layout.get("circle-sort-key"));for(const{feature:u,id:c,index:l,sourceLayerIndex:f}of e){const e=this.layers[0]._featureFilter.needGeometry,t=wc(u,e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),t,n))continue;const i=a?a.evaluate(t,{},n):void 0,s={id:c,properties:u.properties,type:u.type,sourceLayerIndex:f,index:l,geometry:e?t.geometry:_c(u,n,r),patterns:{},sortKey:i};o.push(s)}a&&o.sort(((e,t)=>e.sortKey-t.sortKey));let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new da,s=r.projection);for(const u of o){const{geometry:r,index:i,sourceLayerIndex:o}=u,a=e[i].feature;this.addFeature(u,r,i,t.availableImages,n,s),t.featureIndex.insert(a,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,xs.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,ks.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(e,t,n,r,i,o){for(const a of t)for(const t of a){const n=t.x,r=t.y;if(n<0||n>=Es||r<0||r>=Es)continue;if(o){const e=o.projectTilePoint(n,r,i),t=o.upVector(i,n,r),a=this.globeExtVertexArray;kc(a,e,t),kc(a,e,t),kc(a,e,t),kc(a,e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;xc(this.layoutVertexArray,n,r,-1,-1),xc(this.layoutVertexArray,n,r,1,-1),xc(this.layoutVertexArray,n,r,1,1),xc(this.layoutVertexArray,n,r,-1,1),this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,{},r,i)}}function Ec(e,t){for(let n=0;n<e.length;n++)if(Dc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Dc(e,t[n]))return!0;return!!Mc(e,t)}function Ic(e,t,n){return!!Dc(e,t)||!!Bc(t,e,n)}function Sc(e,t){if(1===e.length)return Oc(t,e[0]);for(let n=0;n<t.length;n++){const r=t[n];for(let t=0;t<r.length;t++)if(Dc(e,r[t]))return!0}for(let n=0;n<e.length;n++)if(Oc(t,e[n]))return!0;for(let n=0;n<t.length;n++)if(Mc(e,t[n]))return!0;return!1}function Tc(e,t,n){if(e.length>1){if(Mc(e,t))return!0;for(let r=0;r<t.length;r++)if(Bc(t[r],e,n))return!0}for(let r=0;r<e.length;r++)if(Bc(e[r],t,n))return!0;return!1}function Mc(e,t){if(0===e.length||0===t.length)return!1;for(let n=0;n<e.length-1;n++){const r=e[n],i=e[n+1];for(let e=0;e<t.length-1;e++)if(Pc(r,i,t[e],t[e+1]))return!0}return!1}function Pc(e,t,n,r){return j(e,n,r)!==j(t,n,r)&&j(e,t,n)!==j(e,t,r)}function Bc(e,t,n){const r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(let i=1;i<t.length;i++)if(Cc(e,t[i-1],t[i])<r)return!0;return!1}function Cc(e,t,n){const r=t.distSqr(n);if(0===r)return e.distSqr(t);const i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return e.distSqr(i<0?t:i>1?n:n.sub(t)._mult(i)._add(t))}function Oc(e,t){let n,r,i,o=!1;for(let a=0;a<e.length;a++){n=e[a];for(let e=0,a=n.length-1;e<n.length;a=e++)r=n[e],i=n[a],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(o=!o)}return o}function Dc(e,t){let n=!1;for(let r=0,i=e.length-1;r<e.length;i=r++){const o=e[r],a=e[i];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(n=!n)}return n}function Rc(e,t,n,r,i){for(const a of e)if(t<=a.x&&n<=a.y&&r>=a.x&&i>=a.y)return!0;const o=[new p(t,n),new p(t,i),new p(r,i),new p(r,n)];if(e.length>2)for(const a of o)if(Dc(e,a))return!0;for(let a=0;a<e.length-1;a++)if(Lc(e[a],e[a+1],o))return!0;return!1}function Lc(e,t,n){const r=n[0],i=n[2];if(e.x<r.x&&t.x<r.x||e.x>i.x&&t.x>i.x||e.y<r.y&&t.y<r.y||e.y>i.y&&t.y>i.y)return!1;const o=j(e,t,n[0]);return o!==j(e,t,n[1])||o!==j(e,t,n[2])||o!==j(e,t,n[3])}function zc(e,t,n){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).getMaxValue(e)}function Zc(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function Nc(e,t,n,r,i){if(!t[0]&&!t[1])return e;const o=p.convert(t)._mult(i);"viewport"===n&&o._rotate(-r);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function Uc(e,t,n,r){const i=p.convert(e)._mult(r);return"viewport"===t&&i._rotate(-n),i}ji(Ac,"CircleBucket",{omit:["layers"]});const Fc=new Jo({"circle-sort-key":new Qo(Xe.layout_circle["circle-sort-key"])});var jc={paint:new Jo({"circle-radius":new Qo(Xe.paint_circle["circle-radius"]),"circle-color":new Qo(Xe.paint_circle["circle-color"]),"circle-blur":new Qo(Xe.paint_circle["circle-blur"]),"circle-opacity":new Qo(Xe.paint_circle["circle-opacity"]),"circle-translate":new Xo(Xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Xo(Xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Xo(Xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Xo(Xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Qo(Xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Qo(Xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Qo(Xe.paint_circle["circle-stroke-opacity"])}),layout:Fc};function Wc(e,t,n,r,i,o,a,s,u){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(u*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,l=n.projection.upVectorScale(c,n.center.lat,n.worldSize).metersToTile;for(const f of t)for(const t of f){const f=t.add(s),h=i&&n.elevation?n.elevation.exaggeration()*i.getElevationAt(f.x,f.y,!0):0,d=n.projection.projectTilePoint(f.x,f.y,c);if(h>0){const e=n.projection.upVector(c,f.x,f.y);d.x+=e[0]*l*h,d.y+=e[1]*l*h,d.z+=e[2]*l*h}const p=o?f:Vc(d.x,d.y,d.z,r),y=o?e.tilespaceRays.map((e=>Hc(e,h))):e.queryGeometry.screenGeometry,m=cu([],[d.x,d.y,d.z,1],r);if(!a&&o?u*=m[3]/n.cameraToCenterDistance:a&&!o&&(u*=n.cameraToCenterDistance/m[3]),o){const e=uc((t.y/Es+c.y)/(1<<c.z));u/=n.projection.pixelsPerMeter(e,1)/ac(1,e)}if(Ic(y,p,u))return!0}return!1}function Vc(e,t,n,r){const i=cu([],[e,t,n,1],r);return new p(i[0]/i[3],i[1]/i[3])}const Kc=Vs(0,0,0),Gc=Vs(0,0,1);function Hc(e,t){const n=Fs();return Kc[2]=t,e.intersectsPlane(Kc,Gc,n),new p(n[0],n[1])}class qc extends Ac{}function Yc(e,{width:t,height:n},r,i){if(i){if(i instanceof Uint8ClampedArray)i=new Uint8Array(i.buffer);else if(i.length!==t*n*r)throw new RangeError("mismatched image size")}else i=new Uint8Array(t*n*r);return e.width=t,e.height=n,e.data=i,e}function Xc(e,t,n){const{width:r,height:i}=t;r===e.width&&i===e.height||(Qc(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,i)},n),e.width=r,e.height=i,e.data=t.data)}function Qc(e,t,n,r,i,o){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");const a=e.data,s=t.data;for(let u=0;u<i.height;u++){const c=((n.y+u)*e.width+n.x)*o,l=((r.y+u)*t.width+r.x)*o;for(let e=0;e<i.width*o;e++)s[l+e]=a[c+e]}return t}ji(qc,"HeatmapBucket",{omit:["layers"]});class $c{constructor(e,t){Yc(this,e,1,t)}resize(e){Xc(this,new $c(e),1)}clone(){return new $c({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Qc(e,t,n,r,i,1)}}class Jc{constructor(e,t){Yc(this,e,4,t)}resize(e){Xc(this,new Jc(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new Jc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,n,r,i){Qc(e,t,n,r,i,4)}}ji($c,"AlphaImage"),ji(Jc,"RGBAImage");var el={paint:new Jo({"heatmap-radius":new Qo(Xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Qo(Xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Xo(Xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new $o(Xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Xo(Xe.paint_heatmap["heatmap-opacity"])})};function tl(e){const t={},n=e.resolution||256,r=e.clips?e.clips.length:1,i=e.image||new Jc({width:n,height:r}),o=(n,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t);i.data[n+r+0]=Math.floor(255*a.r/a.a),i.data[n+r+1]=Math.floor(255*a.g/a.a),i.data[n+r+2]=Math.floor(255*a.b/a.a),i.data[n+r+3]=Math.floor(255*a.a)};if(e.clips)for(let a=0,s=0;a<r;++a,s+=4*n)for(let t=0,r=0;t<n;t++,r+=4){const i=t/(n-1),{start:u,end:c}=e.clips[a];o(s,r,u*(1-i)+c*i)}else for(let a=0,s=0;a<n;a++,s+=4)o(0,s,a/(n-1));return i}var nl={paint:new Jo({"hillshade-illumination-direction":new Xo(Xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Xo(Xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Xo(Xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Xo(Xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Xo(Xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Xo(Xe.paint_hillshade["hillshade-accent-color"])})};const rl=ia([{name:"a_pos",components:2,type:"Int16"}],4),{members:il}=rl;var ol={};function al(e,t,n){n=n||2;var r,i,o,a,s,u,c,l=t&&t.length,f=l?t[0]*n:e.length,h=sl(e,0,f,n,!0),d=[];if(!h||h.next===h.prev)return d;if(l&&(h=function(e,t,n,r){var i,o,a,s=[];for(i=0,o=t.length;i<o;i++)(a=sl(e,t[i]*r,i<o-1?t[i+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(vl(a));for(s.sort(pl),i=0;i<s.length;i++)n=yl(s[i],n);return n}(e,t,h,n)),e.length>80*n){r=o=e[0],i=a=e[1];for(var p=n;p<f;p+=n)(s=e[p])<r&&(r=s),(u=e[p+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);c=0!==(c=Math.max(o-r,a-i))?32767/c:0}return cl(h,d,n,r,i,c,0),d}function sl(e,t,n,r,i){var o,a;if(i===Bl(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Tl(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Tl(o,e[o],e[o+1],a);return a&&xl(a,a.next)&&(Ml(a),a=a.next),a}function ul(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!xl(r,r.next)&&0!==wl(r.prev,r,r.next))r=r.next;else{if(Ml(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function cl(e,t,n,r,i,o,a){if(e){!a&&o&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=gl(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,u,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ);t++);for(u=c;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);for(var s,u,c=e;e.prev!==e.next;)if(s=e.prev,u=e.next,o?fl(e,r,i,o):ll(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),Ml(e),e=u.next,c=u.next;else if((e=u)===c){a?1===a?cl(e=hl(ul(e),t,n),t,n,r,i,o,2):2===a&&dl(e,t,n,r,i,o):cl(ul(e),t,n,r,i,o,1);break}}}function ll(e){var t=e.prev,n=e,r=e.next;if(wl(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,u=n.y,c=r.y,l=i<o?i<a?i:a:o<a?o:a,f=s<u?s<c?s:c:u<c?u:c,h=i>o?i>a?i:a:o>a?o:a,d=s>u?s>c?s:c:u>c?u:c,p=r.next;p!==t;){if(p.x>=l&&p.x<=h&&p.y>=f&&p.y<=d&&bl(i,s,o,u,a,c,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function fl(e,t,n,r){var i=e.prev,o=e,a=e.next;if(wl(i,o,a)>=0)return!1;for(var s=i.x,u=o.x,c=a.x,l=i.y,f=o.y,h=a.y,d=s<u?s<c?s:c:u<c?u:c,p=l<f?l<h?l:h:f<h?f:h,y=s>u?s>c?s:c:u>c?u:c,m=l>f?l>h?l:h:f>h?f:h,g=gl(d,p,t,n,r),v=gl(y,m,t,n,r),b=e.prevZ,_=e.nextZ;b&&b.z>=g&&_&&_.z<=v;){if(b.x>=d&&b.x<=y&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&bl(s,l,u,f,c,h,b.x,b.y)&&wl(b.prev,b,b.next)>=0)return!1;if(b=b.prevZ,_.x>=d&&_.x<=y&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&bl(s,l,u,f,c,h,_.x,_.y)&&wl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=y&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&bl(s,l,u,f,c,h,b.x,b.y)&&wl(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;_&&_.z<=v;){if(_.x>=d&&_.x<=y&&_.y>=p&&_.y<=m&&_!==i&&_!==a&&bl(s,l,u,f,c,h,_.x,_.y)&&wl(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function hl(e,t,n){var r=e;do{var i=r.prev,o=r.next.next;!xl(i,o)&&kl(i,r,r.next,o)&&Il(i,o)&&Il(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Ml(r),Ml(r.next),r=e=o),r=r.next}while(r!==e);return ul(r)}function dl(e,t,n,r,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&_l(a,s)){var u=Sl(a,s);return a=ul(a,a.next),u=ul(u,u.next),cl(a,t,n,r,i,o,0),void cl(u,t,n,r,i,o,0)}s=s.next}a=a.next}while(a!==e)}function pl(e,t){return e.x-t.x}function yl(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var u,c=n,l=n.x,f=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=l&&i!==r.x&&bl(o<f?i:a,o,l,f,o<f?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Il(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&ml(n,r)))&&(n=r,h=u)),r=r.next}while(r!==c);return n}(e,t);if(!n)return t;var r=Sl(n,e);return ul(r,r.next),ul(n,n.next)}function ml(e,t){return wl(e.prev,e,t.prev)<0&&wl(t.next,e,e.next)<0}function gl(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function vl(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function bl(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function _l(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&kl(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Il(e,t)&&Il(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(wl(e.prev,e,t.prev)||wl(e,t.prev,t))||xl(e,t)&&wl(e.prev,e,e.next)>0&&wl(t.prev,t,t.next)>0)}function wl(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function xl(e,t){return e.x===t.x&&e.y===t.y}function kl(e,t,n,r){var i=El(wl(e,t,n)),o=El(wl(e,t,r)),a=El(wl(n,r,e)),s=El(wl(n,r,t));return i!==o&&a!==s||!(0!==i||!Al(e,n,t))||!(0!==o||!Al(e,r,t))||!(0!==a||!Al(n,e,r))||!(0!==s||!Al(n,t,r))}function Al(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function El(e){return e>0?1:e<0?-1:0}function Il(e,t){return wl(e.prev,e,e.next)<0?wl(e,t,e.next)>=0&&wl(e,e.prev,t)>=0:wl(e,t,e.prev)<0||wl(e,e.next,t)<0}function Sl(e,t){var n=new Pl(e.i,e.x,e.y),r=new Pl(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Tl(e,t,n,r){var i=new Pl(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ml(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Pl(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bl(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}function Cl(e,t,n,r,i){Ol(e,t,n||0,r||e.length-1,i||Rl)}function Ol(e,t,n,r,i){for(;r>n;){if(r-n>600){var o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Ol(e,t,Math.max(n,Math.floor(t-a*u/o+c)),Math.min(r,Math.floor(t+(o-a)*u/o+c)),i)}var l=e[t],f=n,h=r;for(Dl(e,n,t),i(e[r],l)>0&&Dl(e,n,r);f<h;){for(Dl(e,f,h),f++,h--;i(e[f],l)<0;)f++;for(;i(e[h],l)>0;)h--}0===i(e[n],l)?Dl(e,n,h):Dl(e,++h,r),h<=t&&(n=h+1),t<=h&&(r=h-1)}}function Dl(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Rl(e,t){return e<t?-1:e>t?1:0}function Ll(e,t){const n=e.length;if(n<=1)return[e];const r=[];let i,o;for(let a=0;a<n;a++){const t=W(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===o&&(o=t<0),o===t<0?(i&&r.push(i),i=[e[a]]):i.push(e[a]))}if(i&&r.push(i),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(Cl(r[a],t,1,r[a].length-1,zl),r[a]=r[a].slice(0,t));return r}function zl(e,t){return t.area-e.area}function Zl(e,t,n){const r=n.patternDependencies;let i=!1;for(const o of t){const t=o.paint.get(`${e}-pattern`);t.isConstant()||(i=!0);const n=t.constantOr(null);n&&(i=!0,r[n]=!0)}return i}function Nl(e,t,n,r,i){const o=i.patternDependencies;for(const a of t){const t=a.paint.get(`${e}-pattern`).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r},n,{},i.availableImages);e=e&&e.name?e.name:e,o[e]=!0,n.patterns[a.id]=e}}return n}({get exports(){return ol},set exports(e){ol=e}}).exports=al,ol.default=al,al.deviation=function(e,t,n,r){var i=t&&t.length,o=Math.abs(Bl(e,0,i?t[0]*n:e.length,n));if(i)for(var a=0,s=t.length;a<s;a++)o-=Math.abs(Bl(e,t[a]*n,a<s-1?t[a+1]*n:e.length,n));var u=0;for(a=0;a<r.length;a+=3){var c=r[a]*n,l=r[a+1]*n,f=r[a+2]*n;u+=Math.abs((e[c]-e[f])*(e[l+1]-e[c+1])-(e[c]-e[l])*(e[f+1]-e[c+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},al.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&n.holes.push(r+=e[i-1].length)}return n};class Ul{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new aa,this.indexArray=new xa,this.indexArray2=new Ta,this.programConfigurations=new ps(e.layers,e.zoom),this.segments=new As,this.segments2=new As,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.projection=e.projection}populate(e,t,n,r){this.hasPattern=Zl("fill",this.layers,t);const i=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:u,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,l=wc(a,e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),l,n))continue;const f=i?i.evaluate(l,{},n,t.availableImages):void 0,h={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:u,geometry:e?l.geometry:_c(a,n,r),patterns:{},sortKey:f};o.push(h)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));for(const a of o){const{geometry:r,index:i,sourceLayerIndex:o}=a;if(this.hasPattern){const e=Nl("fill",this.layers,a,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(a,r,i,n,{},t.availableImages);t.featureIndex.insert(e[i].feature,r,i,o,this.index)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,il),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(e,t,n,r,i,o=[]){for(const a of Ll(t,500)){let e=0;for(const s of a)e+=s.length;const t=this.segments.prepareSegment(e,this.layoutVertexArray,this.indexArray),n=t.vertexLength,r=[],i=[];for(const s of a){if(0===s.length)continue;s!==a[0]&&i.push(r.length/2);const e=this.segments2.prepareSegment(s.length,this.layoutVertexArray,this.indexArray2),t=e.vertexLength;this.layoutVertexArray.emplaceBack(s[0].x,s[0].y),this.indexArray2.emplaceBack(t+s.length-1,t),r.push(s[0].x),r.push(s[0].y);for(let n=1;n<s.length;n++)this.layoutVertexArray.emplaceBack(s[n].x,s[n].y),this.indexArray2.emplaceBack(t+n-1,t+n),r.push(s[n].x),r.push(s[n].y);e.vertexLength+=s.length,e.primitiveLength+=s.length}const o=ol(r,i);for(let a=0;a<o.length;a+=3)this.indexArray.emplaceBack(n+o[a],n+o[a+1],n+o[a+2]);t.vertexLength+=e,t.primitiveLength+=o.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}}ji(Ul,"FillBucket",{omit:["layers","patternFeatures"]});const Fl=new Jo({"fill-sort-key":new Qo(Xe.layout_fill["fill-sort-key"])});var jl={paint:new Jo({"fill-antialias":new Xo(Xe.paint_fill["fill-antialias"]),"fill-opacity":new Qo(Xe.paint_fill["fill-opacity"]),"fill-color":new Qo(Xe.paint_fill["fill-color"]),"fill-outline-color":new Qo(Xe.paint_fill["fill-outline-color"]),"fill-translate":new Xo(Xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Xo(Xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new Qo(Xe.paint_fill["fill-pattern"])}),layout:Fl};const Wl=ia([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),Vl=ia([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Kl=ia([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Gl}=Wl;var Hl={},ql=p,Yl=Xl;function Xl(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(Ql,this,t)}function Ql(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function $l(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)r+=((n=e[a]).x-(t=e[i]).x)*(t.y+n.y);return r}Xl.types=["Unknown","Point","LineString","Polygon"],Xl.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,o=0,a=0,s=[];e.pos<n;){if(i<=0){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)o+=e.readSVarint(),a+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new ql(o,a));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},Xl.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,u=1/0,c=-1/0;e.pos<t;){if(r<=0){var l=e.readVarint();n=7&l,r=l>>3}if(r--,1===n||2===n)(i+=e.readSVarint())<a&&(a=i),i>s&&(s=i),(o+=e.readSVarint())<u&&(u=o),o>c&&(c=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,u,s,c]},Xl.prototype.toGeoJSON=function(e,t,n){var r,i,o=this.extent*Math.pow(2,n),a=this.extent*e,s=this.extent*t,u=this.loadGeometry(),c=Xl.types[this.type];function l(e){for(var t=0;t<e.length;t++){var n=e[t];e[t]=[360*(n.x+a)/o-180,360/Math.PI*Math.atan(Math.exp((180-360*(n.y+s)/o)*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(r=0;r<u.length;r++)f[r]=u[r][0];l(u=f);break;case 2:for(r=0;r<u.length;r++)l(u[r]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var a=$l(e[o]);0!==a&&(void 0===r&&(r=a<0),r===a<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}return n&&i.push(n),i}(u),r=0;r<u.length;r++)for(i=0;i<u[r].length;i++)l(u[r][i])}1===u.length?u=u[0]:c="Multi"+c;var h={type:"Feature",geometry:{type:c,coordinates:u},properties:this.properties};return"id"in this&&(h.id=this.id),h};var Jl=Yl,ef=tf;function tf(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(nf,this,t),this.length=this._features.length}function nf(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}tf.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new Jl(this._pbf,t,this.extent,this._keys,this._values)};var rf=ef;function of(e,t,n){if(3===e){var r=new rf(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var af=Hl.VectorTile=function(e,t){this.layers=e.readFields(of,{},t)},sf=Hl.VectorTileFeature=Yl;function uf(e,t,n,r){const i=[],o=0===r?(e,t,n,r,i,o)=>{e.push(new p(o,n+(o-t)/(r-t)*(i-n)))}:(e,t,n,r,i,o)=>{e.push(new p(t+(o-n)/(i-n)*(r-t),o))};for(const a of e){const e=[];for(const i of a){if(i.length<=2)continue;const a=[];for(let e=0;e<i.length-1;e++){const s=i[e].x,u=i[e].y,c=i[e+1].x,l=i[e+1].y,f=0===r?s:u,h=0===r?c:l;f<t?h>t&&o(a,s,u,c,l,t):f>n?h<n&&o(a,s,u,c,l,n):a.push(i[e]),h<t&&f>=t&&o(a,s,u,c,l,t),h>n&&f<=n&&o(a,s,u,c,l,n)}let s=i[i.length-1];const u=0===r?s.x:s.y;u>=t&&u<=n&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&i.push(e)}return i}Hl.VectorTileLayer=ef;const cf=sf.types,lf=Math.pow(2,13);function ff(e,t,n,r,i,o,a,s){e.emplaceBack((t<<1)+a,(n<<1)+o,(Math.floor(r*lf)<<1)+i,Math.round(s))}function hf(e,t,n){const r=16384;e.emplaceBack(t.x,t.y,t.z,n[0]*r,n[1]*r,n[2]*r)}class df{constructor(){this.acc=new p(0,0),this.polyCount=[]}startRing(e){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new p(e.x,e.y),this.max=new p(e.x,e.y))}append(e,t){this.currentPolyCount.edges++,this.acc._add(e);const n=this.min,r=this.max;e.x<n.x?n.x=e.x:e.x>r.x&&(r.x=e.x),e.y<n.y?n.y=e.y:e.y>r.y&&(r.y=e.y),((0===e.x||e.x===Es)&&e.x===t.x)!=((0===e.y||e.y===Es)&&e.y===t.y)&&this.processBorderOverlap(e,t),t.x<0!=e.x<0&&this.addBorderIntersection(0,Tn(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Es!=e.x>Es&&this.addBorderIntersection(1,Tn(t.y,e.y,(Es-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,Tn(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Es!=e.y>Es&&this.addBorderIntersection(3,Tn(t.x,e.x,(Es-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const n=this.borders[e];t<n[0]&&(n[0]=t),t>n[1]&&(n[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const n=0===e.x?0:1;this.addBorderIntersection(n,t.y),this.addBorderIntersection(n,e.y)}else{const n=0===e.y?2:3;this.addBorderIntersection(n,t.x),this.addBorderIntersection(n,e.x)}}centroid(){const e=this.polyCount.reduce(((e,t)=>e+t.edges),0);return 0!==e?this.acc.div(e)._round():new p(0,0)}span(){return new p(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce(((e,t)=>e+ +(t[0]!==Number.MAX_VALUE)),0)}}class pf{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.layoutVertexArray=new ua,this.centroidVertexArray=new Fa,this.indexArray=new xa,this.programConfigurations=new ps(e.layers,e.zoom),this.segments=new As,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.enableTerrain=e.enableTerrain}populate(e,t,n,r){this.features=[],this.hasPattern=Zl("fill-extrusion",this.layers,t),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(e){const t=Math.exp(Math.PI*(1-e.y/(1<<e.z)*2));return 80150034*t/(t*t+1)/Es/(1<<e.z)}(n),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:i,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,u=wc(i,e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),u,n))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?u.geometry:_c(i,n,r),properties:i.properties,type:i.type,patterns:{}},l=this.layoutVertexArray.length;this.hasPattern?this.features.push(Nl("fill-extrusion",this.layers,c,this.zoom,t)):this.addFeature(c,c.geometry,a,n,{},t.availableImages,r),t.featureIndex.insert(i,c.geometry,a,s,this.index,l)}this.sortBorders()}addFeatures(e,t,n,r,i){for(const o of this.features){const{geometry:e}=o;this.addFeature(o,e,o.index,t,n,r,i)}this.sortBorders()}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Gl),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Kl.members,!0))),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){0!==this.centroidVertexArray.length&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,Vl.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,n,r,i,o,a){const s=[new p(0,0),new p(Es,Es)],u=a.projection,c="globe"===u.name,l=this.enableTerrain&&!c?new df:null,f="Polygon"===cf[e.type];c&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new da);const h=Ll(t,500);for(let p=h.length-1;p>=0;p--){const e=h[p];(0===e.length||(d=e[0]).every((e=>e.x<=0))||d.every((e=>e.x>=Es))||d.every((e=>e.y<=0))||d.every((e=>e.y>=Es)))&&h.splice(p,1)}var d;let y;if(c)y=xf(h,s,r);else{y=[];for(const e of h)y.push({polygon:e,bounds:s})}const m=f?this.edgeRadius:0;for(const{polygon:p,bounds:g}of y){let e=0,t=0;for(const r of p)f&&!r[0].equals(r[r.length-1])&&r.push(r[0]),t+=f?r.length-1:r.length;const n=this.segments.prepareSegment((f?5:4)*t,this.layoutVertexArray,this.indexArray);if(f){const t=[],i=[];e=n.vertexLength;for(const e of p){let o,a;e.length&&e!==p[0]&&i.push(t.length/2),o=e[1].sub(e[0])._perp()._unit();for(let i=1;i<e.length;i++){const s=e[i],l=e[i===e.length-1?1:i+1];let{x:f,y:h}=s;if(m){a=l.sub(s)._perp()._unit();const e=o.add(a)._unit(),t=m*Math.min(4,1/(o.x*e.x+o.y*e.y));f+=t*e.x,h+=t*e.y,o=a}ff(this.layoutVertexArray,f,h,0,0,1,1,0),n.vertexLength++,t.push(s.x,s.y),c&&hf(this.layoutVertexExtArray,u.projectTilePoint(f,h,r),u.upVector(r,f,h))}}const o=ol(t,i);for(let r=0;r<o.length;r+=3)this.indexArray.emplaceBack(e+o[r],e+o[r+2],e+o[r+1]),n.primitiveLength++}for(const i of p){l&&i.length&&l.startRing(i[0]);let t,o,a,s=i.length>4&&bf(i[i.length-2],i[0],i[1]),h=m?mf(i[i.length-2],i[0],i[1],m):0;o=i[1].sub(i[0])._perp()._unit();let d=!0;for(let p=1,y=0;p<i.length;p++){let v=i[p-1],b=i[p];const _=i[p===i.length-1?1:p+1];if(l&&f&&l.currentPolyCount.top++,vf(b,v,g)){m&&(o=_.sub(b)._perp()._unit(),d=!d);continue}l&&l.append(b,v);const w=b.sub(v)._perp(),x=w.x/(Math.abs(w.x)+Math.abs(w.y)),k=w.y>0?1:0,A=v.dist(b);if(y+A>32768&&(y=0),m){a=_.sub(b)._perp()._unit();let e=gf(v,b,_,yf(o,a),m);isNaN(e)&&(e=0);const t=b.sub(v)._unit();v=v.add(t.mult(h))._round(),b=b.add(t.mult(-e))._round(),h=e,o=a}const E=n.vertexLength,I=i.length>4&&bf(v,b,_);let S=_f(y,s,d);if(ff(this.layoutVertexArray,v.x,v.y,x,k,0,0,S),ff(this.layoutVertexArray,v.x,v.y,x,k,0,1,S),y+=A,S=_f(y,I,!d),s=I,ff(this.layoutVertexArray,b.x,b.y,x,k,0,0,S),ff(this.layoutVertexArray,b.x,b.y,x,k,0,1,S),n.vertexLength+=4,this.indexArray.emplaceBack(E+0,E+1,E+2),this.indexArray.emplaceBack(E+1,E+3,E+2),n.primitiveLength+=2,m){const r=e+(1===p?i.length-2:p-2),o=1===p?e:r+1;if(this.indexArray.emplaceBack(E+1,r,E+3),this.indexArray.emplaceBack(r,o,E+3),n.primitiveLength+=2,void 0===t&&(t=E),!vf(_,i[p],g)){const e=p===i.length-1?t:n.vertexLength;this.indexArray.emplaceBack(E+2,E+3,e),this.indexArray.emplaceBack(E+3,e+1,e),this.indexArray.emplaceBack(E+3,o,e+1),n.primitiveLength+=3}d=!d}if(c){const e=this.layoutVertexExtArray,t=u.projectTilePoint(v.x,v.y,r),n=u.projectTilePoint(b.x,b.y,r),i=u.upVector(r,v.x,v.y),o=u.upVector(r,b.x,b.y);hf(e,t,i),hf(e,t,i),hf(e,n,o),hf(e,n,o)}}f&&(e+=i.length-1)}}if(l&&l.polyCount.length>0){if(l.borders){l.vertexArrayOffset=this.centroidVertexArray.length;const e=l.borders,t=this.featuresOnBorder.push(l)-1;for(let n=0;n<4;n++)e[n][0]!==Number.MAX_VALUE&&this.borders[n].push(t)}this.encodeCentroid(l.borders?void 0:l.centroid(),l)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}sortBorders(){for(let e=0;e<4;e++)this.borders[e].sort(((t,n)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[n].borders[e][0]))}encodeCentroid(e,t,n=!0){let r,i;if(e)if(0!==e.y){const n=t.span()._mult(this.tileToMeter);r=(Math.max(e.x,1)<<3)+Math.min(7,Math.round(n.x/10)),i=(Math.max(e.y,1)<<3)+Math.min(7,Math.round(n.y/10))}else r=Math.ceil(7*(e.x+450)),i=0;else r=0,i=+n;let o=n?this.centroidVertexArray.length:t.vertexArrayOffset;for(const a of t.polyCount){n&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*a.edges+a.top);for(let e=0;e<a.top;e++)this.centroidVertexArray.emplace(o++,r,i);for(let e=0;e<2*a.edges;e++)this.centroidVertexArray.emplace(o++,0,i),this.centroidVertexArray.emplace(o++,r,i)}}}function yf(e,t){const n=e.add(t)._unit();return e.x*n.x+e.y*n.y}function mf(e,t,n,r){const i=t.sub(e)._perp()._unit(),o=n.sub(t)._perp()._unit();return gf(e,t,n,yf(i,o),r)}function gf(e,t,n,r,i){const o=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(n)/3,i*o/r)}function vf(e,t,n){return e.x<n[0].x&&t.x<n[0].x||e.x>n[1].x&&t.x>n[1].x||e.y<n[0].y&&t.y<n[0].y||e.y>n[1].y&&t.y>n[1].y}function bf(e,t,n){if(e.x<0||e.x>=Es||t.x<0||t.x>=Es||n.x<0||n.x>=Es)return!1;const r=n.sub(t),i=r.perp(),o=e.sub(t);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&i.x*o.x+i.y*o.y<0}function _f(e,t,n){const r=t?2|e:-3&e;return n?1|r:-2&r}function wf(){const e=Math.PI/32,t=Math.tan(e),n=ec;return n*Math.sqrt(1+2*t*t)-n}function xf(e,t,n){const r=1<<n.z,i=sc(n.x/r),o=sc((n.x+1)/r),a=uc(n.y/r),s=uc((n.y+1)/r);return function(e,t,n,r,i=0,o){const a=[];if(!e.length||!n||!r)return a;const s=(e,t)=>{for(const n of e)a.push({polygon:n,bounds:t})},u=Math.ceil(Math.log2(n)),c=Math.ceil(Math.log2(r)),l=u-c,f=[];for(let p=0;p<Math.abs(l);p++)f.push(l>0?0:1);for(let p=0;p<Math.min(u,c);p++)f.push(0),f.push(1);let h=e;if(h=uf(h,t[0].y-i,t[1].y+i,1),h=uf(h,t[0].x-i,t[1].x+i,0),!h.length)return a;const d=[];for(f.length?d.push({polygons:h,bounds:t,depth:0}):s(h,t);d.length;){const e=d.pop(),t=e.depth,n=f[t],r=e.bounds[0],a=e.bounds[1],u=0===n?r.x:r.y,c=0===n?a.x:a.y,l=o?o(n,u,c):.5*(u+c),h=uf(e.polygons,u-i,l+i,n),y=uf(e.polygons,l-i,c+i,n);if(h.length){const e=[r,new p(0===n?l:a.x,1===n?l:a.y)];f.length>t+1?d.push({polygons:h,bounds:e,depth:t+1}):s(h,e)}if(y.length){const e=[new p(0===n?l:r.x,1===n?l:r.y),a];f.length>t+1?d.push({polygons:y,bounds:e,depth:t+1}):s(y,e)}}return a}(e,t,Math.ceil((o-i)/11.25),Math.ceil((a-s)/11.25),1,((e,t,i)=>{if(0===e)return.5*(t+i);{const e=uc((n.y+t/Es)/r);return(oc(.5*(uc((n.y+i/Es)/r)+e))*r-n.y)*Es}}))}ji(pf,"FillExtrusionBucket",{omit:["layers","features"]}),ji(df,"PartMetadata");const kf=new Jo({"fill-extrusion-edge-radius":new Xo(Xe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var Af={paint:new Jo({"fill-extrusion-opacity":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Qo(Xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Qo(Xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Qo(Xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Qo(Xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Xo(Xe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:kf};function Ef(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}class If{constructor(e,t,n){this.z=e,this.x=t,this.y=n,this.key=Mf(0,e,e,t,n)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const n=function(e,t,n){var r=Ef(256*e,256*(t=Math.pow(2,n)-t-1),n),i=Ef(256*(e+1),256*(t+1),n);return r[0]+","+r[1]+","+i[0]+","+i[1]}(this.x,this.y,this.z),r=function(e,t,n){let r,i="";for(let o=e;o>0;o--)r=1<<o-1,i+=(t&r?1:0)+(n&r?2:0);return i}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Sf{constructor(e,t){this.wrap=e,this.canonical=t,this.key=Mf(e,t.z,t.z,t.x,t.y)}}class Tf{constructor(e,t,n,r,i){this.overscaledZ=e,this.wrap=t,this.canonical=new If(n,+r,+i),this.key=0===t&&e===n?this.canonical.key:Mf(t,e,n,r,i)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new Tf(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Tf(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e,t=!0){if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return Mf(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const n=this.canonical.z-e;return Mf(this.wrap*+t,e,e,this.canonical.x>>n,this.canonical.y>>n)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new Tf(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new Tf(t,this.wrap,t,n,r),new Tf(t,this.wrap,t,n+1,r),new Tf(t,this.wrap,t,n,r+1),new Tf(t,this.wrap,t,n+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new Tf(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new Tf(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Sf(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function Mf(e,t,n,r,i){const o=1<<Math.min(n,22);let a=o*(i%o)+r%o;return e&&n<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-n)))),16*(32*a+n)+(t-n)}ji(If,"CanonicalTileID"),ji(Tf,"OverscaledTileID",{omit:["projMatrix"]});class Pf extends p{constructor(e,t,n){super(e,t),this.z=n}}function Bf(e,t){return e.x*t.x+e.y*t.y}function Cf(e,t){if(1===e.length){let n=0;const r=t[n++];let i;for(;!i||r.equals(i);)if(i=t[n++],!i)return 1/0;for(;n<t.length;n++){const o=t[n],a=e[0],s=i.sub(r),u=o.sub(r),c=a.sub(r),l=Bf(s,s),f=Bf(s,u),h=Bf(u,u),d=Bf(c,s),p=Bf(c,u),y=l*h-f*f,m=(h*d-f*p)/y,g=(l*p-f*d)/y,v=r.z*(1-m-g)+i.z*m+o.z*g;if(isFinite(v))return v}return 1/0}{let e=1/0;for(const n of t)e=Math.min(e,n.z);return e}}function Of(e,t,n,r,i,o,a,s){const u=a*i.getElevationAt(e,t,!0,!0),c=0!==o[0],l=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,n){const r=Math.floor(t[0]/8),i=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*i),s=e.getElevationAt(r,i,!0,!0),u=e.getMeterToDEM(n),c=Math.floor(.5*(o*u-1)),l=Math.floor(.5*(a*u-1)),f=e.tileCoordToPixel(r,i),h=2*c+1,d=2*l+1,p=function(e,t,n,r,i){return[e.getElevationAtPixel(t,n,!0),e.getElevationAtPixel(t+i,n,!0),e.getElevationAtPixel(t,n+i,!0),e.getElevationAtPixel(t+r,n+i,!0)]}(e,f.x-c,f.y-l,h,d),y=Math.abs(p[0]-p[1]),m=Math.abs(p[2]-p[3]),g=Math.abs(p[0]-p[2])+Math.abs(p[1]-p[3]),v=Math.min(.25,.5*u*(y+m)/h),b=Math.min(.25,.5*u*g/d);return s+Math.max(v*o,b*a)}(i,o,s):u;return{base:u+(0===n)?-1:n,top:c?Math.max(l+r,u+n+2):u+r}}const Df=ia([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:Rf}=Df,Lf=ia([{name:"a_packed",components:4,type:"Float32"}]),{members:zf}=Lf,Zf=sf.types,Nf=Math.cos(Math.PI/180*37.5);class Uf{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((e=>{this.gradients[e.id]={}})),this.layoutVertexArray=new ca,this.layoutVertexArray2=new la,this.indexArray=new xa,this.programConfigurations=new ps(e.layers,e.zoom),this.segments=new As,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id))}populate(e,t,n,r){this.hasPattern=Zl("line",this.layers,t);const i=this.layers[0].layout.get("line-sort-key"),o=[];for(const{feature:c,id:l,index:f,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=wc(c,e);if(!this.layers[0]._featureFilter.filter(new Fo(this.zoom),t,n))continue;const a=i?i.evaluate(t,{},n):void 0,s={id:l,properties:c.properties,type:c.type,sourceLayerIndex:h,index:f,geometry:e?t.geometry:_c(c,n,r),patterns:{},sortKey:a};o.push(s)}i&&o.sort(((e,t)=>e.sortKey-t.sortKey));const{lineAtlas:a,featureIndex:s}=t,u=this.addConstantDashes(a);for(const c of o){const{geometry:r,index:i,sourceLayerIndex:o}=c;if(u&&this.addFeatureDashes(c,a),this.hasPattern){const e=Nl("line",this.layers,c,this.zoom,t);this.patternFeatures.push(e)}else this.addFeature(c,r,i,n,a.positions,t.availableImages);s.insert(e[i].feature,r,i,o,this.index)}}addConstantDashes(e){let t=!1;for(const n of this.layers){const r=n.paint.get("line-dasharray").value,i=n.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==i.kind)t=!0;else{const t=i.value,n=r.value;if(!n)continue;e.addDash(n,t)}}return t}addFeatureDashes(e,t){const n=this.zoom;for(const r of this.layers){const i=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===i.kind&&"constant"===o.kind)continue;let a,s;if("constant"===i.kind){if(a=i.value,!a)continue}else a=i.evaluate({zoom:n},e);s="constant"===o.kind?o.value:o.evaluate({zoom:n},e),t.addDash(a,s),e.patterns[r.id]=t.getKey(a,s)}}update(e,t,n,r){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(e,t,this.stateDependentLayers,n,r)}addFeatures(e,t,n,r,i){for(const o of this.patternFeatures)this.addFeature(o,o.geometry,o.index,t,n,r)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,zf)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Rf),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,n,r,i,o){const a=this.layers[0].layout,s=a.get("line-join").evaluate(e,{}),u=a.get("line-cap").evaluate(e,{}),c=a.get("line-miter-limit"),l=a.get("line-round-limit");this.lineClips=this.lineFeatureClips(e);for(const f of t)this.addLine(f,e,s,u,c,l);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,n,i,o,r)}addLine(e,t,n,r,i,o){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let t=0;t<e.length-1;t++)this.totalDistance+=e[t].dist(e[t+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const a="Polygon"===Zf[t.type];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;let u=0;for(;u<s-1&&e[u].equals(e[u+1]);)u++;if(s<(a?3:2))return;"bevel"===n&&(i=1.05);const c=this.overscaling<=16?122880/(512*this.overscaling):0,l=this.segments.prepareSegment(10*s,this.layoutVertexArray,this.indexArray);let f,h,d,p,y;this.e1=this.e2=-1,a&&(f=e[s-2],y=e[u].sub(f)._unit()._perp());for(let m=u;m<s;m++){if(d=m===s-1?a?e[u+1]:void 0:e[m+1],d&&e[m].equals(d))continue;y&&(p=y),f&&(h=f),f=e[m],y=d?d.sub(f)._unit()._perp():p,p=p||y;let t=p.add(y);0===t.x&&0===t.y||t._unit();const g=p.x*y.x+p.y*y.y,v=t.x*y.x+t.y*y.y,b=0!==v?1/v:1/0,_=2*Math.sqrt(2-2*v),w=v<Nf&&h&&d,x=p.x*y.y-p.y*y.x>0;if(w&&m>u){const e=f.dist(h);if(e>2*c){const t=f.sub(f.sub(h)._mult(c/e)._round());this.updateDistance(h,t),this.addCurrentVertex(t,p,0,0,l),h=t}}const k=h&&d;let A=k?n:a?"butt":r;if(k&&"round"===A&&(b<o?A="miter":b<=2&&(A="fakeround")),"miter"===A&&b>i&&(A="bevel"),"bevel"===A&&(b>2&&(A="flipbevel"),b<i&&(A="miter")),h&&this.updateDistance(h,f),"miter"===A)t._mult(b),this.addCurrentVertex(f,t,0,0,l);else if("flipbevel"===A){if(b>100)t=y.mult(-1);else{const e=b*p.add(y).mag()/p.sub(y).mag();t._perp()._mult(e*(x?-1:1))}this.addCurrentVertex(f,t,0,0,l),this.addCurrentVertex(f,t.mult(-1),0,0,l)}else if("bevel"===A||"fakeround"===A){const e=-Math.sqrt(b*b-1),t=x?e:0,n=x?0:e;if(h&&this.addCurrentVertex(f,p,t,n,l),"fakeround"===A){const e=Math.round(180*_/Math.PI/20);for(let t=1;t<e;t++){let n=t/e;if(.5!==n){const e=n-.5;n+=n*e*(n-1)*((1.0904+g*(g*(3.55645-1.43519*g)-3.2452))*e*e+(.848013+g*(.215638*g-1.06021)))}const r=y.sub(p)._mult(n)._add(p)._unit()._mult(x?-1:1);this.addHalfVertex(f,r.x,r.y,!1,x,0,l)}}d&&this.addCurrentVertex(f,y,-t,-n,l)}else if("butt"===A)this.addCurrentVertex(f,t,0,0,l);else if("square"===A){const e=h?1:-1;h||this.addCurrentVertex(f,t,e,e,l),this.addCurrentVertex(f,t,0,0,l),h&&this.addCurrentVertex(f,t,e,e,l)}else"round"===A&&(h&&(this.addCurrentVertex(f,p,0,0,l),this.addCurrentVertex(f,p,1,1,l,!0)),d&&(this.addCurrentVertex(f,y,-1,-1,l,!0),this.addCurrentVertex(f,y,0,0,l)));if(w&&m<s-1){const e=f.dist(d);if(e>2*c){const t=f.add(d.sub(f)._mult(c/e)._round());this.updateDistance(f,t),this.addCurrentVertex(t,y,0,0,l),f=t}}}}addCurrentVertex(e,t,n,r,i,o=!1){const a=t.y*r-t.x,s=-t.y-t.x*r;this.addHalfVertex(e,t.x+t.y*n,t.y-t.x*n,o,!1,n,i),this.addHalfVertex(e,a,s,o,!0,-r,i)}addHalfVertex({x:e,y:t},n,r,i,o,a,s){this.layoutVertexArray.emplaceBack((e<<1)+(i?1:0),(t<<1)+(o?1:0),Math.round(63*n)+128,Math.round(63*r)+128,1+(0===a?0:a<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const u=s.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),s.primitiveLength++),o?this.e2=u:this.e1=u}updateScaledDistance(){if(this.lineClips){const e=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(e,t){this.distance+=e.dist(t),this.updateScaledDistance()}}ji(Uf,"LineBucket",{omit:["layers","patternFeatures"]});const Ff=new Jo({"line-cap":new Qo(Xe.layout_line["line-cap"]),"line-join":new Qo(Xe.layout_line["line-join"]),"line-miter-limit":new Xo(Xe.layout_line["line-miter-limit"]),"line-round-limit":new Xo(Xe.layout_line["line-round-limit"]),"line-sort-key":new Qo(Xe.layout_line["line-sort-key"])});var jf={paint:new Jo({"line-opacity":new Qo(Xe.paint_line["line-opacity"]),"line-color":new Qo(Xe.paint_line["line-color"]),"line-translate":new Xo(Xe.paint_line["line-translate"]),"line-translate-anchor":new Xo(Xe.paint_line["line-translate-anchor"]),"line-width":new Qo(Xe.paint_line["line-width"]),"line-gap-width":new Qo(Xe.paint_line["line-gap-width"]),"line-offset":new Qo(Xe.paint_line["line-offset"]),"line-blur":new Qo(Xe.paint_line["line-blur"]),"line-dasharray":new Qo(Xe.paint_line["line-dasharray"]),"line-pattern":new Qo(Xe.paint_line["line-pattern"]),"line-gradient":new $o(Xe.paint_line["line-gradient"]),"line-trim-offset":new Xo(Xe.paint_line["line-trim-offset"])}),layout:Ff};const Wf=new class extends Qo{possiblyEvaluate(e,t){return t=new Fo(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition}),super.possiblyEvaluate(e,t)}evaluate(e,t,n,r){return t=M({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,n,r)}}(jf.paint.properties["line-width"].specification);function Vf(e,t){return t>0?t+2*e:e}Wf.useIntegerZoom=!0;const Kf=ia([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gf=ia([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Hf=ia([{name:"a_projected_pos",components:4,type:"Float32"}],4);ia([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const qf=ia([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),Yf=ia([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Xf=ia([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Qf=ia([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);ia([{name:"triangle",components:3,type:"Uint16"}]),ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),ia([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ia([{type:"Float32",name:"offsetX"}]),ia([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var $f=24;const Jf=128;function eh(e,t){const{expression:n}=t;if("constant"===n.kind)return{kind:"constant",layoutSize:n.evaluate(new Fo(e+1))};if("source"===n.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:r}=n;let i=0;for(;i<t.length&&t[i]<=e;)i++;i=Math.max(0,i-1);let o=i;for(;o<t.length&&t[o]<e+1;)o++;o=Math.min(t.length-1,o);const a=t[i],s=t[o];return"composite"===n.kind?{kind:"composite",minZoom:a,maxZoom:s,interpolationType:r}:{kind:"camera",minZoom:a,maxZoom:s,minSize:n.evaluate(new Fo(a)),maxSize:n.evaluate(new Fo(s)),interpolationType:r}}}function th(e,{uSize:t,uSizeT:n},{lowerSize:r,upperSize:i}){return"source"===e.kind?r/Jf:"composite"===e.kind?Tn(r/Jf,i/Jf,n):t}function nh(e,t){let n=0,r=0;if("constant"===e.kind)r=e.layoutSize;else if("source"!==e.kind){const{interpolationType:i,minZoom:o,maxZoom:a}=e,s=i?A(Yn.interpolationFactor(i,t,o,a),0,1):0;"camera"===e.kind?r=Tn(e.minSize,e.maxSize,s):n=s}return{uSizeT:n,uSize:r}}var rh=Object.freeze({__proto__:null,getSizeData:eh,evaluateSizeForFeature:th,evaluateSizeForZoom:nh,SIZE_PACK_FACTOR:Jf});function ih(e,t,n){return e.sections.forEach((e=>{e.text=function(e,t,n){const r=t.layout.get("text-transform").evaluate(n,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),Uo.applyArabicShaping&&(e=Uo.applyArabicShaping(e)),e}(e.text,t,n)})),e}const oh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};function ah(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function sh(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var uh=fh,ch=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},lh=function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y};function fh(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}fh.Varint=0,fh.Fixed64=1,fh.Bytes=2,fh.Fixed32=5;var hh=4294967296,dh=1/hh,ph="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function yh(e){return e.type===fh.Bytes?e.readVarint()+e.pos:e.pos+1}function mh(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function gh(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function vh(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function bh(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function _h(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function wh(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function xh(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function kh(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function Ah(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function Eh(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function Ih(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Sh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function Th(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function Mh(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function Ph(e,t,n){t.glyphs=[],1===e&&n.readMessage(Bh,t)}function Bh(e,t,n){if(3===e){const{id:e,bitmap:r,width:i,height:o,left:a,top:s,advance:u}=n.readMessage(Ch,{});t.glyphs.push({id:e,bitmap:new $c({width:i+6,height:o+6},r),metrics:{width:i,height:o,left:a,top:s,advance:u}})}else 4===e?t.ascender=n.readSVarint():5===e&&(t.descender=n.readSVarint())}function Ch(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}function Oh(e){let t=0,n=0;for(const a of e)t+=a.w*a.h,n=Math.max(n,a.w);e.sort(((e,t)=>t.h-e.h));const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),n),h:1/0}];let i=0,o=0;for(const a of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),i=Math.max(i,a.x+a.w),a.w===t.w&&a.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(r.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:i,h:o,fill:t/(i*o)||0}}fh.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Sh(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=Mh(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Sh(this.buf,this.pos)+Sh(this.buf,this.pos+4)*hh;return this.pos+=8,e},readSFixed64:function(){var e=Sh(this.buf,this.pos)+Mh(this.buf,this.pos+4)*hh;return this.pos+=8,e},readFloat:function(){var e=ch(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ch(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(r=(112&(i=o[n.pos++]))>>4,i<128)return mh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<3,i<128)return mh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<10,i<128)return mh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<17,i<128)return mh(e,r,t);if(r|=(127&(i=o[n.pos++]))<<24,i<128)return mh(e,r,t);if(r|=(1&(i=o[n.pos++]))<<31,i<128)return mh(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&ph?function(e,t,n){return ph.decode(e.subarray(t,n))}(this.buf,t,e):function(e,t,n){for(var r="",i=t;i<n;){var o,a,s,u=e[i],c=null,l=u>239?4:u>223?3:u>191?2:1;if(i+l>n)break;1===l?u<128&&(c=u):2===l?128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)<=127&&(c=null):3===l?(a=e[i+2],128==(192&(o=e[i+1]))&&128==(192&a)&&((c=(15&u)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===l&&(a=e[i+2],s=e[i+3],128==(192&(o=e[i+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,l=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),i+=l}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==fh.Bytes)return e.push(this.readVarint(t));var n=yh(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==fh.Bytes)return e.push(this.readSVarint());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==fh.Bytes)return e.push(this.readBoolean());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==fh.Bytes)return e.push(this.readFloat());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==fh.Bytes)return e.push(this.readDouble());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==fh.Bytes)return e.push(this.readFixed32());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==fh.Bytes)return e.push(this.readSFixed32());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==fh.Bytes)return e.push(this.readFixed64());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==fh.Bytes)return e.push(this.readSFixed64());var t=yh(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===fh.Varint)for(;this.buf[this.pos++]>127;);else if(t===fh.Bytes)this.pos=this.readVarint()+this.pos;else if(t===fh.Fixed32)this.pos+=4;else{if(t!==fh.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),Th(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),Th(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),Th(this.buf,-1&e,this.pos),Th(this.buf,Math.floor(e*dh),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),Th(this.buf,-1&e,this.pos),Th(this.buf,Math.floor(e*dh),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,n.buf[n.pos]=127&(e>>>=7)}(n,0,t),function(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&gh(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),lh(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),lh(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&gh(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,fh.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,vh,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,bh,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,xh,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,_h,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,wh,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,kh,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,Ah,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,Eh,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,Ih,t)},writeBytesField:function(e,t){this.writeTag(e,fh.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,fh.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,fh.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,fh.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,fh.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,fh.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,fh.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,fh.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,fh.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,fh.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};class Dh{constructor(e,{pixelRatio:t,version:n,stretchX:r,stretchY:i,content:o}){this.paddedRect=e,this.pixelRatio=t,this.stretchX=r,this.stretchY=i,this.content=o,this.version=n}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Rh{constructor(e,t){const n={},r={};this.haveRenderCallbacks=[];const i=[];this.addImages(e,n,i),this.addImages(t,r,i);const{w:o,h:a}=Oh(i),s=new Jc({width:o||1,height:a||1});for(const u in e){const t=e[u],r=n[u].paddedRect;Jc.copy(t.data,s,{x:0,y:0},{x:r.x+1,y:r.y+1},t.data)}for(const u in t){const e=t[u],n=r[u].paddedRect,i=n.x+1,o=n.y+1,a=e.data.width,c=e.data.height;Jc.copy(e.data,s,{x:0,y:0},{x:i,y:o},e.data),Jc.copy(e.data,s,{x:0,y:c-1},{x:i,y:o-1},{width:a,height:1}),Jc.copy(e.data,s,{x:0,y:0},{x:i,y:o+c},{width:a,height:1}),Jc.copy(e.data,s,{x:a-1,y:0},{x:i-1,y:o},{width:1,height:c}),Jc.copy(e.data,s,{x:0,y:0},{x:i+a,y:o},{width:1,height:c})}this.image=s,this.iconPositions=n,this.patternPositions=r}addImages(e,t,n){for(const r in e){const i=e[r],o={x:0,y:0,w:i.data.width+2,h:i.data.height+2};n.push(o),t[r]=new Dh(o,i),i.hasRenderCallback&&this.haveRenderCallbacks.push(r)}}patchUpdatedImages(e,t){this.haveRenderCallbacks=this.haveRenderCallbacks.filter((t=>e.hasImage(t))),e.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const n in e.updatedImages)this.patchUpdatedImage(this.iconPositions[n],e.getImage(n),t),this.patchUpdatedImage(this.patternPositions[n],e.getImage(n),t)}patchUpdatedImage(e,t,n){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,i]=e.tl;n.update(t.data,void 0,{x:r,y:i})}}ji(Dh,"ImagePosition"),ji(Rh,"ImageAtlas");const Lh={horizontal:1,vertical:2,horizontalOnly:3};class zh{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(e,t){const n=new zh;return n.scale=e||1,n.fontStack=t,n}static forImage(e){const t=new zh;return t.imageName=e,t}}class Zh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t){const n=new Zh;for(let r=0;r<e.sections.length;r++){const i=e.sections[r];i.image?n.addImageSection(i):n.addTextSection(i,t)}return n}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCharCode(e){return this.text.charCodeAt(e)}verticalizePunctuation(e){this.text=function(e,t){let n="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;n+=!t&&(i&&Eo(i)&&!oh[e[r+1]]||o&&Eo(o)&&!oh[e[r-1]])||!oh[e[r]]?e[r]:oh[e[r]]}return n}(this.text,e)}trim(){let e=0;for(let n=0;n<this.text.length&&Uh[this.text.charCodeAt(n)];n++)e++;let t=this.text.length;for(let n=this.text.length-1;n>=0&&n>=e&&Uh[this.text.charCodeAt(n)];n--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const n=new Zh;return n.text=this.text.substring(e,t),n.sectionIndex=this.sectionIndex.slice(e,t),n.sections=this.sections,n}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((e,t)=>Math.max(e,this.sections[t].scale)),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(zh.forText(e.scale,e.fontStack||t));const n=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(n)}addImageSection(e){const t=e.image?e.image.name:"";if(0===t.length)return void F("Can't add FormattedSection with an empty image.");const n=this.getNextImageSectionCharCode();n?(this.text+=String.fromCharCode(n),this.sections.push(zh.forImage(t)),this.sectionIndex.push(this.sections.length-1)):F("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Nh(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p){const y=Zh.fromFeature(e,i);f===Lh.vertical&&y.verticalizePunctuation(h);let m=[];const g=function(e,t,n,r,i,o){if(!e)return[];const a=[],s=function(e,t,n,r,i,o){let a=0;for(let s=0;s<e.length();s++){const n=e.getSection(s);a+=jh(e.getCharCode(s),n,r,i,t,o)}return a/Math.max(1,Math.ceil(a/n))}(e,t,n,r,i,o),u=e.text.indexOf("\u200b")>=0;let c=0;for(let f=0;f<e.length();f++){const n=e.getSection(f),h=e.getCharCode(f);if(Uh[h]||(c+=jh(h,n,r,i,t,o)),f<e.length()-1){const t=!((l=h)<11904||!(ro(l)||no(l)||go(l)||po(l)||so(l)||Xi(l)||io(l)||Ji(l)||uo(l)||co(l)||ao(l)||_o(l)||eo(l)||$i(l)||Qi(l)||oo(l)||to(l)||mo(l)||fo(l)||lo(l)));(Fh[h]||t||n.imageName)&&a.push(Kh(f+1,c,s,a,Vh(h,e.getCharCode(f+1),t&&u),!1))}}var l;return Gh(Kh(e.length(),c,s,a,0,!0))}(y,c,o,t,r,d),{processBidirectionalText:v,processStyledBidirectionalText:b}=Uo;if(v&&1===y.sections.length){const e=v(y.toString(),g);for(const t of e){const e=new Zh;e.text=t,e.sections=y.sections;for(let n=0;n<t.length;n++)e.sectionIndex.push(0);m.push(e)}}else if(b){const e=b(y.text,y.sectionIndex,g);for(const t of e){const e=new Zh;e.text=t[0],e.sectionIndex=t[1],e.sections=y.sections,m.push(e)}}else m=function(e,t){const n=[],r=e.text;let i=0;for(const o of t)n.push(e.substring(i,o)),i=o;return i<r.length&&n.push(e.substring(i,r.length)),n}(y,g);const _=[],w={positionedLines:_,text:y.toString(),top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:f,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(e,t,n,r,i,o,a,s,u,c,l,f){let h=0,d=0,p=0;const y="right"===s?1:"left"===s?0:.5;let m=!1;for(const x of i){const e=x.getSections();for(const n of e){if(n.imageName)continue;const e=t[n.fontStack];if(e&&(m=void 0!==e.ascender&&void 0!==e.descender,!m))break}if(!m)break}let g=0;for(const x of i){x.trim();const i=x.getMaxScale(),a=(i-1)*$f,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[g]=s;const b=s.positionedGlyphs;let _=0;if(!x.length()){d+=o,++g;continue}let w=0,k=0;for(let o=0;o<x.length();o++){const a=x.getSection(o),s=x.getSectionIndex(o),p=x.getCharCode(o);let y=a.scale,g=null,A=null,E=null,I=$f,S=0;const T=!(u===Lh.horizontal||!l&&!Ao(p)||l&&(Uh[p]||(v=p,Hi(v)||qi(v)||Yi(v)||yo(v)||bo(v))));if(a.imageName){const t=r[a.imageName];if(!t)continue;E=a.imageName,e.iconsInText=e.iconsInText||!0,A=t.paddedRect;const n=t.displaySize;y=y*$f/f,g={width:n[0],height:n[1],left:1,top:-3,advance:T?n[1]:n[0],localGlyph:!1},S=m?-g.height*y:i*$f-17-n[1]*y,I=g.advance;const o=(T?n[0]:n[1])*y-$f*i;o>0&&o>_&&(_=o)}else{const e=n[a.fontStack];if(!e)continue;e[p]&&(A=e[p]);const r=t[a.fontStack];if(!r)continue;const o=r.glyphs[p];if(!o)continue;if(g=o.metrics,I=8203!==p?$f:0,m){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,n=(e+t)*y;w<n&&(w=n,k=(e-t)/2*y),S=-e*y}else S=(i-y)*$f-17}T?(e.verticalizable=!0,b.push({glyph:p,imageName:E,x:h,y:d+S,vertical:T,scale:y,localGlyph:g.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:g,rect:A}),h+=I*y+c):(b.push({glyph:p,imageName:E,x:h,y:d+S,vertical:T,scale:y,localGlyph:g.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:g,rect:A}),h+=g.advance*y+c)}0!==b.length&&(p=Math.max(h-c,p),m?qh(b,y,_,k,o*i/2):qh(b,y,_,0,o/2)),h=0;const A=o*i+_;s.lineOffset=Math.max(_,a),d+=A,++g}var v;const b=d,{horizontalAlign:_,verticalAlign:w}=Hh(a);(function(e,t,n,r,i,o){const a=(t-n)*i,s=-o*r;for(const u of e)for(const e of u.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,y,_,w,p,b),e.top+=-w*b,e.bottom=e.top+b,e.left+=-_*p,e.right=e.left+p,e.hasBaseline=m}(w,t,n,r,m,a,s,u,f,c,h,p),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(_)&&w}const Uh={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function jh(e,t,n,r,i,o){if(t.imageName){const e=r[t.imageName];return e?e.displaySize[0]*t.scale*$f/o+i:0}{const r=n[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+i:0}}function Wh(e,t,n,r){const i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function Vh(e,t,n){let r=0;return 10===e&&(r-=1e4),n&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Kh(e,t,n,r,i,o){let a=null,s=Wh(t,n,i,o);for(const u of r){const e=Wh(t-u.x,n,i,o)+u.badness;e<=s&&(a=u,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Gh(e){return e?Gh(e.priorBreak).concat(e.index):[]}function Hh(e){let t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function qh(e,t,n,r,i){if(!(t||n||r||i))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let u=0;u<=o;u++)e[u].x-=s,e[u].y+=n+r+i}function Yh(e,t,n){const{horizontalAlign:r,verticalAlign:i}=Hh(n),o=t[0]-e.displaySize[0]*r,a=t[1]-e.displaySize[1]*i;return{image:e,top:a,bottom:a+e.displaySize[1],left:o,right:o+e.displaySize[0]}}function Xh(e,t,n,r,i,o){const a=e.image;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const u=t.left*o,c=t.right*o;let l,f,h,d;"width"===n||"both"===n?(d=i[0]+u-r[3],f=i[0]+c+r[1]):(d=i[0]+(u+c-a.displaySize[0])/2,f=d+a.displaySize[0]);const p=t.top*o,y=t.bottom*o;return"height"===n||"both"===n?(l=i[1]+p-r[0],h=i[1]+y+r[2]):(l=i[1]+(p+y-a.displaySize[1])/2,h=l+a.displaySize[1]),{image:a,top:l,right:f,bottom:h,left:d,collisionPadding:s}}class Qh extends p{constructor(e,t,n,r,i){super(e,t),this.angle=r,this.z=n,void 0!==i&&(this.segment=i)}clone(){return new Qh(this.x,this.y,this.z,this.angle,this.segment)}}function $h(e,t,n,r,i){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-n/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const u=[];let c=0;for(;s<n/2;){const t=e[a],n=e[a+1];if(!n)return!1;let o=e[a-1].angleTo(t)-t.angleTo(n);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),u.push({distance:s,angleDelta:o}),c+=o;s-u[0].distance>r;)c-=u.shift().angleDelta;if(c>i)return!1;a++,s+=t.dist(n)}return!0}function Jh(e){let t=0;for(let n=0;n<e.length-1;n++)t+=e[n].dist(e[n+1]);return t}function ed(e,t,n){return e?.6*t*n:0}function td(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function nd(e,t,n,r,i,o){const a=ed(n,i,o),s=td(n,r)*o;let u=0;const c=Jh(e)/2;for(let l=0;l<e.length-1;l++){const n=e[l],r=e[l+1],i=n.dist(r);if(u+i>c){const o=(c-u)/i,f=Tn(n.x,r.x,o),h=Tn(n.y,r.y,o),d=new Qh(f,h,0,r.angleTo(n),l);return!a||$h(e,d,s,a,t)?d:void 0}u+=i}}function rd(e,t,n,r,i,o,a,s,u){const c=ed(r,o,a),l=td(r,i),f=l*a,h=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;return t-f<t/4&&(t=f+t/4),id(e,h?t/2*s%t:(l/2+2*o)*a*s%t,t,c,n,f,h,!1,u)}function id(e,t,n,r,i,o,a,s,u){const c=o/2,l=Jh(e);let f=0,h=t-n,d=[];for(let p=0;p<e.length-1;p++){const t=e[p],a=e[p+1],s=t.dist(a),y=a.angleTo(t);for(;h+n<f+s;){h+=n;const m=(h-f)/s,g=Tn(t.x,a.x,m),v=Tn(t.y,a.y,m);if(g>=0&&g<u&&v>=0&&v<u&&h-c>=0&&h+c<=l){const t=new Qh(g,v,0,y,p);t._round(),r&&!$h(e,t,o,r,i)||d.push(t)}}f+=s}return s||d.length||a||(d=id(e,f/2,n,r,i,o,a,!0,u)),d}function od(e,t,n,r,i){const o=[];for(let a=0;a<e.length;a++){const s=e[a];let u;for(let e=0;e<s.length-1;e++){let a=s[e],c=s[e+1];a.x<t&&c.x<t||(a.x<t?a=new p(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x<t&&(c=new p(t,a.y+(t-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y<n&&c.y<n||(a.y<n?a=new p(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round():c.y<n&&(c=new p(a.x+(n-a.y)/(c.y-a.y)*(c.x-a.x),n)._round()),a.x>=r&&c.x>=r||(a.x>=r?a=new p(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round():c.x>=r&&(c=new p(r,a.y+(r-a.x)/(c.x-a.x)*(c.y-a.y))._round()),a.y>=i&&c.y>=i||(a.y>=i?a=new p(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round():c.y>=i&&(c=new p(a.x+(i-a.y)/(c.y-a.y)*(c.x-a.x),i)._round()),u&&a.equals(u[u.length-1])||(u=[a],o.push(u)),u.push(c)))))}}return o}ji(Qh,"Anchor");const ad=1e20;function sd(e,t,n,r,i,o,a,s,u){for(let c=t;c<t+r;c++)ud(e,n*o+c,o,i,a,s,u);for(let c=n;c<n+i;c++)ud(e,c*o+t,1,r,a,s,u)}function ud(e,t,n,r,i,o,a){o[0]=0,a[0]=-ad,a[1]=ad,i[0]=e[t];for(let s=1,u=0,c=0;s<r;s++){i[s]=e[t+s*n];const r=s*s;do{const e=o[u];c=(i[s]-i[e]+r-e*e)/(s-e)/2}while(c<=a[u]&&--u>-1);u++,o[u]=s,a[u]=c,a[u+1]=ad}for(let s=0,u=0;s<r;s++){for(;a[u+1]<s;)u++;const r=o[u],c=s-r;e[t+s*n]=i[r]+c*c}}const cd={none:0,ideographs:1,all:2};class ld{constructor(e,t,n){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=n,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e){this.url=e}getGlyphs(e,t){const n=[];for(const r in e)for(const t of e[r])n.push({stack:r,id:t});S(n,(({stack:e,id:t},n)=>{let r=this.entries[e];r||(r=this.entries[e]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let i=r.glyphs[t];if(void 0!==i)return void n(null,{stack:e,id:t,glyph:i});if(i=this._tinySDF(r,e,t),i)return r.glyphs[t]=i,void n(null,{stack:e,id:t,glyph:i});const o=Math.floor(t/256);if(256*o>65535)return void n(new Error("glyphs > 65535 not supported"));if(r.ranges[o])return void n(null,{stack:e,id:t,glyph:i});let a=r.requests[o];a||(a=r.requests[o]=[],ld.loadGlyphRange(e,o,this.url,this.requestManager,((e,t)=>{if(t){r.ascender=t.ascender,r.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(r.glyphs[+e]=t.glyphs[+e]);r.ranges[o]=!0}for(const n of a)n(e,t);delete r.requests[o]}))),a.push(((r,i)=>{r?n(r):i&&n(null,{stack:e,id:t,glyph:i.glyphs[t]||null})}))}),((e,n)=>{if(e)t(e);else if(n){const e={};for(const{stack:t,id:r,glyph:i}of n)void 0===e[t]&&(e[t]={}),void 0===e[t].glyphs&&(e[t].glyphs={}),e[t].glyphs[r]=i&&{id:i.id,bitmap:i.bitmap.clone(),metrics:i.metrics},e[t].ascender=this.entries[t].ascender,e[t].descender=this.entries[t].descender;t(null,e)}}))}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==cd.none&&(this.localGlyphMode===cd.all?!!this.localFontFamily:!!this.localFontFamily&&(co(e)||ho(e)||eo(e)||to(e)||Ji(e)))}_tinySDF(e,t,n){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(n))return;let i=e.tinySDF;if(!i){let n="400";/bold/i.test(t)?n="900":/medium/i.test(t)?n="500":/light/i.test(t)&&(n="200"),i=e.tinySDF=new ld.TinySDF({fontFamily:r,fontWeight:n,fontSize:48,buffer:6,radius:16}),i.fontWeight=n}if(this.localGlyphs[i.fontWeight][n])return this.localGlyphs[i.fontWeight][n];const o=String.fromCharCode(n),{data:a,width:s,height:u,glyphWidth:c,glyphHeight:l,glyphLeft:f,glyphTop:h,glyphAdvance:d}=i.draw(o);return this.localGlyphs[i.fontWeight][n]={id:n,bitmap:new $c({width:s,height:u},a),metrics:{width:c/2,height:l/2,left:f/2,top:h/2-27,advance:d/2,localGlyph:!0}}}}function fd(e,t,n,r){const i=[],o=e.image,a=o.pixelRatio,s=o.paddedRect.w-2,u=o.paddedRect.h-2,c=e.right-e.left,l=e.bottom-e.top,f=o.stretchX||[[0,s]],h=o.stretchY||[[0,u]],d=(e,t)=>e+t[1]-t[0],y=f.reduce(d,0),m=h.reduce(d,0),g=s-y,v=u-m;let b=0,_=y,w=0,x=m,k=0,A=g,E=0,I=v;if(o.content&&r){const e=o.content;b=hd(f,0,e[0]),w=hd(h,0,e[1]),_=hd(f,e[0],e[2]),x=hd(h,e[1],e[3]),k=e[0]-b,E=e[1]-w,A=e[2]-e[0]-_,I=e[3]-e[1]-x}const S=(r,i,s,u)=>{const f=pd(r.stretch-b,_,c,e.left),h=yd(r.fixed-k,A,r.stretch,y),d=pd(i.stretch-w,x,l,e.top),g=yd(i.fixed-E,I,i.stretch,m),v=pd(s.stretch-b,_,c,e.left),S=yd(s.fixed-k,A,s.stretch,y),T=pd(u.stretch-w,x,l,e.top),M=yd(u.fixed-E,I,u.stretch,m),P=new p(f,d),B=new p(v,d),C=new p(v,T),O=new p(f,T),D=new p(h/a,g/a),R=new p(S/a,M/a),L=t*Math.PI/180;if(L){const e=Math.sin(L),t=Math.cos(L),n=[t,-e,e,t];P._matMult(n),B._matMult(n),O._matMult(n),C._matMult(n)}const z=r.stretch+r.fixed,Z=i.stretch+i.fixed;return{tl:P,tr:B,bl:O,br:C,tex:{x:o.paddedRect.x+1+z,y:o.paddedRect.y+1+Z,w:s.stretch+s.fixed-z,h:u.stretch+u.fixed-Z},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:D,pixelOffsetBR:R,minFontScaleX:A/a/c,minFontScaleY:I/a/l,isSDF:n}};if(r&&(o.stretchX||o.stretchY)){const e=dd(f,g,y),t=dd(h,v,m);for(let n=0;n<e.length-1;n++){const r=e[n],o=e[n+1];for(let e=0;e<t.length-1;e++)i.push(S(r,t[e],o,t[e+1]))}}else i.push(S({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:s+1},{fixed:0,stretch:u+1}));return i}function hd(e,t,n){let r=0;for(const i of e)r+=Math.max(t,Math.min(n,i[1]))-Math.max(t,Math.min(n,i[0]));return r}function dd(e,t,n){const r=[{fixed:-1,stretch:0}];for(const[i,o]of e){const e=r[r.length-1];r.push({fixed:i-e.stretch,stretch:e.stretch}),r.push({fixed:i-e.stretch,stretch:e.stretch+(o-i)})}return r.push({fixed:t+1,stretch:n}),r}function pd(e,t,n,r){return e/t*n+r}function yd(e,t,n,r){return e-t*n/r}function md(e,t,n,r){const i=t+e.positionedLines[r].lineOffset;return 0===r?n+i/2:n+(i+(t+e.positionedLines[r-1].lineOffset))/2}ld.loadGlyphRange=function(e,t,n,r,i){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(n).replace("{fontstack}",e).replace("{range}",`${o}-${a}`),oe.Glyphs);ce(s,((e,t)=>{if(e)i(e);else if(t){const e={},n=function(e){return new uh(e).readFields(Ph,{})}(t);for(const t of n.glyphs)e[t.id]=t;i(null,{glyphs:e,ascender:n.ascender,descender:n.descender})}}))},ld.TinySDF=class{constructor({fontSize:e=24,buffer:t=3,radius:n=8,cutoff:r=.25,fontFamily:i="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}={}){this.buffer=t,this.cutoff=r,this.radius=n;const s=this.size=e+4*t,u=this._createCanvas(s),c=this.ctx=u.getContext("2d",{willReadFrequently:!0});c.font=`${a} ${o} ${e}px ${i}`,c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:n,actualBoundingBoxDescent:r,actualBoundingBoxLeft:i,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(n),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-i))),u=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,l=u+2*this.buffer,f=Math.max(c*l,0),h=new Uint8ClampedArray(f),d={data:h,width:c,height:l,glyphWidth:s,glyphHeight:u,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===u)return d;const{ctx:p,buffer:y,gridInner:m,gridOuter:g}=this;p.clearRect(y,y,s,u),p.fillText(e,y,y+a);const v=p.getImageData(y,y,s,u);g.fill(ad,0,f),m.fill(0,0,f);for(let b=0;b<u;b++)for(let e=0;e<s;e++){const t=v.data[4*(b*s+e)+3]/255;if(0===t)continue;const n=(b+y)*c+e+y;if(1===t)g[n]=0,m[n]=ad;else{const e=.5-t;g[n]=e>0?e*e:0,m[n]=e<0?e*e:0}}sd(g,0,0,c,l,c,this.f,this.v,this.z),sd(m,y,y,s,u,c,this.f,this.v,this.z);for(let b=0;b<f;b++){const e=Math.sqrt(g[b])-Math.sqrt(m[b]);h[b]=Math.round(255-255*(e/this.radius+this.cutoff))}return d}};class gd{constructor(e=[],t=vd){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:n}=this,r=t[e];for(;e>0;){const i=e-1>>1,o=t[i];if(n(r,o)>=0)break;t[e]=o,e=i}t[e]=r}_down(e){const{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=1+(e<<1),o=t[r];const a=r+1;if(a<this.length&&n(t[a],o)<0&&(r=a,o=t[a]),n(o,i)>=0)break;t[e]=o,e=r}t[e]=i}}function vd(e,t){return e<t?-1:e>t?1:0}function bd(e,t=1,n=!1){let r=1/0,i=1/0,o=-1/0,a=-1/0;const s=e[0];for(let d=0;d<s.length;d++){const e=s[d];(!d||e.x<r)&&(r=e.x),(!d||e.y<i)&&(i=e.y),(!d||e.x>o)&&(o=e.x),(!d||e.y>a)&&(a=e.y)}const u=Math.min(o-r,a-i);let c=u/2;const l=new gd([],_d);if(0===u)return new p(r,i);for(let d=r;d<o;d+=u)for(let t=i;t<a;t+=u)l.push(new wd(d+c,t+c,c,e));let f=function(e){let t=0,n=0,r=0;const i=e[0];for(let o=0,a=i.length,s=a-1;o<a;s=o++){const e=i[o],a=i[s],u=e.x*a.y-a.x*e.y;n+=(e.x+a.x)*u,r+=(e.y+a.y)*u,t+=3*u}return new wd(n/t,r/t,0,e)}(e),h=l.length;for(;l.length;){const r=l.pop();(r.d>f.d||!f.d)&&(f=r,n&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,h)),r.max-f.d<=t||(c=r.h/2,l.push(new wd(r.p.x-c,r.p.y-c,c,e)),l.push(new wd(r.p.x+c,r.p.y-c,c,e)),l.push(new wd(r.p.x-c,r.p.y+c,c,e)),l.push(new wd(r.p.x+c,r.p.y+c,c,e)),h+=4)}return n&&(console.log(`num probes: ${h}`),console.log(`best distance: ${f.d}`)),f.p}function _d(e,t){return t.max-e.max}function wd(e,t,n,r){this.p=new p(e,t),this.h=n,this.d=function(e,t){let n=!1,r=1/0;for(let i=0;i<t.length;i++){const o=t[i];for(let t=0,i=o.length,a=i-1;t<i;a=t++){const i=o[t],s=o[a];i.y>e.y!=s.y>e.y&&e.x<(s.x-i.x)*(e.y-i.y)/(s.y-i.y)+i.x&&(n=!n),r=Math.min(r,Cc(e,i,s))}}return(n?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}const xd=Number.POSITIVE_INFINITY,kd=Math.sqrt(2);function Ad(e,[t,n]){let r=0,i=0;if(n===xd){t<0&&(t=0);const n=t/kd;switch(e){case"top-right":case"top-left":i=n-7;break;case"bottom-right":case"bottom-left":i=7-n;break;case"bottom":i=7-t;break;case"top":i=t-7}switch(e){case"top-right":case"bottom-right":r=-n;break;case"top-left":case"bottom-left":r=n;break;case"left":r=t;break;case"right":r=-t}}else{switch(t=Math.abs(t),n=Math.abs(n),e){case"top-right":case"top-left":case"top":i=n-7;break;case"bottom-right":case"bottom-left":case"bottom":i=7-n}switch(e){case"top-right":case"bottom-right":case"right":r=-t;break;case"top-left":case"bottom-left":case"left":r=t}}return[r,i]}function Ed(e,t,n,r,i,o,a,s,u,c){e.createArrays(),e.tilePixelRatio=Es/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const l=e.layers[0].layout,f=e.layers[0]._unevaluatedLayout._values,h={};if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:n}=e.textSizeData;h.compositeTextSizes=[f["text-size"].possiblyEvaluate(new Fo(t),s),f["text-size"].possiblyEvaluate(new Fo(n),s)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:n}=e.iconSizeData;h.compositeIconSizes=[f["icon-size"].possiblyEvaluate(new Fo(t),s),f["icon-size"].possiblyEvaluate(new Fo(n),s)]}h.layoutTextSize=f["text-size"].possiblyEvaluate(new Fo(u+1),s),h.layoutIconSize=f["icon-size"].possiblyEvaluate(new Fo(u+1),s),h.textMaxSize=f["text-size"].possiblyEvaluate(new Fo(18),s);const d="map"===l.get("text-rotation-alignment")&&"point"!==l.get("symbol-placement"),p=l.get("text-size");for(const y of e.features){const o=l.get("text-font").evaluate(y,{},s).join(","),u=p.evaluate(y,{},s),f=h.layoutTextSize.evaluate(y,{},s),m=(h.layoutIconSize.evaluate(y,{},s),{horizontal:{},vertical:void 0}),g=y.text;let v,b=[0,0];if(g){const r=g.toString(),a=l.get("text-letter-spacing").evaluate(y,{},s)*$f,c=l.get("text-line-height").evaluate(y,{},s)*$f,h=xo(r)?a:0,p=l.get("text-anchor").evaluate(y,{},s),v=l.get("text-variable-anchor");if(!v){const e=l.get("text-radial-offset").evaluate(y,{},s);b=e?Ad(p,[e*$f,xd]):l.get("text-offset").evaluate(y,{},s).map((e=>e*$f))}let _=d?"center":l.get("text-justify").evaluate(y,{},s);const w="point"===l.get("symbol-placement"),x=w?l.get("text-max-width").evaluate(y,{},s)*$f:1/0,k=a=>{e.allowVerticalPlacement&&wo(r)&&(m.vertical=Nh(g,t,n,i,o,x,c,p,a,h,b,Lh.vertical,!0,f,u))};if(!d&&v){const e="auto"===_?v.map((e=>Id(e))):[_];let r=!1;for(let a=0;a<e.length;a++){const s=e[a];if(!m.horizontal[s])if(r)m.horizontal[s]=m.horizontal[0];else{const e=Nh(g,t,n,i,o,x,c,"center",s,h,b,Lh.horizontal,!1,f,u);e&&(m.horizontal[s]=e,r=1===e.positionedLines.length)}}k("left")}else{if("auto"===_&&(_=Id(p)),w||l.get("text-writing-mode").indexOf("horizontal")>=0||!wo(r)){const e=Nh(g,t,n,i,o,x,c,p,_,h,b,Lh.horizontal,!1,f,u);e&&(m.horizontal[_]=e)}k(w?"left":_)}}let _=!1;if(y.icon&&y.icon.name){const t=r[y.icon.name];t&&(v=Yh(i[y.icon.name],l.get("icon-offset").evaluate(y,{},s),l.get("icon-anchor").evaluate(y,{},s)),_=t.sdf,void 0===e.sdfIcons?e.sdfIcons=t.sdf:e.sdfIcons!==t.sdf&&F("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(t.pixelRatio!==e.pixelRatio||0!==l.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0))}const w=Pd(m.horizontal)||m.vertical;e.iconsInText||(e.iconsInText=!!w&&w.iconsInText),(w||v)&&Sd(e,y,m,v,r,h,f,0,b,_,a,s,c)}o&&e.generateCollisionDebugBuffers(u,e.collisionBoxArray)}function Id(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Sd(e,t,n,r,i,o,a,s,u,c,l,f,h){let d=o.textMaxSize.evaluate(t,{},f);void 0===d&&(d=a);const p=e.layers[0].layout,y=p.get("icon-offset").evaluate(t,{},f),m=Pd(n.horizontal)||n.vertical,g="globe"===h.name,b=a/24,_=e.tilePixelRatio*d/24,w=(M=e.overscaling,e.zoom>18&&M>2&&(M>>=1),Math.max(Es/(512*M),1)*p.get("symbol-spacing")),x=p.get("text-padding")*e.tilePixelRatio,k=p.get("icon-padding")*e.tilePixelRatio,A=v(p.get("text-max-angle")),E="map"===p.get("text-rotation-alignment")&&"point"!==p.get("symbol-placement"),I="map"===p.get("icon-rotation-alignment")&&"point"!==p.get("symbol-placement"),S=p.get("symbol-placement"),T=w/2;var M;const P=p.get("icon-text-fit");let B;r&&"none"!==P&&(e.allowVerticalPlacement&&n.vertical&&(B=Xh(r,n.vertical,P,p.get("icon-text-fit-padding"),y,b)),m&&(r=Xh(r,m,P,p.get("icon-text-fit-padding"),y,b)));const C=(a,s,d)=>{if(s.x<0||s.x>=Es||s.y<0||s.y>=Es)return;let p=null;if(g){const{x:e,y:t,z:n}=h.projectTilePoint(s.x,s.y,d);p={anchor:new Qh(e,t,n,0,void 0),up:h.upVector(d,s.x,s.y)}}!function(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A){const E=e.addToLineVertexArray(t,r);let I,S,T,M,P,B,C,O=0,D=0,R=0,L=0,z=-1,Z=-1;const N={};let U=Va("");const j=n?n.anchor:t;let W=0,V=0;if(void 0===u._unevaluatedLayout.getValue("text-radial-offset")?[W,V]=u.layout.get("text-offset").evaluate(_,{},A).map((e=>e*$f)):(W=u.layout.get("text-radial-offset").evaluate(_,{},A)*$f,V=xd),e.allowVerticalPlacement&&i.vertical){const e=i.vertical;if(p)B=Cd(e),s&&(C=Cd(s));else{const n=u.layout.get("text-rotate").evaluate(_,{},A)+90;T=Bd(c,j,t,l,f,h,e,d,n,y),s&&(M=Bd(c,j,t,l,f,h,s,g,n))}}if(o){const r=u.layout.get("icon-rotate").evaluate(_,{},A),i="none"!==u.layout.get("icon-text-fit"),a=fd(o,r,x,i),d=s?fd(s,r,x,i):void 0;S=Bd(c,j,t,l,f,h,o,g,r),O=4*a.length;const p=e.iconSizeData;let y=null;"source"===p.kind?(y=[Jf*u.layout.get("icon-size").evaluate(_,{},A)],y[0]>Td&&F(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===p.kind&&(y=[Jf*w.compositeIconSizes[0].evaluate(_,{},A),Jf*w.compositeIconSizes[1].evaluate(_,{},A)],(y[0]>Td||y[1]>Td)&&F(`${e.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),e.addSymbols(e.icon,a,y,b,v,_,!1,n,t,E.lineStartIndex,E.lineLength,-1,k,A),z=e.icon.placedSymbolArray.length-1,d&&(D=4*d.length,e.addSymbols(e.icon,d,y,b,v,_,Lh.vertical,n,t,E.lineStartIndex,E.lineLength,-1,k,A),Z=e.icon.placedSymbolArray.length-1)}for(const F in i.horizontal){const r=i.horizontal[F];I||(U=Va(r.text),p?P=Cd(r):I=Bd(c,j,t,l,f,h,r,d,u.layout.get("text-rotate").evaluate(_,{},A),y));const o=1===r.positionedLines.length;if(R+=Md(e,n,t,r,a,u,p,_,y,E,i.vertical?Lh.horizontal:Lh.horizontalOnly,o?Object.keys(i.horizontal):[F],N,z,w,k,A),o)break}i.vertical&&(L+=Md(e,n,t,i.vertical,a,u,p,_,y,E,Lh.vertical,["vertical"],N,Z,w,k,A));let K=-1;const G=(e,t)=>e?Math.max(e,t):t;K=G(P,K),K=G(B,K),K=G(C,K);const H=K>-1?1:0;e.glyphOffsetArray.length>=fp.MAX_GLYPHS&&F("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,_.sortKey),e.symbolInstances.emplaceBack(j.x,j.y,j.z,t.x,t.y,N.right>=0?N.right:-1,N.center>=0?N.center:-1,N.left>=0?N.left:-1,N.vertical>=0?N.vertical:-1,z,Z,U,void 0!==I?I:e.collisionBoxArray.length,void 0!==I?I+1:e.collisionBoxArray.length,void 0!==T?T:e.collisionBoxArray.length,void 0!==T?T+1:e.collisionBoxArray.length,void 0!==S?S:e.collisionBoxArray.length,void 0!==S?S+1:e.collisionBoxArray.length,M||e.collisionBoxArray.length,M?M+1:e.collisionBoxArray.length,l,R,L,O,D,H,0,W,V,K)}(e,s,p,a,n,r,i,B,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,x,E,u,0,k,I,y,t,o,c,l,f)};if("line"===S)for(const v of od(t.geometry,0,0,Es,Es)){const t=rd(v,w,A,n.vertical||m,r,24,_,e.overscaling,Es);for(const n of t)m&&Od(e,m.text,T,n)||C(v,n,f)}else if("line-center"===S){for(const v of t.geometry)if(v.length>1){const e=nd(v,A,n.vertical||m,r,24,_);e&&C(v,e,f)}}else if("Polygon"===t.type)for(const v of Ll(t.geometry,0)){const e=bd(v,16);C(v[0],new Qh(e.x,e.y,0,0,void 0),f)}else if("LineString"===t.type)for(const v of t.geometry)C(v,new Qh(v[0].x,v[0].y,0,0,void 0),f);else if("Point"===t.type)for(const v of t.geometry)for(const e of v)C([e],new Qh(e.x,e.y,0,0,void 0),f)}const Td=32640;function Md(e,t,n,r,i,o,a,s,u,c,l,f,h,d,y,m,g){const v=function(e,t,n,r,i,o,a,s){const u=[];if(0===t.positionedLines.length)return u;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,l=function(e){const t=e[0],n=e[1],r=t*n;return r>0?[t,-n]:r<0?[-t,n]:0===t?[n,t]:[n,-t]}(n);let f=Math.abs(t.top-t.bottom);for(const p of t.positionedLines)f-=p.lineOffset;const h=t.positionedLines.length,d=f/h;let y=t.top-n[1];for(let m=0;m<h;++m){const e=t.positionedLines[m];y=md(t,d,y,m);for(const r of e.positionedGlyphs){if(!r.rect)continue;const e=r.rect||{};let o=4,f=!0,h=1,d=0;if(r.imageName){const e=a[r.imageName];if(!e)continue;if(e.sdf){F("SDF images are not supported in formatted text and will be ignored.");continue}f=!1,h=e.pixelRatio,o=1/h}const m=(i||s)&&r.vertical,g=r.metrics.advance*r.scale/2,v=r.metrics,b=r.rect;if(null===b)continue;s&&t.verticalizable&&(d=r.imageName?g-r.metrics.width*r.scale/2:0);const _=i?[r.x+g,r.y]:[0,0];let w=[0,0],x=[0,0],k=!1;i||(m?(x=[r.x+g+l[0],r.y+l[1]-d],k=!0):w=[r.x+g+n[0],r.y+n[1]-d]);const A=b.w*r.scale/(h*(r.localGlyph?2:1)),E=b.h*r.scale/(h*(r.localGlyph?2:1));let I,S,T,M;if(m){const e=r.y-y,t=new p(-g,g-e),n=-Math.PI/2,i=new p(...x);I=new p(-g+w[0],w[1]),I._rotateAround(n,t)._add(i),I.x+=-e+g,I.y-=(v.left-o)*r.scale;const a=r.imageName?v.advance*r.scale:$f*r.scale,s=String.fromCharCode(r.glyph);ah(s)?I.x+=(1-o)*r.scale:sh(s)?I.x+=a-v.height*r.scale+(-o-1)*r.scale:I.x+=r.imageName||v.width+2*o===b.w&&v.height+2*o===b.h?(a-E)/2:(a-(v.height+2*o)*r.scale)/2,S=new p(I.x,I.y-A),T=new p(I.x+E,I.y),M=new p(I.x+E,I.y-A)}else{const e=(v.left-o)*r.scale-g+w[0],t=(-v.top-o)*r.scale+w[1],n=e+A,i=t+E;I=new p(e,t),S=new p(n,t),T=new p(e,i),M=new p(n,i)}if(c){let e;e=i?new p(0,0):k?new p(l[0],l[1]):new p(n[0],n[1]),I._rotateAround(c,e),S._rotateAround(c,e),T._rotateAround(c,e),M._rotateAround(c,e)}const P=new p(0,0),B=new p(0,0);u.push({tl:I,tr:S,bl:T,br:M,tex:e,writingMode:t.writingMode,glyphOffset:_,sectionIndex:r.sectionIndex,isSDF:f,pixelOffsetTL:P,pixelOffsetBR:B,minFontScaleX:0,minFontScaleY:0})}}return u}(0,r,u,o,a,s,i,e.allowVerticalPlacement),b=e.textSizeData;let _=null;"source"===b.kind?(_=[Jf*o.layout.get("text-size").evaluate(s,{},g)],_[0]>Td&&F(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===b.kind&&(_=[Jf*y.compositeTextSizes[0].evaluate(s,{},g),Jf*y.compositeTextSizes[1].evaluate(s,{},g)],(_[0]>Td||_[1]>Td)&&F(`${e.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),e.addSymbols(e.text,v,_,u,a,s,l,t,n,c.lineStartIndex,c.lineLength,d,m,g);for(const p of f)h[p]=e.text.placedSymbolArray.length-1;return 4*v.length}function Pd(e){for(const t in e)return e[t];return null}function Bd(e,t,n,r,i,o,a,s,u,c){let l=a.top,f=a.bottom,h=a.left,d=a.right;const y=a.collisionPadding;if(y&&(h-=y[0],l-=y[1],d+=y[2],f+=y[3]),u){const e=new p(h,l),t=new p(d,l),n=new p(h,f),r=new p(d,f),i=v(u);let o=new p(0,0);c&&(o=new p(c[0],c[1])),e._rotateAround(i,o),t._rotateAround(i,o),n._rotateAround(i,o),r._rotateAround(i,o),h=Math.min(e.x,t.x,n.x,r.x),d=Math.max(e.x,t.x,n.x,r.x),l=Math.min(e.y,t.y,n.y,r.y),f=Math.max(e.y,t.y,n.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,n.x,n.y,h,l,d,f,s,r,i,o),e.length-1}function Cd(e){e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Od(e,t,n,r){const i=e.compareText;if(t in i){const e=i[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<n)return!0}else i[t]=[];return i[t].push(r),!1}function Dd(e,t){const n=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,i=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(n)*i/Math.sin(Math.max(Math.PI/2-e._pitch-n,.01)),a=Math.sin(e._pitch)*o+i;return Math.min(1.01*a,i*(1/e._horizonShift))}function Rd(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const n=Math.pow(2,-e.z),r=e.x*n,i=(e.x+1)*n,o=e.y*n,a=(e.y+1)*n,s=sc(r),u=sc(i),c=uc(o),l=uc(a),f=t.project(s,c),h=t.project(u,c),d=t.project(u,l),p=t.project(s,l);let y=Math.min(f.x,h.x,d.x,p.x),m=Math.min(f.y,h.y,d.y,p.y),g=Math.max(f.x,h.x,d.x,p.x),v=Math.max(f.y,h.y,d.y,p.y);const b=n/16;function _(e,n,r,i,o,a){const s=(r+o)/2,u=(i+a)/2,c=t.project(sc(s),uc(u)),l=Math.max(0,y-c.x,m-c.y,c.x-g,c.y-v);y=Math.min(y,c.x),g=Math.max(g,c.x),m=Math.min(m,c.y),v=Math.max(v,c.y),l>b&&(_(e,c,r,i,s,u),_(c,n,s,u,o,a))}_(f,h,r,o,i,o),_(h,d,i,o,i,a),_(d,p,i,a,r,a),_(p,f,r,a,r,o),y-=b,m-=b,g+=b,v+=b;const w=1/Math.max(g-y,v-m);return{scale:w,x:y*w,y:m*w,x2:g*w,y2:v*w,projection:t}}const Ld=Bs(new Float32Array(16));class zd{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new nc(0,0)}projectTilePoint(e,t,n){return{x:e,y:t,z:0}}locationPoint(e,t,n=!0){return e._coordinatePoint(e.locationCoordinate(t),n)}pixelsPerMeter(e,t){return ac(1,e)*t}pixelSpaceConversion(e,t,n){return 1}farthestPixelDistance(e){return Dd(e,e.pixelsPerMeter)}pointCoordinate(e,t,n,r){const i=e.horizonLineFromTop(!1),o=new p(t,Math.max(i,n));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,r))}pointCoordinate3D(e,t,n){const r=new p(t,n);if(e.elevation)return e.elevation.pointCoordinate(r);{const t=this.pointCoordinate(e,r.x,r.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation)return!this.pointCoordinate3D(e,t.x,t.y);const n=e.horizonLineFromTop();return t.y<n}createInversionMatrix(e,t){return Ld}createTileMatrix(e,t,n){let r,i,o;const a=n.canonical,s=Bs(new Float64Array(16));if(this.isReprojectedInTileSpace){const u=Rd(a,this);r=1,i=u.x+n.wrap*u.scale,o=u.y,Rs(s,s,[r/u.scale,r/u.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),i=(a.x+Math.pow(2,a.z)*n.wrap)*r,o=a.y*r;return Ds(s,s,[i,o,0]),Rs(s,s,[r/Es,r/Es,1]),s}upVector(e,t,n){return[0,0,1]}upVectorScale(e,t,n){return{metersToTile:1}}}class Zd extends zd{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,n]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(v(t));this.n=(r+Math.sin(v(n)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:n,c:r,r0:i}=this,o=v(e-this.center[0]),a=v(t),s=Math.sqrt(r-2*n*Math.sin(a))/n;return{x:s*Math.sin(o*n),y:s*Math.cos(o*n)-i,z:0}}unproject(e,t){const{n:n,c:r,r0:i}=this,o=i+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*n<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=v(this.center[0])*n;a=I(a,-Math.PI-s,Math.PI-s);const u=A(b(a/n)+this.center[0],-180,180),c=Math.asin(A((r-(e*e+o*o)*n*n)/(2*n),-1,1)),l=A(b(c),-lc,lc);return new nc(u,l)}}const Nd=1.340264,Ud=-.081106,Fd=893e-6,jd=.003796,Wd=Math.sqrt(3)/2;class Vd extends zd{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const n=Math.asin(Wd*Math.sin(t)),r=n*n,i=r*r*r;return{x:.5*(e*Math.cos(n)/(Wd*(Nd+3*Ud*r+i*(7*Fd+9*jd*r)))/Math.PI+.5),y:1-.5*(n*(Nd+Ud*r+i*(Fd+jd*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=n*n,i=r*r*r;for(let c,l,f,h=0;h<12&&(l=n*(Nd+Ud*r+i*(Fd+jd*r))-t,f=Nd+3*Ud*r+i*(7*Fd+9*jd*r),c=l/f,n=A(n-c,-Math.PI/3,Math.PI/3),r=n*n,i=r*r*r,!(Math.abs(c)<1e-12));++h);const o=Wd*e*(Nd+3*Ud*r+i*(7*Fd+9*jd*r))/Math.cos(n),a=Math.asin(Math.sin(n)/Wd),s=A(180*o/Math.PI,-180,180),u=A(180*a/Math.PI,-lc,lc);return new nc(s,u)}}class Kd extends zd{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const n=360*(e-.5),r=A(360*(.5-t),-lc,lc);return new nc(n,r)}}const Gd=Math.PI/2;function Hd(e){return Math.tan((Gd+e)/2)}class qd extends zd{constructor(e){super(e),this.center=e.center||[0,30];const[t,n]=this.parallels=e.parallels||[30,30];let r=v(t),i=v(n);this.southernCenter=r+i<0,this.southernCenter&&(r=-r,i=-i);const o=Math.cos(r),a=Hd(r);this.n=r===i?Math.sin(r):Math.log(o/Math.cos(i))/Math.log(Hd(i)/a),this.f=o*Math.pow(Hd(r),this.n)/this.n}project(e,t){t=v(t),this.southernCenter&&(t=-t),e=v(e-this.center[0]);const n=1e-6,{n:r,f:i}=this;i>0?t<-Gd+n&&(t=-Gd+n):t>Gd-n&&(t=Gd-n);const o=i/Math.pow(Hd(t),r);let a=o*Math.sin(r*e),s=i-o*Math.cos(r*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:n,f:r}=this,i=r-t,o=Math.sign(i),a=Math.sign(n)*Math.sqrt(e*e+i*i);let s=Math.atan2(e,Math.abs(i))*o;i*n<0&&(s-=Math.PI*Math.sign(e)*o);const u=A(b(s/n)+this.center[0],-180,180),c=A(b(2*Math.atan(Math.pow(r/a,1/n))-Gd),-lc,lc);return new nc(u,this.southernCenter?-c:c)}}class Yd extends zd{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:ic(e),y:oc(t),z:0}}unproject(e,t){const n=sc(e),r=uc(t);return new nc(n,r)}}const Xd=v(lc);class Qd extends zd{project(e,t){const n=(t=v(t))*t,r=n*n;return{x:.5*((e=v(e))*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let n=t=(2*(1-t)-1)*Math.PI,r=25,i=0,o=n*n;do{o=n*n;const e=o*o;i=(n*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),n=A(n-i,-Xd,Xd)}while(Math.abs(i)>1e-6&&--r>0);o=n*n;const a=A(b(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=b(n);return new nc(a,s)}}const $d=v(lc);class Jd extends zd{project(e,t){t=v(t),e=v(e);const n=Math.cos(t),r=2/Math.PI,i=Math.acos(n*Math.cos(e/2)),o=Math.sin(i)/i,a=.5*(e*r+2*n*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let n=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,i=25;const o=1e-6;let a=0,s=0;do{const i=Math.cos(r),o=Math.sin(r),u=2*o*i,c=o*o,l=i*i,f=Math.cos(n/2),h=Math.sin(n/2),d=2*f*h,p=h*h,y=1-l*f*f,m=y?1/y:0,g=y?Math.acos(i*f)*Math.sqrt(1/y):0,v=.5*(2*g*i*h+2*n/Math.PI)-e,b=.5*(g*o+r)-t,_=.5*m*(l*p+g*i*f*c)+1/Math.PI,w=m*(d*u/4-g*o*h),x=.125*m*(u*h-g*o*l*d),k=.5*m*(c*f+g*p*i)+.5,E=w*x-k*_;a=(b*w-v*k)/E,s=(v*x-b*_)/E,n=A(n-a,-Math.PI,Math.PI),r=A(r-s,-$d,$d)}while((Math.abs(a)>o||Math.abs(s)>o)&&--i>0);return new nc(b(n),b(r))}}class ep extends zd{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(v(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:n,cosPhi:r}=this;return{x:v(e)*r*n+.5,y:-Math.sin(v(t))/r*n+.5,z:0}}unproject(e,t){const{scale:n,cosPhi:r}=this,i=-(t-.5)/n,o=A(b((e-.5)/n)/r,-180,180),a=Math.asin(A(i*r,-1,1)),s=A(b(a),-lc,lc);return new nc(o,s)}}class tp extends Yd{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,n){const r=ju(e,t,n);return tu(r,r,Ku(Ou(n))),{x:r[0],y:r[1],z:r[2]}}locationPoint(e,t){const n=Fu(t.lat,t.lng),r=$s([],n),i=e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;Qs(n,n,r,ac(1,0)*Es*i);const o=Bs(new Float64Array(16));return Os(o,e.pixelMatrix,e.globeMatrix),tu(n,n,o),new p(n[0],n[1])}pixelsPerMeter(e,t){return ac(1,0)*t}pixelSpaceConversion(e,t,n){const r=ac(1,e)*t,i=Tn(ac(1,45)*t,r,n);return this.pixelsPerMeter(e,t)/i}createTileMatrix(e,t,n){const r=Gu(Ou(n.canonical));return Os(new Float64Array(16),e.globeMatrix,r)}createInversionMatrix(e,t){const{center:n}=e,r=Ku(Ou(t));return zs(r,r,v(n.lng)),Ls(r,r,v(n.lat)),Rs(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(e,t,n,r){return Pu(e,t,n,!0)||new hc(0,0)}pointCoordinate3D(e,t,n){const r=this.pointCoordinate(e,t,n,0);return[r.x,r.y,r.z]}isPointAboveHorizon(e,t){return!Pu(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const n=e.cameraToCenterDistance,r=e._centerAltitude*t,i=e._camera,o=e._camera.forward(),a=Ks([],Xs([],o,-n),[0,0,r]),s=e.worldSize/(2*Math.PI),u=[0,0,-s],c=e.width/e.height,l=Math.tan(e.fovAboveCenter),f=Xs([],i.up(),l),h=Xs([],i.right(),l*c),d=$s([],Ks([],Ks([],o,f),h)),p=[];let y;if(new bu(a,d).closestPointOnSphere(u,s,p)){const t=Ks([],p,u),n=iu([],t,a);y=Math.cos(e.fovAboveCenter)*Ws(n)}else{const e=iu([],a,u),t=iu([],u,a);$s(t,t);const n=Ws(e)-s;y=Math.sqrt(n*(n+2*s));const r=Math.acos(y/(s+n))-Math.acos(Js(o,t));y*=Math.cos(r)}return 1.01*y}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),n=qu(e.zoom);if(n>0){const r=Dd(e,ac(1,e.center.lat)*e.worldSize),i=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return Tn(t,r+i*(1-Math.cos(o)),Math.pow(n,10))}return t}upVector(e,t,n){return ju(t,n,e,1)}upVectorScale(e){return{metersToTile:Mu(Wu(Ou(e)))}}}function np(e){const t=e.parallels,n=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Yd(e);case"equirectangular":return new Kd(e);case"naturalEarth":return new Qd(e);case"equalEarth":return new Vd(e);case"winkelTripel":return new Jd(e);case"albers":return n?new ep(e):new Zd(e);case"lambertConformalConic":return n?new ep(e):new qd(e);case"globe":return new tp(e)}throw new Error(`Invalid projection name: ${e.name}`)}const rp=sf.types,ip=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function op(e,t,n,r,i,o,a,s,u,c,l,f,h){const d=s?Math.min(Td,Math.round(s[0])):0,p=s?Math.min(Td,Math.round(s[1])):0;e.emplaceBack(t,n,Math.round(32*r),Math.round(32*i),o,a,(d<<1)+(u?1:0),p,16*c,16*l,256*f,256*h)}function ap(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,a)}function sp(e,t,n,r,i){e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i),e.emplaceBack(t,n,r,i)}function up(e){for(const t of e.sections)if(To(t.text))return!0;return!1}class cp{constructor(e){this.layoutVertexArray=new pa,this.indexArray=new xa,this.programConfigurations=e,this.segments=new As,this.dynamicLayoutVertexArray=new la,this.opacityVertexArray=new ma,this.placedSymbolArray=new Da,this.globeExtVertexArray=new ya}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(e,t,n,r){this.isEmpty()||(n&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Kf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Hf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ip,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Gf.members,!0)),this.opacityVertexBuffer.itemSize=1),(n||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}ji(cp,"SymbolBuffers");class lp{constructor(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new As,this.collisionVertexArray=new _a,this.collisionVertexArrayExt=new wa}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,qf.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Yf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}ji(lp,"CollisionBuffers");class fp{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map((e=>e.id)),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Bs([]),this.placementViewportMatrix=Bs([]);const t=this.layers[0]._unevaluatedLayout._values;this.textSizeData=eh(this.zoom,t["text-size"]),this.iconSizeData=eh(this.zoom,t["icon-size"]);const n=this.layers[0].layout,r=n.get("symbol-sort-key"),i=n.get("symbol-z-order");this.canOverlap=n.get("text-allow-overlap")||n.get("icon-allow-overlap")||n.get("text-ignore-placement")||n.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==i&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===i||"auto"===i&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=n.get("text-writing-mode").map((e=>Lh[e])),this.stateDependentLayerIds=this.layers.filter((e=>e.isStateDependent())).map((e=>e.id)),this.sourceID=e.sourceID,this.projection=e.projection}createArrays(){this.text=new cp(new ps(this.layers,this.zoom,(e=>/^text/.test(e)))),this.icon=new cp(new ps(this.layers,this.zoom,(e=>/^icon/.test(e)))),this.glyphOffsetArray=new za,this.lineVertexArray=new Za,this.symbolInstances=new La}calculateGlyphDependencies(e,t,n,r,i){for(let o=0;o<e.length;o++)if(t[e.charCodeAt(o)]=!0,r&&i){const n=oh[e.charAt(o)];n&&(t[n.charCodeAt(0)]=!0)}}populate(e,t,n,r){const i=this.layers[0],o=i.layout,a="globe"===this.projection.name,s=o.get("text-font"),u=o.get("text-field"),c=o.get("icon-image"),l=("constant"!==u.value.kind||u.value.value instanceof Pt&&!u.value.value.isEmpty()||u.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),f="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,h=o.get("symbol-sort-key");if(this.features=[],!l&&!f)return;const d=t.iconDependencies,p=t.glyphDependencies,y=t.availableImages,m=new Fo(this.zoom);for(const{feature:g,id:v,index:b,sourceLayerIndex:_}of e){const e=i._featureFilter.needGeometry,t=wc(g,e);if(!i._featureFilter.filter(m,t,n))continue;if(e||(t.geometry=_c(g,n,r)),a&&1!==g.type&&n.z<=5){const e=t.geometry,r=.98078528056,i=(e,t)=>Js(ju(e.x,e.y,n,1),ju(t.x,t.y,n,1))<r;for(let t=0;t<e.length;t++)e[t]=mc(e[t],i)}let u,c;if(l){const e=i.getValueAndResolveTokens("text-field",t,n,y),r=Pt.factory(e);up(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===Zo()||this.hasRTLText&&Uo.isParsed())&&(u=ih(r,i,t))}if(f){const e=i.getValueAndResolveTokens("icon-image",t,n,y);c=e instanceof Bt?e:Bt.fromString(e)}if(!u&&!c)continue;const w=this.sortFeaturesByKey?h.evaluate(t,{},n):void 0;if(this.features.push({id:v,text:u,icon:c,index:b,sourceLayerIndex:_,geometry:t.geometry,properties:g.properties,type:rp[g.type],sortKey:w}),c&&(d[c.name]=!0),u){const e=s.evaluate(t,{},n).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Lh.vertical)>=0;for(const t of u.sections)if(t.image)d[t.image.name]=!0;else{const n=wo(u.toString()),i=t.fontStack||e,o=p[i]=p[i]||{};this.calculateGlyphDependencies(t.text,o,r,this.allowVerticalPlacement,n)}}}"line"===o.get("symbol-placement")&&(this.features=function(e){const t={},n={},r=[];let i=0;function o(t){r.push(e[t]),i++}function a(e,t,i){const o=n[e];return delete n[e],n[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(i[0]),o}function s(e,n,i){const o=t[n];return delete t[n],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=i[0].concat(r[o].geometry[0]),o}function u(e,t,n){const r=n?t[0][t[0].length-1]:t[0][0];return`${e}:${r.x}:${r.y}`}for(let c=0;c<e.length;c++){const l=e[c],f=l.geometry,h=l.text?l.text.toString():null;if(!h){o(c);continue}const d=u(h,f),p=u(h,f,!0);if(d in n&&p in t&&n[d]!==t[p]){const e=s(d,p,f),i=a(d,p,r[e].geometry);delete t[d],delete n[p],n[u(h,r[i].geometry,!0)]=i,r[e].geometry=null}else d in n?a(d,p,f):p in t?s(d,p,f):(o(c),t[d]=i-1,n[p]=i-1)}return r.filter((e=>e.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((e,t)=>e.sortKey-t.sortKey))}update(e,t,n,r){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(e,t,this.layers,n,r),this.icon.programConfigurations.updatePaintArrays(e,t,this.layers,n,r))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=np(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const n=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:r,y:i}of t)this.lineVertexArray.emplaceBack(r,i);return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}}addSymbols(e,t,n,r,i,o,a,s,u,c,l,f,h,d){const p=e.indexArray,y=e.layoutVertexArray,m=e.globeExtVertexArray,g=e.segments.prepareSegment(4*t.length,y,p,this.canOverlap?o.sortKey:void 0),v=this.glyphOffsetArray.length,b=g.vertexLength,_=this.allowVerticalPlacement&&a===Lh.vertical?Math.PI/2:0,w=o.text&&o.text.sections;for(let k=0;k<t.length;k++){const{tl:r,tr:i,bl:a,br:c,tex:l,pixelOffsetTL:f,pixelOffsetBR:v,minFontScaleX:b,minFontScaleY:x,glyphOffset:A,isSDF:E,sectionIndex:I}=t[k],S=g.vertexLength,T=A[1];if(op(y,u.x,u.y,r.x,T+r.y,l.x,l.y,n,E,f.x,f.y,b,x),op(y,u.x,u.y,i.x,T+i.y,l.x+l.w,l.y,n,E,v.x,f.y,b,x),op(y,u.x,u.y,a.x,T+a.y,l.x,l.y+l.h,n,E,f.x,v.y,b,x),op(y,u.x,u.y,c.x,T+c.y,l.x+l.w,l.y+l.h,n,E,v.x,v.y,b,x),s){const{x:t,y:n,z:r}=s.anchor,[i,o,a]=s.up;ap(m,t,n,r,i,o,a),ap(m,t,n,r,i,o,a),ap(m,t,n,r,i,o,a),ap(m,t,n,r,i,o,a),sp(e.dynamicLayoutVertexArray,t,n,r,_)}else sp(e.dynamicLayoutVertexArray,u.x,u.y,u.z,_);p.emplaceBack(S,S+1,S+2),p.emplaceBack(S+1,S+2,S+3),g.vertexLength+=4,g.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(A[0]),k!==t.length-1&&I===t[k+1].sectionIndex||e.programConfigurations.populatePaintArrays(y.length,o,o.index,{},h,d,w&&w[I])}const x=s?s.anchor:u;e.placedSymbolArray.emplaceBack(x.x,x.y,x.z,u.x,u.y,v,this.glyphOffsetArray.length-v,b,c,l,u.segment,n?n[0]:0,n?n[1]:0,r[0],r[1],a,0,!1,0,f,0)}_commitLayoutVertex(e,t,n,r,i,o,a){e.emplaceBack(t,n,r,i,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,n,r,i,o,a){const s=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),u=s.vertexLength,c=a.tileAnchorX,l=a.tileAnchorY;for(let h=0;h<4;h++)n.collisionVertexArray.emplaceBack(0,0,0,0);n.collisionVertexArrayExt.emplaceBack(t,-e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,-e.padding),n.collisionVertexArrayExt.emplaceBack(t,e.padding,e.padding),n.collisionVertexArrayExt.emplaceBack(t,-e.padding,e.padding),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new p(e.x1,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new p(e.x2,e.y1)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new p(e.x2,e.y2)),this._commitLayoutVertex(n.layoutVertexArray,r,i,o,c,l,new p(e.x1,e.y2)),s.vertexLength+=4;const f=n.indexArray;f.emplaceBack(u,u+1),f.emplaceBack(u+1,u+2),f.emplaceBack(u+2,u+3),f.emplaceBack(u+3,u),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,i,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,i,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lp(va,Xf.members,Ta),this.iconCollisionBox=new lp(va,Xf.members,Ta);const n=nh(this.iconSizeData,e),r=nh(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._addTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._addTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o),this._addIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o)}}getSymbolInstanceTextSize(e,t,n,r){const i=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=th(this.textSizeData,e,i)/$f;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,n){const r=this.icon.placedSymbolArray.get(n),i=th(this.iconSizeData,e,r);return this.tilePixelRatio*i}_commitDebugCollisionVertexUpdate(e,t,n){e.emplaceBack(t,-n,-n),e.emplaceBack(t,n,-n),e.emplaceBack(t,n,n),e.emplaceBack(t,-n,n)}_updateTextDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceTextSize(e,o,t,a);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,i,r.padding)}}_updateIconDebugCollisionBoxes(e,t,n,r,i,o){for(let a=r;a<i;a++){const r=n.get(a),i=this.getSymbolInstanceIconSize(e,t,o);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,i,r.padding)}}updateCollisionDebugBuffers(e,t){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=nh(this.iconSizeData,e),r=nh(this.textSizeData,e);for(let i=0;i<this.symbolInstances.length;i++){const o=this.symbolInstances.get(i);this._updateTextDebugCollisionBoxes(r,e,t,o.textBoxStartIndex,o.textBoxEndIndex,o),this._updateTextDebugCollisionBoxes(r,e,t,o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o),this._updateIconDebugCollisionBoxes(n,e,t,o.iconBoxStartIndex,o.iconBoxEndIndex,o.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(n,e,t,o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,n,r,i,o,a,s,u){const c={};if(t<n){const{x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h,featureIndex:d}=e.get(t);c.textBox={x1:n,y1:r,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h},c.textFeatureIndex=d}if(r<i){const{x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h,featureIndex:d}=e.get(r);c.verticalTextBox={x1:t,y1:n,x2:i,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h},c.verticalTextFeatureIndex=d}if(o<a){const{x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h,featureIndex:d}=e.get(o);c.iconBox={x1:t,y1:n,x2:r,y2:i,padding:a,projectedAnchorX:s,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h},c.iconFeatureIndex=d}if(s<u){const{x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h,featureIndex:d}=e.get(s);c.verticalIconBox={x1:t,y1:n,x2:r,y2:i,padding:o,projectedAnchorX:a,projectedAnchorY:u,projectedAnchorZ:l,tileAnchorX:f,tileAnchorY:h},c.verticalIconFeatureIndex=d}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const n=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,n.textBoxStartIndex,n.textBoxEndIndex,n.verticalTextBoxStartIndex,n.verticalTextBoxEndIndex,n.iconBoxStartIndex,n.iconBoxEndIndex,n.verticalIconBoxStartIndex,n.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(e,t){const n=e.placedSymbolArray.get(t),r=n.vertexStartIndex+4*n.numGlyphs;for(let i=n.vertexStartIndex;i<r;i+=4)e.indexArray.emplaceBack(i,i+1,i+2),e.indexArray.emplaceBack(i+1,i+2,i+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),n=Math.cos(e),r=[],i=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);r.push(0|Math.round(t*e.tileAnchorX+n*e.tileAnchorY)),i.push(e.featureIndex)}return o.sort(((e,t)=>r[e]-r[t]||i[t]-i[e])),o}addToSortKeyRanges(e,t){const n=this.sortKeyRanges[this.sortKeyRanges.length-1];n&&n.sortKey===t?n.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:n,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:i,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;n>=0&&this.addIndicesForPlacedSymbol(this.text,n),r>=0&&r!==n&&this.addIndicesForPlacedSymbol(this.text,r),i>=0&&i!==r&&i!==n&&this.addIndicesForPlacedSymbol(this.text,i),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}ji(fp,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),fp.MAX_GLYPHS=65535,fp.addDynamicAttributes=sp;const hp=new Jo({"symbol-placement":new Xo(Xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Xo(Xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Xo(Xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Qo(Xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Xo(Xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Xo(Xe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Xo(Xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Xo(Xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Xo(Xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new Qo(Xe.layout_symbol["icon-size"]),"icon-text-fit":new Xo(Xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Xo(Xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new Qo(Xe.layout_symbol["icon-image"]),"icon-rotate":new Qo(Xe.layout_symbol["icon-rotate"]),"icon-padding":new Xo(Xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Xo(Xe.layout_symbol["icon-keep-upright"]),"icon-offset":new Qo(Xe.layout_symbol["icon-offset"]),"icon-anchor":new Qo(Xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Xo(Xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Xo(Xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Xo(Xe.layout_symbol["text-rotation-alignment"]),"text-field":new Qo(Xe.layout_symbol["text-field"]),"text-font":new Qo(Xe.layout_symbol["text-font"]),"text-size":new Qo(Xe.layout_symbol["text-size"]),"text-max-width":new Qo(Xe.layout_symbol["text-max-width"]),"text-line-height":new Qo(Xe.layout_symbol["text-line-height"]),"text-letter-spacing":new Qo(Xe.layout_symbol["text-letter-spacing"]),"text-justify":new Qo(Xe.layout_symbol["text-justify"]),"text-radial-offset":new Qo(Xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Xo(Xe.layout_symbol["text-variable-anchor"]),"text-anchor":new Qo(Xe.layout_symbol["text-anchor"]),"text-max-angle":new Xo(Xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Xo(Xe.layout_symbol["text-writing-mode"]),"text-rotate":new Qo(Xe.layout_symbol["text-rotate"]),"text-padding":new Xo(Xe.layout_symbol["text-padding"]),"text-keep-upright":new Xo(Xe.layout_symbol["text-keep-upright"]),"text-transform":new Qo(Xe.layout_symbol["text-transform"]),"text-offset":new Qo(Xe.layout_symbol["text-offset"]),"text-allow-overlap":new Xo(Xe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Xo(Xe.layout_symbol["text-ignore-placement"]),"text-optional":new Xo(Xe.layout_symbol["text-optional"])});var dp={paint:new Jo({"icon-opacity":new Qo(Xe.paint_symbol["icon-opacity"]),"icon-color":new Qo(Xe.paint_symbol["icon-color"]),"icon-halo-color":new Qo(Xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new Qo(Xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Qo(Xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Xo(Xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Xo(Xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new Qo(Xe.paint_symbol["text-opacity"]),"text-color":new Qo(Xe.paint_symbol["text-color"],{runtimeType:ut,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Qo(Xe.paint_symbol["text-halo-color"]),"text-halo-width":new Qo(Xe.paint_symbol["text-halo-width"]),"text-halo-blur":new Qo(Xe.paint_symbol["text-halo-blur"]),"text-translate":new Xo(Xe.paint_symbol["text-translate"]),"text-translate-anchor":new Xo(Xe.paint_symbol["text-translate-anchor"])}),layout:hp};class pp{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:it,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ji(pp,"FormatSectionOverride",{omit:["defaultValue"]});class yp extends ws{constructor(e){super(e,dp)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const n=this.layout.get("text-writing-mode");if(n){const e=[];for(const t of n)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(e,t,n,r){const i=this.layout.get(e).evaluate(t,{},n,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Vr(o.value)||!i?i:function(e,t){return t.replace(/{([^{}]+)}/g,((t,n)=>n in e?String(e[n]):""))}(t.properties,i)}createBucket(e){return new fp(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of dp.paint.overridableProperties){if(!yp.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),n=new pp(t),r=new Wr(n,t.property.specification);let i=null;i="constant"===t.value.kind||"source"===t.value.kind?new Gr("source",r):new Hr("composite",r,t.value.zoomStops,t.value._interpolationType),this.paint._values[e]=new qo(t.property,i,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,n){return!(!this.layout||t.isDataDriven()||n.isDataDriven())&&yp.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const n=e.get("text-field"),r=dp.paint.properties[t];let i=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(i=!0)};if("constant"===n.value.kind&&n.value.value instanceof Pt)o(n.value.value.sections);else if("source"===n.value.kind){const e=t=>{i||(t instanceof zt&&Dt(t.value)===ht?o(t.value.sections):t instanceof jt?o(t.sections):t.eachChild(e))},t=n.value;t._styleExpression&&e(t._styleExpression.expression)}return i}getProgramConfiguration(e){return new ds(this,e)}}var mp={paint:new Jo({"background-color":new Xo(Xe.paint_background["background-color"]),"background-pattern":new Xo(Xe.paint_background["background-pattern"]),"background-opacity":new Xo(Xe.paint_background["background-opacity"])})},gp={paint:new Jo({"raster-opacity":new Xo(Xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Xo(Xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Xo(Xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Xo(Xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Xo(Xe.paint_raster["raster-saturation"]),"raster-contrast":new Xo(Xe.paint_raster["raster-contrast"]),"raster-resampling":new Xo(Xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Xo(Xe.paint_raster["raster-fade-duration"])})};class vp extends ws{constructor(e){super(e,{}),this.implementation=e}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isLayerDraped(){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}var bp={paint:new Jo({"sky-type":new Xo(Xe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Xo(Xe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Xo(Xe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Xo(Xe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Xo(Xe.paint_sky["sky-gradient-radius"]),"sky-gradient":new $o(Xe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Xo(Xe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Xo(Xe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Xo(Xe.paint_sky["sky-opacity"])})};function _p(e,t,n){const r=[0,0,1],i=fu([]);return du(i,i,n?-v(e)+Math.PI:v(e)),hu(i,i,-v(t)),nu(r,r,i),$s(r,r)}const wp={circle:class extends ws{constructor(e){super(e,jc)}createBucket(e){return new Ac(e)}queryRadius(e){const t=e;return zc("circle-radius",this,t)+zc("circle-stroke-width",this,t)+Zc(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,n,r,i,o,a,s){const u=Uc(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,n)+this.paint.get("circle-stroke-width").evaluate(t,n);return Wc(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),u,c)}getProgramIds(){return["circle"]}getProgramConfiguration(e){return new ds(this,e)}},heatmap:class extends ws{createBucket(e){return new qc(e)}constructor(e){super(e,el),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=tl({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return zc("heatmap-radius",this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s){const u=this.paint.get("heatmap-radius").evaluate(t,n);return Wc(e,r,o,a,s,!0,!0,new p(0,0),u)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(e){return new ds(this,e)}},hillshade:class extends ws{constructor(e){super(e,nl)}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends ws{constructor(e){super(e,jl)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),n=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&n.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),n}getProgramConfiguration(e){return new ds(this,e)}recalculate(e,t){super.recalculate(e,t);const n=this.paint._values["fill-outline-color"];"constant"===n.value.kind&&void 0===n.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new Ul(e)}queryRadius(){return Zc(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,n,r,i,o){return!e.queryGeometry.isAboveHorizon&&Sc(Nc(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return!0}},"fill-extrusion":class extends ws{constructor(e){super(e,Af)}createBucket(e){return new pf(e)}queryRadius(){return Zc(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(e){return new ds(this,e)}queryIntersectsFeature(e,t,n,r,i,o,a,s,u){const c=Uc(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),l=this.paint.get("fill-extrusion-height").evaluate(t,n),f=this.paint.get("fill-extrusion-base").evaluate(t,n),h=[0,0],d=s&&o.elevation,y=o.elevation?o.elevation.exaggeration():1,m=e.tile.getBucket(this);if(d&&m instanceof pf){const e=m.centroidVertexArray,t=u+1;t<e.length&&(h[0]=e.geta_centroid_pos0(t),h[1]=e.geta_centroid_pos1(t))}if(0===h[0]&&1===h[1])return!1;"globe"===o.projection.name&&(r=xf([r],[new p(0,0),new p(Es,Es)],e.tileID.canonical).map((e=>e.polygon)).flat());const g=d?s:null,[v,b]=function(e,t,n,r,i,o,a,s,u,c,l){return"globe"===e.projection.name?function(e,t,n,r,i,o,a,s,u,c,l){const f=[],h=[],d=e.projection.upVectorScale(l,e.center.lat,e.worldSize).metersToTile,p=[0,0,0,1],y=[0,0,0,1],m=(e,t,n,r)=>{e[0]=t,e[1]=n,e[2]=r,e[3]=1},g=wf();n>0&&(n+=g),r+=g;for(const v of t){const t=[],g=[];for(const f of v){const h=f.x+i.x,v=f.y+i.y,b=e.projection.projectTilePoint(h,v,l),_=e.projection.upVector(l,f.x,f.y);let w=n,x=r;if(a){const e=Of(h,v,n,r,a,s,u,c);w+=e.base,x+=e.top}0!==n?m(p,b.x+_[0]*d*w,b.y+_[1]*d*w,b.z+_[2]*d*w):m(p,b.x,b.y,b.z),m(y,b.x+_[0]*d*x,b.y+_[1]*d*x,b.z+_[2]*d*x),tu(p,p,o),tu(y,y,o),t.push(new Pf(p[0],p[1],p[2])),g.push(new Pf(y[0],y[1],y[2]))}f.push(t),h.push(g)}return[f,h]}(e,t,n,r,i,o,a,s,u,c,l):a?function(e,t,n,r,i,o,a,s,u){const c=[],l=[],f=[0,0,0,1];for(const h of e){const e=[],d=[];for(const c of h){const l=c.x+r.x,h=c.y+r.y,p=Of(l,h,t,n,o,a,s,u);f[0]=l,f[1]=h,f[2]=p.base,f[3]=1,cu(f,f,i),f[3]=Math.max(f[3],1e-5);const y=new Pf(f[0]/f[3],f[1]/f[3],f[2]/f[3]);f[0]=l,f[1]=h,f[2]=p.top,f[3]=1,cu(f,f,i),f[3]=Math.max(f[3],1e-5);const m=new Pf(f[0]/f[3],f[1]/f[3],f[2]/f[3]);e.push(y),d.push(m)}c.push(e),l.push(d)}return[c,l]}(t,n,r,i,o,a,s,u,c):function(e,t,n,r,i){const o=[],a=[],s=i[8]*t,u=i[9]*t,c=i[10]*t,l=i[11]*t,f=i[8]*n,h=i[9]*n,d=i[10]*n,p=i[11]*n;for(const y of e){const e=[],t=[];for(const n of y){const o=n.x+r.x,a=n.y+r.y,y=i[0]*o+i[4]*a+i[12],m=i[1]*o+i[5]*a+i[13],g=i[2]*o+i[6]*a+i[14],v=i[3]*o+i[7]*a+i[15],b=y+s,_=m+u,w=g+c,x=Math.max(v+l,1e-5),k=y+f,A=m+h,E=g+d,I=Math.max(v+p,1e-5);e.push(new Pf(b/x,_/x,w/x)),t.push(new Pf(k/I,A/I,E/I))}o.push(e),a.push(t)}return[o,a]}(t,n,r,i,o)}(o,r,f,l,c,a,g,h,y,o.center.lat,e.tileID.canonical),_=e.queryGeometry;return function(e,t,n){let r=1/0;Sc(n,t)&&(r=Cf(n,t[0]));for(let i=0;i<t.length;i++){const o=t[i],a=e[i];for(let e=0;e<o.length-1;e++){const t=o[e],i=[t,o[e+1],a[e+1],a[e],t];Ec(n,i)&&(r=Math.min(r,Cf(n,i)))}}return r!==1/0&&r}(v,b,_.isPointQuery()?_.screenBounds:_.screenGeometry)}},line:class extends ws{constructor(e){super(e,jf),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof Sn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=Wf.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Uf(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(e){return new ds(this,e)}queryRadius(e){const t=e,n=Vf(zc("line-width",this,t),zc("line-gap-width",this,t)),r=zc("line-offset",this,t);return n/2+Math.abs(r)+Zc(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,n,r,i,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=Nc(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Vf(this.paint.get("line-width").evaluate(t,n),this.paint.get("line-gap-width").evaluate(t,n)),u=this.paint.get("line-offset").evaluate(t,n);return u&&(r=function(e,t){const n=[],r=new p(0,0);for(let i=0;i<e.length;i++){const o=e[i],a=[];for(let e=0;e<o.length;e++){const n=o[e-1],i=o[e],s=o[e+1],u=0===e?r:i.sub(n)._unit()._perp(),c=e===o.length-1?r:s.sub(i)._unit()._perp(),l=u._add(c)._unit();l._mult(1/(l.x*c.x+l.y*c.y)),a.push(l._mult(t)._add(i))}n.push(a)}return n}(r,u*e.pixelToTileUnitsFactor)),function(e,t,n){for(let r=0;r<t.length;r++){const i=t[r];if(e.length>=3)for(let t=0;t<i.length;t++)if(Dc(e,i[t]))return!0;if(Tc(e,i,n))return!0}return!1}(a,r,s)}isTileClipped(){return!0}},symbol:yp,background:class extends ws{constructor(e){super(e,mp)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends ws{constructor(e){super(e,gp)}getProgramIds(){return["raster"]}},sky:class extends ws{constructor(e){super(e,bp),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=tl({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const n=this.paint.get("sky-atmosphere-sun"),r=!n,i=e.style.light,o=i.properties.get("position");return r&&"viewport"===i.properties.get("anchor")&&F("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?_p(o.azimuthal,90-o.polar,t):_p(n[0],90-n[1],t)}const n=this.paint.get("sky-gradient-center");return _p(n[0],90-n[1],t)}is3D(){return!1}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}}};class xp{constructor(e,t,n,r){this.context=e,this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)}update(e,n,r){const{width:i,height:o}=e,{context:a}=this,{gl:s}=a,{HTMLImageElement:u,HTMLCanvasElement:c,HTMLVideoElement:l,ImageData:f,ImageBitmap:h}=t;if(s.bindTexture(s.TEXTURE_2D,this.texture),a.pixelStoreUnpackFlipY.set(!1),a.pixelStoreUnpack.set(1),a.pixelStoreUnpackPremultiplyAlpha.set(this.format===s.RGBA&&(!n||!1!==n.premultiply)),r||this.size&&this.size[0]===i&&this.size[1]===o){const{x:t,y:n}=r||{x:0,y:0};e instanceof u||e instanceof c||e instanceof l||e instanceof f||h&&e instanceof h?s.texSubImage2D(s.TEXTURE_2D,0,t,n,s.RGBA,s.UNSIGNED_BYTE,e):s.texSubImage2D(s.TEXTURE_2D,0,t,n,i,o,s.RGBA,s.UNSIGNED_BYTE,e.data)}else this.size=[i,o],e instanceof u||e instanceof c||e instanceof l||e instanceof f||h&&e instanceof h?s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,s.UNSIGNED_BYTE,e):s.texImage2D(s.TEXTURE_2D,0,this.format,i,o,0,this.format,s.UNSIGNED_BYTE,e.data);this.useMipmap=Boolean(n&&n.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&s.generateMipmap(s.TEXTURE_2D)}bind(e,t){const{context:n}=this,{gl:r}=n;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.filter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.useMipmap?e===r.NEAREST?r.NEAREST_MIPMAP_NEAREST:r.LINEAR_MIPMAP_NEAREST:e),this.filter=e),t!==this.wrap&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrap=t)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class kp{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._callback()}),0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ap{constructor(){this.tasks={},this.taskQueue=[],R(["process"],this),this.invoker=new kp(this.process),this.nextId=0}add(e,t){const n=this.nextId++,r=function({type:e,isSymbolTile:t,zoom:n}){return n=n||0,"message"===e?0:"maybePrepare"!==e||t?"parseTile"!==e||t?"parseTile"===e&&t?300-n:"maybePrepare"===e&&t?400-n:500:200-n:100-n}(t);if(0===r){V();try{e()}finally{}return{cancel:()=>{}}}return this.tasks[n]={fn:e,metadata:t,priority:r,id:n},this.taskQueue.push(n),this.invoker.trigger(),{cancel:()=>{delete this.tasks[n]}}}process(){V();try{if(this.taskQueue=this.taskQueue.filter((e=>!!this.tasks[e])),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const n=this.tasks[this.taskQueue[r]];n.priority<t&&(t=n.priority,e=r)}if(null===e)return null;const n=this.taskQueue[e];return this.taskQueue.splice(e,1),n}remove(){this.invoker.remove()}}class Ep{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const n=e[t];this._stringToNumber[n]=t,this._numberToString[t]=n}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const Ip=["tile","layer","source","sourceLayer","state"];class Sp{constructor(e,t,n,r,i){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=n,this._y=r,this.properties=e.properties,this.id=i}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",geometry:this.geometry,properties:this.properties};void 0!==this.id&&(e.id=this.id);for(const t of Ip)void 0!==this[t]&&(e[t]=this[t]);return e}}const Tp=32,Mp=33,Pp=new Uint16Array(8184);for(let gy=0;gy<2046;gy++){let e=gy+2,t=0,n=0,r=0,i=0,o=0,a=0;for(1&e?r=i=o=Tp:t=n=a=Tp;(e>>=1)>1;){const s=t+r>>1,u=n+i>>1;1&e?(r=t,i=n,t=o,n=a):(t=r,n=i,r=o,i=a),o=s,a=u}const s=4*gy;Pp[s+0]=t,Pp[s+1]=n,Pp[s+2]=r,Pp[s+3]=i}const Bp=new Uint16Array(2178),Cp=new Uint8Array(1089),Op=new Uint16Array(1089);function Dp(e){return 0===e?-.03125:32===e?.03125:0}var Rp=ia([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const Lp={type:2,extent:Es,loadGeometry:()=>[[new p(0,0),new p(8193,0),new p(8193,8193),new p(0,8193),new p(0,0)]]};class zp{constructor(e,t,n,r,i){this.tileID=e,this.uid=B(),this.uses=0,this.tileSize=t,this.tileZoom=n,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=i,this.expiredRequestCount=0,this.state="loading",r&&r.transform&&(this.projection=r.transform.projection)}registerFadeDuration(e){const t=e+this.timeAdded;t<Ve.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=Rd(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(e,t,n){if(this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=function(e,t){const n={};if(!t)return n;for(const r of e){const e=r.layerIds.map((e=>t.getLayer(e))).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map((t=>e.filter((e=>e.id===t))[0])));for(const t of e)n[t.id]=r}}return n}(e.buckets,t.style),this.hasSymbolBuckets=!1;for(const e in this.buckets){const t=this.buckets[e];if(t instanceof fp){if(this.hasSymbolBuckets=!0,!n)break;t.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const e in this.buckets){const t=this.buckets[e];if(t instanceof fp&&t.hasRTLText){this.hasRTLText=!0,Uo.isLoading()||Uo.isLoaded()||"deferred"!==Zo()||No();break}}this.queryPadding=0;for(const e in this.buckets){const n=this.buckets[e];this.queryPadding=Math.max(this.queryPadding,t.style.getLayer(e).queryRadius(n))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.lineAtlas&&(this.lineAtlas=e.lineAtlas)}else this.collisionBoxArray=new Ca}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(e){return this.buckets[e.id]}upload(e){for(const n in this.buckets){const t=this.buckets[n];t.uploadPending()&&t.upload(e)}const t=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new xp(e,this.imageAtlas.image,t.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new xp(e,this.glyphAtlasImage,t.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new xp(e,this.lineAtlas.image,t.ALPHA),this.lineAtlas.uploaded=!0)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,t,n,r,i,o,a,s){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:r,pixelPosMatrix:a,transform:o,params:i,tileTransform:this.tileTransform},e,t,n):{}}querySourceFeatures(e,t){const n=this.latestFeatureIndex;if(!n||!n.rawTileData)return;const r=n.loadVTLayers(),i=t?t.sourceLayer:"",o=r._geojsonTileLayer||r[i];if(!o)return;const a=ai(t&&t.filter),{z:s,x:u,y:c}=this.tileID.canonical,l={z:s,x:u,y:c};for(let f=0;f<o.length;f++){const t=o.feature(f);if(a.needGeometry){const e=wc(t,!0);if(!a.filter(new Fo(this.tileID.overscaledZ),e,this.tileID.canonical))continue}else if(!a.filter(new Fo(this.tileID.overscaledZ),t))continue;const r=n.getId(t,i),h=new Sp(t,s,u,c,r);h.tile=l,e.push(h)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const t=this.expirationTime;if(e.cacheControl){const t=K(e.cacheControl);t["max-age"]&&(this.expirationTime=Date.now()+1e3*t["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const e=Date.now();let n=!1;if(this.expirationTime>e)n=!1;else if(t)if(this.expirationTime<t)n=!0;else{const r=this.expirationTime-t;r?this.expirationTime=e+Math.max(r,3e4):n=!0}else n=!0;n?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(e,t){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(e).length||!t)return;const n=this.latestFeatureIndex.loadVTLayers(),r=t.style.listImages();for(const i in this.buckets){if(!t.style.hasLayer(i))continue;const o=this.buckets[i],a=o.layers[0].sourceLayer||"_geojsonTileLayer",s=n[a],u=e[a];if(!s||!u||0===Object.keys(u).length)continue;if(o.update(u,s,r,this.imageAtlas&&this.imageAtlas.patternPositions||{}),o instanceof Uf||o instanceof Ul){const e=t.style._getSourceCache(o.layers[0].source);t._terrain&&t._terrain.enabled&&e&&o.programConfigurations.needsUpload&&t._terrain._clearRenderCacheForTile(e.id,this.tileID)}const c=t&&t.style&&t.style.getLayer(i);c&&(this.queryPadding=Math.max(this.queryPadding,c.queryRadius(o)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<Ve.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=Ve.now()+e}setTexture(e,t){const n=t.context,r=n.gl;this.texture=this.texture||t.getTileTexture(e.width),this.texture?this.texture.update(e,{useMipmap:!0}):(this.texture=new xp(n,e,r.RGBA,{useMipmap:!0}),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,n.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,n.extTextureFilterAnisotropicMax))}setDependencies(e,t){const n={};for(const r of t)n[r]=!0;this.dependencies[e]=n}hasDependency(e,t){for(const n of e){const e=this.dependencies[n];if(e)for(const n of t)if(e[n])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(e,t){if(!t||"mercator"===t.name||this._tileDebugBuffer)return;const n=_c(Lp,this.tileID.canonical,this.tileTransform)[0],r=new aa,i=new Ma;for(let o=0;o<n.length;o++){const{x:e,y:t}=n[o];r.emplaceBack(e,t),i.emplaceBack(o)}i.emplaceBack(0),this._tileDebugIndexBuffer=e.createIndexBuffer(i),this._tileDebugBuffer=e.createVertexBuffer(r,vu.members),this._tileDebugSegments=As.simpleSegment(0,0,r.length,i.length)}_makeTileBoundsBuffers(e,t){if(this._tileBoundsBuffer||!t||"mercator"===t.name)return;const n=_c(Lp,this.tileID.canonical,this.tileTransform)[0];let r,i;if(this.isRaster){const e=function(e,t){const n=Rd(e,t),r=Math.pow(2,e.z);for(let c=0;c<Mp;c++)for(let i=0;i<Mp;i++){const o=sc((e.x+(i+Dp(i))/Tp)/r),a=uc((e.y+(c+Dp(c))/Tp)/r),s=t.project(o,a),u=c*Mp+i;Bp[2*u+0]=Math.round((s.x*n.scale-n.x)*Es),Bp[2*u+1]=Math.round((s.y*n.scale-n.y)*Es)}Cp.fill(0),Op.fill(0);for(let c=2045;c>=0;c--){const e=4*c,t=Pp[e+0],n=Pp[e+1],r=Pp[e+2],i=Pp[e+3],o=t+r>>1,a=n+i>>1,s=o+a-n,u=a+t-o,l=n*Mp+t,f=i*Mp+r,h=a*Mp+o,d=Math.hypot((Bp[2*l+0]+Bp[2*f+0])/2-Bp[2*h+0],(Bp[2*l+1]+Bp[2*f+1])/2-Bp[2*h+1])>=16;if(Cp[h]=Cp[h]||(d?1:0),c<1022){const e=(n+u>>1)*Mp+(t+s>>1),o=(i+u>>1)*Mp+(r+s>>1);Cp[h]=Cp[h]||Cp[e]||Cp[o]}}const i=new ua,o=new xa;let a=0;function s(e,t){const n=t*Mp+e;return 0===Op[n]&&(i.emplaceBack(Bp[2*n+0],Bp[2*n+1],e*Es/Tp,t*Es/Tp),Op[n]=++a),Op[n]-1}function u(e,t,n,r,i,a){const c=e+n>>1,l=t+r>>1;if(Math.abs(e-i)+Math.abs(t-a)>1&&Cp[l*Mp+c])u(i,a,e,t,c,l),u(n,r,i,a,c,l);else{const u=s(e,t),c=s(n,r),l=s(i,a);o.emplaceBack(u,c,l)}}return u(0,0,Tp,Tp,Tp,0),u(Tp,Tp,0,0,0,Tp),{vertices:i,indices:o}}(this.tileID.canonical,t);r=e.vertices,i=e.indices}else{r=new ua,i=new xa;for(const{x:t,y:i}of n)r.emplaceBack(t,i,0,0);const e=ol(r.int16,void 0,4);for(let t=0;t<e.length;t+=3)i.emplaceBack(e[t],e[t+1],e[t+2])}this._tileBoundsBuffer=e.createVertexBuffer(r,Rp.members),this._tileBoundsIndexBuffer=e.createIndexBuffer(i),this._tileBoundsSegments=As.simpleSegment(0,0,r.length,i.length)}_makeGlobeTileDebugBuffers(e,t){const n=t.projection;if(!n||"globe"!==n.name||t.freezeTileCoverage)return;const r=this.tileID.canonical,i=Ku(Ru(r,t)),o=qu(t.zoom);let a;o>0&&(a=Cs(new Float64Array(16),t.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(e,r,t,i,a,o),this._makeGlobeTileDebugTextBuffer(e,r,t,i,a,o)}_globePoint(e,t,n,r,i,o,a){let s=ju(e,t,n);if(o){const i=1<<n.z,u=ic(r.center.lng),c=oc(r.center.lat),l=(n.x+.5)/i-u;let f=0;l>.5?f=-1:l<-.5&&(f=1);let h=(e/Es+n.x)/i+f,d=(t/Es+n.y)/i;h=(h-u)*r._pixelsPerMercatorPixel+u,d=(d-c)*r._pixelsPerMercatorPixel+c;const p=[h*r.worldSize,d*r.worldSize,0];tu(p,p,o),s=Du(s,p,a)}return tu(s,s,i)}_makeGlobeTileDebugBorderBuffer(e,t,n,r,i,o){const a=new aa,s=new Ma,u=new sa,c=(e,c,l,f,h)=>{const d=(l-e)/(h-1),p=(f-c)/(h-1),y=a.length;for(let m=0;m<h;m++){const l=e+m*d,f=c+m*p;a.emplaceBack(l,f);const h=this._globePoint(l,f,t,n,r,i,o);u.emplaceBack(h[0],h[1],h[2]),s.emplaceBack(y+m)}},l=Es;c(0,0,l,0,16),c(l,0,l,l,16),c(l,l,0,l,16),c(0,l,0,0,16),this._tileDebugIndexBuffer=e.createIndexBuffer(s),this._tileDebugBuffer=e.createVertexBuffer(a,vu.members),this._globeTileDebugBorderBuffer=e.createVertexBuffer(u,gu.members),this._tileDebugSegments=As.simpleSegment(0,0,a.length,s.length)}_makeGlobeTileDebugTextBuffer(e,t,n,r,i,o){const a=new aa,s=new xa,u=new sa,c=25;s.reserve(32),a.reserve(c),u.reserve(c);const l=(e,t)=>c*e+t;for(let f=0;f<c;f++){const e=2048*f;for(let s=0;s<c;s++){const c=2048*s;a.emplaceBack(c,e);const l=this._globePoint(c,e,t,n,r,i,o);u.emplaceBack(l[0],l[1],l[2])}}for(let f=0;f<4;f++)for(let e=0;e<4;e++){const t=l(f,e),n=l(f,e+1),r=l(f+1,e),i=l(f+1,e+1);s.emplaceBack(t,n,r),s.emplaceBack(r,n,i)}this._tileDebugTextIndexBuffer=e.createIndexBuffer(s),this._tileDebugTextBuffer=e.createVertexBuffer(a,vu.members),this._globeTileDebugTextBuffer=e.createVertexBuffer(u,gu.members),this._tileDebugTextSegments=As.simpleSegment(0,0,c,32)}}class Zp{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,t,n){const r=String(t);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][r]=this.stateChanges[e][r]||{},M(this.stateChanges[e][r],n),null===this.deletedStates[e]){this.deletedStates[e]={};for(const t in this.state[e])t!==r&&(this.deletedStates[e][t]=null)}else if(this.deletedStates[e]&&null===this.deletedStates[e][r]){this.deletedStates[e][r]={};for(const t in this.state[e][r])n[t]||(this.deletedStates[e][r][t]=null)}else for(const i in n)this.deletedStates[e]&&this.deletedStates[e][r]&&null===this.deletedStates[e][r][i]&&delete this.deletedStates[e][r][i]}removeFeatureState(e,t,n){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},n&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][n]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(n in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][n]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(e,t){const n=String(t),r=M({},(this.state[e]||{})[n],(this.stateChanges[e]||{})[n]);if(null===this.deletedStates[e])return{};if(this.deletedStates[e]){const n=this.deletedStates[e][t];if(null===n)return{};for(const e in n)delete r[e]}return r}initializeTileState(e,t){e.setFeatureState(this.state,t)}coalesceChanges(e,t){const n={};for(const r in this.stateChanges){this.state[r]=this.state[r]||{};const e={};for(const t in this.stateChanges[r])this.state[r][t]||(this.state[r][t]={}),M(this.state[r][t],this.stateChanges[r][t]),e[t]=this.state[r][t];n[r]=e}for(const r in this.deletedStates){this.state[r]=this.state[r]||{};const e={};if(null===this.deletedStates[r])for(const t in this.state[r])e[t]={},this.state[r][t]={};else for(const t in this.deletedStates[r]){if(null===this.deletedStates[r][t])this.state[r][t]={};else if(this.state[r][t])for(const e of Object.keys(this.deletedStates[r][t]))delete this.state[r][t][e];e[t]=this.state[r][t]}n[r]=n[r]||{},M(n[r],e)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(n).length)for(const r in e)e[r].setFeatureState(n,t)}}class Np{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const n=this.toIdx(e,t);return{min:this.minimums[n],max:this.maximums[n]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Up(e,t,n,r){let i=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(n[a]<e[a]||n[a]>t[a])return null}else{const s=1/r[a];let u=(e[a]-n[a])*s,c=(t[a]-n[a])*s;if(u>c){const e=u;u=c,c=e}if(u>i&&(i=u),c<o&&(o=c),i>o)return null}return i}function Fp(e,t,n,r,i,o,a,s,u,c,l){const f=r-e,h=i-t,d=o-n,p=a-e,y=s-t,m=u-n,g=l[1]*m-l[2]*y,v=l[2]*p-l[0]*m,b=l[0]*y-l[1]*p,_=f*g+h*v+d*b;if(Math.abs(_)<1e-15)return null;const w=1/_,x=c[0]-e,k=c[1]-t,A=c[2]-n,E=(x*g+k*v+A*b)*w;if(E<0||E>1)return null;const I=k*d-A*h,S=A*f-x*d,T=x*h-k*f,M=(l[0]*I+l[1]*S+l[2]*T)*w;return M<0||E+M>1?null:(p*I+y*S+m*T)*w}function jp(e,t,n){return(e-t)/(n-t)}function Wp(e,t,n,r,i,o,a,s,u){const c=1<<n,l=o-r,f=a-i,h=(e+1)/c*l+r,d=(t+0)/c*f+i,p=(t+1)/c*f+i;s[0]=(e+0)/c*l+r,s[1]=d,u[0]=h,u[1]=p}class Vp{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),n=[];let r=Math.ceil(Math.pow(2,t));const i=1/r,o=(e,t,n,r,i)=>{const o=r?1:0,a=(e+1)*n-o,s=t*n,u=(t+1)*n-o;i[0]=e*n,i[1]=s,i[2]=a,i[3]=u};let a=new Np(r);const s=[];for(let u=0;u<r*r;u++){o(u%r,Math.floor(u/r),i,!1,s);const t=Gp(s[0],s[1],e),n=Gp(s[2],s[1],e),c=Gp(s[2],s[3],e),l=Gp(s[0],s[3],e);a.minimums.push(Math.min(t,n,c,l)),a.maximums.push(Math.max(t,n,c,l)),a.leaves.push(1)}for(n.push(a),r/=2;r>=1;r/=2){const e=n[n.length-1];a=new Np(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const n=e.getElevation(s[0],s[1]),i=e.getElevation(s[2],s[1]),u=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),l=e.isLeaf(s[0],s[1]),f=e.isLeaf(s[2],s[1]),h=e.isLeaf(s[2],s[3]),d=e.isLeaf(s[0],s[3]),p=Math.min(n.min,i.min,u.min,c.min),y=Math.max(n.max,i.max,u.max,c.max),m=l&&f&&h&&d;a.maximums.push(y),a.minimums.push(p),a.leaves.push(y-p<=5&&m?1:0)}n.push(a)}return n}(this.dem),n=t.length-1,r=t[n];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,n,0)}raycastRoot(e,t,n,r,i,o,a=1){return Up([e,t,-100],[n,r,this.maximums[0]*a],i,o)}raycast(e,t,n,r,i,o,a=1){if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,n,r,i,o,a);if(null==s)return null;const u=[],c=[],l=[],f=[],h=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;h.length>0;){const{idx:s,t:d,nodex:p,nodey:y,depth:m}=h.pop();if(this.leaves[s]){Wp(p,y,m,e,t,n,r,l,f);const s=1<<m,u=(p+0)/s,c=(p+1)/s,h=(y+0)/s,g=(y+1)/s,v=Gp(u,h,this.dem)*a,b=Gp(c,h,this.dem)*a,_=Gp(c,g,this.dem)*a,w=Gp(u,g,this.dem)*a,x=Fp(l[0],l[1],v,f[0],l[1],b,f[0],f[1],_,i,o),k=Fp(f[0],f[1],_,l[0],f[1],w,l[0],l[1],v,i,o),A=Math.min(null!==x?x:Number.MAX_VALUE,null!==k?k:Number.MAX_VALUE);if(A!==Number.MAX_VALUE)return A;{const e=Qs([],i,o,d);if(Kp(v,b,w,_,jp(e[0],l[0],f[0]),jp(e[1],l[1],f[1]))>=e[2])return d}continue}let g=0;for(let h=0;h<this._siblingOffset.length;h++){Wp((p<<1)+this._siblingOffset[h][0],(y<<1)+this._siblingOffset[h][1],m+1,e,t,n,r,l,f),l[2]=-100,f[2]=this.maximums[this.childOffsets[s]+h]*a;const d=Up(l,f,i,o);if(null!=d){const e=d;u[h]=e;let t=!1;for(let n=0;n<g&&!t;n++)e>=u[c[n]]&&(c.splice(n,0,h),t=!0);t||(c[g]=h),g++}}for(let e=0;e<g;e++){const t=c[e];h.push({idx:this.childOffsets[s]+t,t:u[t],nodex:(p<<1)+this._siblingOffset[t][0],nodey:(y<<1)+this._siblingOffset[t][1],depth:m+1})}}return null}_addNode(e,t,n){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(n),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,n,r,i){if(1===e[r].isLeaf(t,n))return;this.childOffsets[i]||(this.childOffsets[i]=this.nodeCount);const o=r-1,a=e[o];let s=0,u=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],r=2*n+this._siblingOffset[c][1],i=a.getElevation(e,r),o=a.isLeaf(e,r),l=this._addNode(i.min,i.max,o);o&&(s|=1<<c),u||(u=l)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*n+this._siblingOffset[c][1],o,u+c)}}function Kp(e,t,n,r,i,o){return Tn(Tn(e,n,o),Tn(t,r,o),i)}function Gp(e,t,n){const r=n.dim,i=A(e*r-.5,0,r-1),o=A(t*r-.5,0,r-1),a=Math.floor(i),s=Math.floor(o),u=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Kp(n.get(a,s),n.get(u,s),n.get(a,c),n.get(u,c),i-a,o-s)}const Hp={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};class qp{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,n,r=!1,i=!1){if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(n&&"mapbox"!==n&&"terrarium"!==n)return F(`"${n}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=t.height;const o=this.dim=t.height-2,a=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.encoding=n||"mapbox",this.borderReady=r,!r){for(let e=0;e<o;e++)a[this._idx(-1,e)]=a[this._idx(0,e)],a[this._idx(o,e)]=a[this._idx(o-1,e)],a[this._idx(e,-1)]=a[this._idx(e,0)],a[this._idx(e,o)]=a[this._idx(e,o-1)];a[this._idx(-1,-1)]=a[this._idx(0,0)],a[this._idx(o,-1)]=a[this._idx(o-1,0)],a[this._idx(-1,o)]=a[this._idx(0,o-1)],a[this._idx(o,o)]=a[this._idx(o-1,o-1)],i&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new Vp(this)}get(e,t,n=!1){n&&(e=A(e,-1,this.dim),t=A(t,-1,this.dim));const r=4*this._idx(e,t);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(this.pixels[r],this.pixels[r+1],this.pixels[r+2])}static getUnpackVector(e){return Hp[e]}get unpackVector(){return Hp[this.encoding]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}_unpackMapbox(e,t,n){return(256*e*256+256*t+n)/10-1e4}_unpackTerrarium(e,t,n){return 256*e+t+n/256-32768}static pack(e,t){const n=[0,0,0,0],r=qp.getUnpackVector(t);let i=Math.floor((e+r[3])/r[2]);return n[2]=i%256,i=Math.floor(i/256),n[1]=i%256,i=Math.floor(i/256),n[0]=i,n}getPixels(){return new Jc({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,n){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,i=t*this.dim+this.dim,o=n*this.dim,a=n*this.dim+this.dim;switch(t){case-1:r=i-1;break;case 1:i=r+1}switch(n){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,u=-n*this.dim;for(let c=o;c<a;c++)for(let t=r;t<i;t++){const n=4*this._idx(t,c),r=4*this._idx(t+s,c+u);this.pixels[n+0]=e.pixels[r+0],this.pixels[n+1]=e.pixels[r+1],this.pixels[n+2]=e.pixels[r+2],this.pixels[n+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}ji(qp,"DEMData"),ji(Vp,"DemMinMaxQuadTree",{omit:["dem"]});class Yp{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,n){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const i={value:t,timeout:void 0};if(void 0!==n&&(i.timeout=setTimeout((()=>{this.remove(e,i)}),n)),this.data[r].push(i),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const n=e.wrapped().key,r=void 0===t?0:this.data[n].indexOf(t),i=this.data[n][r];return this.data[n].splice(r,1),i.timeout&&clearTimeout(i.timeout),0===this.data[n].length&&delete this.data[n],this.onRemove(i.value),this.order.splice(this.order.indexOf(n),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const n in this.data)for(const r of this.data[n])e(r.value)||t.push(r);for(const n of t)this.remove(n.value.tileID,n)}}class Xp{constructor(e,t,n){this.func=e,this.mask=t,this.range=n}}Xp.ReadOnly=!1,Xp.ReadWrite=!0,Xp.disabled=new Xp(519,Xp.ReadOnly,[0,1]);const Qp=7680;class $p{constructor(e,t,n,r,i,o){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=o}}$p.disabled=new $p({func:519,mask:0},0,0,Qp,Qp,Qp);class Jp{constructor(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n}}Jp.Replace=[1,0],Jp.disabled=new Jp(Jp.Replace,St.transparent,[!1,!1,!1,!1]),Jp.unblended=new Jp(Jp.Replace,St.transparent,[!0,!0,!0,!0]),Jp.alphaBlended=new Jp([1,771],St.transparent,[!0,!0,!0,!0]);const ey=1029,ty=2305;class ny{constructor(e,t,n){this.enable=e,this.mode=t,this.frontFace=n}}ny.disabled=new ny(!1,ey,ty),ny.backCCW=new ny(!0,ey,ty),ny.backCW=new ny(!0,ey,2304),ny.frontCW=new ny(!0,1028,2304),ny.frontCCW=new ny(!0,1028,ty);class ry extends Ye{constructor(e,t,n){super(),this.id=e,this._onlySymbols=n,t.on("data",(e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))})),t.on("error",(()=>{this._sourceErrored=!0})),this._source=t,this._tiles={},this._cache=new Yp(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Zp,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles){const t=this._tiles[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e,(()=>{}))}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e,(()=>{}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const n=this._tiles[t];n.upload(e),n.prepare(this.map.style.imageManager)}}getIds(){return T(this._tiles).map((e=>e.tileID)).sort(iy).map((e=>e.key))}getRenderableIds(e){const t=[];for(const n in this._tiles)this._isIdRenderable(+n,e)&&t.push(this._tiles[n]);return e?t.sort(((e,t)=>{const n=e.tileID,r=t.tileID,i=new p(n.canonical.x,n.canonical.y)._rotate(this.transform.angle),o=new p(r.canonical.x,r.canonical.y)._rotate(this.transform.angle);return n.overscaledZ-r.overscaledZ||o.y-i.y||o.x-i.x})).map((e=>e.tileID.key)):t.map((e=>e.tileID)).sort(iy).map((e=>e.key))}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))}_tileLoaded(e,t,n,r){if(r)if(e.state="errored",404!==r.status)this._source.fire(new qe(r,{tile:e}));else if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform);else e.timeAdded=Ve.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this._source.type&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),this._source.fire(new He("data",{dataType:"source",tile:e,coord:e.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const i=t[r];if(e.neighboringTiles&&e.neighboringTiles[i]){const t=this.getTileByID(i);n(e,t),n(t,e)}}function n(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let n=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,n,r){for(const i in this._tiles){let o=this._tiles[i];if(r[i]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>n)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const n=this._loadedParentTiles[e.key];return n&&n.tileID.overscaledZ>=t?n:null}for(let n=e.overscaledZ-1;n>=t;n--){const t=e.scaledTo(n),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const n=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,i=Math.floor(n*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,i):i,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const n in this._tiles){const r=this._tiles[n];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(e,t,n){if(this.transform=e,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!n)return;let r;this.updateCacheSize(e,t),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map((e=>new Tf(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y))):(r=e.coveringTiles({tileSize:t||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!n,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(r=r.filter((e=>this._source.hasTile(e))))):r=[];const i=this._updateRetainedTiles(r);if(oy(this._source.type)&&0!==r.length){const e={},t={},n=Object.keys(i);for(const r of n){const n=i[r],o=this._tiles[r];if(!o||o.fadeEndTime&&o.fadeEndTime<=Ve.now())continue;const a=this.findLoadedParent(n,Math.max(n.overscaledZ-ry.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),e[a.tileID.key]=a.tileID),t[r]=n}const o=r[r.length-1].overscaledZ;for(const r in this._tiles){const e=this._tiles[r];if(i[r]||!e.hasData())continue;let n=e.tileID;for(;n.overscaledZ>o;){n=n.scaledTo(n.overscaledZ-1);const o=this._tiles[n.key];if(o&&o.hasData()&&t[n.key]){i[r]=e.tileID;break}}}for(const r in e)i[r]||(this._coveredTiles[r]=!0,i[r]=e[r])}for(const a in i)this._tiles[a].clearFadeHold();const o=function(e,t){const n=[];for(const r in e)r in t||n.push(r);return n}(this._tiles,i);for(const a of o){const e=this._tiles[a];e.hasSymbolBuckets&&!e.holdingForFade()?e.setHoldDuration(this.map._fadeDuration):e.hasSymbolBuckets&&!e.symbolFadeFinished()||this._removeTile(+a)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const n={},r=e.reduce(((e,t)=>Math.min(e,t.overscaledZ)),1/0),i=e[0].overscaledZ,o=Math.max(i-ry.maxOverzooming,this._source.minzoom),a=Math.max(i+ry.maxUnderzooming,this._source.minzoom),s={};for(const u of e){const e=this._addTile(u);t[u.key]=u,e.hasData()||r<this._source.maxzoom&&(s[u.key]=u)}this._retainLoadedChildren(s,r,a,t);for(const u of e){let e=this._tiles[u.key];if(e.hasData())continue;if(u.canonical.z>=this._source.maxzoom){const e=u.children(this._source.maxzoom)[0],n=this.getTile(e);if(n&&n.hasData()){t[e.key]=e;continue}}else{const e=u.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let i=u.overscaledZ-1;i>=o;--i){const o=u.scaledTo(i);if(n[o.key])break;if(n[o.key]=!0,e=this.getTile(o),!e&&r&&(e=this._addTile(o)),e&&(t[o.key]=o,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let n,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){n=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(n=this._getLoadedTile(e),n)break;r=e}for(const e of t)this._loadedParentTiles[e]=n}}_addTile(e){let t=this._tiles[e.key];if(t)return t;t=this._cache.getAndRemove(e),t&&(this._setTileReloadTimer(e.key,t),t.tileID=e,this._state.initializeTileState(t,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t)));const n=Boolean(t);if(!n){const n=this.map?this.map.painter:null;t=new zp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,n,this._isRaster),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))}return t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire(new He("dataloading",{tile:t,coord:t.tileID,dataType:"source"})),t):null}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),n))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(e,t,n){const r=[],i=this.transform;if(!i)return r;const o="globe"===i.projection.name,a=ic(i.center.lng);for(const s in this._tiles){const u=this._tiles[s];if(n&&u.clearQueryDebugViz(),u.holdingForFade())continue;let c;if(o){const e=u.tileID.canonical;if(0===e.z){const t=[Math.abs(A(a,...ay(e,-1))-a),Math.abs(A(a,...ay(e,1))-a)];c=[0,2*t.indexOf(Math.min(...t))-1]}else{const t=[Math.abs(A(a,...ay(e,-1))-a),Math.abs(A(a,...ay(e,0))-a),Math.abs(A(a,...ay(e,1))-a)];c=[t.indexOf(Math.min(...t))-1]}}else c=[0];for(const n of c){const o=e.containsTile(u,i,t,n);o&&r.push(o)}}return r}getVisibleCoordinates(e){const t=this.getRenderableIds(e).map((e=>this._tiles[e].tileID));for(const n of t)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped());return t}hasTransition(){if(this._source.hasTransition())return!0;if(oy(this._source.type))for(const e in this._tiles){const t=this._tiles[e];if(void 0!==t.fadeEndTime&&t.fadeEndTime>=Ve.now())return!0}return!1}setFeatureState(e,t,n){this._state.updateState(e=e||"_geojsonTileLayer",t,n)}removeFeatureState(e,t,n){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,n)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,n){const r=this._tiles[e];r&&r.setDependencies(t,n)}reloadTilesForDependencies(e,t){for(const n in this._tiles)this._tiles[n].hasDependency(e,t)&&this._reloadTile(+n,"reloading");this._cache.filter((n=>!n.hasDependency(e,t)))}_preloadTiles(e,t){const n=new Map,r=Array.isArray(e)?e:[e],i=this.map.painter.terrain,o=this.usedForTerrain&&i?i.getScaledDemTileSize():this._source.tileSize;for(const a of r){const e=a.coveringTiles({tileSize:o,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const t of e)n.set(t.key,t);this.usedForTerrain&&a.updateElevation(!1)}S(Array.from(n.values()),((e,t)=>{const n=new zp(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(n,(e=>{"raster-dem"===this._source.type&&n.dem&&this._backfillDEM(n),t(e,n)}))}),t)}}function iy(e,t){const n=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-n||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function oy(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function ay(e,t){const n=1<<e.z;return[e.x/n+t,(e.x+1)/n+t]}ry.maxOverzooming=10,ry.maxUnderzooming=3;class sy{constructor(e,t,n){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=n}static create(e,t,n){const r=n||e.findDEMTileFor(t);if(!r||!r.dem)return;const i=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new sy(r,r.tileSize/Es/a,[(t.canonical.x/a-o.canonical.x)*i.dim,(t.canonical.y/a-o.canonical.y)*i.dim])}tileCoordToPixel(e,t){const n=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),i=Math.floor(n);return new p(r,i)}getElevationAt(e,t,n,r){const i=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(i),s=Math.floor(o),u=this._dem;return r=!!r,n?Tn(Tn(u.get(a,s,r),u.get(a,s+1,r),o-s),Tn(u.get(a+1,s,r),u.get(a+1,s+1,r),o-s),i-a):u.get(a,s,r)}getElevationAtPixel(e,t,n){return this._dem.get(e,t,!!n)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*ac(1,e)*this._dem.stride}}class uy{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Ni(Es,16,0),this.featureIndexArray=new Ua,this.promoteId=t}insert(e,t,n,r,i,o=0){const a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i,o);const s=this.grid;for(let u=0;u<t.length;u++){const e=t[u],n=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];n[0]=Math.min(n[0],r.x),n[1]=Math.min(n[1],r.y),n[2]=Math.max(n[2],r.x),n[3]=Math.max(n[3],r.y)}n[0]<Es&&n[1]<Es&&n[2]>=0&&n[3]>=0&&s.insert(a,n[0],n[1],n[2],n[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new af(new uh(this.rawTileData)).layers,this.sourceLayerCoder=new Ep(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t,n,r){this.loadVTLayers();const i=e.params||{},o=ai(i.filter),a=e.tileResult,s=e.transform,u=a.bufferedTilespaceBounds,c=this.grid.query(u.min.x,u.min.y,u.max.x,u.max.y,((e,t,n,r)=>Rc(a.bufferedTilespaceGeometry,e,t,n,r)));c.sort(ly);let l=null;s.elevation&&c.length>0&&(l=sy.create(s.elevation,this.tileID));const f={};let h;for(let d=0;d<c.length;d++){const s=c[d];if(s===h)continue;h=s;const u=this.featureIndexArray.get(s);let p=null;this.loadMatchingFeature(f,u,o,i.layers,i.availableImages,t,n,r,((t,n,r,i=0)=>(p||(p=_c(t,this.tileID.canonical,e.tileTransform)),n.queryIntersectsFeature(a,t,r,p,this.z,e.transform,e.pixelPosMatrix,l,i))))}return f}loadMatchingFeature(e,t,n,r,i,o,a,s,u){const{featureIndex:c,bucketIndex:l,sourceLayerIndex:f,layoutVertexArrayOffset:h}=t,d=this.bucketLayerIDs[l];if(r&&!function(e,t){for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1}(r,d))return;const p=this.sourceLayerCoder.decode(f),y=this.vtLayers[p].feature(c);if(n.needGeometry){const e=wc(y,!0);if(!n.filter(new Fo(this.tileID.overscaledZ),e,this.tileID.canonical))return}else if(!n.filter(new Fo(this.tileID.overscaledZ),y))return;const m=this.getId(y,p);for(let g=0;g<d.length;g++){const t=d[g];if(r&&r.indexOf(t)<0)continue;const n=o[t];if(!n)continue;let l={};void 0!==m&&s&&(l=s.getState(n.sourceLayer||"_geojsonTileLayer",m));const f=M({},a[t]);f.paint=cy(f.paint,n.paint,y,l,i),f.layout=cy(f.layout,n.layout,y,l,i);const p=!u||u(y,n,l,h);if(!p)continue;const v=new Sp(y,this.z,this.x,this.y,m);v.layer=f;let b=e[t];void 0===b&&(b=e[t]=[]),b.push({featureIndex:c,feature:v,intersectionZ:p})}}lookupSymbolFeatures(e,t,n,r,i,o,a,s){const u={};this.loadVTLayers();const c=ai(i);for(const l of e)this.loadMatchingFeature(u,{bucketIndex:n,sourceLayerIndex:r,featureIndex:l,layoutVertexArrayOffset:0},c,o,a,s,t);return u}loadFeature(e){const{featureIndex:t,sourceLayerIndex:n}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(n),i=this.vtFeatures[r];if(i[t])return i[t];const o=this.vtLayers[r].feature(t);return i[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const n of t)if(e===n)return!0;return!1}getId(e,t){let n=e.id;if(this.promoteId){const r="string"==typeof this.promoteId?this.promoteId:this.promoteId[t];null!=r&&(n=e.properties[r]),"boolean"==typeof n&&(n=Number(n))}return n}}function cy(e,t,n,r,i){return z(e,((e,o)=>{const a=t instanceof Yo?t.get(o):null;return a&&a.evaluate?a.evaluate(n,r,i):a}))}function ly(e,t){return t-e}ji(uy,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class fy{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new $c({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const n=this.getKey(e,t);return this.positions[n]}trim(){const e=this.width,t=this.height=O(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,n){const r=[];let i=e.length%2==1?-e[e.length-1]*n:0,o=e[0]*n,a=!0;r.push({left:i,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let u=1;u<e.length;u++){a=!a;const t=e[u];i=s*n,s+=t,o=s*n,r.push({left:i,right:o,isDash:a,zeroLength:0===t})}return r}addRoundDash(e,t,n){const r=t/2;for(let i=-n;i<=n;i++){const t=this.width*(this.nextRow+n+i);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const u=Math.abs(s-a.left),c=Math.abs(s-a.right),l=Math.min(u,c);let f;const h=i/n*(r+1);if(a.isDash){const e=r-Math.abs(h);f=Math.sqrt(l*l+e*e)}else f=r-Math.sqrt(l*l+h*h);this.image.data[t+s]=Math.max(0,Math.min(255,f+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],n=e[s+1];t.zeroLength?e.splice(s,1):n&&n.isDash===t.isDash&&(n.left=t.left,e.splice(s,1))}const n=e[0],r=e[e.length-1];n.isDash===r.isDash&&(n.left=r.left-this.width,r.right=n.right+this.width);const i=this.width*this.nextRow;let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const n=Math.abs(s-a.left),r=Math.abs(s-a.right),u=Math.min(n,r);this.image.data[i+s]=Math.max(0,Math.min(255,(a.isDash?u:-u)+t+128))}}addDash(e,t){const n=this.getKey(e,t);if(this.positions[n])return this.positions[n];const r="round"===t,i=r?7:0,o=2*i+1;if(this.nextRow+o>this.height)return F("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let c=0;c<e.length;c++)e[c]<0&&(F("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),a+=e[c];if(0!==a){const n=this.width/a,o=this.getDashRanges(e,this.width,n);r?this.addRoundDash(o,n,i):this.addRegularDash(o,"square"===t?.5*n:0)}const s=this.nextRow+i;this.nextRow+=o;const u={tl:[s,i],br:[a,0]};return this.positions[n]=u,u}}ji(fy,"LineAtlas");class hy{constructor(e){const t={},n=[];for(const a in e){const r=e[a],i=t[a]={};for(const e in r.glyphs){const t=r.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const o=t.metrics.localGlyph?2:1,a={x:0,y:0,w:t.bitmap.width+2*o,h:t.bitmap.height+2*o};n.push(a),i[e]=a}}const{w:r,h:i}=Oh(n),o=new $c({width:r||1,height:i||1});for(const a in e){const n=e[a];for(const e in n.glyphs){const r=n.glyphs[+e];if(!r||0===r.bitmap.width||0===r.bitmap.height)continue;const i=t[a][e],s=r.metrics.localGlyph?2:1;$c.copy(r.bitmap,o,{x:0,y:0},{x:i.x+s,y:i.y+s},r.bitmap)}}this.image=o,this.positions=t}}ji(hy,"GlyphAtlas");class dy{constructor(e){this.tileID=new Tf(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.tileZoom=e.tileZoom,this.uid=e.uid,this.zoom=e.zoom,this.canonical=e.tileID.canonical,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming,this.returnDependencies=!!e.returnDependencies,this.promoteId=e.promoteId,this.enableTerrain=!!e.enableTerrain,this.isSymbolTile=e.isSymbolTile,this.tileTransform=Rd(e.tileID.canonical,e.projection),this.projection=e.projection}parse(e,t,n,r,i){this.status="parsing",this.data=e,this.collisionBoxArray=new Ca;const o=new Ep(Object.keys(e.layers).sort()),a=new uy(this.tileID,this.promoteId);a.bucketLayerIDs=[];const s={},u=new fy(256,256),c={featureIndex:a,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:u,availableImages:n},l=t.familiesBySource[this.source];for(const _ in l){const t=e.layers[_];if(!t)continue;let r=!1,i=!1;for(const e of l[_])"symbol"===e[0].type?r=!0:i=!0;if(!0===this.isSymbolTile&&!r)continue;if(!1===this.isSymbolTile&&!i)continue;1===t.version&&F(`Vector tile source "${this.source}" layer "${_}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const u=o.encode(_),f=[];for(let e=0;e<t.length;e++){const n=t.feature(e),r=a.getId(n,_);f.push({feature:n,id:r,index:e,sourceLayerIndex:u})}for(const e of l[_]){const t=e[0];void 0!==this.isSymbolTile&&"symbol"===t.type!==this.isSymbolTile||t.minzoom&&this.zoom<Math.floor(t.minzoom)||t.maxzoom&&this.zoom>=t.maxzoom||"none"!==t.visibility&&(py(e,this.zoom,n),(s[t.id]=t.createBucket({index:a.bucketLayerIDs.length,layers:e,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:u,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:n})).populate(f,c,this.tileID.canonical,this.tileTransform),a.bucketLayerIDs.push(e.map((e=>e.id))))}}let f,h,d,p;u.trim();const y={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},m=z(c.glyphDependencies,(e=>Object.keys(e).map(Number)));Object.keys(m).length?r.send("getGlyphs",{uid:this.uid,stacks:m},((e,t)=>{f||(f=e,h=t,b.call(this))}),void 0,!1,y):h={};const g=Object.keys(c.iconDependencies);g.length?r.send("getImages",{icons:g,source:this.source,tileID:this.tileID,type:"icons"},((e,t)=>{f||(f=e,d=t,b.call(this))}),void 0,!1,y):d={};const v=Object.keys(c.patternDependencies);function b(){if(f)return i(f);if(h&&d&&p){const e=new hy(h),t=new Rh(d,p);for(const r in s){const i=s[r];i instanceof fp?(py(i.layers,this.zoom,n),Ed(i,h,e.positions,d,t.iconPositions,this.showCollisionBoxes,n,this.tileID.canonical,this.tileZoom,this.projection)):i.hasPattern&&(i instanceof Uf||i instanceof Ul||i instanceof pf)&&(py(i.layers,this.zoom,n),i.addFeatures(c,this.tileID.canonical,t.patternPositions,n,this.tileTransform))}this.status="done",i(null,{buckets:T(s).filter((e=>!e.isEmpty())),featureIndex:a,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:e.image,lineAtlas:u,imageAtlas:t,glyphMap:this.returnDependencies?h:null,iconMap:this.returnDependencies?d:null,glyphPositions:this.returnDependencies?e.positions:null})}}v.length?r.send("getImages",{icons:v,source:this.source,tileID:this.tileID,type:"patterns"},((e,t)=>{f||(f=e,p=t,b.call(this))}),void 0,!1,y):p={},b.call(this)}}function py(e,t,n){const r=new Fo(t);for(const i of e)i.recalculate(r,n)}class yy{constructor(e){this.entries={},this.scheduler=e}request(e,t,n,r){const i=this.entries[e]=this.entries[e]||{callbacks:[]};if(i.result){const[e,n]=i.result;return this.scheduler?this.scheduler.add((()=>{r(e,n)}),t):r(e,n),()=>{}}return i.callbacks.push(r),i.cancel||(i.cancel=n(((n,r)=>{i.result=[n,r];for(const e of i.callbacks)this.scheduler?this.scheduler.add((()=>{e(n,r)}),t):e(n,r);setTimeout((()=>delete this.entries[e]),3e3)}))),()=>{i.result||(i.callbacks=i.callbacks.filter((e=>e!==r)),i.callbacks.length||(i.cancel(),delete this.entries[e]))}}}function my(e,t,n){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},(t=>{const r=ce(e.request,((e,r,i,o)=>{e?t(e):r&&t(null,{vectorTile:n?void 0:new af(new uh(r)),rawData:r,cacheControl:i,expires:o})}));return()=>{r.cancel(),t()}}),t)}e.ARRAY_TYPE=Ts,e.AUTH_ERR_MSG=ye,e.Aabb=xu,e.Actor=class{constructor(e,n,r){this.target=e,this.parent=n,this.mapId=r,this.callbacks={},this.cancelCallbacks={},R(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=V()?e:t,this.scheduler=new Ap}send(e,t,n,r,i=!1,o){const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);n&&(n.metadata=o,this.callbacks[a]=n);const s=H(this.globalScope)?void 0:[];return this.target.postMessage({id:a,type:e,hasCallback:!!n,targetMapId:r,mustQueue:i,sourceMapId:this.mapId,data:Ki(t,s)},s),{cancel:()=>{n&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data,n=t.id;if(n&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[n];delete this.cancelCallbacks[n],e&&e.cancel()}else if(t.mustQueue||V()){const e=this.callbacks[n];this.cancelCallbacks[n]=this.scheduler.add((()=>this.processTask(n,t)),e&&e.metadata||{type:"message"})}else this.processTask(n,t)}processTask(e,t){if("<response>"===t.type){const n=this.callbacks[e];delete this.callbacks[e],n&&(t.error?n(Gi(t.error)):n(null,Gi(t.data)))}else{const n=H(this.globalScope)?void 0:[],r=t.hasCallback?(t,r)=>{delete this.cancelCallbacks[e],this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Ki(t):null,data:Ki(r,n)},n)}:e=>{},i=Gi(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,i,r);else if(this.parent.getWorkerSource){const e=t.type.split(".");this.parent.getWorkerSource(t.sourceMapId,e[0],i.source)[e[1]](i,r)}else r(new Error(`Could not find function ${t.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},e.CanonicalTileID=If,e.Color=St,e.ColorMode=Jp,e.CullFaceMode=ny,e.DEMData=qp,e.DataConstantProperty=Xo,e.DedupedRequest=yy,e.DepthMode=Xp,e.EXTENT=Es,e.Elevation=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const n=t.getSource().maxzoom,r=1<<n,i=Math.floor(e.x),o=Math.floor((e.x-i)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new Tf(n,i,n,o,a));return!(!s||!s.dem)}getAtPointOrZero(e,t=0){return this.getAtPoint(e,t)||0}getAtPoint(e,t,n=!0){if(this.isUsingMockSource())return null;null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const i=r.getSource().maxzoom,o=1<<i,a=Math.floor(e.x),s=e.x-a,u=new Tf(i,a,i,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(u);if(!c||!c.dem)return t;const l=c.dem,f=1<<c.tileID.canonical.z,h=(s*f-c.tileID.canonical.x)*l.dim,d=(e.y*f-c.tileID.canonical.y)*l.dim,p=Math.floor(h),y=Math.floor(d);return(n?this.exaggeration():1)*Tn(Tn(l.get(p,y),l.get(p,y+1),d-y),Tn(l.get(p+1,y),l.get(p+1,y+1),d-y),h-p)}getAtTileOffset(e,t,n){const r=1<<e.canonical.z;return this.getAtPointOrZero(new hc(e.wrap+(e.canonical.x+t/Es)/r,(e.canonical.y+n/Es)/r))}getAtTileOffsetFunc(e,t,n,r){return i=>{const o=this.getAtTileOffset(e,i.x,i.y),a=r.upVector(e.canonical,i.x,i.y);return Xs(a,a,o*r.upVectorScale(e.canonical,t,n).metersToTile),a}}getForTilePoints(e,t,n,r){if(this.isUsingMockSource())return!1;const i=sy.create(this,e,r);return!!i&&(t.forEach((e=>{e[2]=this.exaggeration()*i.getElevationAt(e[0],e[1],n)})),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const n=t.dem.tree,r=t.tileID,i=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/i-r.canonical.x,a=e.canonical.y/i-r.canonical.y,s=0;for(let u=0;u<e.canonical.z-r.canonical.z&&!n.leaves[s];u++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=n.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*n.minimums[s],max:this.exaggeration()*n.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,n){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},e.ErrorEvent=qe,e.EvaluationParameters=Fo,e.Event=He,e.Evented=Ye,e.FillExtrusionBucket=pf,e.Frustum=wu,e.FrustumCorners=_u,e.GLOBE_RADIUS=ku,e.GLOBE_SCALE_MATCH_LATITUDE=45,e.GLOBE_ZOOM_THRESHOLD_MAX=6,e.GLOBE_ZOOM_THRESHOLD_MIN=5,e.GlobeSharedBuffers=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const e of this._wireframeSegments)e.destroy()}}_fillGridMeshWithLods(e,t){const n=new aa,r=new xa,i=[],o=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),u=(e,t,n)=>{let r=e===o-1?e-2:0===e?e:e-1;return r+=n?24575:0,[r,t]};for(let c=0;c<o;++c)n.emplaceBack(...u(c,0,!0));for(let c=0;c<a;++c)for(let e=0;e<o;++e)n.emplaceBack(...u(e,c,(0===e||e===o-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<o;++t)n.emplaceBack(...u(t,e,!0))}for(let c=0;c<t.length;++c){const e=r.length,a=t[c]+1+2,u=new xa;for(let n=0;n<a-1;n++){const e=n===a-2,i=e?o*(s-t.length+c-n):o;for(let t=0;t<o-1;t++){const a=n*o+t;0===n||e||0===t||t===o-2?(u.emplaceBack(a+1,a,a+i),u.emplaceBack(a+i,a+i+1,a+1)):(r.emplaceBack(a+1,a,a+i),r.emplaceBack(a+i,a+i+1,a+1))}}const l=As.simpleSegment(0,e,n.length,r.length-e);for(let t=0;t<u.uint16.length;t+=3)r.emplaceBack(u.uint16[t],u.uint16[t+1],u.uint16[t+2]);const f=As.simpleSegment(0,e,n.length,r.length-e);i.push({withoutSkirts:l,withSkirts:f})}return{vertices:n,indices:r,segments:i}}_createGrid(e){const t=this._fillGridMeshWithLods(Au,Eu);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,vu.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new xa;for(let i=0;i<=Au;i++)t.emplaceBack(0,i+1,i+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const n=new Ia,r=new Ia;this._poleSegments=[];for(let i=0,o=0;i<5;i++){const e=360/(1<<i);n.emplaceBack(0,-ku,0,.5,0),r.emplaceBack(0,-ku,0,.5,1);for(let t=0;t<=Au;t++){const i=t/Au,o=Tn(0,e,i),[a,s,u]=Uu($u,Ju,o,ku);n.emplaceBack(a,s,u,i,0),r.emplaceBack(a,s,u,i,1)}this._poleSegments.push(As.simpleSegment(o,0,66,64)),o+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(n,mu,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,mu,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}getWirefameBuffers(e,t){if(!this._wireframeSegments){const t=new Ta,n=Au,r=n+1+2,i=1;this._wireframeSegments=[];for(let e=0,o=0;e<Eu.length;e++){const a=Eu[e];for(let e=i;e<a+i;e++)for(let o=i;o<n+i;o++){const n=e*r+o;t.emplaceBack(n,n+1),t.emplaceBack(n,n+r),t.emplaceBack(n,n+r+1)}const s=a*n*3;this._wireframeSegments.push(As.simpleSegment(0,o,(a+1)*r,s)),o+=s}this._wireframeIndexBuffer=e.createIndexBuffer(t)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[t]]}},e.GlyphManager=ld,e.ImagePosition=Dh,e.LivePerformanceUtils=Le,e.LngLat=nc,e.LngLatBounds=Is,e.LocalGlyphMode=cd,e.MAX_MERCATOR_LATITUDE=lc,e.MercatorCoordinate=hc,e.ONE_EM=$f,e.OverscaledTileID=Tf,e.PerformanceMarkers=Re,e.Properties=Jo,e.RGBAImage=Jc,e.Ray=bu,e.RequestManager=class{constructor(e,t,n){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!n,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",f,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(e,t){if(!me(e))return e;const n=xe(e);return n.path=`/styles/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeGlyphsURL(e,t){if(!me(e))return e;const n=xe(e);return n.path=`/fonts/v1${n.path}`,this._makeAPIURL(n,this._customAccessToken||t)}normalizeSourceURL(e,t,n,r){if(!me(e))return e;const i=xe(e);return i.path=`/v4/${i.authority}.json`,i.params.push("secure"),n&&i.params.push(`language=${n}`),r&&i.params.push(`worldview=${r}`),this._makeAPIURL(i,this._customAccessToken||t)}normalizeSpriteURL(e,t,n,r){const i=xe(e);return me(e)?(i.path=`/styles/v1${i.path}/sprite${t}${n}`,this._makeAPIURL(i,this._customAccessToken||r)):(i.path+=`${t}${n}`,ke(i))}normalizeTileURL(e,t,n){if(this._isSkuTokenExpired()&&this._createSkuToken(),e&&!me(e))return e;const r=xe(e);r.path=r.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${t||n&&"raster"!==r.authority&&512===n?"@2x":""}${o.supported?".webp":"$1"}`),"raster"===r.authority?r.path=`/${i.RASTER_URL_PREFIX}${r.path}`:(r.path=r.path.replace(/^.+\/v4\//,"/"),r.path=`/${i.TILE_URL_VERSION}${r.path}`);const a=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(r.params)||i.ACCESS_TOKEN;return i.REQUIRE_ACCESS_TOKEN&&a&&this._skuToken&&r.params.push(`sku=${this._skuToken}`),this._makeAPIURL(r,a)}canonicalizeTileURL(e,t){const n=xe(e);if(!n.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!n.path.match(/\.[\w]+$/))return e;let r="mapbox://";n.path.match(/^\/raster\/v1\//)?r+=`raster/${n.path.replace(`/${i.RASTER_URL_PREFIX}/`,"")}`:r+=`tiles/${n.path.replace(`/${i.TILE_URL_VERSION}/`,"")}`;let o=n.params;return t&&(o=o.filter((e=>!e.match(/^access_token=/)))),o.length&&(r+=`?${o.join("&")}`),r}canonicalizeTileset(e,t){const n=!!t&&me(t),r=[];for(const i of e.tiles||[])ge(i)?r.push(this.canonicalizeTileURL(i,n)):r.push(i);return r}_makeAPIURL(e,t){const n="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",r=xe(i.API_URL);if(e.protocol=r.protocol,e.authority=r.authority,"http"===e.protocol){const t=e.params.indexOf("secure");t>=0&&e.params.splice(t,1)}if("/"!==r.path&&(e.path=`${r.path}${e.path}`),!i.REQUIRE_ACCESS_TOKEN)return ke(e);if(t=t||i.ACCESS_TOKEN,!this._silenceAuthErrors){if(!t)throw new Error(`An API access token is required to use Mapbox GL. ${n}`);if("s"===t[0])throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${n}`)}return e.params=e.params.filter((e=>-1===e.indexOf("access_token"))),e.params.push(`access_token=${t||""}`),ke(e)}},e.ResourceType=oe,e.SegmentVector=As,e.SourceCache=ry,e.StencilMode=$p,e.StructArrayLayout1ui2=Ma,e.StructArrayLayout2f1f2i16=ba,e.StructArrayLayout2i4=aa,e.StructArrayLayout2ui4=Ta,e.StructArrayLayout3f12=wa,e.StructArrayLayout3ui6=xa,e.StructArrayLayout4i8=ua,e.StructArrayLayout5f20=Ia,e.Texture=xp,e.Tile=zp,e.Transitionable=Vo,e.Uniform1f=ts,e.Uniform1i=class extends es{constructor(e){super(e),this.current=0}set(e,t,n){this.fetchUniformLocation(e,t)&&this.current!==n&&(this.current=n,this.gl.uniform1i(this.location,n))}},e.Uniform2f=class extends es{constructor(e){super(e),this.current=[0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]||(this.current=n,this.gl.uniform2f(this.location,n[0],n[1])))}},e.Uniform3f=class extends es{constructor(e){super(e),this.current=[0,0,0]}set(e,t,n){this.fetchUniformLocation(e,t)&&(n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]||(this.current=n,this.gl.uniform3f(this.location,n[0],n[1],n[2])))}},e.Uniform4f=ns,e.UniformColor=rs,e.UniformMatrix2f=class extends es{constructor(e){super(e),this.current=as}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<4;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix2fv(this.location,!1,n);break}}},e.UniformMatrix3f=class extends es{constructor(e){super(e),this.current=os}set(e,t,n){if(this.fetchUniformLocation(e,t))for(let r=0;r<9;r++)if(n[r]!==this.current[r]){this.current=n,this.gl.uniformMatrix3fv(this.location,!1,n);break}}},e.UniformMatrix4f=class extends es{constructor(e){super(e),this.current=is}set(e,t,n){if(this.fetchUniformLocation(e,t)){if(n[12]!==this.current[12]||n[0]!==this.current[0])return this.current=n,void this.gl.uniformMatrix4fv(this.location,!1,n);for(let e=1;e<16;e++)if(n[e]!==this.current[e]){this.current=n,this.gl.uniformMatrix4fv(this.location,!1,n);break}}}},e.UnwrappedTileID=Sf,e.ValidationError=Qr,e.VectorTileFeature=sf,e.VectorTileWorkerSource=class extends Ye{constructor(e,t,n,r,i){super(),this.actor=e,this.layerIndex=t,this.availableImages=n,this.loadVectorData=i||my,this.loading={},this.loaded={},this.deduped=new yy(e.scheduler),this.isSpriteLoaded=r,this.scheduler=e.scheduler}loadTile(e,t){const n=e.uid,r=e&&e.request,i=r&&r.collectResourceTiming,o=this.loading[n]=new dy(e);o.abort=this.loadVectorData(e,((a,s)=>{const u=!this.loading[n];if(delete this.loading[n],u||a||!s)return o.status="done",u||(this.loaded[n]=o),t(a);const c=s.rawData,l={};s.expires&&(l.expires=s.expires),s.cacheControl&&(l.cacheControl=s.cacheControl),o.vectorTile=s.vectorTile||new af(new uh(c));const f=()=>{o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,((e,n)=>{if(e||!n)return t(e);const o={};if(i){const e=Ne(r);e.length>0&&(o.resourceTiming=JSON.parse(JSON.stringify(e)))}t(null,M({rawTileData:c.slice(0)},n,l,o))}))};this.isSpriteLoaded?f():this.once("isSpriteLoaded",(()=>{this.scheduler?this.scheduler.add(f,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom}):f()})),this.loaded=this.loaded||{},this.loaded[n]=o}))}reloadTile(e,t){const n=this.loaded,r=e.uid,i=this;if(n&&n[r]){const o=n[r];o.showCollisionBoxes=e.showCollisionBoxes,o.enableTerrain=!!e.enableTerrain,o.projection=e.projection,o.tileTransform=Rd(e.tileID.canonical,e.projection);const a=(e,n)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,i.layerIndex,this.availableImages,i.actor,r)),t(e,n)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.actor,a):a())}}abortTile(e,t){const n=e.uid,r=this.loading[n];r&&(r.abort&&r.abort(),delete this.loading[n]),t()}removeTile(e,t){const n=this.loaded,r=e.uid;n&&n[r]&&delete n[r],t()}},e.WritingMode=Lh,e.ZoomDependentExpression=Hr,e.add=Ks,e.addDynamicAttributes=sp,e.adjoint=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],l=t[8];return e[0]=a*l-s*c,e[1]=i*c-r*l,e[2]=r*s-i*a,e[3]=s*u-o*l,e[4]=n*l-i*u,e[5]=i*o-n*s,e[6]=o*c-a*u,e[7]=r*u-n*c,e[8]=n*a-r*o,e},e.asyncAll=S,e.bezier=x,e.bindAll=R,e.boundsAttributes=Rp,e.bufferConvexPolygon=function(e,t){const n=[];for(let r=0;r<e.length;r++){const i=I(r-1,-1,e.length-1),o=I(r+1,-1,e.length-1),a=e[r],s=e[o],u=e[i].sub(a).unit(),c=s.sub(a).unit(),l=c.angleWithSep(u.x,u.y),f=u.add(c).unit().mult(-1*t/Math.sin(l/2));n.push(a.add(f))}return n},e.cacheEntryPossiblyAdded=function(e){ie++,ie>ee&&(e.getActor().send("enforceCacheSizeLimit",J),ie=0)},e.calculateGlobeLabelMatrix=function(e,t){const{x:n,y:r}=e.point,i=Hu(n,r,e.worldSize/e._pixelsPerMercatorPixel,0,0);return Os(i,i,Gu(Ou(t)))},e.calculateGlobeMatrix=function(e){const{x:t,y:n}=e.point,{lng:r,lat:i}=e._center;return Hu(t,n,e.worldSize,r,i)},e.calculateGlobeMercatorMatrix=function(e){const t=e.pixelsPerMeter,n=t/ac(1,e.center.lat),r=Bs(new Float64Array(16));return Ds(r,r,[e.point.x,e.point.y,0]),Rs(r,r,[n,n,t]),Float32Array.from(r)},e.circumferenceAtLatitude=rc,e.clamp=A,e.clearTileCache=function(e){if(!te())return;const n=t.caches.delete(X);e&&n.catch(e).then((()=>e()))},e.clipLine=od,e.clone=function(e){var t=new Ts(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.clone$1=N,e.collisionCircleLayout=Qf,e.config=i,e.conjugate=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.create=function(){var e=new Ts(16);return Ts!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},e.create$1=Ms,e.createExpression=Kr,e.createLayout=ia,e.createStyleLayer=function(e){return"custom"===e.type?new vp(e):new wp[e.type](e)},e.cross=eu,e.degToRad=v,e.distance=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.div=function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e},e.dot=Js,e.earthRadius=ec,e.ease=k,e.easeCubicInOut=w,e.ecefToLatLng=function([e,t,n]){const r=Math.hypot(e,t,n),i=Math.atan2(e,n),o=.5*Math.PI-Math.acos(-t/r);return new nc(b(i),b(o))},e.emitValidationErrors=Zi,e.endsWith=L,e.enforceCacheSizeLimit=function(e){ne(),Q&&Q.then((t=>{t.keys().then((n=>{for(let r=0;r<n.length-e;r++)t.delete(n[r])}))}))},e.evaluateSizeForFeature=th,e.evaluateSizeForZoom=nh,e.evaluateVariableOffset=Ad,e.evented=zo,e.exactEquals=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.exactEquals$1=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},e.exported=Ve,e.exported$1=o,e.extend=M,e.extend$1=Qe,e.fillExtrusionHeightLift=wf,e.filterObject=Z,e.fromMat4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.fromQuat=function(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n+n,s=r+r,u=i+i,c=n*a,l=r*a,f=r*s,h=i*a,d=i*s,p=i*u,y=o*a,m=o*s,g=o*u;return e[0]=1-f-p,e[1]=l+g,e[2]=h-m,e[3]=0,e[4]=l-g,e[5]=1-c-p,e[6]=d+y,e[7]=0,e[8]=h+m,e[9]=d-y,e[10]=1-c-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e},e.fromRotation=function(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.fromScaling=Zs,e.furthestTileCorner=function(e){const t=Math.round((e+45+360)%360/90)%4;return _[t]},e.getAABBPointSquareDist=function(e,t,n){let r=0;for(let i=0;i<2;++i){const o=n?n[i]:0;e[i]>o&&(r+=(e[i]-o)*(e[i]-o)),t[i]<o&&(r+=(o-t[i])*(o-t[i]))}return r},e.getAnchorAlignment=Hh,e.getAnchorJustification=Id,e.getBounds=function(e){let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const o of e)t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x),i=Math.max(i,o.y);return{min:new p(t,n),max:new p(r,i)}},e.getColumn=Y,e.getGridMatrix=function(e,t,n,r){const i=t.getNorth(),o=t.getSouth(),a=t.getWest(),s=t.getEast(),u=1<<e.z,c=s-a,l=i-o,f=c/Au,h=-l/Eu[n],d=[0,f,0,h,0,0,i,a,0];if(e.z>0){const e=180/r;Ps(d,d,[e/c+1,0,0,0,e/l+1,0,-.5*e/f,.5*e/h,1])}return d[2]=u,d[5]=e.x,d[8]=e.y,d},e.getImage=pe,e.getJSON=function(e,t){return ue(M(e,{type:"json"}),t)},e.getLatitudinalLod=function(e){const t=lc-5;e=A(e,-t,t)/t*90;const n=Math.pow(Math.abs(Math.sin(v(e))),3);return Math.round(n*(Eu.length-1))},e.getMapSessionAPI=Oe,e.getPerformanceMeasurement=Ne,e.getProjection=np,e.getRTLTextPluginStatus=Zo,e.getReferrer=se,e.getTilePoint=function(e,{x:t,y:n},r=0){return new p(((t-r)*e.scale-e.x)*Es,(n*e.scale-e.y)*Es)},e.getTileVec3=function(e,t,n=0){return Vs(((t.x-n)*e.scale-e.x)*Es,(t.y*e.scale-e.y)*Es,cc(t.z,t.y))},e.getVideo=function(e,n){const r=t.document.createElement("video");r.muted=!0,r.onloadstart=function(){n(null,r)};for(let i=0;i<e.length;i++){const n=t.document.createElement("source");le(e[i])||(r.crossOrigin="Anonymous"),n.src=e[i],r.appendChild(n)}return{cancel:()=>{}}},e.globeCenterToScreenPoint=function(e){const t=[0,0,0],n=Bs(new Float64Array(16));return Os(n,e.pixelMatrix,e.globeMatrix),tu(t,t,n),new p(t[0],t[1])},e.globeDenormalizeECEF=Gu,e.globeECEFOrigin=function(e,t){const n=[0,0,0];return tu(n,n,Ku(Ou(t.canonical))),tu(n,n,e),n},e.globeMetersToEcef=Mu,e.globeNormalizeECEF=Ku,e.globePixelsToTileUnits=function(e,t){return Es/(512*Math.pow(2,e))*Wu(Ou(t))},e.globePoleMatrixForTile=function(e,t,n){const r=Bs(new Float64Array(16)),i=(t/(1<<e)-.5)*Math.PI*2;return zs(r,n.globeMatrix,i),Float32Array.from(r)},e.globeTileBounds=Ou,e.globeTiltAtLngLat=Yu,e.globeToMercatorTransition=qu,e.globeUseCustomAntiAliasing=function(e,t,n){const r=qu(n.zoom),i=e.style.map._antialias,o=!!t.extStandardDerivatives,a=t.extStandardDerivativesForceOff||e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!i&&!a&&o},e.identity=Bs,e.identity$1=fu,e.invert=Cs,e.isFullscreen=function(){return!!t.document.fullscreenElement||!!t.document.webkitFullscreenElement},e.isLngLatBehindGlobe=Xu,e.isMapAuthenticated=function(e){return De.has(e)},e.isMapboxURL=me,e.isSafariWithAntialiasingBug=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!H(e)&&t&&(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},e.latFromMercatorY=uc,e.latLngToECEF=Fu,e.len=au,e.length=Ws,e.length$1=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.lngFromMercatorX=sc,e.loadVectorTile=my,e.makeRequest=ue,e.mapValue=function(e,t,n,r,i){return A((e-t)/(n-t)*(i-r)+r,r,i)},e.mercatorScale=fc,e.mercatorXfromLng=ic,e.mercatorYfromLat=oc,e.mercatorZfromAltitude=ac,e.mul=Us,e.mul$1=ou,e.multiply=Os,e.multiply$1=Ps,e.multiply$2=Hs,e.nextPowerOfTwo=O,e.normalize=$s,e.normalize$1=pu,e.normalize$2=uu,e.number=Tn,e.ortho=function(e,t,n,r,i,o,a){var s=1/(t-n),u=1/(r-i),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*u,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*u,e[14]=(a+o)*c,e[15]=1,e},e.pbf=uh,e.perspective=function(e,t,n,r,i){var o,a=1/Math.tan(t/2);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=i&&i!==1/0?(e[10]=(i+r)*(o=1/(r-i)),e[14]=2*i*r*o):(e[10]=-1,e[14]=-2*r),e},e.pick=function(e,t){const n={};for(let r=0;r<t.length;r++){const i=t[r];i in e&&(n[i]=e[i])}return n},e.plugin=Uo,e.pointGeometry=p,e.polesInViewport=function(e){const t=Bs(new Float64Array(16));Os(t,e.pixelMatrix,e.globeMatrix);const n=[0,Iu,0],r=[0,Su,0];return tu(n,n,t),tu(r,r,t),[n[0]>0&&n[0]<=e.width&&n[1]>0&&n[1]<=e.height&&!Xu(e,new nc(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Xu(e,new nc(e.center.lat,-90))]},e.polygonContainsPoint=Dc,e.polygonIntersectsBox=Rc,e.polygonIntersectsPolygon=Ec,e.polygonizeBounds=function(e,t,n=0,r=!0){const i=new p(n,n),o=e.sub(i),a=t.add(i),s=[o,new p(a.x,o.y),a,new p(o.x,a.y)];return r&&s.push(o.clone()),s},e.posAttributes=vu,e.postMapLoadEvent=Me,e.postPerformanceEvent=Be,e.postTurnstileEvent=Se,e.potpack=Oh,e.prevPowerOfTwo=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.radToDeg=b,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.registerForPluginStateChange=function(e){return e({pluginStatus:Oo,pluginURL:Do}),zo.on("pluginStateChange",e),e},e.removeAuthState=function(e){De.delete(e)},e.renderColorRamp=tl,e.resample=pc,e.rotateX=Ls,e.rotateX$1=hu,e.rotateY=zs,e.rotateY$1=du,e.rotateZ=function(e,t,n){var r=Math.sin(n),i=Math.cos(n),o=t[0],a=t[1],s=t[2],u=t[3],c=t[4],l=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+c*r,e[1]=a*i+l*r,e[2]=s*i+f*r,e[3]=u*i+h*r,e[4]=c*i-o*r,e[5]=l*i-a*r,e[6]=f*i-s*r,e[7]=h*i-u*r,e},e.rotateZ$1=function(e,t,n){n*=.5;var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);return e[0]=r*u+i*s,e[1]=i*u-r*s,e[2]=o*u+a*s,e[3]=a*u-o*s,e},e.scale=Rs,e.scale$1=su,e.scale$2=Xs,e.scaleAndAdd=Qs,e.set=function(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e},e.setCacheLimits=function(e,t){J=e,ee=t},e.setColumn=function(e,t,n){e[4*t+0]=n[0],e[4*t+1]=n[1],e[4*t+2]=n[2],e[4*t+3]=n[3]},e.setRTLTextPlugin=function(e,t,n=!1){if(Oo===Mo||Oo===Po||Oo===Bo)throw new Error("setRTLTextPlugin cannot be called multiple times.");Do=Ve.resolveURL(e),Oo=Mo,Co=t,Lo(),n||No()},e.smoothstep=E,e.spec=Xe,e.squaredLength=function(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r},e.storeAuthState=function(e,t){t?De.add(e):De.delete(e)},e.sub=iu,e.subtract=Gs,e.symbolSize=rh,e.tileAABB=function(e,t,n,r,i,o,a,s,u){if("globe"===u.name)return zu(e,t,new If(n,r,i));const c=Rd({z:n,x:r,y:i},u);return new xu([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.tileCornersToBounds=Zu,e.tileTransform=Rd,e.transformMat3=function(e,t,n){var r=t[0],i=t[1],o=t[2];return e[0]=r*n[0]+i*n[3]+o*n[6],e[1]=r*n[1]+i*n[4]+o*n[7],e[2]=r*n[2]+i*n[5]+o*n[8],e},e.transformMat4=tu,e.transformMat4$1=cu,e.transformQuat=nu,e.transitionTileAABBinECEF=Ru,e.translate=Ds,e.transpose=function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e},e.triggerPluginCompletionEvent=Ro,e.uniqueId=B,e.updateGlobeVertexNormal=function(e,t,n,r,i){const o=5*t+2;e.float32[o+0]=n,e.float32[o+1]=r,e.float32[o+2]=i},e.validateCustomStyleLayer=function(e){const t=[],n=e.id;return void 0===n&&t.push({message:`layers.${n}: missing required property "id"`}),void 0===e.render&&t.push({message:`layers.${n}: missing required method "render"`}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:`layers.${n}: property "renderingMode" must be either "2d" or "3d"`}),t},e.validateFilter=e=>zi(vi(e)),e.validateFog=e=>zi(Pi(e)),e.validateLayer=e=>zi(ki(e)),e.validateLight=e=>zi(Ti(e)),e.validateSource=e=>zi(Ii(e)),e.validateStyle=Di,e.validateTerrain=e=>zi(Mi(e)),e.values=T,e.vectorTile=Hl,e.version=n,e.warnOnce=F,e.window=t,e.wrap=I})),r(["./shared"],(function(e){function t(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let n="[";for(const r of e)n+=`${t(r)},`;return`${n}]`}let n="{";for(const r of Object.keys(e).sort())n+=`${r}:${t(e[r])},`;return`${n}}`}function n(n){let r="";for(const i of e.refProperties)r+=`/${t(n[i])}`;return r}class r{constructor(e){this.keyCache={},e&&this.replace(e)}replace(e){this._layerConfigs={},this._layers={},this.update(e,[])}update(t,r){for(const n of t)this._layerConfigs[n.id]=n,(this._layers[n.id]=e.createStyleLayer(n)).compileFilter(),this.keyCache[n.id]&&delete this.keyCache[n.id];for(const e of r)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const i=function(e,t){const r={};for(let o=0;o<e.length;o++){const i=t&&t[e[o].id]||n(e[o]);t&&(t[e[o].id]=i);let a=r[i];a||(a=r[i]=[]),a.push(e[o])}const i=[];for(const n in r)i.push(r[n]);return i}(e.values(this._layerConfigs),this.keyCache);for(const e of i){const t=e.map((e=>this._layers[e.id])),n=t[0];if("none"===n.visibility)continue;const r=n.source||"";let i=this.familiesBySource[r];i||(i=this.familiesBySource[r]={});const o=n.sourceLayer||"_geojsonTileLayer";let a=i[o];a||(a=i[o]=[]),a.push(t)}}}class i{loadTile(t,n){const{uid:r,encoding:i,rawImageData:o,padding:a,buildQuadTree:s}=t,u=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap?this.getImageData(o,a):o;n(null,new e.DEMData(r,u,i,a<1,s))}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const n=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),n}}var o=function e(t,n){var r,i=t&&t.type;if("FeatureCollection"===i)for(r=0;r<t.features.length;r++)e(t.features[r],n);else if("GeometryCollection"===i)for(r=0;r<t.geometries.length;r++)e(t.geometries[r],n);else if("Feature"===i)e(t.geometry,n);else if("Polygon"===i)a(t.coordinates,n);else if("MultiPolygon"===i)for(r=0;r<t.coordinates.length;r++)a(t.coordinates[r],n);return t};function a(e,t){if(0!==e.length){s(e[0],t);for(var n=1;n<e.length;n++)s(e[n],!t)}}function s(e,t){for(var n=0,r=0,i=0,o=e.length,a=o-1;i<o;a=i++){var s=(e[i][0]-e[a][0])*(e[a][1]+e[i][1]),u=n+s;r+=Math.abs(n)>=Math.abs(s)?n-u+s:s-u+n,n=u}n+r>=0!=!!t&&e.reverse()}const u=e.VectorTileFeature.prototype.toGeoJSON;class c{constructor(t){this._feature=t,this.extent=e.EXTENT,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const n of this._feature.geometry)t.push([new e.pointGeometry(n[0],n[1])]);return t}{const t=[];for(const n of this._feature.geometry){const r=[];for(const t of n)r.push(new e.pointGeometry(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,n){return u.call(this,e,t,n)}}class l{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=t.length,this._features=t}feature(e){return new c(this._features[e])}}var f={},h={get exports(){return f},set exports(e){f=e}},d=e.pointGeometry,p=e.vectorTile.VectorTileFeature,y=m;function m(e,t){this.options=t||{},this.features=e,this.length=e.length}function g(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}m.prototype.feature=function(e){return new g(this.features[e],this.options.extent)},g.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var n=e[t],r=[],i=0;i<n.length;i++)r.push(new d(n[i][0],n[i][1]));this.geometry.push(r)}return this.geometry},g.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var u=a[s];t=Math.min(t,u.x),n=Math.max(n,u.x),r=Math.min(r,u.y),i=Math.max(i,u.y)}return[t,r,n,i]},g.prototype.toGeoJSON=p.prototype.toGeoJSON;var v=e.pbf,b=y;function _(e){var t=new v;return function(e,t){for(var n in e.layers)t.writeMessage(3,w,e.layers[n])}(e,t),t.finish()}function w(e,t){var n;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,x,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var o=r.values;for(n=0;n<o.length;n++)t.writeMessage(4,S,o[n])}function x(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,k,e),t.writeVarintField(3,n.type),t.writeMessage(4,I,n)}function k(e,t){var n=e.feature,r=e.keys,i=e.values,o=e.keycache,a=e.valuecache;for(var s in n.properties){var u=n.properties[s],c=o[s];if(null!==u){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var l=typeof u;"string"!==l&&"boolean"!==l&&"number"!==l&&(u=JSON.stringify(u));var f=l+":"+u,h=a[f];void 0===h&&(i.push(u),a[f]=h=i.length-1),t.writeVarint(h)}}}function A(e,t){return(t<<3)+(7&e)}function E(e){return e<<1^e>>31}function I(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,o=0,a=n.length,s=0;s<a;s++){var u=n[s],c=1;1===r&&(c=u.length),t.writeVarint(A(1,c));for(var l=3===r?u.length-1:u.length,f=0;f<l;f++){1===f&&1!==r&&t.writeVarint(A(2,l-1));var h=u[f].x-i,d=u[f].y-o;t.writeVarint(E(h)),t.writeVarint(E(d)),i+=h,o+=d}3===r&&t.writeVarint(A(7,1))}}function S(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}function T(e,t,n,r,i,o){if(i-r<=n)return;const a=r+i>>1;M(e,t,a,r,i,o%2),T(e,t,n,r,a-1,o+1),T(e,t,n,a+1,i,o+1)}function M(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const a=i-r+1,s=n-r+1,u=Math.log(a),c=.5*Math.exp(2*u/3),l=.5*Math.sqrt(u*c*(a-c)/a)*(s-a/2<0?-1:1);M(e,t,n,Math.max(r,Math.floor(n-s*c/a+l)),Math.min(i,Math.floor(n+(a-s)*c/a+l)),o)}const a=t[2*n+o];let s=r,u=i;for(P(e,t,r,n),t[2*i+o]>a&&P(e,t,r,i);s<u;){for(P(e,t,s,u),s++,u--;t[2*s+o]<a;)s++;for(;t[2*u+o]>a;)u--}t[2*r+o]===a?P(e,t,r,u):(u++,P(e,t,u,i)),u<=n&&(r=u+1),n<=u&&(i=u-1)}}function P(e,t,n,r){B(e,n,r),B(t,2*n,2*r),B(t,2*n+1,2*r+1)}function B(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}h.exports=_,f.fromVectorTileJs=_,f.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var r in e)n[r]=new b(e[r].features,t),n[r].name=r,n[r].version=t.version,n[r].extent=t.extent;return _({layers:n})},f.GeoJSONWrapper=b;const O=e=>e[0],D=e=>e[1];class R{constructor(e,t=O,n=D,r=64,i=Float64Array){this.nodeSize=r,this.points=e;const o=e.length<65536?Uint16Array:Uint32Array,a=this.ids=new o(e.length),s=this.coords=new i(2*e.length);for(let u=0;u<e.length;u++)a[u]=u,s[2*u]=t(e[u]),s[2*u+1]=n(e[u]);T(a,s,r,0,a.length-1,0)}range(e,t,n,r){return function(e,t,n,r,i,o,a){const s=[0,e.length-1,0],u=[];let c,l;for(;s.length;){const f=s.pop(),h=s.pop(),d=s.pop();if(h-d<=a){for(let a=d;a<=h;a++)c=t[2*a],l=t[2*a+1],c>=n&&c<=i&&l>=r&&l<=o&&u.push(e[a]);continue}const p=Math.floor((d+h)/2);c=t[2*p],l=t[2*p+1],c>=n&&c<=i&&l>=r&&l<=o&&u.push(e[p]);const y=(f+1)%2;(0===f?n<=c:r<=l)&&(s.push(d),s.push(p-1),s.push(y)),(0===f?i>=c:o>=l)&&(s.push(p+1),s.push(h),s.push(y))}return u}(this.ids,this.coords,e,t,n,r,this.nodeSize)}within(e,t,n){return function(e,t,n,r,i,o){const a=[0,e.length-1,0],s=[],u=i*i;for(;a.length;){const c=a.pop(),l=a.pop(),f=a.pop();if(l-f<=o){for(let i=f;i<=l;i++)C(t[2*i],t[2*i+1],n,r)<=u&&s.push(e[i]);continue}const h=Math.floor((f+l)/2),d=t[2*h],p=t[2*h+1];C(d,p,n,r)<=u&&s.push(e[h]);const y=(c+1)%2;(0===c?n-i<=d:r-i<=p)&&(a.push(f),a.push(h-1),a.push(y)),(0===c?n+i>=d:r+i>=p)&&(a.push(h+1),a.push(l),a.push(y))}return s}(this.ids,this.coords,e,t,n,this.nodeSize)}}const L={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},z=Math.fround||(Z=new Float32Array(1),e=>(Z[0]=+e,Z[0]));var Z;class N{constructor(e){this.options=H(Object.create(L),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:t,minZoom:n,maxZoom:r,nodeSize:i}=this.options;t&&console.time("total time");const o=`prepare ${e.length} points`;t&&console.time(o),this.points=e;let a=[];for(let s=0;s<e.length;s++)e[s].geometry&&a.push(F(e[s],s));this.trees[r+1]=new R(a,q,Y,i,Float32Array),t&&console.timeEnd(o);for(let s=r;s>=n;s--){const e=+Date.now();a=this._cluster(a,s),this.trees[s]=new R(a,q,Y,i,Float32Array),t&&console.log("z%d: %d clusters in %dms",s,a.length,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),a=this.getClusters([-180,r,i,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(V(n),K(o),V(i),K(r)),u=[];for(const c of s){const e=a.points[c];u.push(e.numPoints?j(e):this.points[e.index])}return u}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.points[t];if(!o)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i.within(o.x,o.y,a),u=[];for(const c of s){const t=i.points[c];t.parentId===e&&u.push(t.numPoints?j(t):this.points[t.index])}if(0===u.length)throw new Error(r);return u}getLeaves(e,t,n){const r=[];return this._appendLeaves(r,e,t=t||10,n=n||0,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,u=(n-s)/i,c=(n+1+s)/i,l={features:[]};return this._addTileFeatures(r.range((t-s)/i,u,(t+1+s)/i,c),r.points,t,n,i,l),0===t&&this._addTileFeatures(r.range(1-s/i,u,1,c),r.points,i,n,i,l),t===i-1&&this._addTileFeatures(r.range(0,u,s/i,c),r.points,-1,n,i,l),l.features.length?l:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(a),e.length===n)break}return i}_addTileFeatures(e,t,n,r,i,o){for(const a of e){const e=t[a],s=e.numPoints;let u,c,l;if(s)u=W(e),c=e.x,l=e.y;else{const t=this.points[e.index];u=t.properties,c=V(t.geometry.coordinates[0]),l=K(t.geometry.coordinates[1])}const f={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(l*i-r))]],tags:u};let h;s?h=e.id:this.options.generateId?h=e.index:this.points[e.index].id&&(h=this.points[e.index].id),void 0!==h&&(f.id=h),o.features.push(f)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const n=[],{radius:r,extent:i,reduce:o,minPoints:a}=this.options,s=r/(i*Math.pow(2,t));for(let u=0;u<e.length;u++){const r=e[u];if(r.zoom<=t)continue;r.zoom=t;const i=this.trees[t+1],c=i.within(r.x,r.y,s),l=r.numPoints||1;let f=l;for(const e of c){const n=i.points[e];n.zoom>t&&(f+=n.numPoints||1)}if(f>l&&f>=a){let e=r.x*l,a=r.y*l,s=o&&l>1?this._map(r,!0):null;const h=(u<<5)+(t+1)+this.points.length;for(const n of c){const u=i.points[n];if(u.zoom<=t)continue;u.zoom=t;const c=u.numPoints||1;e+=u.x*c,a+=u.y*c,u.parentId=h,o&&(s||(s=this._map(r,!0)),o(s,this._map(u)))}r.parentId=h,n.push(U(e/f,a/f,h,f,s))}else if(n.push(r),f>1)for(const e of c){const r=i.points[e];r.zoom<=t||(r.zoom=t,n.push(r))}}return n}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t){if(e.numPoints)return t?H({},e.properties):e.properties;const n=this.points[e.index].properties,r=this.options.map(n);return t&&r===n?H({},r):r}}function U(e,t,n,r,i){return{x:z(e),y:z(t),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:i}}function F(e,t){const[n,r]=e.geometry.coordinates;return{x:z(V(n)),y:z(K(r)),zoom:1/0,index:t,parentId:-1}}function j(e){return{type:"Feature",id:e.id,properties:W(e),geometry:{type:"Point",coordinates:[(t=e.x,360*(t-.5)),G(e.y)]}};var t}function W(e){const t=e.numPoints,n=t>=1e4?`${Math.round(t/1e3)}k`:t>=1e3?Math.round(t/100)/10+"k":t;return H(H({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function V(e){return e/360+.5}function K(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function G(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function H(e,t){for(const n in t)e[n]=t[n];return e}function q(e){return e.x}function Y(e){return e.y}function X(e,t,n,r){for(var i,o=r,a=n-t>>1,s=n-t,u=e[t],c=e[t+1],l=e[n],f=e[n+1],h=t+3;h<n;h+=3){var d=Q(e[h],e[h+1],u,c,l,f);if(d>o)i=h,o=d;else if(d===o){var p=Math.abs(h-a);p<s&&(i=h,s=p)}}o>r&&(i-t>3&&X(e,t,i,r),e[i+2]=o,n-i>3&&X(e,i,n,r))}function Q(e,t,n,r,i,o){var a=i-n,s=o-r;if(0!==a||0!==s){var u=((e-n)*a+(t-r)*s)/(a*a+s*s);u>1?(n=i,r=o):u>0&&(n+=a*u,r+=s*u)}return(a=e-n)*a+(s=t-r)*s}function $(e,t,n,r){var i={id:void 0===e?null:e,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)J(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)J(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)J(e,t[r][i])}(i),i}function J(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}function ee(e,t,n,r){if(t.geometry){var i=t.geometry.coordinates,o=t.geometry.type,a=Math.pow(n.tolerance/((1<<n.maxZoom)*n.extent),2),s=[],u=t.id;if(n.promoteId?u=t.properties[n.promoteId]:n.generateId&&(u=r||0),"Point"===o)te(i,s);else if("MultiPoint"===o)for(var c=0;c<i.length;c++)te(i[c],s);else if("LineString"===o)ne(i,s,a,!1);else if("MultiLineString"===o){if(n.lineMetrics){for(c=0;c<i.length;c++)ne(i[c],s=[],a,!1),e.push($(u,"LineString",s,t.properties));return}re(i,s,a,!1)}else if("Polygon"===o)re(i,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(c=0;c<t.geometry.geometries.length;c++)ee(e,{id:u,geometry:t.geometry.geometries[c],properties:t.properties},n,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(c=0;c<i.length;c++){var l=[];re(i[c],l,a,!0),s.push(l)}}e.push($(u,o,s,t.properties))}}function te(e,t){t.push(ie(e[0])),t.push(oe(e[1])),t.push(0)}function ne(e,t,n,r){for(var i,o,a=0,s=0;s<e.length;s++){var u=ie(e[s][0]),c=oe(e[s][1]);t.push(u),t.push(c),t.push(0),s>0&&(a+=r?(i*c-u*o)/2:Math.sqrt(Math.pow(u-i,2)+Math.pow(c-o,2))),i=u,o=c}var l=t.length-3;t[2]=1,X(t,0,l,n),t[l+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function re(e,t,n,r){for(var i=0;i<e.length;i++){var o=[];ne(e[i],o,n,r),t.push(o)}}function ie(e){return e/360+.5}function oe(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function ae(e,t,n,r,i,o,a,s){if(r/=t,o>=(n/=t)&&a<r)return e;if(a<n||o>=r)return null;for(var u=[],c=0;c<e.length;c++){var l=e[c],f=l.geometry,h=l.type,d=0===i?l.minX:l.minY,p=0===i?l.maxX:l.maxY;if(d>=n&&p<r)u.push(l);else if(!(p<n||d>=r)){var y=[];if("Point"===h||"MultiPoint"===h)se(f,y,n,r,i);else if("LineString"===h)ue(f,y,n,r,i,!1,s.lineMetrics);else if("MultiLineString"===h)le(f,y,n,r,i,!1);else if("Polygon"===h)le(f,y,n,r,i,!0);else if("MultiPolygon"===h)for(var m=0;m<f.length;m++){var g=[];le(f[m],g,n,r,i,!0),g.length&&y.push(g)}if(y.length){if(s.lineMetrics&&"LineString"===h){for(m=0;m<y.length;m++)u.push($(l.id,h,y[m],l.tags));continue}"LineString"!==h&&"MultiLineString"!==h||(1===y.length?(h="LineString",y=y[0]):h="MultiLineString"),"Point"!==h&&"MultiPoint"!==h||(h=3===y.length?"Point":"MultiPoint"),u.push($(l.id,h,y,l.tags))}}}return u.length?u:null}function se(e,t,n,r,i){for(var o=0;o<e.length;o+=3){var a=e[o+i];a>=n&&a<=r&&(t.push(e[o]),t.push(e[o+1]),t.push(e[o+2]))}}function ue(e,t,n,r,i,o,a){for(var s,u,c=ce(e),l=0===i?he:de,f=e.start,h=0;h<e.length-3;h+=3){var d=e[h],p=e[h+1],y=e[h+2],m=e[h+3],g=e[h+4],v=0===i?d:p,b=0===i?m:g,_=!1;a&&(s=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-g,2))),v<n?b>n&&(u=l(c,d,p,m,g,n),a&&(c.start=f+s*u)):v>r?b<r&&(u=l(c,d,p,m,g,r),a&&(c.start=f+s*u)):fe(c,d,p,y),b<n&&v>=n&&(u=l(c,d,p,m,g,n),_=!0),b>r&&v<=r&&(u=l(c,d,p,m,g,r),_=!0),!o&&_&&(a&&(c.end=f+s*u),t.push(c),c=ce(e)),a&&(f+=s)}var w=e.length-3;d=e[w],p=e[w+1],y=e[w+2],(v=0===i?d:p)>=n&&v<=r&&fe(c,d,p,y),w=c.length-3,o&&w>=3&&(c[w]!==c[0]||c[w+1]!==c[1])&&fe(c,c[0],c[1],c[2]),c.length&&t.push(c)}function ce(e){var t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function le(e,t,n,r,i,o){for(var a=0;a<e.length;a++)ue(e[a],t,n,r,i,o,!1)}function fe(e,t,n,r){e.push(t),e.push(n),e.push(r)}function he(e,t,n,r,i,o){var a=(o-t)/(r-t);return e.push(o),e.push(n+(i-n)*a),e.push(1),a}function de(e,t,n,r,i,o){var a=(o-n)/(i-n);return e.push(t+(r-t)*a),e.push(o),e.push(1),a}function pe(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],a=o.type;if("Point"===a||"MultiPoint"===a||"LineString"===a)i=ye(o.geometry,t);else if("MultiLineString"===a||"Polygon"===a){i=[];for(var s=0;s<o.geometry.length;s++)i.push(ye(o.geometry[s],t))}else if("MultiPolygon"===a)for(i=[],s=0;s<o.geometry.length;s++){for(var u=[],c=0;c<o.geometry[s].length;c++)u.push(ye(o.geometry[s][c],t));i.push(u)}n.push($(o.id,a,i,o.tags))}return n}function ye(e,t){var n=[];n.size=e.size,void 0!==e.start&&(n.start=e.start,n.end=e.end);for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}function me(e,t){if(e.transformed)return e;var n,r,i,o=1<<e.z,a=e.x,s=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],c=u.geometry,l=u.type;if(u.geometry=[],1===l)for(r=0;r<c.length;r+=2)u.geometry.push(ge(c[r],c[r+1],t,o,a,s));else for(r=0;r<c.length;r++){var f=[];for(i=0;i<c[r].length;i+=2)f.push(ge(c[r][i],c[r][i+1],t,o,a,s));u.geometry.push(f)}}return e.transformed=!0,e}function ge(e,t,n,r,i,o){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-o))]}function ve(e,t,n,r,i){for(var o=t===i.maxZoom?0:i.tolerance/((1<<t)*i.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},s=0;s<e.length;s++){a.numFeatures++,be(a,e[s],o,i);var u=e[s].minX,c=e[s].minY,l=e[s].maxX,f=e[s].maxY;u<a.minX&&(a.minX=u),c<a.minY&&(a.minY=c),l>a.maxX&&(a.maxX=l),f>a.maxY&&(a.maxY=f)}return a}function be(e,t,n,r){var i=t.geometry,o=t.type,a=[];if("Point"===o||"MultiPoint"===o)for(var s=0;s<i.length;s+=3)a.push(i[s]),a.push(i[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)_e(a,i,e,n,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(s=0;s<i.length;s++)_e(a,i[s],e,n,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(s=0;s<c.length;s++)_e(a,c[s],e,n,!0,0===s)}if(a.length){var l=t.tags||null;if("LineString"===o&&r.lineMetrics){for(var f in l={},t.tags)l[f]=t.tags[f];l.mapbox_clip_start=i.start/i.size,l.mapbox_clip_end=i.end/i.size}var h={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:l};null!==t.id&&(h.id=t.id),e.features.push(h)}}function _e(e,t,n,r,i,o){var a=r*r;if(r>0&&t.size<(i?a:r))n.numPoints+=t.length/3;else{for(var s=[],u=0;u<t.length;u+=3)(0===r||t[u+2]>a)&&(n.numSimplified++,s.push(t[u]),s.push(t[u+1])),n.numPoints++;i&&function(e,t){for(var n=0,r=0,i=e.length,o=i-2;r<i;o=r,r+=2)n+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var a=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=a,e[i-1-r]=s}}(s,o),e.push(s)}}function we(e,t){var n=(t=this.options=function(e,t){for(var n in t)e[n]=t[n];return e}(Object.create(this.options),t)).debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");var r=function(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)ee(n,e.features[r],t,r);else ee(n,"Feature"===e.type?e:{geometry:e},t);return n}(e,t);this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){var n=t.buffer/t.extent,r=e,i=ae(e,1,-1-n,n,0,-1,2,t),o=ae(e,1,1-n,2+n,0,-1,2,t);return(i||o)&&(r=ae(e,1,-n,1+n,0,-1,2,t)||[],i&&(r=pe(i,1).concat(r)),o&&(r=r.concat(pe(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),n&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function xe(e,t,n){return 32*((1<<e)*n+t)+e}function ke(e,t){const n=e.tileID.canonical;if(!this._geoJSONIndex)return t(null,null);const r=this._geoJSONIndex.getTile(n.z,n.x,n.y);if(!r)return t(null,null);const i=new l(r.features);let o=f(i);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:i,rawData:o.buffer})}we.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},we.prototype.splitTile=function(e,t,n,r,i,o,a){for(var s=[e,t,n,r],u=this.options,c=u.debug;s.length;){r=s.pop(),n=s.pop(),t=s.pop(),e=s.pop();var l=1<<t,f=xe(t,n,r),h=this.tiles[f];if(!h&&(c>1&&console.time("creation"),h=this.tiles[f]=ve(e,t,n,r,u),this.tileCoords.push({z:t,x:n,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,h.numFeatures,h.numPoints,h.numSimplified),console.timeEnd("creation"));var d="z"+t;this.stats[d]=(this.stats[d]||0)+1,this.total++}if(h.source=e,i){if(t===u.maxZoom||t===i)continue;var p=1<<i-t;if(n!==Math.floor(o/p)||r!==Math.floor(a/p))continue}else if(t===u.indexMaxZoom||h.numPoints<=u.indexMaxPoints)continue;if(h.source=null,0!==e.length){c>1&&console.time("clipping");var y,m,g,v,b,_,w=.5*u.buffer/u.extent,x=.5-w,k=.5+w,A=1+w;y=m=g=v=null,b=ae(e,l,n-w,n+k,0,h.minX,h.maxX,u),_=ae(e,l,n+x,n+A,0,h.minX,h.maxX,u),e=null,b&&(y=ae(b,l,r-w,r+k,1,h.minY,h.maxY,u),m=ae(b,l,r+x,r+A,1,h.minY,h.maxY,u),b=null),_&&(g=ae(_,l,r-w,r+k,1,h.minY,h.maxY,u),v=ae(_,l,r+x,r+A,1,h.minY,h.maxY,u),_=null),c>1&&console.timeEnd("clipping"),s.push(y||[],t+1,2*n,2*r),s.push(m||[],t+1,2*n,2*r+1),s.push(g||[],t+1,2*n+1,2*r),s.push(v||[],t+1,2*n+1,2*r+1)}}},we.prototype.getTile=function(e,t,n){var r=this.options,i=r.extent,o=r.debug;if(e<0||e>24)return null;var a=1<<e,s=xe(e,t=(t%a+a)%a,n);if(this.tiles[s])return me(this.tiles[s],i);o>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var u,c=e,l=t,f=n;!u&&c>0;)c--,l=Math.floor(l/2),f=Math.floor(f/2),u=this.tiles[xe(c,l,f)];return u&&u.source?(o>1&&console.log("found parent tile z%d-%d-%d",c,l,f),o>1&&console.time("drilling down"),this.splitTile(u.source,c,l,f,e,t,n),o>1&&console.timeEnd("drilling down"),this.tiles[s]?me(this.tiles[s],i):null):null};class Ae extends e.VectorTileWorkerSource{constructor(e,t,n,r,i){super(e,t,n,r,ke),i&&(this.loadGeoJSON=i)}loadData(t,n){const r=t&&t.request,i=r&&r.collectResourceTiming;this.loadGeoJSON(t,((a,s)=>{if(a||!s)return n(a);if("object"!=typeof s)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));{o(s,!0);try{if(t.filter){const n=e.createExpression(t.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===n.result)throw new Error(n.value.map((e=>`${e.key}: ${e.message}`)).join(", "));const r=s.features.filter((e=>n.value.evaluate({zoom:0},e)));s={type:"FeatureCollection",features:r}}this._geoJSONIndex=t.cluster?new N(function({superclusterOptions:t,clusterProperties:n}){if(!n||!t)return t;const r={},i={},o={accumulated:null,zoom:0},a={properties:null},s=Object.keys(n);for(const u of s){const[t,o]=n[u],a=e.createExpression(o),s=e.createExpression("string"==typeof t?[t,["accumulated"],["get",u]]:t);r[u]=a.value,i[u]=s.value}return t.map=e=>{a.properties=e;const t={};for(const n of s)t[n]=r[n].evaluate(o,a);return t},t.reduce=(e,t)=>{a.properties=t;for(const n of s)o.accumulated=e[n],e[n]=i[n].evaluate(o,a)},t}(t)).load(s.features):function(e,t){return new we(e,t)}(s,t.geojsonVtOptions)}catch(a){return n(a)}this.loaded={};const u={};if(i){const n=e.getPerformanceMeasurement(r);n&&(u.resourceTiming={},u.resourceTiming[t.source]=JSON.parse(JSON.stringify(n)))}n(null,u)}}))}reloadTile(e,t){const n=this.loaded;return n&&n[e.uid]?super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,n){if(t.request)e.getJSON(t.request,n);else{if("string"!=typeof t.data)return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`));try{return n(null,JSON.parse(t.data))}catch(e){return n(new Error(`Input data given to '${t.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class Ee{constructor(t){this.self=t,this.actor=new e.Actor(t,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=e.getProjection({name:"mercator"}),this.workerSourceTypes={vector:e.VectorTileWorkerSource,geojson:Ae},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error(`Worker source with name "${e}" already registered.`);this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=t.applyArabicShaping,e.plugin.processBidirectionalText=t.processBidirectionalText,e.plugin.processStyledBidirectionalText=t.processStyledBidirectionalText}}clearCaches(e,t,n){delete this.layerIndexes[e],delete this.availableImages[e],delete this.workerSources[e],delete this.demWorkerSources[e],n()}checkIfReady(e,t,n){n()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,n){this.isSpriteLoaded[t]=n;for(const r in this.workerSources[t]){const i=this.workerSources[t][r];for(const t in i)i[t]instanceof e.VectorTileWorkerSource&&(i[t].isSpriteLoaded=n,i[t].fire(new e.Event("isSpriteLoaded")))}}setImages(e,t,n){this.availableImages[e]=t;for(const r in this.workerSources[e]){const n=this.workerSources[e][r];for(const e in n)n[e].availableImages=t}n()}enableTerrain(e,t,n){this.terrain=t,n()}setProjection(t,n){this.projections[t]=e.getProjection(n)}setLayers(e,t,n){this.getLayerIndex(e).replace(t),n()}updateLayers(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()}loadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).loadTile(i,r)}loadDEMTile(t,n,r){const i=this.enableTerrain?e.extend({buildQuadTree:this.terrain},n):n;this.getDEMWorkerSource(t,n.source).loadTile(i,r)}reloadTile(t,n,r){const i=this.enableTerrain?e.extend({enableTerrain:this.terrain},n):n;i.projection=this.projections[t]||this.defaultProjection,this.getWorkerSource(t,n.type,n.source).reloadTile(i,r)}abortTile(e,t,n){this.getWorkerSource(e,t.type,t.source).abortTile(t,n)}removeTile(e,t,n){this.getWorkerSource(e,t.type,t.source).removeTile(t,n)}removeSource(e,t,n){if(!this.workerSources[e]||!this.workerSources[e][t.type]||!this.workerSources[e][t.type][t.source])return;const r=this.workerSources[e][t.type][t.source];delete this.workerSources[e][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,n):n()}loadWorkerSource(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e.toString())}}syncRTLPluginState(t,n,r){try{e.plugin.setState(n);const t=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=t){this.self.importScripts(t);const n=e.plugin.isParsed();r(n?void 0:new Error(`RTL Text Plugin failed to import scripts from ${t}`),n)}}catch(e){r(e.toString())}}getAvailableImages(e){let t=this.availableImages[e];return t||(t=[]),t}getLayerIndex(e){let t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new r),t}getWorkerSource(e,t,n){if(this.workerSources[e]||(this.workerSources[e]={}),this.workerSources[e][t]||(this.workerSources[e][t]={}),!this.workerSources[e][t][n]){const r={send:(t,n,r,i,o,a)=>{this.actor.send(t,n,r,e,o,a)},scheduler:this.actor.scheduler};this.workerSources[e][t][n]=new this.workerSourceTypes[t](r,this.getLayerIndex(e),this.getAvailableImages(e),this.isSpriteLoaded[e])}return this.workerSources[e][t][n]}getDEMWorkerSource(e,t){return this.demWorkerSources[e]||(this.demWorkerSources[e]={}),this.demWorkerSources[e][t]||(this.demWorkerSources[e][t]=new i),this.demWorkerSources[e][t]}enforceCacheSizeLimit(t,n){e.enforceCacheSizeLimit(n)}getWorkerPerformanceMetrics(e,t,n){n(void 0,void 0)}}return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope&&(self.worker=new Ee(self)),Ee})),r(["./shared"],(function(e){function t(e,n){if(Array.isArray(e)){if(!Array.isArray(n)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(!t(e[r],n[r]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==n){if("object"!=typeof n)return!1;if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(!t(e[r],n[r]))return!1;return!0}return e===n}var n=r;function r(e){return!function(e){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var n=t.getImageData(0,0,1,1);return n&&n.width===e.width}()?(void 0===i[t=e&&e.failIfMajorPerformanceCaveat]&&(i[t]=function(e){var t,n=function(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}(e);if(!n)return!1;try{t=n.createShader(n.VERTEX_SHADER)}catch(e){return!1}return!(!t||n.isContextLost())&&(n.shaderSource(t,"void main() {}"),n.compileShader(t),!0===n.getShaderParameter(t,n.COMPILE_STATUS))}(t)),i[t]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var t}(e)}var i={};function o(t,n,r){const i=e.window.document.createElement(t);return void 0!==n&&(i.className=n),r&&r.appendChild(i),i}function a(t,n,r){const i=e.window.document.createElementNS("http://www.w3.org/2000/svg",t);for(const e of Object.keys(n))i.setAttributeNS(null,e,n[e]);return r&&r.appendChild(i),i}r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const s=e.window.document&&e.window.document.documentElement.style,u=s&&void 0!==s.userSelect?"userSelect":"WebkitUserSelect";let c;function l(){s&&u&&(c=s[u],s[u]="none")}function f(){s&&u&&(s[u]=c)}function h(t){t.preventDefault(),t.stopPropagation(),e.window.removeEventListener("click",h,!0)}function d(){e.window.addEventListener("click",h,!0),e.window.setTimeout((()=>{e.window.removeEventListener("click",h,!0)}),0)}function p(e,t){const n=e.getBoundingClientRect();return g(e,n,t)}function y(e,t){const n=e.getBoundingClientRect(),r=[];for(let i=0;i<t.length;i++)r.push(g(e,n,t[i]));return r}function m(t){return void 0!==e.window.InstallTrigger&&2===t.button&&t.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:t.button}function g(t,n,r){const i=t.offsetWidth===n.width?1:t.offsetWidth/n.width;return new e.pointGeometry((r.clientX-n.left)*i,(r.clientY-n.top)*i)}function v(e,t){var n=t[0],r=t[1],i=t[2],o=t[3],a=n*o-i*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-i*a,e[3]=n*a,e):null}function b(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class _ extends e.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:e,callback:t}of this.requestors)this._notify(e,t);this.requestors=[]}}hasImage(e){return!!this.getImage(e)}getImage(e){return this.images[e]}addImage(e,t){this._validate(e,t)&&(this.images[e]=t)}_validate(t,n){let r=!0;return this._validateStretch(n.stretchX,n.data&&n.data.width)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchX" value`))),r=!1),this._validateStretch(n.stretchY,n.data&&n.data.height)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "stretchY" value`))),r=!1),this._validateContent(n.content,n)||(this.fire(new e.ErrorEvent(new Error(`Image "${t}" has invalid "content" value`))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let n=0;for(const r of e){if(r[0]<n||r[1]<r[0]||t<r[1])return!1;n=r[1]}return!0}_validateContent(e,t){return!(e&&(4!==e.length||e[0]<0||t.data.width<e[0]||e[1]<0||t.data.height<e[1]||e[2]<0||t.data.width<e[2]||e[3]<0||t.data.height<e[3]||e[2]<e[0]||e[3]<e[1]))}updateImage(e,t){t.version=this.images[e].version+1,this.images[e]=t,this.updatedImages[e]=!0}removeImage(e){const t=this.images[e];delete this.images[e],delete this.patterns[e],t.userImage&&t.userImage.onRemove&&t.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e,t){let n=!0;if(!this.isLoaded())for(const r of e)this.images[r]||(n=!1);this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})}_notify(t,n){const r={};for(const i of t){this.images[i]||this.fire(new e.Event("styleimagemissing",{id:i}));const t=this.images[i];t?r[i]={data:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)}:e.warnOnce(`Image "${i}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}n(null,r)}getPixelSize(){const{width:e,height:t}=this.atlasImage;return{width:e,height:t}}getPattern(t){const n=this.patterns[t],r=this.getImage(t);if(!r)return null;if(n&&n.position.version===r.version)return n.position;if(n)n.position.version=r.version;else{const n={w:r.data.width+2,h:r.data.height+2,x:0,y:0},i=new e.ImagePosition(n,r);this.patterns[t]={bin:n,position:i}}return this._updatePatternAtlas(),this.patterns[t].position}bind(t){const n=t.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(t,this.atlasImage,n.RGBA),this.atlasTexture.bind(n.LINEAR,n.CLAMP_TO_EDGE)}_updatePatternAtlas(){const t=[];for(const e in this.patterns)t.push(this.patterns[e].bin);const{w:n,h:r}=e.potpack(t),i=this.atlasImage;i.resize({width:n||1,height:r||1});for(const o in this.patterns){const{bin:t}=this.patterns[o],n=t.x+1,r=t.y+1,a=this.images[o].data,s=a.width,u=a.height;e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r},{width:s,height:u}),e.RGBAImage.copy(a,i,{x:0,y:u-1},{x:n,y:r-1},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n,y:r+u},{width:s,height:1}),e.RGBAImage.copy(a,i,{x:s-1,y:0},{x:n-1,y:r},{width:1,height:u}),e.RGBAImage.copy(a,i,{x:0,y:0},{x:n+s,y:r},{width:1,height:u})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const t of e){if(this.callbackDispatchedThisFrame[t])continue;this.callbackDispatchedThisFrame[t]=!0;const e=this.images[t];b(e)&&this.updateImage(t,e)}}}const w=new e.Properties({anchor:new e.DataConstantProperty(e.spec.light.anchor),position:new class{constructor(){this.specification=e.spec.light.position}possiblyEvaluate(t,n){return function([t,n,r]){const i=e.degToRad(n+90),o=e.degToRad(r);return{x:t*Math.cos(i)*Math.sin(o),y:t*Math.sin(i)*Math.sin(o),z:t*Math.cos(o),azimuthal:n,polar:r}}(t.expression.evaluate(n))}interpolate(t,n,r){return{x:e.number(t.x,n.x,r),y:e.number(t.y,n.y,r),z:e.number(t.z,n.z,r),azimuthal:e.number(t.azimuthal,n.azimuthal,r),polar:e.number(t.polar,n.polar,r)}}},color:new e.DataConstantProperty(e.spec.light.color),intensity:new e.DataConstantProperty(e.spec.light.intensity)}),x="-transition";class k extends e.Evented{constructor(t){super(),this._transitionable=new e.Transitionable(w),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(t,n={}){if(!this._validate(e.validateLight,t,n))for(const r in t){const n=t[r];e.endsWith(r,x)?this._transitionable.setTransition(r.slice(0,-x.length),n):this._transitionable.setValue(r,n)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}const A=new e.Properties({source:new e.DataConstantProperty(e.spec.terrain.source),exaggeration:new e.DataConstantProperty(e.spec.terrain.exaggeration)}),E="-transition";class I extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(A),this.set(t),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=n}get(){return this._transitionable.serialize()}set(t){for(const n in t){const r=t[n];e.endsWith(n,E)?this._transitionable.setTransition(n.slice(0,-E.length),r):this._transitionable.setValue(n,r)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}}function S(t,n,r,i){const o=e.smoothstep(45,65,r),[a,s]=T(t,i),u=e.length(n);let c=1-Math.min(1,Math.exp((u-a)/(s-a)*-6));return c*=c*c,c=Math.min(1,1.00747*c),c*o*t.alpha}function T(e,t){const n=.5/Math.tan(.5*t);return[e.range[0]+n,e.range[1]+n]}const M=new e.Properties({range:new e.DataConstantProperty(e.spec.fog.range),color:new e.DataConstantProperty(e.spec.fog.color),"high-color":new e.DataConstantProperty(e.spec.fog["high-color"]),"space-color":new e.DataConstantProperty(e.spec.fog["space-color"]),"horizon-blend":new e.DataConstantProperty(e.spec.fog["horizon-blend"]),"star-intensity":new e.DataConstantProperty(e.spec.fog["star-intensity"])}),P="-transition";class B extends e.Evented{constructor(t,n){super(),this._transitionable=new e.Transitionable(M),this.set(t),this._transitioning=this._transitionable.untransitioned(),this._transform=n}get state(){const t=this._transform,n="globe"===t.projection.name,r=e.globeToMercatorTransition(t.zoom),i=this.properties.get("range"),o=[.5,3];return{range:n?[e.number(o[0],i[0],r),e.number(o[1],i[1],r)]:i,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,n={}){if(!this._validate(e.validateFog,t,n)){for(const n of Object.keys(e.spec.fog))t&&void 0===t[n]&&(t[n]=e.spec.fog[n].default);for(const n in t){const r=t[n];e.endsWith(n,P)?this._transitionable.setTransition(n.slice(0,-P.length),r):this._transitionable.setValue(n,r)}}}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const n=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.smoothstep(45,65,t))*n.a}getOpacityAtLatLng(t,n){return this._transform.projection.supportsFog?function(t,n,r){const i=e.MercatorCoordinate.fromLngLat(n),o=r.elevation?r.elevation.getAtPointOrZero(i):0,a=[i.x,i.y,o];return e.transformMat4(a,a,r.mercatorFogMatrix),S(t,a,r.pitch,r._fov)}(this.state,t,n):0}getFovAdjustedRange(e){return this._transform.projection.supportsFog?T(this.state,e):[0,1]}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,n,r){return(!r||!1!==r.validate)&&e.emitValidationErrors(this,t.call(e.validateStyle,e.extend({value:n,style:{glyphs:!0,sprite:!0},styleSpec:e.spec})))}}class C{constructor(t,n){this.workerPool=t,this.actors=[],this.currentActor=0,this.id=e.uniqueId();const r=this.workerPool.acquire(this.id);for(let e=0;e<r.length;e++){const t=new C.Actor(r[e],n,this.id);t.name=`Worker ${e}`,this.actors.push(t)}this.ready=!1,this.broadcast("checkIfReady",null,(()=>{this.ready=!0}))}broadcast(t,n,r){e.asyncAll(this.actors,((e,r)=>{e.send(t,n,r)}),r=r||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach((e=>{e.remove()})),this.actors=[],this.workerPool.release(this.id)}}function O(t,n,r){return n*(e.EXTENT/(t.tileSize*Math.pow(2,r-t.tileID.overscaledZ)))}C.Actor=e.Actor;class D{constructor(e,t,n,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=n,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(t,n){let r,i;if(t instanceof e.pointGeometry||"number"==typeof t[0]){const o=e.pointGeometry.convert(t);r=[o],i=n.isPointAboveHorizon(o)}else{const o=e.pointGeometry.convert(t[0]),a=e.pointGeometry.convert(t[1]);r=[o,a],i=e.polygonizeBounds(o,a).every((e=>n.isPointAboveHorizon(e)))}return new D(r,n.getCameraPoint(),i,n)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.polygonizeBounds(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>n.x&&this.cameraPoint.x<r.x?i.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?i[2]=this.cameraPoint:this.cameraPoint.x<=n.x&&(i[3]=this.cameraPoint)),e.bufferConvexPolygon(i,t)}bufferedCameraGeometryGlobe(t){const n=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.pointGeometry(1,1)):this.screenBounds[1],i=e.polygonizeBounds(n,r,t),o=this.cameraPoint.clone();switch(3*((o.y>n.y)+(o.y>r.y))+((o.x>n.x)+(o.x>r.x))){case 0:i[0]=o,i[4]=o.clone();break;case 1:i.splice(1,0,o);break;case 2:i[1]=o;break;case 3:i.splice(4,0,o);break;case 5:i.splice(2,0,o);break;case 6:i[3]=o;break;case 7:i.splice(3,0,o);break;case 8:i[2]=o}return i}containsTile(t,n,r,i=0){const o=t.queryPadding/n._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,n):this._bufferedScreenMercator(o,n);let s=t.tileID.wrap+(a.unwrapped?i:0);const u=a.polygon.map((n=>e.getTilePoint(t.tileTransform,n,s)));if(!e.polygonIntersectsBox(u,0,0,e.EXTENT,e.EXTENT))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?i:0);const c=this.screenGeometryMercator.polygon.map((n=>e.getTileVec3(t.tileTransform,n,s))),l=c.map((t=>new e.pointGeometry(t[0],t[1]))),f=n.getFreeCameraOptions().position||new e.MercatorCoordinate(0,0,0),h=e.getTileVec3(t.tileTransform,f,s),d=c.map((t=>{const n=e.sub(t,t,h);return e.normalize(n,n),new e.Ray(h,n)})),p=O(t,1,n.zoom)*n._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:l,tilespaceRays:d,bufferedTilespaceGeometry:u,bufferedTilespaceBounds:(y=e.getBounds(u),y.min.x=e.clamp(y.min.x,0,e.EXTENT),y.min.y=e.clamp(y.min.y,0,e.EXTENT),y.max.x=e.clamp(y.max.x,0,e.EXTENT),y.max.y=e.clamp(y.max.y,0,e.EXTENT),y),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:p};var y}_bufferedScreenMercator(e,t){const n=z(e);if(this._screenRaycastCache[n])return this._screenRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._screenRaycastCache[n]=r,r}}_bufferedCameraMercator(e,t){const n=z(e);if(this._cameraRaycastCache[n])return this._cameraRaycastCache[n];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map((e=>t.pointCoordinate3D(e))),unwrapped:!0},this._cameraRaycastCache[n]=r,r}}_projectAndResample(t,n){const r=function(t,n){const r=e.multiply([],n.pixelMatrix,n.globeMatrix),i=[0,-e.GLOBE_RADIUS,0,1],o=[0,e.GLOBE_RADIUS,0,1],a=[0,0,0,1];e.transformMat4$1(i,i,r),e.transformMat4$1(o,o,r),e.transformMat4$1(a,a,r);const s=new e.pointGeometry(i[0]/i[3],i[1]/i[3]),u=new e.pointGeometry(o[0]/o[3],o[1]/o[3]),c=e.polygonContainsPoint(t,s)&&i[3]<a[3],l=e.polygonContainsPoint(t,u)&&o[3]<a[3];if(!c&&!l)return null;const f=function(e,t,n){for(let r=1;r<e.length;r++){const i=L(t.pointCoordinate3D(e[r-1]).x),o=L(t.pointCoordinate3D(e[r]).x);if(n<0){if(i<o)return{idx:r,t:-i/(o-1-i)}}else if(o<i)return{idx:r,t:(1-i)/(o+1-i)}}return null}(t,n,c?-1:1);if(!f)return null;const{idx:h,t:d}=f;let p=h>1?R(t.slice(0,h),n):[],y=h<t.length?R(t.slice(h),n):[];p=p.map((t=>new e.pointGeometry(L(t.x),t.y))),y=y.map((t=>new e.pointGeometry(L(t.x),t.y)));const m=[...p];0===m.length&&m.push(y[y.length-1]);const g=e.number(m[m.length-1].y,(0===y.length?p[0]:y[0]).y,d);let v;return v=c?[new e.pointGeometry(0,g),new e.pointGeometry(0,0),new e.pointGeometry(1,0),new e.pointGeometry(1,g)]:[new e.pointGeometry(1,g),new e.pointGeometry(1,1),new e.pointGeometry(0,1),new e.pointGeometry(0,g)],m.push(...v),0===y.length?m.push(p[0]):m.push(...y),{polygon:m.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:!1}}(t,n);if(r)return r;const i=function(t,n){let r=!1,i=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>i&&(i=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const n=(o+e)%(t.length-1),i=t[n],a=t[n+1];Math.abs(i.x-a.x)>.5&&(i.x<a.x?(i.x+=1,0===n&&(t[t.length-1].x+=1)):(a.x+=1,n+1===t.length-1&&(t[0].x+=1)),r=!0)}const a=e.mercatorXfromLng(n.center.lng);return r&&a<Math.abs(a-1)&&t.forEach((e=>{e.x-=1})),{polygon:t,unwrapped:r}}(R(t,n).map((t=>new e.pointGeometry(L(t.x),t.y))),n);return{polygon:i.polygon.map((t=>new e.MercatorCoordinate(t.x,t.y))),unwrapped:i.unwrapped}}}function R(t,n){return e.resample(t,(e=>{const t=n.pointCoordinate3D(e);e.x=t.x,e.y=t.y}),1/256)}function L(e){return e<0?1+e%1:e%1}function z(e){return 100*e|0}function Z(t,n,r,i,o){const a=function(r,i){if(r)return o(r);if(i){t.url&&i.tiles&&t.tiles&&delete t.tiles;const r=e.pick(e.extend(i,t),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);i.vector_layers&&(r.vectorLayers=i.vector_layers,r.vectorLayerIds=r.vectorLayers.map((e=>e.id))),r.tiles=n.canonicalizeTileset(r,t.url),o(null,r)}};return t.url?e.getJSON(n.transformRequest(n.normalizeSourceURL(t.url,null,r,i),e.ResourceType.Source),a):e.exported.frame((()=>a(null,t)))}class N{constructor(t,n,r){this.bounds=e.LngLatBounds.convert(this.validateBounds(t)),this.minzoom=n||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(t){const n=Math.pow(2,t.z),r=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*n),i=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*n),o=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*n),a=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*n);return t.x>=r&&t.x<o&&t.y>=i&&t.y<a}}class U{constructor(e,t,n){this.context=e;const r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const F={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class j{constructor(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;const i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let n=0;n<this.attributes.length;n++){const r=t.attributes[this.attributes[n].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,n){for(let r=0;r<this.attributes.length;r++){const i=this.attributes[r],o=t.attributes[i.name];void 0!==o&&e.vertexAttribPointer(o,i.components,e[F[i.type]],!1,this.itemSize,i.offset+this.itemSize*(n||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class W{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class V extends W{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class K extends W{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class G extends W{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class H extends W{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class q extends W{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Y extends W{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class X extends W{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Q extends W{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class $ extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class J extends W{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class ee extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class te extends W{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class ne extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class re extends W{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class ie extends W{getDefault(){return e.Color.transparent}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class oe extends W{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class ae extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class se extends W{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class ue extends W{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class ce extends W{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class le extends W{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class fe extends W{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class he extends W{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class de extends W{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class pe extends W{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class ye extends W{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class me extends W{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class ge extends W{constructor(e){super(e),this.vao=e.extVertexArrayObject}getDefault(){return null}set(e){this.vao&&(e!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(e),this.current=e,this.dirty=!1)}}class ve extends W{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class be extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class _e extends W{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class we extends W{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class xe extends we{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class ke extends we{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Ae extends ke{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Ee{constructor(e,t,n,r){this.context=e,this.width=t,this.height=n;const i=this.framebuffer=e.gl.createFramebuffer();this.colorAttachment=new xe(e,i),r&&(this.depthAttachment=new ke(e,i))}destroy(){const e=this.context.gl,t=this.colorAttachment.get();if(t&&e.deleteTexture(t),this.depthAttachment){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}e.deleteFramebuffer(this.framebuffer)}}class Ie{constructor(e,t=!1){if(this.gl=e,this.isWebGL2=t,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),t){const t=e;this.extVertexArrayObject={createVertexArrayOES:t.createVertexArray.bind(e),deleteVertexArrayOES:t.deleteVertexArray.bind(e),bindVertexArrayOES:t.bindVertexArray.bind(e)}}this.clearColor=new V(this),this.clearDepth=new K(this),this.clearStencil=new G(this),this.colorMask=new H(this),this.depthMask=new q(this),this.stencilMask=new Y(this),this.stencilFunc=new X(this),this.stencilOp=new Q(this),this.stencilTest=new $(this),this.depthRange=new J(this),this.depthTest=new ee(this),this.depthFunc=new te(this),this.blend=new ne(this),this.blendFunc=new re(this),this.blendColor=new ie(this),this.blendEquation=new oe(this),this.cullFace=new ae(this),this.cullFaceSide=new se(this),this.frontFace=new ue(this),this.program=new ce(this),this.activeTexture=new le(this),this.viewport=new fe(this),this.bindFramebuffer=new he(this),this.bindRenderbuffer=new de(this),this.bindTexture=new pe(this),this.bindVertexBuffer=new ye(this),this.bindElementBuffer=new me(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ge(this),this.pixelStoreUnpack=new ve(this),this.pixelStoreUnpackPremultiplyAlpha=new be(this),this.pixelStoreUnpackFlipY=new _e(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),t||(this.extTextureHalfFloat=e.getExtension("OES_texture_half_float")),(t||this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=t||e.getExtension("OES_standard_derivatives"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t){return new U(this,e,t)}createVertexBuffer(e,t,n){return new j(this,e,t,n)}createRenderbuffer(e,t,n){const r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i}createFramebuffer(e,t,n){return new Ee(this,e,t,n)}clear({color:e,depth:t,stencil:n}){const r=this.gl;let i=0;e&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),void 0!==t&&(i|=r.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(t),this.depthMask.set(!0)),void 0!==n&&(i|=r.STENCIL_BUFFER_BIT,this.clearStencil.set(n),this.stencilMask.set(255)),r.clear(i)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(n){t(n.blendFunction,e.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class Se extends e.Evented{constructor(t,n,r,i){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(n,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(i),this._tileWorkers={},this._deduped=new e.DedupedRequest}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"}));const n=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map._worldview;this._tileJSONRequest=Z(this._options,this.map._requestManager,n,r,((i,o)=>{this._tileJSONRequest=null,this._loaded=!0,i?(n&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${n}`),r&&2!==r.length&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${r}`),this.fire(new e.ErrorEvent(i))):o&&(e.extend(this,o),o.bounds&&(this.tileBounds=new N(o.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),i={request:this.map._requestManager.transformRequest(r,e.ResourceType.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile};if(i.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=n:t.request=t.actor.send("reloadTile",i,o.bind(this));else if(t.actor=this._tileWorkers[r]=this._tileWorkers[r]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",i,o.bind(this),void 0,!0);else{const n=e.loadVectorTile.call({deduped:this._deduped},i,((e,n)=>{e||!n?o.call(this,e):(i.data={cacheControl:n.cacheControl,expires:n.expires,rawData:n.rawData.slice(0)},t.actor&&t.actor.send("loadTile",i,o.bind(this),void 0,!0))}),!0);t.request={cancel:n}}function o(r,i){return delete t.request,t.aborted?n(null):r&&404!==r.status?n(r):(i&&i.resourceTiming&&(t.resourceTiming=i.resourceTiming),this.map._refreshExpiredTiles&&i&&t.setExpiryData(i),t.loadVectorData(i,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),n(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id})}unloadTile(e){e.unloadVectorData(),e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Te extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.dispatcher=r,this.setEventedParent(i),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},n),e.extend(this,e.pick(n,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Z(this._options,this.map._requestManager,null,null,((n,r)=>{this._tileJSONRequest=null,this._loaded=!0,n?this.fire(new e.ErrorEvent(n)):r&&(e.extend(this,r),r.bounds&&(this.tileBounds=new N(r.bounds,this.minzoom,this.maxzoom)),e.postTurnstileEvent(r.tiles),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest(),this.load((()=>this.map.style._clearSource(this.id)))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return e.extend({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const r=e.exported.devicePixelRatio>=2,i=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.getImage(this.map._requestManager.transformRequest(i,e.ResourceType.Tile),((r,i,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",n(null)):r?(t.state="errored",n(r)):i?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(i,this.map.painter),t.state="loaded",e.cacheEntryPossiblyAdded(this.dispatcher),void n(null)):n(null))))}static loadTileData(e,t,n){e.setTexture(t,n)}static unloadTileData(e,t){e.texture&&t.saveTileTexture(e.texture)}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t()}unloadTile(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let Me;function Pe(t,n,r,i,o,a,s,u){const c=[t,r,o,n,i,a,1,1,1],l=[s,u,1],f=e.adjoint([],c),[h,d,p]=e.transformMat3(l,l,e.transpose(f,f));return e.multiply$1(c,[h,0,0,0,d,0,0,0,p],c)}class Be extends e.Evented{constructor(e,t,n,r){super(),this.id=e,this.dispatcher=n,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(r),this.options=t,this._dirty=!1}load(t,n){this._loaded=n||!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),((n,r)=>{if(this._imageRequest=null,this._loaded=!0,n)this.fire(new e.ErrorEvent(n));else if(r){const{HTMLImageElement:n}=e.window;this.image=r instanceof n?e.exported.getImageData(r):r,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,t&&(this.coordinates=t),this._finishLoading()}}))}loaded(){return this._loaded}updateImage(e){return this.image&&e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(t){this.coordinates=t,this._boundsArray=void 0;const n=t.map(e.MercatorCoordinate.fromLngLat);return this.tileID=function(t){let n=1/0,r=1/0,i=-1/0,o=-1/0;for(const e of t)n=Math.min(n,e.x),r=Math.min(r,e.y),i=Math.max(i,e.x),o=Math.max(o,e.y);const a=Math.max(i-n,o-r),s=Math.max(0,Math.floor(-Math.log(a)/Math.LN2)),u=Math.pow(2,s);return new e.CanonicalTileID(s,Math.floor((n+i)/2*u),Math.floor((r+o)/2*u))}(n),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(t){for(const e in this.tiles){const t=this.tiles[e];"loaded"!==t.state&&(t.state="loaded",t.texture=this.texture)}if(this._boundsArray)return;const n=e.tileTransform(this.tileID,this.map.transform.projection),[r,i,o,a]=this.coordinates.map((t=>{const r=n.projection.project(t[0],t[1]);return e.getTilePoint(n,r)._round()}));this.perspectiveTransform=function(t,n,r,i,o,a,s,u,c,l){const f=Pe(0,0,t,0,0,n,t,n),h=Pe(r,i,o,a,s,u,c,l);return e.multiply$1(h,e.adjoint(f,f),h),[h[6]/h[8]*t/e.EXTENT,h[7]/h[8]*n/e.EXTENT]}(this.width,this.height,r.x,r.y,i.x,i.y,a.x,a.y,o.x,o.y);const s=this._boundsArray=new e.StructArrayLayout4i8;s.emplaceBack(r.x,r.y,0,0),s.emplaceBack(i.x,i.y,e.EXTENT,0),s.emplaceBack(a.x,a.y,0,e.EXTENT),s.emplaceBack(o.x,o.y,e.EXTENT,e.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=t.createVertexBuffer(s,e.boundsAttributes.members),this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const t=this.map.painter.context,n=t.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new e.Texture(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ce={vector:Se,raster:Te,"raster-dem":class extends Te{constructor(t,n,r,i){super(t,n,r,i),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},n),this.encoding=n.encoding||"mapbox"}loadTile(t,n){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function i(e,r){e&&(t.state="errored",n(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",n(null))}t.request=e.getImage(this.map._requestManager.transformRequest(r,e.ResourceType.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",n(null);else if(r)t.state="errored",n(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const n=e.window.ImageBitmap&&o instanceof e.window.ImageBitmap&&(null==Me&&(Me=e.window.OffscreenCanvas&&new e.window.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof e.window.createImageBitmap),Me),r=1-(o.width-e.prevPowerOfTwo(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const u=n?o:e.exported.getImageData(o,r),c={uid:t.uid,coord:t.tileID,source:this.id,rawImageData:u,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadDEMTile",c,i.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const n=t.canonical,r=Math.pow(2,n.z),i=(n.x-1+r)%r,o=0===n.x?t.wrap-1:t.wrap,a=(n.x+1+r)%r,s=n.x+1===r?t.wrap+1:t.wrap,u={};return u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y).key]={backfilled:!1},n.y>0&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y-1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y-1).key]={backfilled:!1}),n.y+1<r&&(u[new e.OverscaledTileID(t.overscaledZ,o,n.z,i,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,t.wrap,n.z,n.x,n.y+1).key]={backfilled:!1},u[new e.OverscaledTileID(t.overscaledZ,s,n.z,a,n.y+1).key]={backfilled:!1}),u}unloadTile(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded"}},geojson:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(i),this._data=n.data,this._options=e.extend({},n),this._collectResourceTiming=n.collectResourceTiming,void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type),n.attribution&&(this.attribution=n.attribution),this.promoteId=n.promoteId;const o=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:n.lineMetrics||!1,generateId:n.generateId||!1},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?n.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,n.clusterMinPoints||2),extent:e.EXTENT,radius:(void 0!==n.clusterRadius?n.clusterRadius:50)*o,log:!1,generateId:n.generateId||!1},clusterProperties:n.clusterProperties,filter:n.filter},n.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id},t),this}getClusterLeaves(e,t,n,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:e,limit:t,offset:n},r),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.Event("dataloading",{dataType:"source"})),this._loaded=!1;const t=e.extend({},this.workerOptions),n=this._data;"string"==typeof n?(t.request=this.map._requestManager.transformRequest(e.exported.resolveURL(n),e.ResourceType.Source),t.request.collectResourceTiming=this._collectResourceTiming):t.data=JSON.stringify(n),this._pendingLoad=this.actor.send(`${this.type}.loadData`,t,((t,n)=>{if(this._loaded=!0,this._pendingLoad=null,t)this.fire(new e.ErrorEvent(t));else{const t={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&n&&n.resourceTiming&&n.resourceTiming[this.id]&&(t.resourceTiming=n.resourceTiming[this.id]),this.fire(new e.Event("data",t)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)}))}loaded(){return this._loaded}loadTile(t,n){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor,t.request=this.actor.send(r,{type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},((e,i)=>(delete t.request,t.unloadVectorData(),t.aborted?n(null):e?n(e):(t.loadVectorData(i,this.map.painter,"reloadTile"===r),n(null)))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e){e.unloadVectorData(),this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Be{constructor(e,t,n,r){super(e,t,n,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const n of t.urls)this.urls.push(this.map._requestManager.transformRequest(n,e.ResourceType.Source).url);e.getVideo(this.urls,((t,n)=>{this._loaded=!0,t?this.fire(new e.ErrorEvent(t)):n&&(this.video=n,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading())}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const n=this.video.seekable;t<n.start(0)||t>n.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${n.start(0)} and ${n.end(0)}-second mark.`))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,n=t.gl;this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Be,canvas:class extends Be{constructor(t,n,r,i){super(t,n,r,i),n.coordinates?Array.isArray(n.coordinates)&&4===n.coordinates.length&&!n.coordinates.some((e=>!Array.isArray(e)||2!==e.length||e.some((e=>"number"!=typeof e))))||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "coordinates"'))),n.animate&&"boolean"!=typeof n.animate&&this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'optional "animate" property must be a boolean value'))),n.canvas?"string"==typeof n.canvas||n.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError(`sources.${t}`,null,'missing required property "canvas"'))),this.options=n,this.animate=void 0===n.animate||n.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const n=this.map.painter.context;this.texture?(t||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(n,this.canvas,n.gl.RGBA,{premultiply:!0}),this._prepareData(n)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.Evented{constructor(t,n,r,i){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=n,this.setEventedParent(i),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new e.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new N(this._implementation.bounds,this.minzoom,this.maxzoom)),n.update=this._update.bind(this),n.clearTiles=this._clearTiles.bind(this),n.coveringTiles=this._coveringTiles.bind(this),e.extend(this,e.pick(n,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this._map=t,this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:n,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:n,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,n){const{x:r,y:i,z:o}=t.tileID.canonical,a=new e.window.AbortController;t.request=Promise.resolve(this._implementation.loadTile({x:r,y:i,z:o},{signal:a.signal})).then(function(r){return delete t.request,t.aborted?(t.state="unloaded",n(null)):void 0===r?(t.state="errored",n(null)):null===r?(this.loadTileData(t,{width:this.tileSize,height:this.tileSize,data:null}),t.state="loaded",n(null)):function(t){return t instanceof e.window.ImageData||t instanceof e.window.HTMLCanvasElement||t instanceof e.window.ImageBitmap||t instanceof e.window.HTMLImageElement}(r)?(this.loadTileData(t,r),t.state="loaded",void n(null)):(t.state="errored",n(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch((e=>{20!==e.code&&(t.state="errored",n(e))})),t.request.cancel=()=>a.abort()}loadTileData(e,t){Te.loadTileData(e,t,this._map.painter)}unloadTileData(e){Te.unloadTileData(e,this._map.painter)}unloadTile(e,t){if(this.unloadTileData(e),this._implementation.unloadTile){const{x:t,y:n,z:r}=e.tileID.canonical;this._implementation.unloadTile({x:t,y:n,z:r})}t()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map((e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z})))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Oe=function(t,n,r,i){const o=new Ce[n.type](t,n,r,i);if(o.id!==t)throw new Error(`Expected Source id to be ${t} instead of ${o.id}`);return e.bindAll(["load","abort","unload","serialize","prepare"],o),o};function De(t,n){const r=e.identity([]);return e.scale(r,r,[.5*t.width,.5*-t.height,1]),e.translate(r,r,[1,-1,0]),e.multiply(r,r,t.calculateProjMatrix(n.toUnwrapped())),Float32Array.from(r)}function Re(e,t,n,r,i,o,a,s=!1){const u=e.tilesIn(r,a,s);u.sort(ze);const c=[];for(const f of u)c.push({wrappedTileID:f.tile.tileID.wrapped().key,queryResults:f.tile.queryRenderedFeatures(t,n,e._state,f,i,o,De(e.transform,f.tile.tileID),s)});const l=function(e){const t={},n={};for(const r of e){const e=r.queryResults,i=r.wrappedTileID,o=n[i]=n[i]||{};for(const n in e){const r=e[n],i=o[n]=o[n]||{},a=t[n]=t[n]||[];for(const e of r)i[e.featureIndex]||(i[e.featureIndex]=!0,a.push(e))}}return t}(c);for(const f in l)l[f].forEach((t=>{const n=t.feature,r=n.layer;r&&"background"!==r.type&&"sky"!==r.type&&(n.source=r.source,r["source-layer"]&&(n.sourceLayer=r["source-layer"]),n.state=void 0!==n.id?e.getFeatureState(r["source-layer"],n.id):{})}));return l}function Le(e,t){const n=e.getRenderableIds().map((t=>e.getTileByID(t))),r=[],i={};for(let o=0;o<n.length;o++){const e=n[o],a=e.tileID.canonical.key;i[a]||(i[a]=!0,e.querySourceFeatures(r,t))}return r}function ze(e,t){const n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function Ze(){return null!=mo.workerClass?new mo.workerClass:new e.window.Worker(mo.workerUrl)}const Ne="mapboxgl_preloaded_worker_pool";class Ue{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<Ue.workerCount;)this.workers.push(new Ze);return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],0===this.numActive()&&(this.workers.forEach((e=>{e.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ne]}numActive(){return Object.keys(this.active).length}}let Fe;function je(){return Fe||(Fe=new Ue),Fe}function We(t,n){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.refProperties.forEach((e=>{e in n&&(r[e]=n[e])})),r}function Ve(e){e=e.slice();const t=Object.create(null);for(let n=0;n<e.length;n++)t[e[n].id]=e[n];for(let n=0;n<e.length;n++)"ref"in e[n]&&(e[n]=We(e[n],t[e[n].ref]));return e}Ue.workerCount=2;const Ke={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function Ge(e,t,n){n.push({command:Ke.addSource,args:[e,t[e]]})}function He(e,t,n){t.push({command:Ke.removeSource,args:[e]}),n[e]=!0}function qe(e,t,n,r){He(e,n,r),Ge(e,t,n)}function Ye(e,n,r){let i;for(i in e[r])if(e[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;for(i in n[r])if(n[r].hasOwnProperty(i)&&"data"!==i&&!t(e[r][i],n[r][i]))return!1;return!0}function Xe(e,n,r,i,o,a){let s;for(s in n=n||{},e=e||{})e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}));for(s in n)n.hasOwnProperty(s)&&!e.hasOwnProperty(s)&&(t(e[s],n[s])||r.push({command:a,args:[i,s,n[s],o]}))}function Qe(e){return e.id}function $e(e,t){return e[t.id]=t,e}class Je{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let n=1;n<this.points.length;n++)this._distances[n]=this._distances[n-1]+this.points[n].dist(this.points[n-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.clamp(t,0,1);let n=1,r=this._distances[n];const i=t*this.paddedLength+this.padding;for(;r<i&&n<this._distances.length;)r=this._distances[++n];const o=n-1,a=this._distances[o],s=r-a,u=s>0?(i-a)/s:0;return this.points[o].mult(1-u).add(this.points[n].mult(u))}}class et{constructor(e,t,n){const r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)}insertCircle(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)}_insertBoxCell(e,t,n,r,i,o){this.boxCells[i].push(o)}_insertCircleCell(e,t,n,r,i,o){this.circleCells[i].push(o)}_query(e,t,n,r,i,o){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];const a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r){if(i)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],n=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:n-r,x2:t+r,y2:n+r})}return o?a.filter(o):a}return this._forEachCell(e,t,n,r,this._queryCell,a,{hitTest:i,seenUids:{box:{},circle:{}}},o),i?a.length>0:a}_queryCircle(e,t,n,r,i){const o=e-n,a=e+n,s=t-n,u=t+n;if(a<0||o>this.width||u<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,u,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}},i),r?c.length>0:c}query(e,t,n,r,i){return this._query(e,t,n,r,!1,i)}hitTest(e,t,n,r,i){return this._query(e,t,n,r,!0,i)}hitTestCircle(e,t,n,r){return this._queryCircle(e,t,n,!0,r)}_queryCell(e,t,n,r,i,o,a,s){const u=a.seenUids,c=this.boxCells[i];if(null!==c){const i=this.bboxes;for(const l of c)if(!u.box[l]){u.box[l]=!0;const c=4*l;if(e<=i[c+2]&&t<=i[c+3]&&n>=i[c+0]&&r>=i[c+1]&&(!s||s(this.boxKeys[l]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[l],x1:i[c],y1:i[c+1],x2:i[c+2],y2:i[c+3]})}}}const l=this.circleCells[i];if(null!==l){const i=this.circles;for(const c of l)if(!u.circle[c]){u.circle[c]=!0;const l=3*c;if(this._circleAndRectCollide(i[l],i[l+1],i[l+2],e,t,n,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=i[l],t=i[l+1],n=i[l+2];o.push({key:this.circleKeys[c],x1:e-n,y1:t-n,x2:e+n,y2:t+n})}}}}}_queryCellCircle(e,t,n,r,i,o,a,s){const u=a.circle,c=a.seenUids,l=this.boxCells[i];if(null!==l){const e=this.bboxes;for(const t of l)if(!c.box[t]){c.box[t]=!0;const n=4*t;if(this._circleAndRectCollide(u.x,u.y,u.radius,e[n+0],e[n+1],e[n+2],e[n+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const f=this.circleCells[i];if(null!==f){const e=this.circles;for(const t of f)if(!c.circle[t]){c.circle[t]=!0;const n=3*t;if(this._circlesCollide(e[n],e[n+1],e[n+2],u.x,u.y,u.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,n,r,i,o,a,s){const u=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),l=this._convertToXCellCoord(n),f=this._convertToYCellCoord(r);for(let h=u;h<=l;h++)for(let u=c;u<=f;u++)if(i.call(this,e,t,n,r,this.xCellCount*u+h,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,n,r,i,o){const a=r-e,s=i-t,u=n+o;return u*u>a*a+s*s}_circleAndRectCollide(e,t,n,r,i,o,a){const s=(o-r)/2,u=Math.abs(e-(r+s));if(u>s+n)return!1;const c=(a-i)/2,l=Math.abs(t-(i+c));if(l>c+n)return!1;if(u<=s||l<=c)return!0;const f=u-s,h=l-c;return f*f+h*h<=n*n}}const tt=Math.tan(85*Math.PI/180);function nt(t,n,r,i,o,a,s){const u=e.create();if(r)if("globe"===a.name){const t=e.calculateGlobeLabelMatrix(o,n);e.multiply(u,u,t)}else{const t=v([],s);u[0]=t[0],u[1]=t[1],u[4]=t[2],u[5]=t[3],i||e.rotateZ(u,u,o.angle)}else e.multiply(u,o.labelPlaneMatrix,t);return u}function rt(e,t,n,r,i,o,a){const s=nt(e,t,n,r,i,o,a);return"globe"===o.name&&n||(s[2]=s[6]=s[10]=s[14]=0),s}function it(t,n,r,i,o,a,s){if(r){if("globe"===a.name){const u=nt(t,n,r,i,o,a,s);return e.invert(u,u),e.multiply(u,t,u),u}{const n=e.clone(t),r=e.identity([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],e.multiply(n,n,r),i||e.rotateZ(n,n,-o.angle),n}}return o.glCoordMatrix}function ot(t,n,r,i){const o=[t,n,r,1];r?e.transformMat4$1(o,o,i):mt(o,o,i);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function at(e,t){return Math.min(.5+e/t*.5,1.5)}function st(e,t){const n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function ut(t,n,r,i,o,a,s,u,c,l){const f=r.transform,h=i?t.textSizeData:t.iconSizeData,d=e.evaluateSizeForZoom(h,r.transform.zoom),p="globe"===f.projection.name,y=[256/r.width*2+1,256/r.height*2+1],m=i?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;m.clear();let g=null;p&&(g=i?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const v=t.lineVertexArray,b=i?t.text.placedSymbolArray:t.icon.placedSymbolArray,_=r.transform.width/r.transform.height;let w,x=!1;for(let k=0;k<b.length;k++){const i=b.get(k),{numGlyphs:p,writingMode:A}=i;if(A!==e.WritingMode.vertical||x||w===e.WritingMode.horizontal||(x=!0),w=A,(i.hidden||A===e.WritingMode.vertical)&&!x){yt(p,m);continue}x=!1;const E=new e.pointGeometry(i.tileAnchorX,i.tileAnchorY);let{x:I,y:S,z:T}=f.projection.projectTilePoint(E.x,E.y,l.canonical);if(c){const[e,t,n]=c(E);I+=e,S+=t,T+=n}const M=[I,S,T,1];if(e.transformMat4$1(M,M,n),!st(M,y)){yt(p,m);continue}const P=at(r.transform.cameraToCenterDistance,M[3]),B=e.evaluateSizeForFeature(h,d,i),C=s?B/P:B*P,O=ot(I,S,T,o);if(O[3]<=0){yt(p,m);continue}let D={};const R=s?null:c,L=ft(i,C,!1,u,n,o,a,t.glyphOffsetArray,v,m,g,O,E,D,_,R,f.projection,l,s);x=L.useVertical,R&&L.needsFlipping&&(D={}),(L.notEnoughRoom||x||L.needsFlipping&&ft(i,C,!0,u,n,o,a,t.glyphOffsetArray,v,m,g,O,E,D,_,R,f.projection,l,s).notEnoughRoom)&&yt(p,m)}i?(t.text.dynamicLayoutVertexBuffer.updateData(m),g&&t.text.globeExtVertexBuffer.updateData(g)):(t.icon.dynamicLayoutVertexBuffer.updateData(m),g&&t.icon.globeExtVertexBuffer.updateData(g))}function ct(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y){const{lineStartIndex:m,glyphStartIndex:g,segment:v}=s,b=g+s.numGlyphs,_=m+s.lineLength,w=t.getoffsetX(g),x=t.getoffsetX(b-1),k=pt(e*w,n,r,i,o,a,v,m,_,u,c,l,f,h,!0,d,p,y);if(!k)return null;const A=pt(e*x,n,r,i,o,a,v,m,_,u,c,l,f,h,!0,d,p,y);return A?{first:k,last:A}:null}function lt(t,n,r,i){return t===e.WritingMode.horizontal&&Math.abs(i)>Math.abs(r)?{useVertical:!0}:t===e.WritingMode.vertical?i>0?{needsFlipping:!0}:null:0!==n&&function(e,t){return 0===e||Math.abs(t/e)>tt}(r,i)?1===n?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ft(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v,b){const _=n/24,w=t.lineOffsetX*_,x=t.lineOffsetY*_,{lineStartIndex:k,glyphStartIndex:A,numGlyphs:E,segment:I,writingMode:S,flipState:T}=t,M=k+t.lineLength,P=t=>{if(f){const[n,r,i]=t.up,o=l.length;e.updateGlobeVertexNormal(f,o+0,n,r,i),e.updateGlobeVertexNormal(f,o+1,n,r,i),e.updateGlobeVertexNormal(f,o+2,n,r,i),e.updateGlobeVertexNormal(f,o+3,n,r,i)}const[n,r,i]=t.point;e.addDynamicAttributes(l,n,r,i,t.angle)};if(E>1){const e=ct(_,u,w,x,r,h,d,t,c,a,p,m,!1,g,v,b);if(!e)return{notEnoughRoom:!0};if(i&&!r){let[n,r,i]=e.first.point,[o,a,u]=e.last.point;[n,r]=ot(n,r,i,s),[o,a]=ot(o,a,u,s);const c=lt(S,T,(o-n)*y,a-r);if(t.flipState=c&&c.needsFlipping?1:2,c)return c}P(e.first);for(let t=A+1;t<A+E-1;t++){const e=pt(_*u.getoffsetX(t),w,x,r,h,d,I,k,M,c,a,p,m,!1,!1,g,v,b);if(!e)return l.length-=4*(t-A),{notEnoughRoom:!0};P(e)}P(e.last)}else{if(i&&!r){const n=ot(d.x,d.y,0,o),r=k+I+1,i=new e.pointGeometry(c.getx(r),c.gety(r)),a=ot(i.x,i.y,0,o),s=a[3]>0?a:dt(d,i,n,1,o,void 0,g,v.canonical),u=lt(S,T,(s[0]-n[0])*y,s[1]-n[1]);if(t.flipState=u&&u.needsFlipping?1:2,u)return u}const n=pt(_*u.getoffsetX(A),w,x,r,h,d,I,k,M,c,a,p,m,!1,!1,g,v,b);if(!n)return{notEnoughRoom:!0};P(n)}return{}}function ht(e,t,n,r,i){const{x:o,y:a,z:s}=r.projectTilePoint(e.x,e.y,t);if(!i)return ot(o,a,s,n);const[u,c,l]=i(e);return ot(o+u,a+c,s+l,n)}function dt(t,n,r,i,o,a,s,u){const c=ht(t.sub(n)._unit()._add(t),u,o,s,a);return e.sub(c,r,c),e.normalize(c,c),e.scaleAndAdd(c,r,c,i)}function pt(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g,v){const b=i?t-n:t+n;let _=b>0?1:-1,w=0;i&&(_*=-1,w=Math.PI),_<0&&(w+=Math.PI);let x=u+s+(_>0?0:1)|0,k=o,A=o,E=0,I=0;const S=Math.abs(b),T=[],M=[];let P=a,B=P;const C=()=>dt(B,P,A,S-E+1,f,d,m,g.canonical);for(;E+I<=S;){if(x+=_,x<u||x>=c)return null;if(A=k,B=P,T.push(A),p&&M.push(B),P=new e.pointGeometry(l.getx(x),l.gety(x)),k=h[x],!k){const e=ht(P,g.canonical,f,m,d);k=e[3]>0?h[x]=e:C()}E+=I,I=e.distance(A,k)}y&&d&&(h[x]&&(k=C(),I=e.distance(A,k)),h[x]=k);const O=(S-E)/I,D=P.sub(B)._mult(O)._add(B),R=e.sub([],k,A),L=e.scaleAndAdd([],A,R,O);let z=[0,0,1],Z=R[0],N=R[1];if(v&&(z=m.upVector(g.canonical,D.x,D.y),0!==z[0]||0!==z[1]||1!==z[2])){const t=[z[2],0,-z[0]],n=e.cross([],z,t);e.normalize(t,t),e.normalize(n,n),Z=e.dot(R,t),N=e.dot(R,n)}if(r){const t=e.cross([],z,R);e.normalize(t,t),e.scaleAndAdd(L,L,t,r*_)}const U=w+Math.atan2(N,Z);return T.push(L),p&&M.push(D),{point:L,angle:U,path:T,tilePath:M,up:z}}function yt(e,t){const n=t.length,r=n+4*e;t.resize(r),t.float32.fill(-1/0,4*n,4*r)}function mt(e,t,n){const r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}const gt=100;class vt{constructor(e,t,n=new et(e.width+200,e.height+200,25),r=new et(e.width+200,e.height+200,25)){this.transform=e,this.grid=n,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+gt,this.screenBottomBoundary=e.height+gt,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,n,r,i,o,a,s){let u=n.projectedAnchorX,c=n.projectedAnchorY,l=n.projectedAnchorZ;const f=n.elevation,h=n.tileID,d=e.getProjection();if(f&&h){const[e,t,r]=d.upVector(h.canonical,n.tileAnchorX,n.tileAnchorY),i=d.upVectorScale(h.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;u+=e*f*i,c+=t*f*i,l+=r*f*i}const p=this.projectAndGetPerspectiveRatio(a,u,c,l,n.tileID,"globe"===d.name||!!f||this.transform.pitch>0,d),y=o*p.perspectiveRatio,m=(n.x1*t+r.x-n.padding)*y+p.point.x,g=(n.y1*t+r.y-n.padding)*y+p.point.y,v=(n.x2*t+r.x+n.padding)*y+p.point.x,b=(n.y2*t+r.y+n.padding)*y+p.point.y,_=p.perspectiveRatio<=.55||p.occluded;return!this.isInsideGrid(m,g,v,b)||!i&&this.grid.hitTest(m,g,v,b,s)||_?{box:[],offscreen:!1,occluded:p.occluded}:{box:[m,g,v,b],offscreen:this.isOffscreen(m,g,v,b),occluded:!1}}placeCollisionCircles(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y){const m=[],g=this.transform.elevation,v=t.getProjection(),b=g?g.getAtTileOffsetFunc(y,this.transform.center.lat,this.transform.worldSize,v):null,_=new e.pointGeometry(r.tileAnchorX,r.tileAnchorY);let{x:w,y:x,z:k}=v.projectTilePoint(_.x,_.y,y.canonical);if(b){const[e,t,n]=b(_);w+=e,x+=t,k+=n}const A="globe"===v.name,E=this.projectAndGetPerspectiveRatio(s,w,x,k,y,A||!!g||this.transform.pitch>0,v),{perspectiveRatio:I}=E,S=(f?a/I:a*I)/e.ONE_EM,T=ot(w,x,k,u),M=E.signedDistanceFromCamera>0?ct(S,o,r.lineOffsetX*S,r.lineOffsetY*S,!1,T,_,r,i,u,{},g&&!f?b:null,f&&!!g,v,y,f):null;let P=!1,B=!1,C=!0;if(M&&!E.occluded){const t=.5*d*I+p,r=new e.pointGeometry(-100,-100),i=new e.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),o=new Je,{first:a,last:s}=M,u=a.path.length;let f=[];for(let e=u-1;e>=1;e--)f.push(a.path[e]);for(let e=1;e<s.path.length;e++)f.push(s.path[e]);const y=2.5*t;c&&(f=f.map((([e,t,n],r)=>(b&&!A&&(n=b(r<u-1?a.tilePath[u-1-r]:s.tilePath[r-u+2])[2]),ot(e,t,n,c)))),f.some((e=>e[3]<=0))&&(f=[]));let g=[];if(f.length>0){let t=1/0,n=-1/0,o=1/0,a=-1/0;for(const e of f)t=Math.min(t,e[0]),o=Math.min(o,e[1]),n=Math.max(n,e[0]),a=Math.max(a,e[1]);n>=r.x&&t<=i.x&&a>=r.y&&o<=i.y&&(g=[f.map((t=>new e.pointGeometry(t[0],t[1])))],(t<r.x||n>i.x||o<r.y||a>i.y)&&(g=e.clipLine(g,r.x,r.y,i.x,i.y)))}for(const e of g){o.reset(e,.25*t);let r=0;r=o.length<=.5*t?1:Math.ceil(o.paddedLength/y)+1;for(let e=0;e<r;e++){const i=e/Math.max(r-1,1),a=o.lerp(i),s=a.x+gt,u=a.y+gt;m.push(s,u,t,0);const c=s-t,f=u-t,d=s+t,p=u+t;if(C=C&&this.isOffscreen(c,f,d,p),B=B||this.isInsideGrid(c,f,d,p),!n&&this.grid.hitTestCircle(s,u,t,h)&&(P=!0,!l))return{circles:[],offscreen:!1,collisionDetected:P,occluded:!1}}}}return{circles:!l&&P||!B?[]:m,offscreen:C,collisionDetected:P,occluded:E.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const n=[];let r=1/0,i=1/0,o=-1/0,a=-1/0;for(const l of t){const t=new e.pointGeometry(l.x+gt,l.y+gt);r=Math.min(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),n.push(t)}const s=this.grid.query(r,i,o,a).concat(this.ignoredGrid.query(r,i,o,a)),u={},c={};for(const l of s){const t=l.key;if(void 0===u[t.bucketInstanceId]&&(u[t.bucketInstanceId]={}),u[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.pointGeometry(l.x1,l.y1),new e.pointGeometry(l.x2,l.y1),new e.pointGeometry(l.x2,l.y2),new e.pointGeometry(l.x1,l.y2)];e.polygonIntersectsPolygon(n,r)&&(u[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,n,r,i){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:n,featureIndex:r,collisionGroupID:i},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,n,r,i){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:n,featureIndex:r,collisionGroupID:i};for(let s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,n,r,i,o,a,s){const u=[n,r,i,1];let c=!1;if(i||this.transform.pitch>0){e.transformMat4$1(u,u,t);const a="globe"===s.name;if(this.fogState&&o&&!a){const t=function(t,n,r,i,o,a){const s=a.calculateFogTileMatrix(o),u=[n,r,i];return e.transformMat4(u,u,s),S(t,u,a.pitch,a._fov)}(this.fogState,n,r,i,o.toUnwrapped(),this.transform);c=t>.9}}else mt(u,u,t);const l=u[3];return{point:new e.pointGeometry((u[0]/l+1)/2*this.transform.width+gt,(-u[1]/l+1)/2*this.transform.height+gt),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/l*.5,1.5),signedDistanceFromCamera:l,occluded:a&&u[2]>l||c}}isOffscreen(e,t,n,r){return n<gt||e>=this.screenRightBoundary||r<gt||t>this.screenBottomBoundary}isInsideGrid(e,t,n,r){return n>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.identity([]);return e.translate(t,t,[-100,-100,0]),t}}function bt(t,n,r){const i=n.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.multiply(new Float32Array(16),t.projMatrix,i)}function _t(e,t,n){if(t.projection.name===n.projection.name)return e.projMatrix;const r=n.clone();return r.setProjection(t.projection),bt(r,t.getProjection(),e)}function wt(e,t,n){return t.name===n.projection.name?e.projMatrix:bt(n,t,e)}class xt{constructor(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n}isHidden(){return 0===this.opacity&&!this.placed}}class kt{constructor(e,t,n,r,i,o=!1){this.text=new xt(e?e.text:null,t,n,i),this.icon=new xt(e?e.icon:null,t,r,i),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class At{constructor(e,t,n,r=!1){this.text=e,this.icon=t,this.skipFade=n,this.clipped=r}}class Et{constructor(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]}}class It{constructor(e,t,n,r,i){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=n,this.bucketIndex=r,this.tileID=i}}class St{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function Tt(t,n,r,i,o){const{horizontalAlign:a,verticalAlign:s}=e.getAnchorAlignment(t),u=-(a-.5)*n,c=-(s-.5)*r,l=e.evaluateVariableOffset(t,i);return new e.pointGeometry(u+l[0]*o,c+l[1]*o)}function Mt(t,n,r,i,o){const a=new e.pointGeometry(t,n);return r&&a._rotate(i?o:-o),a}class Pt{constructor(e,t,n,r,i){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new vt(this.transform,i),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new St(n),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,n,r,i){const o=r.getBucket(n),a=r.latestFeatureIndex;if(!o||!a||n.id!==o.layerIds[0])return;const s=o.layers[0].layout,u=r.collisionBoxArray,c=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),l=r.tileSize/e.EXTENT,f=r.tileID.toUnwrapped();this.transform.setProjection(o.projection);const h=(d=r.tileID,p=o.getProjection(),y=this.transform,p.name===this.projection?y.calculateProjMatrix(d.toUnwrapped()):bt(y,p,d));var d,p,y;const m="map"===s.get("text-pitch-alignment"),g="map"===s.get("text-rotation-alignment");n.compileFilter();const v=n.dynamicFilter(),b=n.dynamicFilterNeedsFeature(),_=this.transform.calculatePixelsToTileUnitsMatrix(r),w=rt(h,r.tileID.canonical,m,g,this.transform,o.getProjection(),_);let x=null;if(m){const t=it(h,r.tileID.canonical,m,g,this.transform,o.getProjection(),_);x=e.multiply([],this.transform.labelPlaneMatrix,t)}let k=null;v&&r.latestFeatureIndex&&(k={unwrappedTileID:f,dynamicFilter:v,dynamicFilterNeedsFeature:b,featureIndex:r.latestFeatureIndex}),this.retainedQueryData[o.bucketInstanceId]=new It(o.bucketInstanceId,a,o.sourceLayerIndex,o.index,r.tileID);const A={bucket:o,layout:s,posMatrix:h,textLabelPlaneMatrix:w,labelToScreenMatrix:x,clippingData:k,scale:c,textPixelRatio:l,holdingForFade:r.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(o.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:e.evaluateSizeForZoom(o.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(o.sourceID)};if(i)for(const e of o.sortKeyRanges){const{sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i}=e;t.push({sortKey:n,symbolInstanceStart:r,symbolInstanceEnd:i,parameters:A})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:o.symbolInstances.length,parameters:A})}attemptAnchorPlacement(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g){const{textOffset0:v,textOffset1:b,crossTileID:_}=f,w=[v,b],x=Tt(e,n,r,w,i),k=this.collisionIndex.placeCollisionBox(d,i,t,Mt(x.x,x.y,o,a,this.transform.angle),l,s,u,c.predicate);if(y){const e=d.getSymbolInstanceIconSize(g,this.transform.zoom,f.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(d,e,y,Mt(x.x,x.y,o,a,this.transform.angle),l,s,u,c.predicate).box.length)return}if(k.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[_]&&this.prevPlacement.placements[_]&&this.prevPlacement.placements[_].text&&(t=this.prevPlacement.variableOffsets[_].anchor),this.variableOffsets[_]={textOffset:w,width:n,height:r,anchor:e,textScale:i,prevAnchor:t},this.markUsedJustification(d,e,f,p),d.allowVerticalPlacement&&(this.markUsedOrientation(d,p,f),this.placedOrientations[_]=p),{shift:x,placedGlyphBoxes:k}}}placeLayerBucketPart(t,n,r,i){const{bucket:o,layout:a,posMatrix:s,textLabelPlaneMatrix:u,labelToScreenMatrix:c,clippingData:l,textPixelRatio:f,holdingForFade:h,collisionBoxArray:d,partiallyEvaluatedTextSize:p,partiallyEvaluatedIconSize:y,collisionGroup:m}=t.parameters,g=a.get("text-optional"),v=a.get("icon-optional"),b=a.get("text-allow-overlap"),_=a.get("icon-allow-overlap"),w="map"===a.get("text-rotation-alignment"),x="map"===a.get("text-pitch-alignment"),k="none"!==a.get("icon-text-fit"),A="viewport-y"===a.get("symbol-z-order");this.transform.setProjection(o.projection);let E=b&&(_||!o.hasIconData()||v),I=_&&(b||!o.hasTextData()||g);!o.collisionArrays&&d&&o.deserializeCollisionBoxes(d),r&&i&&o.updateCollisionDebugBuffers(this.transform.zoom,d);const S=(t,i,d)=>{const{crossTileID:A,numVerticalGlyphVertices:S}=t;if(l){const r={zoom:this.transform.zoom,pitch:this.transform.pitch};let i=null;if(l.dynamicFilterNeedsFeature){const e=this.retainedQueryData[o.bucketInstanceId];i=l.featureIndex.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,l.dynamicFilter)(r,i,this.retainedQueryData[o.bucketInstanceId].tileID.canonical,new e.pointGeometry(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(l.unwrappedTileID)))return this.placements[A]=new At(!1,!1,!1,!0),void(n[A]=!0)}if(n[A])return;if(h)return void(this.placements[A]=new At(!1,!1,!1));let T=!1,M=!1,P=!0,B=!1,C=!1,O=null,D={box:null,offscreen:null,occluded:null},R={box:null,offscreen:null,occluded:null},L=null,z=null,Z=null,N=0,U=0,F=0;d.textFeatureIndex?N=d.textFeatureIndex:t.useRuntimeCollisionCircles&&(N=t.featureIndex),d.verticalTextFeatureIndex&&(U=d.verticalTextFeatureIndex);const j=e=>{e.tileID=this.retainedQueryData[o.bucketInstanceId].tileID;const t=this.transform.elevation;(t||e.elevation)&&(e.elevation=t?t.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0)},W=d.textBox;if(W){j(W);const n=n=>{let r=e.WritingMode.horizontal;if(o.allowVerticalPlacement&&!n&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[A];e&&(this.placedOrientations[A]=e,r=e,this.markUsedOrientation(o,r,t))}return r},r=(t,n)=>{if(o.allowVerticalPlacement&&S>0&&d.verticalTextBox){for(const r of o.writingModes)if(r===e.WritingMode.vertical?(D=n(),R=D):D=t(),D&&D.box&&D.box.length)break}else D=t()};if(a.get("text-variable-anchor")){let u=a.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[A]){const e=this.prevPlacement.variableOffsets[A];u.indexOf(e.anchor)>0&&(u=u.filter((t=>t!==e.anchor)),u.unshift(e.anchor))}const c=(e,n,r)=>{const a=o.getSymbolInstanceTextSize(p,t,this.transform.zoom,i),c=(e.x2-e.x1)*a+2*e.padding,l=(e.y2-e.y1)*a+2*e.padding,h=k&&!_?n:null;h&&j(h);let d={box:[],offscreen:!1,occluded:!1};const g=b?2*u.length:u.length;for(let v=0;v<g;++v){const n=this.attemptAnchorPlacement(u[v%u.length],e,c,l,a,w,x,f,s,m,v>=u.length,t,i,o,r,h,p,y);if(n&&(d=n.placedGlyphBoxes,d&&d.box&&d.box.length)){T=!0,O=n.shift;break}}return d};r((()=>c(W,d.iconBox,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return t&&j(t),o.allowVerticalPlacement&&!(D&&D.box&&D.box.length)&&S>0&&t?c(t,d.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null,occluded:null}})),D&&(T=D.box,P=D.offscreen,B=D.occluded);const l=n(D&&D.box);if(!T&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[A];e&&(this.variableOffsets[A]=e,this.markUsedJustification(o,e.anchor,t,l))}}else{const a=(n,r)=>{const a=o.getSymbolInstanceTextSize(p,t,this.transform.zoom,i),u=this.collisionIndex.placeCollisionBox(o,a,n,new e.pointGeometry(0,0),b,f,s,m.predicate);return u&&u.box&&u.box.length&&(this.markUsedOrientation(o,r,t),this.placedOrientations[A]=r),u};r((()=>a(W,e.WritingMode.horizontal)),(()=>{const t=d.verticalTextBox;return o.allowVerticalPlacement&&S>0&&t?(j(t),a(t,e.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}})),n(D&&D.box&&D.box.length)}}if(L=D,T=L&&L.box&&L.box.length>0,P=L&&L.offscreen,B=L&&L.occluded,t.useRuntimeCollisionCircles){const n=o.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),i=e.evaluateSizeForFeature(o.textSizeData,p,n),l=a.get("text-padding");z=this.collisionIndex.placeCollisionCircles(o,b,n,o.lineVertexArray,o.glyphOffsetArray,i,s,u,c,r,x,m.predicate,t.collisionCircleDiameter*i/e.ONE_EM,l,this.retainedQueryData[o.bucketInstanceId].tileID),T=b||z.circles.length>0&&!z.collisionDetected,P=P&&z.offscreen,B=z.occluded}if(d.iconFeatureIndex&&(F=d.iconFeatureIndex),d.iconBox){const n=n=>{j(n);const r=k&&O?Mt(O.x,O.y,w,x,this.transform.angle):new e.pointGeometry(0,0),i=o.getSymbolInstanceIconSize(y,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(o,i,n,r,_,f,s,m.predicate)};R&&R.box&&R.box.length&&d.verticalIconBox?(Z=n(d.verticalIconBox),M=Z.box.length>0):(Z=n(d.iconBox),M=Z.box.length>0),P=P&&Z.offscreen,C=Z.occluded}const V=g||0===t.numHorizontalGlyphVertices&&0===S,K=v||0===t.numIconVertices;if(V||K?K?V||(M=M&&T):T=M&&T:M=T=M&&T,T&&L&&L.box&&this.collisionIndex.insertCollisionBox(L.box,a.get("text-ignore-placement"),o.bucketInstanceId,R&&R.box&&U?U:N,m.ID),M&&Z&&this.collisionIndex.insertCollisionBox(Z.box,a.get("icon-ignore-placement"),o.bucketInstanceId,F,m.ID),z&&(T&&this.collisionIndex.insertCollisionCircles(z.circles,a.get("text-ignore-placement"),o.bucketInstanceId,N,m.ID),r)){const e=o.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new Et);for(let n=0;n<z.circles.length;n+=4)t.circles.push(z.circles[n+0]),t.circles.push(z.circles[n+1]),t.circles.push(z.circles[n+2]),t.circles.push(z.collisionDetected?1:0)}const G="globe"!==o.projection.name;E=E&&(G||!B),I=I&&(G||!C),this.placements[A]=new At(T||E,M||I,P||o.justReloaded),n[A]=!0};if(A){const e=o.getSortedSymbolIndexes(this.transform.angle);for(let t=e.length-1;t>=0;--t){const n=e[t];S(o.symbolInstances.get(n),n,o.collisionArrays[n])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)S(o.symbolInstances.get(e),e,o.collisionArrays[e]);if(r&&o.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[o.bucketInstanceId];e.invert(t.invProjMatrix,s),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}o.justReloaded=!1}markUsedJustification(t,n,r,i){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:u,crossTileID:c}=r,l=e.getAnchorJustification(n),f=i===e.WritingMode.vertical?u:"left"===l?o:"center"===l?a:"right"===l?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=f>=0&&o!==f?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=f>=0&&a!==f?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=f>=0&&s!==f?0:c),u>=0&&(t.text.placedSymbolArray.get(u).crossTileID=f>=0&&u!==f?0:c)}markUsedOrientation(t,n,r){const i=n===e.WritingMode.horizontal||n===e.WritingMode.horizontalOnly?n:0,o=n===e.WritingMode.vertical?n:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:u,verticalPlacedTextSymbolIndex:c}=r,l=t.text.placedSymbolArray;a>=0&&(l.get(a).placedOrientation=i),s>=0&&(l.get(s).placedOrientation=i),u>=0&&(l.get(u).placedOrientation=i),c>=0&&(l.get(c).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let n=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,i=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=i[s];t?(this.opacities[s]=new kt(t,r,e.text,e.icon,null,e.clipped),n=n||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new kt(null,r,e.text,e.icon,e.skipFade,e.clipped),n=n||e.text||e.icon)}for(const s in i){const e=i[s];if(!this.opacities[s]){const t=new kt(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,n=n||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);n?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t){const n={};for(const r of t){const t=r.getBucket(e);t&&r.latestFeatureIndex&&e.id===t.layerIds[0]&&this.updateBucketOpacities(t,n,r.collisionBoxArray)}}updateBucketOpacities(t,n,r){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const i=t.layers[0].layout,o=!!t.layers[0].dynamicFilter(),a=new kt(null,0,!1,!1,!0),s=i.get("text-allow-overlap"),u=i.get("icon-allow-overlap"),c=i.get("text-variable-anchor"),l="map"===i.get("text-rotation-alignment"),f="map"===i.get("text-pitch-alignment"),h="none"!==i.get("icon-text-fit"),d=new kt(null,0,s&&(u||!t.hasIconData()||i.get("icon-optional")),u&&(s||!t.hasTextData()||i.get("text-optional")),!0);!t.collisionArrays&&r&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(r);const p=(e,t,n)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(n)};let y=0;for(let m=0;m<t.symbolInstances.length;m++){const r=t.symbolInstances.get(m),{numHorizontalGlyphVertices:i,numVerticalGlyphVertices:s,crossTileID:u,numIconVertices:g}=r;let v=this.opacities[u];n[u]?v=a:v||(v=d,this.opacities[u]=v),n[u]=!0;const b=i>0||s>0,_=g>0,w=this.placedOrientations[u],x=w===e.WritingMode.vertical,k=w===e.WritingMode.horizontal||w===e.WritingMode.horizontalOnly;if(!b&&!_||v.isHidden()||y++,b){const e=Nt(v.text);p(t.text,i,x?Ut:e),p(t.text,s,k?Ut:e);const n=v.text.isHidden(),{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:c,verticalPlacedTextSymbolIndex:l}=r,f=t.text.placedSymbolArray,h=n||x?1:0;o>=0&&(f.get(o).hidden=h),a>=0&&(f.get(a).hidden=h),c>=0&&(f.get(c).hidden=h),l>=0&&(f.get(l).hidden=n||k?1:0);const d=this.variableOffsets[u];d&&this.markUsedJustification(t,d.anchor,r,w);const y=this.placedOrientations[u];y&&(this.markUsedJustification(t,"left",r,y),this.markUsedOrientation(t,y,r))}if(_){const e=Nt(v.icon),{placedIconSymbolIndex:n,verticalPlacedIconSymbolIndex:i}=r,o=t.icon.placedSymbolArray,a=v.icon.isHidden()?1:0;n>=0&&(p(t.icon,g,x?Ut:e),o.get(n).hidden=a),i>=0&&(p(t.icon,r.numVerticalIconVertices,k?Ut:e),o.get(i).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const n=t.collisionArrays[m];if(n){let r=new e.pointGeometry(0,0),i=!0;if(n.textBox||n.verticalTextBox){if(c){const e=this.variableOffsets[u];e?(r=Tt(e.anchor,e.width,e.height,e.textOffset,e.textScale),l&&r._rotate(f?this.transform.angle:-this.transform.angle)):i=!1}o&&(i=!v.clipped),n.textBox&&Bt(t.textCollisionBox.collisionVertexArray,v.text.placed,!i||x,r.x,r.y),n.verticalTextBox&&Bt(t.textCollisionBox.collisionVertexArray,v.text.placed,!i||k,r.x,r.y)}const a=i&&Boolean(!k&&n.verticalIconBox);n.iconBox&&Bt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,a,h?r.x:0,h?r.y:0),n.verticalIconBox&&Bt(t.iconCollisionBox.collisionVertexArray,v.icon.placed,!a,h?r.x:0,h?r.y:0)}}}if(t.fullyClipped=0===y,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const n=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*n>e}setStale(){this.stale=!0}}function Bt(e,t,n,r,i){e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0),e.emplaceBack(t?1:0,n?1:0,r||0,i||0)}const Ct=Math.pow(2,25),Ot=Math.pow(2,24),Dt=Math.pow(2,17),Rt=Math.pow(2,16),Lt=Math.pow(2,9),zt=Math.pow(2,8),Zt=Math.pow(2,1);function Nt(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*Ct+t*Ot+n*Dt+t*Rt+n*Lt+t*zt+n*Zt+t}const Ut=0;class Ft{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,t,n,r,i){const o=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(o,r,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,i())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,o.sort(((e,t)=>e.sortKey-t.sortKey)));this._currentPartIndex<o.length;){const e=o[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,n,0===e.symbolInstanceStart),this._currentPartIndex++,i())return!0}return!1}}class jt{constructor(e,t,n,r,i,o,a,s){this.placement=new Pt(e,i,o,a,s),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,n,r){const i=e.exported.now(),o=()=>{const t=e.exported.now()-i;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const e=n[t[this._currentPlacementIndex]],i=this.placement.collisionIndex.transform.zoom;if("symbol"===e.type&&(!e.minzoom||e.minzoom<=i)&&(!e.maxzoom||e.maxzoom>i)){if(this._inProgressLayer||(this._inProgressLayer=new Ft(e)),this._inProgressLayer.continuePlacement(r[e.source],this.placement,this._showCollisionBoxes,e,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const Wt=512/e.EXTENT/2;class Vt{constructor(e,t,n){this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(let r=0;r<t.length;r++){const n=t.get(r),i=n.key;this.indexedSymbolInstances[i]||(this.indexedSymbolInstances[i]=[]),this.indexedSymbolInstances[i].push({crossTileID:n.crossTileID,coord:this.getScaledCoordinates(n,e)})}}getScaledCoordinates(t,n){const r=Wt/Math.pow(2,n.canonical.z-this.tileID.canonical.z);return{x:Math.floor((n.canonical.x*e.EXTENT+t.tileAnchorX)*r),y:Math.floor((n.canonical.y*e.EXTENT+t.tileAnchorY)*r)}}findMatches(e,t,n){const r=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z);for(let i=0;i<e.length;i++){const o=e.get(i);if(o.crossTileID)continue;const a=this.indexedSymbolInstances[o.key];if(!a)continue;const s=this.getScaledCoordinates(o,t);for(const e of a)if(Math.abs(e.coord.x-s.x)<=r&&Math.abs(e.coord.y-s.y)<=r&&!n[e.crossTileID]){n[e.crossTileID]=!0,o.crossTileID=e.crossTileID;break}}}}class Kt{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const n in this.indexes){const e=this.indexes[n],r={};for(const n in e){const i=e[n];i.tileID=i.tileID.unwrapTo(i.tileID.wrap+t),r[i.tileID.key]=i}this.indexes[n]=r}this.lng=e}addBucket(e,t,n){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let i=0;i<t.symbolInstances.length;i++)t.symbolInstances.get(i).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const r=this.usedCrossTileIDs[e.overscaledZ];for(const i in this.indexes){const n=this.indexes[i];if(Number(i)>e.overscaledZ)for(const i in n){const o=n[i];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=n[e.scaledTo(Number(i)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let i=0;i<t.symbolInstances.length;i++){const e=t.symbolInstances.get(i);e.crossTileID||(e.crossTileID=n.generate(),r[e.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Vt(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const n in t.indexedSymbolInstances)for(const r of t.indexedSymbolInstances[n])delete this.usedCrossTileIDs[e][r.crossTileID]}removeStaleBuckets(e){let t=!1;for(const n in this.indexes){const r=this.indexes[n];for(const i in r)e[r[i].bucketInstanceId]||(this.removeBucketCrossTileIDs(n,r[i]),delete r[i],t=!0)}return t}}class Ht{constructor(){this.layerIndexes={},this.crossTileIDs=new Kt,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,n,r){let i=this.layerIndexes[e.id];void 0===i&&(i=this.layerIndexes[e.id]=new Gt);let o=!1;const a={};"globe"!==r.name&&i.handleWrapJump(n);for(const s of t){const t=s.getBucket(e);t&&e.id===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),i.addBucket(s.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return i.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach((e=>{t[e]=!0}));for(const n in this.layerIndexes)t[n]||delete this.layerIndexes[n]}}const qt=(t,n)=>e.emitValidationErrors(t,n&&n.filter((e=>"source.canvas"!==e.identifier))),Yt=e.pick(Ke,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),Xt=e.pick(Ke,["setCenter","setZoom","setBearing","setPitch"]),Qt={version:8,layers:[],sources:{}},$t={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Jt extends e.Evented{constructor(t,n={}){super(),this.map=t,this.dispatcher=new C(je(),this),this.imageManager=new _,this.imageManager.setEventedParent(this),this.glyphManager=new e.GlyphManager(t._requestManager,n.localFontFamily?e.LocalGlyphMode.all:n.localIdeographFontFamily?e.LocalGlyphMode.ideographs:e.LocalGlyphMode.none,n.localFontFamily||n.localIdeographFontFamily),this.crossTileSymbolIndex=new Ht,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());const r=this;this._rtlTextPluginCallback=Jt.registerForPluginStateChange((t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},((t,n)=>{if(e.triggerPluginCompletionEvent(t),n&&n.every((e=>e)))for(const e in r._sourceCaches){const t=r._sourceCaches[e],n=t.getSource().type;"vector"!==n&&"geojson"!==n||t.reload()}}))})),this.on("data",(e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getSource(e.sourceId);if(t&&t.vectorLayerIds)for(const n in this._layers){const e=this._layers[n];e.source===t.id&&this._validateLayer(e)}}))}loadURL(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"}));const r="boolean"==typeof n.validate?n.validate:!e.isMapboxURL(t);t=this.map._requestManager.normalizeStyleURL(t,n.accessToken);const i=this.map._requestManager.transformRequest(t,e.ResourceType.Style);this._request=e.getJSON(i,((t,n)=>{this._request=null,t?this.fire(new e.ErrorEvent(t)):n&&this._load(n,r)}))}loadJSON(t,n={}){this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.exported.frame((()=>{this._request=null,this._load(t,!1!==n.validate)}))}loadEmpty(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Qt,!1)}_updateLayerCount(e,t){const n=t?1:-1;e.is3D()&&(this._num3DLayers+=n),"circle"===e.type&&(this._numCircleLayers+=n),"symbol"===e.type&&(this._numSymbolLayers+=n)}_load(t,n){if(n&&qt(this,e.validateStyle(t)))return;this._loaded=!0,this.stylesheet=e.clone$1(t),this._updateMapProjection();for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1});this._changed=!1,t.sprite?this._loadSprite(t.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(t.glyphs);const r=Ve(this.stylesheet.layers);this._order=r.map((e=>e.id)),this._layers={},this._serializedLayers={};for(let i of r)i=e.createStyleLayer(i),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i,this._serializedLayers[i.id]=i.serialize(),this._updateLayerCount(i,!0);this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new k(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(t){this._spriteRequest=function(t,n,r){let i,o,a;const s=e.exported.devicePixelRatio>1?"@2x":"";let u=e.getJSON(n.transformRequest(n.normalizeSpriteURL(t,s,".json"),e.ResourceType.SpriteJSON),((e,t)=>{u=null,a||(a=e,i=t,l())})),c=e.getImage(n.transformRequest(n.normalizeSpriteURL(t,s,".png"),e.ResourceType.SpriteImage),((e,t)=>{c=null,a||(a=e,o=t,l())}));function l(){if(a)r(a);else if(i&&o){const t=e.exported.getImageData(o),n={};for(const r in i){const{width:o,height:a,x:s,y:u,sdf:c,pixelRatio:l,stretchX:f,stretchY:h,content:d}=i[r],p=new e.RGBAImage({width:o,height:a});e.RGBAImage.copy(t,p,{x:s,y:u},{x:0,y:0},{width:o,height:a}),n[r]={data:p,pixelRatio:l,sdf:c,stretchX:f,stretchY:h,content:d}}r(null,n)}}return{cancel(){u&&(u.cancel(),u=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,((t,n)=>{if(this._spriteRequest=null,t)this.fire(new e.ErrorEvent(t));else if(n)for(const e in n)this.imageManager.addImage(e,n[e]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new e.Event("data",{dataType:"style"}))}))}_validateLayer(t){const n=this.getSource(t.source);if(!n)return;const r=t.sourceLayer;r&&("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(r))&&this.fire(new e.ErrorEvent(new Error(`Source layer "${r}" does not exist on source "${n.id}" as specified by style layer "${t.id}"`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(e){const t=[];for(const n of e){const e=this._layers[n];"custom"!==e.type&&t.push(e.serialize())}return t}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;if(this.fog&&this.fog.hasTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(e){return!!this.terrain&&("function"==typeof e.isLayerDraped?e.isLayerDraped():$t[e.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(t){if(!this._loaded)return;const n=this._changed;if(this._changed){const e=Object.keys(this._updatedLayers),n=Object.keys(this._removedLayers);(e.length||n.length)&&this._updateWorkerLayers(e,n);for(const t in this._updatedSources){const e=this._updatedSources[t];"reload"===e?this._reloadSource(t):"clear"===e&&this._clearSource(t)}this._updateTilesForChangedImages();for(const r in this._updatedPaintProps)this._layers[r].updateTransitions(t);this.light.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this._resetUpdates()}const r={};for(const e in this._sourceCaches){const t=this._sourceCaches[e];r[e]=t.used,t.used=!1}for(const e of this._order){const n=this._layers[e];if(n.recalculate(t,this._availableImages),!n.isHidden(t.zoom)){const e=this._getLayerSourceCache(n);e&&(e.used=!0)}const r=this.map.painter;if(r){const e=n.getProgramIds();if(!e)continue;const i=n.getProgramConfiguration(t.zoom);for(const t of e)r.useProgram(t,i)}}for(const i in r){const t=this._sourceCaches[i];r[i]!==t.used&&t.getSource().fire(new e.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),n&&this.fire(new e.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const t in this._sourceCaches)this._sourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateWorkerLayers(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(n){if(this._checkLoaded(),qt(this,e.validateStyle(n)))return!1;(n=e.clone$1(n)).layers=Ve(n.layers);const r=function(e,n){if(!e)return[{command:Ke.setStyle,args:[n]}];let r=[];try{if(!t(e.version,n.version))return[{command:Ke.setStyle,args:[n]}];t(e.center,n.center)||r.push({command:Ke.setCenter,args:[n.center]}),t(e.zoom,n.zoom)||r.push({command:Ke.setZoom,args:[n.zoom]}),t(e.bearing,n.bearing)||r.push({command:Ke.setBearing,args:[n.bearing]}),t(e.pitch,n.pitch)||r.push({command:Ke.setPitch,args:[n.pitch]}),t(e.sprite,n.sprite)||r.push({command:Ke.setSprite,args:[n.sprite]}),t(e.glyphs,n.glyphs)||r.push({command:Ke.setGlyphs,args:[n.glyphs]}),t(e.transition,n.transition)||r.push({command:Ke.setTransition,args:[n.transition]}),t(e.light,n.light)||r.push({command:Ke.setLight,args:[n.light]}),t(e.fog,n.fog)||r.push({command:Ke.setFog,args:[n.fog]}),t(e.projection,n.projection)||r.push({command:Ke.setProjection,args:[n.projection]});const i={},o=[];!function(e,n,r,i){let o;for(o in n=n||{},e=e||{})e.hasOwnProperty(o)&&(n.hasOwnProperty(o)||He(o,r,i));for(o in n)n.hasOwnProperty(o)&&(e.hasOwnProperty(o)?t(e[o],n[o])||("geojson"===e[o].type&&"geojson"===n[o].type&&Ye(e,n,o)?r.push({command:Ke.setGeoJSONSourceData,args:[o,n[o].data]}):qe(o,n,r,i)):Ge(o,n,r))}(e.sources,n.sources,o,i);const a=[];e.layers&&e.layers.forEach((e=>{e.source&&i[e.source]?r.push({command:Ke.removeLayer,args:[e.id]}):a.push(e)}));let s=e.terrain;s&&i[s.source]&&(r.push({command:Ke.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),t(s,n.terrain)||r.push({command:Ke.setTerrain,args:[n.terrain]}),function(e,n,r){n=n||[];const i=(e=e||[]).map(Qe),o=n.map(Qe),a=e.reduce($e,{}),s=n.reduce($e,{}),u=i.slice(),c=Object.create(null);let l,f,h,d,p,y,m;for(l=0,f=0;l<i.length;l++)h=i[l],s.hasOwnProperty(h)?f++:(r.push({command:Ke.removeLayer,args:[h]}),u.splice(u.indexOf(h,f),1));for(l=0,f=0;l<o.length;l++)h=o[o.length-1-l],u[u.length-1-l]!==h&&(a.hasOwnProperty(h)?(r.push({command:Ke.removeLayer,args:[h]}),u.splice(u.lastIndexOf(h,u.length-f),1)):f++,y=u[u.length-l],r.push({command:Ke.addLayer,args:[s[h],y]}),u.splice(u.length-l,0,h),c[h]=!0);for(l=0;l<o.length;l++)if(h=o[l],d=a[h],p=s[h],!c[h]&&!t(d,p))if(t(d.source,p.source)&&t(d["source-layer"],p["source-layer"])&&t(d.type,p.type)){for(m in Xe(d.layout,p.layout,r,h,null,Ke.setLayoutProperty),Xe(d.paint,p.paint,r,h,null,Ke.setPaintProperty),t(d.filter,p.filter)||r.push({command:Ke.setFilter,args:[h,p.filter]}),t(d.minzoom,p.minzoom)&&t(d.maxzoom,p.maxzoom)||r.push({command:Ke.setLayerZoomRange,args:[h,p.minzoom,p.maxzoom]}),d)d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Xe(d[m],p[m],r,h,m.slice(6),Ke.setPaintProperty):t(d[m],p[m])||r.push({command:Ke.setLayerProperty,args:[h,m,p[m]]}));for(m in p)p.hasOwnProperty(m)&&!d.hasOwnProperty(m)&&"layout"!==m&&"paint"!==m&&"filter"!==m&&"metadata"!==m&&"minzoom"!==m&&"maxzoom"!==m&&(0===m.indexOf("paint.")?Xe(d[m],p[m],r,h,m.slice(6),Ke.setPaintProperty):t(d[m],p[m])||r.push({command:Ke.setLayerProperty,args:[h,m,p[m]]}))}else r.push({command:Ke.removeLayer,args:[h]}),y=u[u.lastIndexOf(h)+1],r.push({command:Ke.addLayer,args:[p,y]})}(a,n.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Ke.setStyle,args:[n]}]}return r}(this.serialize(),n).filter((e=>!(e.command in Xt)));if(0===r.length)return!1;const i=r.filter((e=>!(e.command in Yt)));if(i.length>0)throw new Error(`Unimplemented: ${i.map((e=>e.command)).join(", ")}.`);return r.forEach((e=>{"setTransition"!==e.command&&"setProjection"!==e.command&&this[e.command].apply(this,e.args)})),this.stylesheet=n,this._updateMapProjection(),!0}addImage(t,n){return this.getImage(t)?this.fire(new e.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(t,n),this._afterImageUpdated(t),this)}updateImage(e,t){this.imageManager.updateImage(e,t)}getImage(e){return this.imageManager.getImage(e)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t),this._afterImageUpdated(t),this):this.fire(new e.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(t){this._availableImages=this.imageManager.listImages(),this._changedImages[t]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new e.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(t,n,r={}){if(this._checkLoaded(),void 0!==this.getSource(t))throw new Error("There is already a source with this ID");if(!n.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(n).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(n.type)>=0&&this._validate(e.validateSource,`sources.${t}`,n,null,r))return;this.map&&this.map._collectResourceTiming&&(n.collectResourceTiming=!0);const i=Oe(t,n,this.dispatcher,this);i.setEventedParent(this,(()=>({isSourceLoaded:this._isSourceCacheLoaded(t),source:i.serialize(),sourceId:t})));const o=n=>{const r=(n?"symbol:":"other:")+t,o=this._sourceCaches[r]=new e.SourceCache(r,i,n);(n?this._symbolSourceCaches:this._otherSourceCaches)[t]=o,o.style=this,o.onAdd(this.map)};o(!1),"vector"!==n.type&&"geojson"!==n.type||o(!0),i.onAdd&&i.onAdd(this.map),this._changed=!0}removeSource(t){this._checkLoaded();const n=this.getSource(t);if(!n)throw new Error("There is no source with this ID");for(const i in this._layers)if(this._layers[i].source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while layer "${i}" is using it.`)));if(this.terrain&&this.terrain.get().source===t)return this.fire(new e.ErrorEvent(new Error(`Source "${t}" cannot be removed while terrain is using it.`)));const r=this._getSourceCaches(t);for(const i of r)delete this._sourceCaches[i.id],delete this._updatedSources[i.id],i.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i.getSource().id})),i.setEventedParent(null),i.clearTiles();return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],n.setEventedParent(null),n.onRemove&&n.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getSource(e).setData(t),this._changed=!0}getSource(e){const t=this._getSourceCache(e);return t&&t.getSource()}_getSources(){const e=[];for(const t in this._otherSourceCaches){const n=this._getSourceCache(t);n&&e.push(n.getSource())}return e}addLayer(t,n,r={}){this._checkLoaded();const i=t.id;if(this.getLayer(i))return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${i}" already exists on this map`)));let o;if("custom"===t.type){if(qt(this,e.validateCustomStyleLayer(t)))return;o=e.createStyleLayer(t)}else{if("object"==typeof t.source&&(this.addSource(i,t.source),t=e.clone$1(t),t=e.extend(t,{source:i})),this._validate(e.validateLayer,`layers.${i}`,t,{arrayIndex:-1},r))return;o=e.createStyleLayer(t),this._validateLayer(o),o.setEventedParent(this,{layer:{id:i}}),this._serializedLayers[o.id]=o.serialize(),this._updateLayerCount(o,!0)}const a=n?this._order.indexOf(n):this._order.length;if(n&&-1===a)return void this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`)));this._order.splice(a,0,i),this._layerOrderChanged=!0,this._layers[i]=o;const s=this._getLayerSourceCache(o);if(this._removedLayers[i]&&o.source&&s&&"custom"!==o.type){const e=this._removedLayers[i];delete this._removedLayers[i],e.type!==o.type?this._updatedSources[o.source]="clear":(this._updatedSources[o.source]="reload",s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(t,n){if(this._checkLoaded(),this._changed=!0,!this._layers[t])return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be moved.`)));if(t===n)return;const r=this._order.indexOf(t);this._order.splice(r,1);const i=n?this._order.indexOf(n):this._order.length;n&&-1===i?this.fire(new e.ErrorEvent(new Error(`Layer with id "${n}" does not exist on this map.`))):(this._order.splice(i,0,t),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(t){this._checkLoaded();const n=this._layers[t];if(!n)return void this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be removed.`)));n.setEventedParent(null),this._updateLayerCount(n,!1);const r=this._order.indexOf(t);this._order.splice(r,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[t]=n,delete this._layers[t],delete this._serializedLayers[t],delete this._updatedLayers[t],delete this._updatedPaintProps[t],n.onRemove&&n.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(e){return this._layers[e]}hasLayer(e){return e in this._layers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(t,n,r){this._checkLoaded();const i=this.getLayer(t);i?i.minzoom===n&&i.maxzoom===r||(null!=n&&(i.minzoom=n),null!=r&&(i.maxzoom=r),this._updateLayer(i)):this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(n,r,i={}){this._checkLoaded();const o=this.getLayer(n);if(o){if(!t(o.filter,r))return null==r?(o.filter=void 0,void this._updateLayer(o)):void(this._validate(e.validateFilter,`layers.${o.id}.filter`,r,{layerType:o.type},i)||(o.filter=e.clone$1(r),this._updateLayer(o)))}else this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be filtered.`)))}getFilter(t){const n=this.getLayer(t);return n&&e.clone$1(n.filter)}setLayoutProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getLayoutProperty(r),i)||(a.setLayoutProperty(r,i,o),this._updateLayer(a)):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(t,n){const r=this.getLayer(t);if(r)return r.getLayoutProperty(n);this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style.`)))}setPaintProperty(n,r,i,o={}){this._checkLoaded();const a=this.getLayer(n);a?t(a.getPaintProperty(r),i)||(a.setPaintProperty(r,i,o)&&this._updateLayer(a),this._changed=!0,this._updatedPaintProps[n]=!0):this.fire(new e.ErrorEvent(new Error(`The layer '${n}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(e,t){const n=this.getLayer(e);return n&&n.getPaintProperty(t)}setFeatureState(t,n){this._checkLoaded();const r=t.source,i=t.sourceLayer,o=this.getSource(r);if(!o)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const a=o.type;if("geojson"===a&&i)return void this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!i)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided.")));const s=this._getSourceCaches(r);for(const e of s)e.setFeatureState(i,t.id,n)}removeFeatureState(t,n){this._checkLoaded();const r=t.source,i=this.getSource(r);if(!i)return void this.fire(new e.ErrorEvent(new Error(`The source '${r}' does not exist in the map's style.`)));const o=i.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(n&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const s=this._getSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,n)}getFeatureState(t){this._checkLoaded();const n=t.source,r=t.sourceLayer,i=this.getSource(n);if(i){if("vector"!==i.type||r)return void 0===t.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(n)[0].getFeatureState(r,t.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error(`The source '${n}' does not exist in the map's style.`)))}getTransition(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const t={};for(const e in this._sourceCaches){const n=this._sourceCaches[e].getSource();t[n.id]||(t[n.id]=n.serialize())}return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:t,layers:this._serializeLayers(this._order)},(e=>void 0!==e))}_updateLayer(e){this._updatedLayers[e.id]=!0;const t=this._getLayerSourceCache(e);e.source&&!this._updatedSources[e.source]&&t&&"raster"!==t.getSource().type&&(this._updatedSources[e.source]="reload",t.pause()),this._changed=!0,e.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>"fill-extrusion"===this._layers[e].type,n={},r=[];for(let o=this._order.length-1;o>=0;o--){const i=this._order[o];if(t(i)){n[i]=o;for(const t of e){const e=t[i];if(e)for(const t of e)r.push(t)}}}r.sort(((e,t)=>t.intersectionZ-e.intersectionZ));const i=[];for(let o=this._order.length-1;o>=0;o--){const a=this._order[o];if(t(a))for(let e=r.length-1;e>=0;e--){const t=r[e].feature;if(n[t.layer.id]<o)break;i.push(t),r.pop()}else for(const t of e){const e=t[a];if(e)for(const t of e)i.push(t.feature)}}return i}queryRenderedFeatures(t,n,r){n&&n.filter&&this._validate(e.validateFilter,"queryRenderedFeatures.filter",n.filter,null,n);const i={};if(n&&n.layers){if(!Array.isArray(n.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const t of n.layers){const n=this._layers[t];if(!n)return this.fire(new e.ErrorEvent(new Error(`The layer '${t}' does not exist in the map's style and cannot be queried for features.`))),[];i[n.source]=!0}}const o=[];n.availableImages=this._availableImages;const a=n&&n.layers?n.layers.some((e=>{const t=this.getLayer(e);return t&&t.is3D()})):this.has3DLayers(),s=D.createFromScreenPoints(t,r);for(const e in this._sourceCaches){const t=this._sourceCaches[e].getSource().id;n.layers&&!i[t]||o.push(Re(this._sourceCaches[e],this._layers,this._serializedLayers,s,n,r,a,!!this.map._showQueryGeometry))}return this.placement&&o.push(function(e,t,n,r,i,o,a){const s={},u=o.queryRenderedSymbols(r),c=[];for(const l of Object.keys(u).map(Number))c.push(a[l]);c.sort(ze);for(const l of c){const n=l.featureIndex.lookupSymbolFeatures(u[l.bucketInstanceId],t,l.bucketIndex,l.sourceLayerIndex,i.filter,i.layers,i.availableImages,e);for(const e in n){const t=s[e]=s[e]||[],r=n[e];r.sort(((e,t)=>{const n=l.featureSortOrder;if(n){const r=n.indexOf(e.featureIndex);return n.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex}));for(const e of r)t.push(e)}}for(const l in s)s[l].forEach((t=>{const r=t.feature,i=n(e[l]).getFeatureState(r.layer["source-layer"],r.id);r.source=r.layer.source,r.layer["source-layer"]&&(r.sourceLayer=r.layer["source-layer"]),r.state=i}));return s}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),s.screenGeometry,n,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(o)}querySourceFeatures(t,n){n&&n.filter&&this._validate(e.validateFilter,"querySourceFeatures.filter",n.filter,null,n);const r=this._getSourceCaches(t);let i=[];for(const e of r)i=i.concat(Le(e,n));return i}addSourceType(e,t,n){return Jt.getSourceType(e)?n(new Error(`A source type called "${e}" already exists.`)):(Jt.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))}getLight(){return this.light.getLight()}setLight(e,n={}){this._checkLoaded();const r=this.light.getLight();let i=!1;for(const a in e)if(!t(e[a],r[a])){i=!0;break}if(!i)return;const o=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(e,n),this.light.updateTransitions(o)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(n,r=1){if(this._checkLoaded(),!n)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);if(1===r){if("object"==typeof n.source){const t="terrain-dem-src";this.addSource(t,n.source),n=e.clone$1(n),n=e.extend(n,{source:t})}if(this._validate(e.validateTerrain,"terrain",n))return}if(!this.terrain||this.terrain&&r!==this.terrain.drapeRenderMode)this._createTerrain(n,r);else{const r=this.terrain,i=r.get();for(const t of Object.keys(e.spec.terrain))!n.hasOwnProperty(t)&&e.spec.terrain[t].default&&(n[t]=e.spec.terrain[t].default);for(const e in n)if(!t(n[e],i[e])){r.set(n),this.stylesheet.terrain=n;const e=this._setTransitionParameters({duration:0});r.updateTransitions(e);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new B(e,this.map.transform);this.stylesheet.fog=e;const n=this._setTransitionParameters({duration:0});t.updateTransitions(n)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask((()=>{for(const e of this.map._markers)e._evaluateOpacity()}))}getFog(){return this.fog?this.fog.get():null}setFog(e){if(this._checkLoaded(),!e)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const n=this.fog,r=n.get();0===Object.keys(e).length&&n.set(e);for(const i in e)if(!t(e[i],r[i])){n.set(e),this.stylesheet.fog=e;const t=this._setTransitionParameters({duration:0});n.updateTransitions(t);break}}else this._createFog(e);this._markersNeedUpdate=!0}_setTransitionParameters(t){return{now:e.exported.now(),transition:e.extend(t,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const e=this._order.filter((e=>this.isLayerDraped(this._layers[e]))),t=this._order.filter((e=>!this.isLayerDraped(this._layers[e])));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const n=this.terrain=new I(e,t);this.stylesheet.terrain=e,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const r=this._setTransitionParameters({duration:0});n.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,n,r,i,o={}){return(!o||!1!==o.validate)&&qt(this,t.call(e.validateStyle,e.extend({key:n,style:this.serialize(),value:r,styleSpec:e.spec},i)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._layers)this._layers[e].setEventedParent(null);for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles(),this._sourceCaches[e].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(e){const t=this._getSourceCaches(e);for(const n of t)n.clearTiles()}_reloadSource(e){const t=this._getSourceCaches(e);for(const n of t)n.resume(),n.reload()}_reloadSources(){for(const e of this._getSources())e.reload&&e.reload()}_updateSources(e){for(const t in this._sourceCaches)this._sourceCaches[t].update(e)}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,n,r,i,o=!1){let a=!1,s=!1;const u={};for(const e of this._order){const n=this._layers[e];if("symbol"!==n.type)continue;if(!u[n.source]){const e=this._getLayerSourceCache(n);if(!e)continue;u[n.source]=e.getRenderableIds(!0).map((t=>e.getTileByID(t))).sort(((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)))}const r=this.crossTileSymbolIndex.addLayer(n,u[n.source],t.center.lng,t.projection);a=a||r}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),o=o||this._layerOrderChanged||0===r,this._layerOrderChanged&&this.fire(new e.Event("neworder")),(o||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.exported.now(),t.zoom))&&(this.pauseablePlacement=new jt(t,this._order,o,n,r,i,this.placement,this.fog&&t.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,u),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.exported.now()),s=!0),a&&this.pauseablePlacement.placement.setStale()),s||a)for(const e of this._order){const t=this._layers[e];"symbol"===t.type&&this.placement.updateLayerOpacities(t,u[t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.exported.now())}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,t,n){this.imageManager.getImages(t.icons,n),this._updateTilesForChangedImages();const r=e=>{e&&e.setDependencies(t.tileID.key,t.type,t.icons)};r(this._otherSourceCaches[t.source]),r(this._symbolSourceCaches[t.source])}getGlyphs(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)}getResource(t,n,r){return e.makeRequest(n,r)}_getSourceCache(e){return this._otherSourceCaches[e]}_getLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}_getSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const n=this._getSourceCaches(t);return 0===n.length?(this.fire(new e.ErrorEvent(new Error(`There is no source with ID '${t}'`))),!1):n.every((e=>e.loaded()))}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Jt.getSourceType=function(e){return Ce[e]},Jt.setSourceType=function(e,t){Ce[e]=t},Jt.registerForPluginStateChange=e.registerForPluginStateChange;var en="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#define EXTENT 8192.0\n#define HALF_PI PI/2.0\n#define QUARTER_PI PI/4.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0",tn="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",nn="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\nconst float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}\n#ifdef TERRAIN\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;\n#else\nuniform sampler2D u_dem;uniform sampler2D u_dem_prev;\n#endif\nuniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));\n#ifdef TERRAIN_DEM_NEAREST_FILTER\nreturn u_exaggeration*tl;\n#endif\nfloat tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nhighp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(\nunpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))\n);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nfloat tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;\n#else\nvec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);\n#endif\nreturn vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }\n#endif",rn="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",on="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif";let an={},sn={};const un=[];dn(en,un),dn(nn,un),dn(rn,un),dn(on,un),an=pn("",nn),sn=pn(on,rn);const cn=pn("\n#if __VERSION__ >=300\n#define varying in\n#define gl_FragColor glFragColor\n#define texture2D texture\n#define textureCube texture\nout vec4 glFragColor;\n#endif\nhighp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}","\n#if __VERSION__ >=300\n#define attribute in\n#define varying out\n#define texture2D texture\n#endif\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered."),ln=en,fn="\n#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif";var hn={background:pn("uniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nvarying vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform vec4 u_color;varying vec4 v_color;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(u_color);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),backgroundPattern:pn("uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),circle:pn("varying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\ngl_FragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec3 v_data;varying float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}"),clippingMask:pn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:pn("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nvarying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),heatmapTexture:pn("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:pn("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}","attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:pn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:pn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;\n#endif\nvarying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}"),fill:pn("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutline:pn("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillOutlinePattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),fillExtrusion:pn("varying vec4 v_color;\n#ifdef RENDER_SHADOWS\nvarying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\nvoid main() {\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvec3 normal=v_normal;\n#endif\nfloat z;vec4 color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);\n#else\ncolor=v_color;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef ZERO_ROOF_RADIUS\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#endif\ncolor.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec4 v_color;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;\n#endif\n#ifdef ZERO_ROOF_RADIUS\nvarying vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nvarying highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)\nv_normal=normal;\n#endif\nbase=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele;vec3 pos;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nv_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting(color,NdotL);\n#else\nv_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_color*=u_opacity;\n#ifdef ZERO_ROOF_RADIUS\nv_roof_color=vec4(0.0,0.0,0.0,1.0);\n#ifdef LIGHTING_3D_MODE\nv_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));\n#else\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));\n#endif\nv_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),fillExtrusionPattern:pn("uniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,v_NdotL)*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\ngl_FragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\nvarying vec2 v_pos;varying vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;varying vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nvarying float v_NdotL;\n#endif\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_NdotL=NdotL;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif \n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}"),hillshadePrepare:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nreturn texture2D(u_image,coord).a/4.0;\n#else\nvec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;\n#endif\n}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:pn("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\ngl_FragColor=apply_lighting(gl_FragColor);\n#endif\n#ifdef FOG\ngl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),line:pn("uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\nuniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture2D(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trimmed=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef RENDER_LINE_ALPHA_DISCARD\nif (alpha < u_alpha_discard_threshold) {discard;}\n#endif\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);\n#ifdef RENDER_LINE_BORDER_AUTO\nfloat Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}\n#else\nout_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);\n#endif\n}\n#endif\ngl_FragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define EXTRUDE_SCALE 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nattribute highp vec4 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nattribute float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nfloat a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);\n#else\nv_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),linePattern:pn("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting(color);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern\n#pragma mapbox: define lowp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#else\nv_gamma_scale=1.0;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}"),raster:pn("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply(out_color,v_fog_pos));\n#endif\ngl_FragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}"),symbolIcon:pn("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}"),symbolSDF:pn("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);\n#endif\nvec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nvec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}"),symbolTextAndIcon:pn("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;\n#ifdef PROJECTION_GLOBE_VIEW\nattribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nvarying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\nfloat occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#else\ngl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));\n#endif\nfloat gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;\n#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)\nprojection_transition_fade=1.0-step(EPSILON,u_zoom_transition);\n#endif\nv_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}"),terrainRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nvarying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nvoid main() {vec4 color=texture2D(u_image0,v_pos0);\n#ifdef RENDER_SHADOWS\ncolor.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;\n#ifdef FOG\nvarying float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;\n#endif\nconst float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;\n#ifdef TERRAIN_WIREFRAME\nelevation+=wireframeOffset;\n#endif\nv_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;\n#endif\n}"),terrainDepth:pn("#ifdef GL_ES\nprecision highp float;\n#endif\nvarying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}","uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:pn("\nvarying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxGradient:pn("varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}",tn),skyboxCapture:pn("\nvarying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;\n#ifdef GL_ES\nprecision highp float;\n#endif\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}","attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:pn("uniform sampler2D u_image0;varying vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nvec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#else\ncolor=texture2D(u_image0,v_pos0);\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ngl_FragColor=color;\n#ifdef TERRAIN_WIREFRAME\ngl_FragColor=vec4(1.0,0.0,0.0,0.8);\n#endif\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nattribute vec3 a_globe_pos;attribute vec2 a_uv;\n#else\nattribute vec2 a_pos;\n#endif\nvarying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);\n#ifdef TERRAIN_WIREFRAME\nheight+=wireframeOffset;\n#endif\nglobe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}"),globeAtmosphere:pn("uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:\n(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:\nuv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}","attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}")};function dn(e,t){const n=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of n)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=r.split(" ");for(const n of e)t.includes(n)||t.push(n)}}function pn(e,t){const n=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,r=t.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),i={},o=[...un];return dn(e,o),dn(t,o),{fragmentSource:e=e.replace(n,((e,t,n,r,o)=>(i[o]=!0,"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = u_${o};\n#endif\n`))),vertexSource:t=t.replace(n,((e,t,n,r,o)=>{const a="float"===r?"vec2":"vec4",s=o.match(/color/)?"color":a;return i[o]?"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\nvarying ${n} ${r} ${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:"define"===t?`\n#ifndef HAS_UNIFORM_u_${o}\nuniform lowp float u_${o}_t;\nattribute ${n} ${a} a_${o};\n#else\nuniform ${n} ${r} u_${o};\n#endif\n`:"vec4"===s?`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = a_${o};\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${o}\n    ${n} ${r} ${o} = unpack_mix_${s}(a_${o}, u_${o}_t);\n#else\n    ${n} ${r} ${o} = u_${o};\n#endif\n`})),staticAttributes:r,usedDefines:o}}class yn{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,n,r,i,o,a){this.context=e;let s=this.boundPaintVertexBuffers.length!==r.length;for(let c=0;!s&&c<r.length;c++)this.boundPaintVertexBuffers[c]!==r[c]&&(s=!0);let u=this.boundDynamicVertexBuffers.length!==a.length;for(let c=0;!u&&c<a.length;c++)this.boundDynamicVertexBuffers[c]!==a[c]&&(u=!0);if(!e.extVertexArrayObject||!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||s||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==o)this.freshBind(t,n,r,i,o,a);else{e.bindVertexArrayOES.set(this.vao);for(const e of a)e&&e.bind();i&&i.dynamicDraw&&i.bind()}}freshBind(e,t,n,r,i,o){let a;const s=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),a=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffers=o;else{a=u.currentNumAttributes||0;for(let e=s;e<a;e++)c.disableVertexAttribArray(e)}t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(const l of n)l.enableAttributes(c,e),l.bind(),l.setVertexAttribPointers(c,e,i);for(const l of o)l&&(l.enableAttributes(c,e),l.bind(),l.setVertexAttribPointers(c,e,i));r&&r.bind(),u.currentNumAttributes=s}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function mn(t,n){const r=Math.pow(2,n.canonical.z),i=n.canonical.y;return[new e.MercatorCoordinate(0,i/r).toLngLat().lat,new e.MercatorCoordinate(0,(i+1)/r).toLngLat().lat]}function gn(t,n,r,i,o,a,s){const u=t.context,c=u.gl,l=r.fbo;if(!l)return;t.prepareDrawTile();const f=t.useProgram("hillshade");u.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,l.colorAttachment.get());const h=((e,t,n,r)=>{const i=n.paint.get("hillshade-shadow-color"),o=n.paint.get("hillshade-highlight-color"),a=n.paint.get("hillshade-accent-color");let s=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(s-=e.transform.angle);const u=!e.options.moving;return{u_matrix:r||e.transform.calculateProjMatrix(t.tileID.toUnwrapped(),u),u_image:0,u_latrange:mn(0,t.tileID),u_light:[n.paint.get("hillshade-exaggeration"),s],u_shadow:i,u_highlight:o,u_accent:a}})(t,r,i,t.terrain?n.projMatrix:null);t.prepareDrawProgram(u,f,n.toUnwrapped());const{tileBoundsBuffer:d,tileBoundsIndexBuffer:p,tileBoundsSegments:y}=t.getTileBoundsBuffers(r);f.draw(u,c.TRIANGLES,o,a,s,e.CullFaceMode.disabled,h,i.id,d,p,y)}function vn(t,n,r){if(!n.needsDEMTextureUpload)return;const i=t.context,o=i.gl;i.pixelStoreUnpackPremultiplyAlpha.set(!1),n.demTexture=n.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();n.demTexture?n.demTexture.update(a,{premultiply:!1}):n.demTexture=new e.Texture(i,a,o.RGBA,{premultiply:!1}),n.needsDEMTextureUpload=!1}function bn(t,n,r,i,o,a){const s=t.context,u=s.gl;if(!n.dem)return;const c=n.dem;if(s.activeTexture.set(u.TEXTURE1),vn(t,n,c),!n.demTexture)return;n.demTexture.bind(u.NEAREST,u.CLAMP_TO_EDGE);const l=c.dim;s.activeTexture.set(u.TEXTURE0);let f=n.fbo;if(!f){const t=new e.Texture(s,{width:l,height:l,data:null},u.RGBA);t.bind(u.LINEAR,u.CLAMP_TO_EDGE),f=n.fbo=s.createFramebuffer(l,l,!0),f.colorAttachment.set(t.texture)}s.bindFramebuffer.set(f.framebuffer),s.viewport.set([0,0,l,l]);const{tileBoundsBuffer:h,tileBoundsIndexBuffer:d,tileBoundsSegments:p}=t.getMercatorTileBoundsBuffers();t.useProgram("hillshadePrepare").draw(s,u.TRIANGLES,i,o,a,e.CullFaceMode.disabled,((t,n)=>{const r=n.stride,i=e.create();return e.ortho(i,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(i,i,[0,-e.EXTENT,0]),{u_matrix:i,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ,u_unpack:n.unpackVector}})(n.tileID,c),r.id,h,d,p),n.needsHillshadePrepare=!1}const _n=t=>({u_matrix:new e.UniformMatrix4f(t),u_image0:new e.Uniform1i(t),u_skirt_height:new e.Uniform1f(t)}),wn=(e,t)=>({u_matrix:e,u_image0:0,u_skirt_height:t}),xn=(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:n,u_zoom_transition:i,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:u,u_frustum_bl:c,u_globe_pos:l,u_globe_radius:f,u_viewport:h,u_grid_matrix:p?Float32Array.from(p):new Float32Array(9),u_skirt_height:d});function kn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const An=new class{constructor(){this.operations={}}newMorphing(e,t,n,r,i){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==n.tileID.key&&(t.queued=n)}else this.operations[e]={startTime:r,phase:0,duration:i,from:t,to:n,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const n=this.operations[t];for(n.phase=(e-n.startTime)/n.duration;n.phase>=1||!this._validOp(n);)if(!this._nextOp(n,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},En={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function In(e){return 6*Math.pow(1.5,22-e)}function Sn(e,t){const n=1<<e.z;return!t&&(0===e.x||e.x===n-1)||0===e.y||e.y===n-1}const Tn=e=>({u_matrix:e});function Mn(t,n,r,i,o){if(o>0){const a=e.exported.now(),s=(a-t.timeAdded)/o,u=n?(a-n.timeAdded)/o:-1,c=r.getSource(),l=i.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!n||Math.abs(n.tileID.overscaledZ-l)>Math.abs(t.tileID.overscaledZ-l),h=f&&t.refreshedUponExpiration?1:e.clamp(f?s:1-u,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),n?{opacity:1,mix:1-h}:{opacity:h,mix:0}}return{opacity:1,mix:0}}class Pn extends e.SourceCache{constructor(e){const t={type:"raster-dem",maxzoom:e.transform.maxZoom},n=new C(je(),null),r=Oe("mock-dem",t,n,e.style);super("mock-dem",r,!1),r.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Bn extends e.SourceCache{constructor(e){const t=Oe("proxy",{type:"geojson",maxzoom:e.transform.maxZoom},new C(je(),null),e.style);super("proxy",t,!1),t.setEventedParent(this),this.map=this.getSource().map=e,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(t,n,r){if(t.freezeTileCoverage)return;this.transform=t;const i=t.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce(((n,r)=>{if(n[r.key]="",!this._tiles[r.key]){const n=new e.Tile(r,this._source.tileSize*r.overscaleFactor(),t.tileZoom);n.state="loaded",this._tiles[r.key]=n}return n}),{});for(const e in this._tiles)e in i||(this.freeFBO(e),this._tiles[e].unloadVectorData(),delete this._tiles[e])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const n=Object.values(t);this.renderCachePool.push(...n),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach((e=>e.fb.destroy())),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Cn extends e.OverscaledTileID{constructor(e,t,n){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=n}}class On extends e.Elevation{constructor(t,n){super(),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,i,o]=function(t){const n=new e.StructArrayLayout2i4,r=new e.StructArrayLayout3ui6,i=131;n.reserve(17161),r.reserve(33800);const o=e.EXTENT/128,a=e.EXTENT+o/2,s=a+o;for(let c=-o;c<s;c+=o)for(let t=-o;t<s;t+=o){const r=t<0||t>a||c<0||c>a?24575:0,i=e.clamp(Math.round(t),0,e.EXTENT),o=e.clamp(Math.round(c),0,e.EXTENT);n.emplaceBack(i+r,o)}const u=(e,t)=>{const n=t*i+e;r.emplaceBack(n+1,n,n+i),r.emplaceBack(n+i,n+i+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)u(t,e);return[0,129].forEach((e=>{for(let t=0;t<130;t++)u(t,e),u(e,t)})),[n,r,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.posAttributes.members),this.gridIndexBuffer=a.createIndexBuffer(i),this.gridSegments=e.SegmentVector.simpleSegment(0,0,r.length,i.length),this.gridNoSkirtSegments=e.SegmentVector.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Bn(n.map),this.orthoMatrix=e.create(),e.ortho(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.EXTENT,0,e.EXTENT,0,1);const s=a.gl;this._overlapStencilMode=new e.StencilMode({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=n,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Pn(n.map)}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),e.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=e,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",(()=>{this._clearLineLayersFromRenderCache()}))}update(t,n,r){if(t&&t.terrain){this._style!==t&&(this.style=t),this.enabled=!0;const i=t.terrain.properties;this.sourceCache=0===t.terrain.drapeRenderMode?this._mockSourceCache:t._getSourceCache(i.get("source")),this._exaggeration=i.get("exaggeration");const o=()=>{this.sourceCache.used&&e.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const t=this.getScaledDemTileSize();this.sourceCache.update(n,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,o(),this._initializing=!0),o(),n.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(n),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const t=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||100!==t.efficiency&&e.warnOnce(`Terrain render cache efficiency is not optimal (${t.efficiency}%) and performance\n                may be affected negatively, consider placing all background, fill and line layers before layer\n                with id '${t.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._sourceCaches)this._style._sourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach((e=>e.fb.destroy())),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const n=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const i=this.proxyCoords=n.getIds().map((e=>{const t=n.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t}));!function(t,n){const r=n.transform.pointCoordinate(n.transform.getCameraPoint()),i=new e.pointGeometry(r.x,r.y);t.sort(((t,n)=>{if(n.overscaledZ-t.overscaledZ)return n.overscaledZ-t.overscaledZ;const r=new e.pointGeometry(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.pointGeometry(n.canonical.x+(1<<n.canonical.z)*n.wrap,n.canonical.y),a=i.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)}))}(i,this.painter),this._previousZoom=r.zoom;const o=this.proxyToSource||{};this.proxyToSource={},i.forEach((e=>{this.proxyToSource[e.key]={}})),this.terrainTileForTile={};const a=this._style._sourceCaches;for(const e in a){const n=a[e];if(!n.used)continue;if(n!==this.sourceCache&&this.resetTileLookupCache(n.id),this._setupProxiedCoordsForOrtho(n,t[e],o),n.usedForTerrain)continue;const r=t[e];n.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[n.id]=i.map((e=>new Cn(e,e.key,this.orthoMatrix))),this._assignTerrainTiles(i),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1,this._updateTimestamp=e.exported.now();const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const n=t.tileID.key;n in s||(this._visibleDemTiles.push(t),s[n]=n)}}_assignTerrainTiles(e){this._initializing||e.forEach((e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)}))}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const n in this.terrainTileForTile){const r=this.terrainTileForTile[n],i=r.dem;!i||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),vn(this.painter,r,i))}}_prepareDemTileUniforms(e,t,n,r){if(!t||null==t.demTexture)return!1;const i=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-i.z),a=r||"";return n[`u_dem_tl${a}`]=[i.x*o%1,i.y*o%1],n[`u_dem_scale${a}`]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const t=this.painter.context,n=t.gl;if(!this._emptyDepthBufferTexture){const r=new e.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new e.Texture(t,r,n.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let e=0;const t=this._visibleDemTiles.reduce(((t,n)=>{if(!n.dem)return t;const r=n.dem.tree.minimums[0];return r>0&&e++,t+r}),0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,n=t.gl;t.activeTexture.set(n.TEXTURE2);const r=this._getLoadedAreaMinimum(),i=new e.RGBAImage({width:1,height:1},new Uint8Array(e.DEMData.pack(r,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(i,{premultiply:!1}):o=this._emptyDEMTexture=new e.Texture(t,i,n.RGBA,{premultiply:!1}),o}setupElevationDraw(t,n,r){const i=this.painter.context,o=i.gl,a=(s=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:e.DEMData.getUnpackVector(s),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var s;a.u_dem_size=this.sourceCache.getSource().tileSize,a.u_exaggeration=this.exaggeration();let u=null,c=null,l=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,n=r.morphing.dstDemTile;l=r.morphing.phase,e&&n&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(c=e),this._prepareDemTileUniforms(t,n,a)&&(u=n))}if(c&&u?(i.activeTexture.set(o.TEXTURE2),u.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),i.activeTexture.set(o.TEXTURE4),c.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE,o.NEAREST),a.u_dem_lerp=l):(u=this.terrainTileForTile[t.tileID.key],i.activeTexture.set(o.TEXTURE2),(this._prepareDemTileUniforms(t,u,a)?u.demTexture:this.emptyDEMTexture).bind(o.NEAREST,o.CLAMP_TO_EDGE)),i.activeTexture.set(o.TEXTURE3),r&&r.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),this._depthFBO&&(a.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),a.u_depth_size_inv=[1,1]),r&&r.useMeterToDem&&u){const t=(1<<u.tileID.canonical.z)*e.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),n.setTerrainUniformValues(i,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);n.setGlobeUniformValues(i,e)}}globeUniformValues(t,n,r){const i=t.projection;return{u_tile_tl_up:i.upVector(n,0,0),u_tile_tr_up:i.upVector(n,e.EXTENT,0),u_tile_br_up:i.upVector(n,e.EXTENT,e.EXTENT),u_tile_bl_up:i.upVector(n,0,e.EXTENT),u_tile_up_scale:r?e.globeMetersToEcef(1):i.upVectorScale(n,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const n=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),n.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,n,r,i,o){if("globe"===t.transform.projection.name)!function(t,n,r,i,o){const a=t.context,s=a.gl;let u,c;const l=t.options.showTerrainWireframe?2:0,f=t.transform,h=e.globeUseCustomAntiAliasing(t,a,f),d=(e,n)=>{if(c===e)return;const r=[En[e],"PROJECTION_GLOBE_VIEW"];h&&r.push("CUSTOM_ANTIALIASING"),n&&r.push(En[l]),u=t.useProgram("globeRaster",null,r),c=e},p=t.colorModeForRenderPass(),y=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);An.update(o);const m=e.calculateGlobeMercatorMatrix(f),g=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],v=l?[!1,!0]:[!1],b=t.globeSharedBuffers,_=[f.width*e.exported.devicePixelRatio,f.height*e.exported.devicePixelRatio],w=Float32Array.from(f.globeMatrix),x={useDenormalizedUpVectorScale:!0};if(v.forEach((l=>{const f=t.transform,h=In(f.zoom)*n.exaggeration();c=-1;const v=l?s.LINES:s.TRIANGLES;for(const c of i){const i=r.getTile(c),k=e.StencilMode.disabled,A=n.prevTerrainTileForTile[c.key],E=n.terrainTileForTile[c.key];kn(A,E)&&An.newMorphing(c.key,A,E,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const I=An.getMorphValuesForProxy(c.key),S=I?1:0;I&&e.extend$1(x,{morphing:{srcDemTile:I.from,dstDemTile:I.to,phase:e.easeCubicInOut(I.phase)}});const T=e.tileCornersToBounds(c.canonical),M=e.getLatitudinalLod(T.getCenter().lat),P=e.getGridMatrix(c.canonical,T,M,f.worldSize/f._pixelsPerMercatorPixel),B=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),C=xn(f.projMatrix,w,m,B,e.globeToMercatorTransition(f.zoom),g,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,_,h,P);if(d(S,l),n.setupElevationDraw(i,u,x),t.prepareDrawProgram(a,u,c.toUnwrapped()),b){const[n,r,i]=l?b.getWirefameBuffers(t.context,M):b.getGridBuffers(M,0!==h);u.draw(a,v,y,k,p,e.CullFaceMode.backCCW,C,"globe_raster",n,r,i)}}})),b){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&o.push("CUSTOM_ANTIALIASING"),u=t.useProgram("globeRaster",null,o);for(const c of i){const{x:i,y:o,z:l}=c.canonical,h=0===o,d=o===(1<<l)-1,[m,v,w,k]=b.getPoleBuffers(l);if(k&&(h||d)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let b=e.globePoleMatrixForTile(l,i,f);const A=e.globeNormalizeECEF(e.globeTileBounds(c.canonical)),E=(t,n)=>t.draw(a,s.TRIANGLES,y,e.StencilMode.disabled,p,e.CullFaceMode.disabled,xn(f.projMatrix,b,b,A,0,g,f.frustumCorners.TL,f.frustumCorners.TR,f.frustumCorners.BR,f.frustumCorners.BL,f.globeCenterInViewSpace,f.globeRadius,_,0),"globe_pole_raster",n,w,k);n.setupElevationDraw(o,u,x),t.prepareDrawProgram(a,u,c.toUnwrapped()),h&&E(u,m),d&&(b=e.scale(e.create(),b,[1,-1,1]),E(u,v))}}}}(t,n,r,i,o);else{const a=t.context,s=a.gl;let u,c;const l=t.options.showTerrainWireframe?2:0,f=(e,n)=>{if(c===e)return;const r=[En[e]];n&&r.push(En[l]),u=t.useProgram("terrainRaster",null,r),c=e},h=t.colorModeForRenderPass(),d=new e.DepthMode(s.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);An.update(o);const p=t.transform,y=In(p.zoom)*n.exaggeration();(l?[!1,!0]:[!1]).forEach((l=>{c=-1;const m=l?s.LINES:s.TRIANGLES,[g,v]=l?n.getWirefameBuffer():[n.gridIndexBuffer,n.gridSegments];for(const c of i){const i=r.getTile(c),b=e.StencilMode.disabled,_=n.prevTerrainTileForTile[c.key],w=n.terrainTileForTile[c.key];kn(_,w)&&An.newMorphing(c.key,_,w,o,250),a.activeTexture.set(s.TEXTURE0),i.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE,s.LINEAR_MIPMAP_NEAREST);const x=An.getMorphValuesForProxy(c.key),k=x?1:0;let A;x&&(A={morphing:{srcDemTile:x.from,dstDemTile:x.to,phase:e.easeCubicInOut(x.phase)}});const E=wn(c.projMatrix,Sn(c.canonical,p.renderWorldCopies)?y/10:y);f(k,l),n.setupElevationDraw(i,u,A),t.prepareDrawProgram(a,u,c.toUnwrapped()),u.draw(a,m,d,b,h,e.CullFaceMode.backCCW,E,"terrain_raster",n.gridBuffer,g,v)}}))}}(n,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,n.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const n=this.painter,r=this.painter.context,i=this.proxySourceCache,o=this.proxiedCoords[i.id],a=this._drapedRenderBatches.shift(),s=[],u=n.style.order;let c=0;for(const l of o){const o=i.getTileByID(l.proxyTileKey),f=i.proxyCachedFBO[l.key]?i.proxyCachedFBO[l.key][t]:void 0,h=void 0!==f?i.renderCache[f]:this.pool[c++],d=void 0!==f;if(o.texture=h.tex,d&&!h.dirty){s.push(o.tileID);continue}let p;r.bindFramebuffer.set(h.fb.framebuffer),this.renderedToTile=!1,h.dirty&&(r.clear({color:e.Color.transparent,stencil:0}),h.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=n.style._layers[u[e]];if(t.isHidden(n.transform.zoom))continue;const i=n.style._getLayerSourceCache(t),o=i?this.proxyToSource[l.key][i.id]:[l];if(!o)continue;const a=o;r.viewport.set([0,0,h.fb.width,h.fb.height]),p!==(i?i.id:null)&&(this._setupStencil(h,o,t,i),p=i?i.id:null),n.renderLayer(n,i,t,a)}this.renderedToTile?(h.dirty=!0,s.push(o.tileID)):d||--c,5===c&&(c=0,this.renderToBackBuffer(s))}return this.renderToBackBuffer(s),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,n.width,n.height]),a.end+1}postRender(){}renderCacheEfficiency(e){const t=e.order.length;if(0===t)return{efficiency:100};let n,r=0,i=0,o=!1;for(let a=0;a<t;++a){const t=e._layers[e.order[a]];this._style.isLayerDraped(t)?(o&&++r,++i):o||(o=!0,n=t.id)}return 0===i?{efficiency:100}:{efficiency:100*(1-r/i),firstUndrapedLayer:n}}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter((e=>e.dem)).forEach((t=>{e=Math.min(e,t.dem.tree.minimums[0])})),0===e?e:(e-30)*this._exaggeration}raycast(e,t,n){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter((e=>e.dem)).map((r=>{const i=r.tileID,o=1<<i.overscaledZ,{x:a,y:s}=i.canonical,u=a/o,c=(a+1)/o,l=s/o,f=(s+1)/o;return{minx:u,miny:l,maxx:c,maxy:f,t:r.dem.tree.raycastRoot(u,l,c,f,e,t,n),tile:r}}));r.sort(((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE)));for(const i of r){if(null==i.t)return null;const r=i.tile.dem.tree.raycast(i.minx,i.miny,i.maxx,i.maxy,e,t,n);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,n=t.gl,r=this.drapeBufferSize;t.activeTexture.set(n.TEXTURE0);const i=new e.Texture(t,{width:r[0],height:r[1],data:null},n.RGBA);i.bind(n.LINEAR,n.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!1);return o.colorAttachment.set(i.texture),o.depthAttachment=new Ae(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&!t.extTextureFilterAnisotropicForceOff&&n.texParameterf(n.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:i,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const e in this._style._sourceCaches)if(this._style._sourceCaches[e].hasTransition())return!0;return this._style.order.some((e=>{const t=this._style._layers[e],n=t.isHidden(this.painter.transform.zoom);return"custom"===t.type?!n&&t.shouldRedrape():!n&&t.hasTransition()}))}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style._getSources())if(e instanceof Se){t=!0;break}if(!t)return;const n={};for(let r=0;r<this._style.order.length;++r){const t=this._style._layers[this._style.order[r]],i=this._style._getLayerSourceCache(t);if(i&&!n[i.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ZoomDependentExpression){n[i.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][i.id];if(t)for(const e of t)this._clearRenderCacheForTile(i.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const n in this._style._sourceCaches)if(this._style._sourceCaches[n]._source instanceof Te){e=!0;break}if(!e)return;const t={};for(let n=0;n<this._style.order.length;++n){const e=this._style._layers[this._style.order[n]],r=this._style._getLayerSourceCache(e);if(!r||t[r.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const i=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=Mn(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,i);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){const e=this._style.order,t=e.length;if(0===t)return;const n=[];let r,i=0,o=this._style._layers[e[i]];for(;!this._style.isLayerDraped(o)&&o.isHidden(this.painter.transform.zoom)&&++i<t;)o=this._style._layers[e[i]];for(;i<t;++i){const t=this._style._layers[e[i]];t.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(t)?void 0===r&&(r=i):void 0!==r&&(n.push({start:r,end:i-1}),r=void 0))}void 0!==r&&n.push({start:r,end:i-1}),this._drapedRenderBatches=n}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let n=0;n<e.length;++n){const r=Object.values(e[n]);t.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const n=this.proxyCoords,r=this._tilesDirty;for(let o=n.length-1;o>=0;o--){const i=n[o];if(t.getTileByID(i.key),void 0!==t.proxyCachedFBO[i.key]){const n=e[i.key],o=this.proxyToSource[i.key];let a=0;for(const e in o){const t=o[e],i=n[e];if(!i||i.length!==t.length||t.some(((t,n)=>t!==i[n]||r[e]&&r[e].hasOwnProperty(t.key)))){a=-1;break}++a}for(const e in t.proxyCachedFBO[i.key])t.renderCache[t.proxyCachedFBO[i.key][e]].dirty=a<0||a!==Object.values(n).length}}const i=[...this._drapedRenderBatches];i.sort(((e,t)=>t.end-t.start-(e.end-e.start)));for(const o of i)for(const e of n){if(t.proxyCachedFBO[e.key])continue;let n=t.renderCachePool.pop();void 0===n&&t.renderCache.length<50&&(n=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==n&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][o.start]=n,t.renderCache[n].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,n,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const i=this.painter.context,o=i.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(n.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(i.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,n.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(t){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[t.key]),this._overlapStencilMode):e.StencilMode.disabled}_renderTileClippingMasks(t,n){const r=this.painter,i=this.painter.context,o=i.gl;r._tileClippingMaskIDs={},i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=r.useProgram("clippingMask");for(const s of t){const t=r._tileClippingMaskIDs[s.key]=--n;a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},t,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tn(s.projMatrix),"$clipping",r.tileExtentBuffer,r.quadTriangleIndexBuffer,r.tileExtentSegments)}}pointCoordinate(t){const n=this.painter.transform;if(t.x<0||t.x>n.width||t.y<0||t.y>n.height)return null;const r=[t.x,t.y,1,1];e.transformMat4$1(r,r,n.pixelMatrixInverse),e.scale$1(r,r,1/r[3]),r[0]/=n.worldSize,r[1]/=n.worldSize;const i=n._camera.position,o=e.mercatorZfromAltitude(1,n.center.lat),a=[i[0],i[1],i[2]/o,0],s=e.subtract([],r.slice(0,3),a);e.normalize(s,s);const u=this.raycast(a,s,this._exaggeration);return null!==u&&u?(e.scaleAndAdd(a,a,s,u),a[3]=a[2],a[2]*=o,a):null}drawDepth(){const t=this.painter,n=t.context,r=this.proxySourceCache,i=Math.ceil(t.width),o=Math.ceil(t.height);if(!this._depthFBO||this._depthFBO.width===i&&this._depthFBO.height===o||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const t=n.gl,r=n.createFramebuffer(i,o,!0);n.activeTexture.set(t.TEXTURE0);const a=new e.Texture(n,{width:i,height:o,data:null},t.RGBA);a.bind(t.NEAREST,t.CLAMP_TO_EDGE),r.colorAttachment.set(a.texture);const s=n.createRenderbuffer(n.gl.DEPTH_COMPONENT16,i,o);r.depthAttachment.set(s),this._depthFBO=r,this._depthTexture=a}n.bindFramebuffer.set(this._depthFBO.framebuffer),n.viewport.set([0,0,i,o]),function(t,n,r,i){if("globe"===t.transform.projection.name)return;const o=t.context,a=o.gl;o.clear({depth:1});const s=t.useProgram("terrainDepth"),u=new e.DepthMode(a.LESS,e.DepthMode.ReadWrite,t.depthRangeFor3D);for(const c of i){const t=r.getTile(c),i=wn(c.projMatrix,0);n.setupElevationDraw(t,s),s.draw(o,a.TRIANGLES,u,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.backCCW,i,"terrain_depth",n.gridBuffer,n.gridIndexBuffer,n.gridNoSkirtSegments)}}(t,this,r,this.proxyCoords)}_setupProxiedCoordsForOrtho(e,t,n){if(e.getSource()instanceof Be)return this._setupProxiedCoordsForImageSource(e,t,n);this._findCoveringTileCache[e.id]=this._findCoveringTileCache[e.id]||{};const r=this.proxiedCoords[e.id]=[],i=this.proxyCoords;for(let a=0;a<i.length;a++){const t=i[a],o=this._findTileCoveringTileID(t,e);if(o){const i=this._createProxiedId(t,o,n[t.key]&&n[t.key][e.id]);r.push(i),this.proxyToSource[t.key][e.id]=[i]}}let o=!1;for(let a=0;a<t.length;a++){const i=e.getTile(t[a]);if(!i||!i.hasData())continue;const s=this._findTileCoveringTileID(i.tileID,this.proxySourceCache);if(s&&s.tileID.canonical.z!==i.tileID.canonical.z){const t=this.proxyToSource[s.tileID.key][e.id],a=this._createProxiedId(s.tileID,i,n[s.tileID.key]&&n[s.tileID.key][e.id]);t?t.splice(t.length-1,0,a):this.proxyToSource[s.tileID.key][e.id]=[a],r.push(a),o=!0}}this._sourceTilesOverlap[e.id]=o}_setupProxiedCoordsForImageSource(t,n,r){if(!t.getSource().loaded())return;const i=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=new e.pointGeometry(a.tileID.x,a.tileID.y)._div(1<<a.tileID.z),u=a.coordinates.map(e.MercatorCoordinate.fromLngLat).reduce(((e,t)=>(e.min.x=Math.min(e.min.x,t.x-s.x),e.min.y=Math.min(e.min.y,t.y-s.y),e.max.x=Math.max(e.max.x,t.x-s.x),e.max.y=Math.max(e.max.y,t.y-s.y),e)),{min:new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),c=(t,n)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),i=t.canonical.y/(1<<t.canonical.z),o=e.EXTENT/(1<<t.canonical.z),a=n.wrap+n.canonical.x/(1<<n.canonical.z),s=n.canonical.y/(1<<n.canonical.z);return r+o<a+u.min.x||r>a+u.max.x||i+o<s+u.min.y||i>s+u.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<n.length;e++){const o=t.getTile(n[e]);if(!o||!o.hasData())continue;if(c(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),u=this.proxyToSource[a.key][t.id];u?u.push(s):this.proxyToSource[a.key][t.id]=[s],i.push(s)}}}_createProxiedId(t,n,r){let i=this.orthoMatrix;if(r){const e=r.find((e=>e.key===n.tileID.key));if(e)return e}if(n.tileID.key!==t.key){const r=t.canonical.z-n.tileID.canonical.z;let o,a,s;i=e.create();const u=n.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.EXTENT>>r,a=o*((n.tileID.canonical.x<<r)-t.canonical.x+u),s=o*((n.tileID.canonical.y<<r)-t.canonical.y)):(o=e.EXTENT<<-r,a=e.EXTENT*(n.tileID.canonical.x-(t.canonical.x+u<<-r)),s=e.EXTENT*(n.tileID.canonical.y-(t.canonical.y<<-r))),e.ortho(i,0,o,0,o,0,1),e.translate(i,i,[a,s,0])}return new Cn(n.tileID,t.key,i)}_findTileCoveringTileID(t,n){let r=n.getTile(t);if(r&&r.hasData())return r;const i=this._findCoveringTileCache[n.id],o=i[t.key];if(r=o?n.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const u=n.getSource().minzoom,c=[];if(!o){const i=n.getSource().maxzoom;if(t.canonical.z>=i){const r=t.canonical.z-i;n.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,n.transform.tileZoom),a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=i,a=new e.OverscaledTileID(s,t.wrap,i,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=n.getTile(a))}const l=e=>{c.forEach((t=>{i[t]=e})),c.length=0};for(s-=1;s>=u&&(!r||!r.hasData());s--){r&&l(r.tileID.key);const e=a.calculateScaledKey(s);if(r=n.getTileByID(e),r&&r.hasData())break;const t=i[e];if(null===t)break;void 0===t?c.push(e):r=n.getTileByID(t)}return l(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let n=this._tilesDirty[e];n||(n=this._tilesDirty[e]={}),n[t.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const t=function(t){let n=0;const r=new e.StructArrayLayout2ui4,i=131;for(let e=1;e<129;e++){for(let t=1;t<129;t++)n=e*i+t,r.emplaceBack(n,n+1),r.emplaceBack(n,n+i),r.emplaceBack(n+1,n+i),128===e&&r.emplaceBack(n+i,n+i+1);r.emplaceBack(n+1,n+1+i)}return r}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(t),this.wireframeSegments=e.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,t.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class Dn{static cacheKey(e,t,n,r){let i=`${t}${r?r.cacheKey:""}`;for(const o of n)e.usedDefines.includes(o)&&(i+=`/${o}`);return i}constructor(t,n,r,i,o,a){const s=t.gl;this.program=s.createProgram();const u=function(e){const t=[];for(let n=0;n<e.length;n++){if(null===e[n])continue;const r=e[n].split(" ");t.push(r.pop())}return t}(r.staticAttributes),c=i?i.getBinderAttributes():[],l=u.concat(c);let f=i?i.defines():[];f=f.concat(a.map((e=>`#define ${e}`)));const h=t.isWebGL2?"#version 300 es\n":"",d=h+f.concat(t.extStandardDerivatives&&0===h.length?"#extension GL_OES_standard_derivatives : enable\n".concat(fn):fn,fn,ln,cn.fragmentSource,sn.fragmentSource,r.fragmentSource).join("\n"),p=h+f.concat("\n#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif",ln,cn.vertexSource,sn.vertexSource,an.vertexSource,r.vertexSource).join("\n"),y=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(y,d),s.compileShader(y),s.attachShader(this.program,y);const m=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m),this.attributes={},this.numAttributes=l.length;for(let e=0;e<this.numAttributes;e++)l[e]&&(s.bindAttribLocation(this.program,e,l[e]),this.attributes[l[e]]=e);s.linkProgram(this.program),s.deleteShader(m),s.deleteShader(y),this.fixedUniforms=o(t),this.binderUniforms=i?i.getUniforms(t):[],a.includes("TERRAIN")&&(this.terrainUniforms=(t=>({u_dem:new e.Uniform1i(t),u_dem_prev:new e.Uniform1i(t),u_dem_unpack:new e.Uniform4f(t),u_dem_tl:new e.Uniform2f(t),u_dem_scale:new e.Uniform1f(t),u_dem_tl_prev:new e.Uniform2f(t),u_dem_scale_prev:new e.Uniform1f(t),u_dem_size:new e.Uniform1f(t),u_dem_lerp:new e.Uniform1f(t),u_exaggeration:new e.Uniform1f(t),u_depth:new e.Uniform1i(t),u_depth_size_inv:new e.Uniform2f(t),u_meter_to_dem:new e.Uniform1f(t),u_label_plane_matrix_inv:new e.UniformMatrix4f(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.Uniform3f(t),u_tile_tr_up:new e.Uniform3f(t),u_tile_br_up:new e.Uniform3f(t),u_tile_bl_up:new e.Uniform3f(t),u_tile_up_scale:new e.Uniform1f(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.UniformMatrix4f(t),u_fog_range:new e.Uniform2f(t),u_fog_color:new e.Uniform4f(t),u_fog_horizon_blend:new e.Uniform1f(t),u_fog_temporal_offset:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_globe_transition:new e.Uniform1f(t),u_is_globe:new e.Uniform1i(t),u_viewport:new e.Uniform2f(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const n=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const n=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e]&&n[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const n=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)n[e].set(this.program,e,t[e])}}draw(e,t,n,r,i,o,a,s,u,c,l,f,h,d,p){const y=e.gl;if(this.failedToCreate)return;e.program.set(this.program),e.setDepthMode(n),e.setStencilMode(r),e.setColorMode(i),e.setCullFace(o);for(const g of Object.keys(this.fixedUniforms))this.fixedUniforms[g].set(this.program,g,a[g]);d&&d.setUniforms(this.program,e,this.binderUniforms,f,{zoom:h});const m={[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[t];for(const g of l.get()){const n=g.vaos||(g.vaos={});(n[s]||(n[s]=new yn)).bind(e,this,u,d?d.getPaintVertexBuffers():[],c,g.vertexOffset,p||[]),y.drawElements(t,g.primitiveLength*m,y.UNSIGNED_SHORT,g.primitiveOffset*m*2)}}}function Rn(e,t){const n=Math.pow(2,t.tileID.overscaledZ),r=t.tileSize*Math.pow(2,e.transform.tileZoom)/n,i=r*(t.tileID.canonical.x+t.tileID.wrap*n),o=r*t.tileID.canonical.y;return{u_image:0,u_texsize:t.imageAtlasTexture.size,u_tile_units_to_pixels:1/O(t,1,e.transform.tileZoom),u_pixel_coord_upper:[i>>16,o>>16],u_pixel_coord_lower:[65535&i,65535&o]}}const Ln=e.create(),zn=(t,n,r,i,o,a,s,u,c,l,f)=>{const h=n.style.light,d=h.properties.get("position"),p=[d.x,d.y,d.z],y=e.create$1();"viewport"===h.properties.get("anchor")&&(e.fromRotation(y,-n.transform.angle),e.transformMat3(p,p,y));const m=h.properties.get("color"),g=n.transform,v={u_matrix:t,u_lightpos:p,u_lightintensity:h.properties.get("intensity"),u_lightcolor:[m.r,m.g,m.b],u_vertical_gradient:+r,u_opacity:i,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:Ln,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:o,u_edge_radius:a};return"globe"===g.projection.name&&(v.u_tile_id=[s.canonical.x,s.canonical.y,1<<s.canonical.z],v.u_zoom_transition=c,v.u_inv_rot_matrix=f,v.u_merc_center=l,v.u_up_dir=g.projection.upVector(new e.CanonicalTileID(0,0,0),l[0]*e.EXTENT,l[1]*e.EXTENT),v.u_height_lift=u),v},Zn=(t,n,r,i,o,a,s,u,c,l,f,h)=>{const d=zn(t,n,r,i,o,a,s,c,l,f,h),p={u_height_factor:-Math.pow(2,s.overscaledZ)/u.tileSize/8};return e.extend(d,Rn(n,u),p)},Nn=e=>({u_matrix:e}),Un=(t,n,r)=>e.extend(Nn(t),Rn(n,r)),Fn=(e,t)=>({u_matrix:e,u_world:t}),jn=(t,n,r,i)=>e.extend(Un(t,n,r),{u_world:i}),Wn=e.create(),Vn=(t,n,r,i,o,a)=>{const s=t.transform,u="globe"===s.projection.name;let c;if("map"===a.paint.get("circle-pitch-alignment"))if(u){const t=e.globePixelsToTileUnits(s.zoom,n.canonical)*s._pixelsPerMercatorPixel;c=Float32Array.from([t,0,0,t])}else c=s.calculatePixelsToTileUnitsMatrix(r);else c=new Float32Array([s.pixelsToGLUnits[0],0,0,s.pixelsToGLUnits[1]]);const l={u_camera_to_center_distance:s.cameraToCenterDistance,u_matrix:t.translatePosMatrix(n.projMatrix,r,a.paint.get("circle-translate"),a.paint.get("circle-translate-anchor")),u_device_pixel_ratio:e.exported.devicePixelRatio,u_extrude_scale:c,u_inv_rot_matrix:Wn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(u){l.u_inv_rot_matrix=i,l.u_merc_center=o,l.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],l.u_zoom_transition=e.globeToMercatorTransition(s.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;l.u_up_dir=s.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return l},Kn=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t},Gn=(t,n,r,i)=>{const o=e.EXTENT/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:n.getCameraToCenterDistance(i),u_extrude_scale:[n.pixelsToGLUnits[0]/o,n.pixelsToGLUnits[1]/o]}},Hn=(e,t,n=1)=>({u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:n}),qn=e.create(),Yn=(t,n,r,i,o,a,s)=>{const u=t.transform,c="globe"===u.projection.name,l=c?e.globePixelsToTileUnits(u.zoom,n.canonical)*u._pixelsPerMercatorPixel:O(r,1,a),f={u_matrix:n.projMatrix,u_extrude_scale:l,u_intensity:s,u_inv_rot_matrix:qn,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){f.u_inv_rot_matrix=i,f.u_merc_center=o,f.u_tile_id=[n.canonical.x,n.canonical.y,1<<n.canonical.z],f.u_zoom_transition=e.globeToMercatorTransition(u.zoom);const t=o[0]*e.EXTENT,r=o[1]*e.EXTENT;f.u_up_dir=u.projection.upVector(new e.CanonicalTileID(0,0,0),t,r)}return f},Xn=(e,t,n,r,i,o,a)=>{const s=e.transform,u=s.calculatePixelsToTileUnitsMatrix(t);return{u_matrix:Jn(e,t,n,r),u_pixels_to_tile_units:u,u_device_pixel_ratio:o,u_units_to_pixels:[1/s.pixelsToGLUnits[0],1/s.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:i,u_texsize:er(n)?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:$n(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:a}},Qn=(e,t,n,r,i)=>{const o=e.transform;return{u_matrix:Jn(e,t,n,r),u_texsize:t.imageAtlasTexture.size,u_pixels_to_tile_units:o.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:i,u_image:0,u_tile_units_to_pixels:$n(t,o),u_units_to_pixels:[1/o.pixelsToGLUnits[0],1/o.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function $n(e,t){return 1/O(e,1,t.tileZoom)}function Jn(e,t,n,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,n.paint.get("line-translate"),n.paint.get("line-translate-anchor"))}function er(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}const tr=(e,t,n,r,i,o)=>{return{u_matrix:e,u_tl_parent:t,u_scale_parent:n,u_fade_t:r.mix,u_opacity:r.opacity*i.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:i.paint.get("raster-brightness-min"),u_brightness_high:i.paint.get("raster-brightness-max"),u_saturation_factor:(s=i.paint.get("raster-saturation"),s>0?1-1/(1.001-s):-s),u_contrast_factor:(a=i.paint.get("raster-contrast"),a>0?1/(1-a):1+a),u_spin_weights:nr(i.paint.get("raster-hue-rotate")),u_perspective_transform:o};var a,s};function nr(e){e*=Math.PI/180;const t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}const rr=e.create(),ir=(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m)=>{const g=o.transform,v={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:g.cameraToCenterDistance,u_rotate_symbol:+r,u_aspect_ratio:g.width/g.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:u,u_is_text:+c,u_pitch_with_map:+i,u_texsize:l,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:rr,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:rr,u_up_vector:[0,-1,0]};return"globe"===m.name&&(v.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],v.u_zoom_transition=h,v.u_inv_rot_matrix=p,v.u_merc_center=d,v.u_camera_forward=g._camera.forward(),v.u_ecef_origin=e.globeECEFOrigin(g.globeMatrix,f.toUnwrapped()),v.u_tile_matrix=Float32Array.from(g.globeMatrix),v.u_up_vector=y),v},or=(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m,g)=>e.extend(ir(t,n,r,i,o,a,s,u,c,l,h,d,p,y,m,g),{u_gamma_scale:i?o.transform.cameraToCenterDistance*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.exported.devicePixelRatio,u_is_halo:+f}),ar=(t,n,r,i,o,a,s,u,c,l,f,h,d,p,y,m)=>e.extend(or(t,n,r,i,o,a,s,u,!0,c,!0,f,h,d,p,y,m),{u_texsize_icon:l,u_texture_icon:1}),sr=(e,t,n)=>({u_matrix:e,u_opacity:t,u_color:n}),ur=(t,n,r,i,o)=>e.extend(function(e,t,n){const r=t.imageManager.getPattern(e.toString()),{width:i,height:o}=t.imageManager.getPixelSize(),a=Math.pow(2,n.tileID.overscaledZ),s=n.tileSize*Math.pow(2,t.transform.tileZoom)/a,u=s*(n.tileID.canonical.x+n.tileID.wrap*a),c=s*n.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[i,o],u_pattern_size:r.displaySize,u_tile_units_to_pixels:1/O(n,1,t.transform.tileZoom),u_pixel_coord_upper:[u>>16,c>>16],u_pixel_coord_lower:[65535&u,65535&c]}}(i,r,o),{u_matrix:t,u_opacity:n}),cr={fillExtrusion:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t)}),fillExtrusionPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_lightpos:new e.Uniform3f(t),u_lightintensity:new e.Uniform1f(t),u_lightcolor:new e.Uniform3f(t),u_vertical_gradient:new e.Uniform1f(t),u_height_factor:new e.Uniform1f(t),u_edge_radius:new e.Uniform1f(t),u_ao:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_up_dir:new e.Uniform3f(t),u_height_lift:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t)}),fill:t=>({u_matrix:new e.UniformMatrix4f(t)}),fillPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),fillOutline:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t)}),fillOutlinePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_world:new e.Uniform2f(t),u_image:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),circle:t=>({u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),collisionBox:t=>({u_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_extrude_scale:new e.Uniform2f(t)}),collisionCircle:t=>({u_matrix:new e.UniformMatrix4f(t),u_inv_matrix:new e.UniformMatrix4f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_viewport_size:new e.Uniform2f(t)}),debug:t=>({u_color:new e.UniformColor(t),u_matrix:new e.UniformMatrix4f(t),u_overlay:new e.Uniform1i(t),u_overlay_scale:new e.Uniform1f(t)}),clippingMask:t=>({u_matrix:new e.UniformMatrix4f(t)}),heatmap:t=>({u_extrude_scale:new e.Uniform1f(t),u_intensity:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_up_dir:new e.Uniform3f(t)}),heatmapTexture:t=>({u_image:new e.Uniform1i(t),u_color_ramp:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t)}),hillshade:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_latrange:new e.Uniform2f(t),u_light:new e.Uniform2f(t),u_shadow:new e.UniformColor(t),u_highlight:new e.UniformColor(t),u_accent:new e.UniformColor(t)}),hillshadePrepare:t=>({u_matrix:new e.UniformMatrix4f(t),u_image:new e.Uniform1i(t),u_dimension:new e.Uniform2f(t),u_zoom:new e.Uniform1f(t),u_unpack:new e.Uniform4f(t)}),line:t=>({u_matrix:new e.UniformMatrix4f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_units_to_pixels:new e.Uniform2f(t),u_dash_image:new e.Uniform1i(t),u_gradient_image:new e.Uniform1i(t),u_image_height:new e.Uniform1f(t),u_texsize:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t),u_trim_offset:new e.Uniform2f(t)}),linePattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_texsize:new e.Uniform2f(t),u_pixels_to_tile_units:new e.UniformMatrix2f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_units_to_pixels:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t),u_alpha_discard_threshold:new e.Uniform1f(t)}),raster:t=>({u_matrix:new e.UniformMatrix4f(t),u_tl_parent:new e.Uniform2f(t),u_scale_parent:new e.Uniform1f(t),u_fade_t:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_image0:new e.Uniform1i(t),u_image1:new e.Uniform1i(t),u_brightness_low:new e.Uniform1f(t),u_brightness_high:new e.Uniform1f(t),u_saturation_factor:new e.Uniform1f(t),u_contrast_factor:new e.Uniform1f(t),u_spin_weights:new e.Uniform3f(t),u_perspective_transform:new e.Uniform2f(t)}),symbolIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_texture:new e.Uniform1i(t)}),symbolSDF:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_tile_id:new e.Uniform3f(t),u_zoom_transition:new e.Uniform1f(t),u_inv_rot_matrix:new e.UniformMatrix4f(t),u_merc_center:new e.Uniform2f(t),u_camera_forward:new e.Uniform3f(t),u_tile_matrix:new e.UniformMatrix4f(t),u_up_vector:new e.Uniform3f(t),u_ecef_origin:new e.Uniform3f(t),u_is_halo:new e.Uniform1i(t)}),symbolTextAndIcon:t=>({u_is_size_zoom_constant:new e.Uniform1i(t),u_is_size_feature_constant:new e.Uniform1i(t),u_size_t:new e.Uniform1f(t),u_size:new e.Uniform1f(t),u_camera_to_center_distance:new e.Uniform1f(t),u_rotate_symbol:new e.Uniform1i(t),u_aspect_ratio:new e.Uniform1f(t),u_fade_change:new e.Uniform1f(t),u_matrix:new e.UniformMatrix4f(t),u_label_plane_matrix:new e.UniformMatrix4f(t),u_coord_matrix:new e.UniformMatrix4f(t),u_is_text:new e.Uniform1i(t),u_pitch_with_map:new e.Uniform1i(t),u_texsize:new e.Uniform2f(t),u_texsize_icon:new e.Uniform2f(t),u_texture:new e.Uniform1i(t),u_texture_icon:new e.Uniform1i(t),u_gamma_scale:new e.Uniform1f(t),u_device_pixel_ratio:new e.Uniform1f(t),u_is_halo:new e.Uniform1i(t)}),background:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_color:new e.UniformColor(t)}),backgroundPattern:t=>({u_matrix:new e.UniformMatrix4f(t),u_opacity:new e.Uniform1f(t),u_image:new e.Uniform1i(t),u_pattern_tl:new e.Uniform2f(t),u_pattern_br:new e.Uniform2f(t),u_texsize:new e.Uniform2f(t),u_pattern_size:new e.Uniform2f(t),u_pixel_coord_upper:new e.Uniform2f(t),u_pixel_coord_lower:new e.Uniform2f(t),u_tile_units_to_pixels:new e.Uniform1f(t)}),terrainRaster:_n,terrainDepth:_n,skybox:t=>({u_matrix:new e.UniformMatrix4f(t),u_sun_direction:new e.Uniform3f(t),u_cubemap:new e.Uniform1i(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxGradient:t=>({u_matrix:new e.UniformMatrix4f(t),u_color_ramp:new e.Uniform1i(t),u_center_direction:new e.Uniform3f(t),u_radius:new e.Uniform1f(t),u_opacity:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t)}),skyboxCapture:t=>({u_matrix_3f:new e.UniformMatrix3f(t),u_sun_direction:new e.Uniform3f(t),u_sun_intensity:new e.Uniform1f(t),u_color_tint_r:new e.Uniform4f(t),u_color_tint_m:new e.Uniform4f(t),u_luminance:new e.Uniform1f(t)}),globeRaster:t=>({u_proj_matrix:new e.UniformMatrix4f(t),u_globe_matrix:new e.UniformMatrix4f(t),u_normalize_matrix:new e.UniformMatrix4f(t),u_merc_matrix:new e.UniformMatrix4f(t),u_zoom_transition:new e.Uniform1f(t),u_merc_center:new e.Uniform2f(t),u_image0:new e.Uniform1i(t),u_grid_matrix:new e.UniformMatrix3f(t),u_skirt_height:new e.Uniform1f(t),u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_globe_pos:new e.Uniform3f(t),u_globe_radius:new e.Uniform1f(t),u_viewport:new e.Uniform2f(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.Uniform3f(t),u_frustum_tr:new e.Uniform3f(t),u_frustum_br:new e.Uniform3f(t),u_frustum_bl:new e.Uniform3f(t),u_horizon:new e.Uniform1f(t),u_transition:new e.Uniform1f(t),u_fadeout_range:new e.Uniform1f(t),u_color:new e.Uniform4f(t),u_high_color:new e.Uniform4f(t),u_space_color:new e.Uniform4f(t),u_star_intensity:new e.Uniform1f(t),u_star_density:new e.Uniform1f(t),u_star_size:new e.Uniform1f(t),u_temporal_offset:new e.Uniform1f(t),u_horizon_angle:new e.Uniform1f(t),u_rotation_matrix:new e.UniformMatrix4f(t)})};let lr;function fr(t,n,r,i,o,a,s){const u=t.context,c=u.gl,l=t.transform,f=t.useProgram("collisionBox"),h=[];let d=0,p=0;for(let w=0;w<i.length;w++){const y=i[w],m=n.getTile(y),g=m.getBucket(r);if(!g)continue;const v=_t(y,g,l);let b=v;0===o[0]&&0===o[1]||(b=t.translatePosMatrix(v,m,o,a));const _=s?g.textCollisionBox:g.iconCollisionBox,x=g.collisionCircleArray;if(x.length>0){const t=e.create(),n=b;e.mul(t,g.placementInvProjMatrix,l.glCoordMatrix),e.mul(t,t,g.placementViewportMatrix),h.push({circleArray:x,circleOffset:p,transform:n,invTransform:t,projection:g.getProjection()}),d+=x.length/4,p=d}_&&(t.terrain&&t.terrain.setupElevationDraw(m,f),f.draw(u,c.LINES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,Gn(b,l,m,g.getProjection()),r.id,_.layoutVertexBuffer,_.indexBuffer,_.segments,null,l.zoom,null,[_.collisionVertexBuffer,_.collisionVertexBufferExt]))}if(!s||!h.length)return;const y=t.useProgram("collisionCircle"),m=new e.StructArrayLayout2f1f2i16;m.resize(4*d),m._trim();let g=0;for(const e of h)for(let t=0;t<e.circleArray.length/4;t++){const n=4*t,r=e.circleArray[n+0],i=e.circleArray[n+1],o=e.circleArray[n+2],a=e.circleArray[n+3];m.emplace(g++,r,i,o,a,0),m.emplace(g++,r,i,o,a,1),m.emplace(g++,r,i,o,a,2),m.emplace(g++,r,i,o,a,3)}(!lr||lr.length<2*d)&&(lr=function(t){const n=2*t,r=new e.StructArrayLayout3ui6;r.resize(n),r._trim();for(let e=0;e<n;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(d));const v=u.createIndexBuffer(lr,!0),b=u.createVertexBuffer(m,e.collisionCircleLayout.members,!0);for(const w of h){const n={u_matrix:w.transform,u_inv_matrix:w.invTransform,u_camera_to_center_distance:(_=l).getCameraToCenterDistance(w.projection),u_viewport_size:[_.width,_.height]};y.draw(u,c.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,n,r.id,b,v,e.SegmentVector.simpleSegment(0,2*w.circleOffset,w.circleArray.length,w.circleArray.length/2),null,l.zoom)}var _;b.destroy(),v.destroy()}const hr=e.create();function dr({width:t,height:n,anchor:r,textOffset:i,textScale:o},a){const{horizontalAlign:s,verticalAlign:u}=e.getAnchorAlignment(r),c=-(s-.5)*t,l=-(u-.5)*n,f=e.evaluateVariableOffset(r,i);return new e.pointGeometry((c/o+f[0])*a,(l/o+f[1])*a)}function pr(t,n,r,i,o,a,s,u,c,l,f){const h=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,y={},m=t.getProjection(),g=wt(u,m,a),v=a.elevation,b=m.upVectorScale(u.canonical,a.center.lat,a.worldSize).metersToTile;d.clear();for(let _=0;_<h.length;_++){const p=h.get(_),{tileAnchorX:w,tileAnchorY:x,numGlyphs:k}=p,A=t.allowVerticalPlacement&&!p.placedOrientation,E=p.hidden||!p.crossTileID||A?null:i[p.crossTileID];if(E){let i=0,h=0,_=0;if(v){const e=v?v.getAtTileOffset(u,w,x):0,[t,n,r]=m.upVector(u.canonical,w,x);i=e*t*b,h=e*n*b,_=e*r*b}let[A,I,S,T]=ot(p.projectedAnchorX+i,p.projectedAnchorY+h,p.projectedAnchorZ+_,r?g:s);const M=at(a.getCameraToCenterDistance(m),T);let P=o.evaluateSizeForFeature(t.textSizeData,l,p)*M/e.ONE_EM;r&&(P*=t.tilePixelRatio/c);const B=dr(E,P);r?(({x:A,y:I,z:S}=m.projectTilePoint(w+B.x,x+B.y,u.canonical)),[A,I,S]=ot(A+i,I+h,S+_,s)):(n&&B._rotate(-a.angle),A+=B.x,I+=B.y,S=0);const C=t.allowVerticalPlacement&&p.placedOrientation===e.WritingMode.vertical?Math.PI/2:0;for(let t=0;t<k;t++)e.addDynamicAttributes(d,A,I,S,C);f&&p.associatedIconIndex>=0&&(y[p.associatedIconIndex]={x:A,y:I,z:S,angle:C})}else yt(k,d)}if(f){p.clear();const n=t.icon.placedSymbolArray;for(let t=0;t<n.length;t++){const r=n.get(t),{numGlyphs:i}=r,o=y[t];if(r.hidden||!o)yt(i,p);else{const{x:t,y:n,z:r,angle:a}=o;for(let o=0;o<i;o++)e.addDynamicAttributes(p,t,n,r,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function yr(e,t,n){return n.iconsInText&&t?"symbolTextAndIcon":e?"symbolSDF":"symbolIcon"}function mr(t,n,r,i,o,a,s,u,c,l,f,h){const d=t.context,p=d.gl,y=t.transform,m="map"===u,g="map"===c,v=m&&"point"!==r.layout.get("symbol-placement"),b=m&&!g&&!v,_=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let w=!1;const x=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),k=[e.mercatorXfromLng(y.center.lng),e.mercatorYfromLat(y.center.lat)],A=r.layout.get("text-variable-anchor"),E="globe"===y.projection.name,I=[],S=[0,-1,0];let T=S;!E&&!y.mercatorFromTransition||m||(T=function(t){const n=t._camera.getWorldToCamera(t.worldSize,1),r=e.multiply([],n,t.globeMatrix);e.invert(r,r);const i=[0,0,0],o=[0,1,0,0];return e.transformMat4$1(o,o,r),i[0]=o[0],i[1]=o[1],i[2]=o[2],e.normalize(i,i),i}(y));for(const M of i){const i=n.getTile(M),u=i.getBucket(r);if(!u)continue;if("mercator"===u.projection.name&&E)continue;const c=o?u.text:u.icon;if(!c||u.fullyClipped||!c.segments.get().length)continue;const f=c.programConfigurations.get(r.id),h=o||u.sdfIcons,d=o?u.textSizeData:u.iconSizeData,x=g||0!==y.pitch,P=e.evaluateSizeForZoom(d,y.zoom);let B,C,O,D,R=[0,0],L=null;if(o){if(C=i.glyphAtlasTexture,O=p.LINEAR,B=i.glyphAtlasTexture.size,u.iconsInText){R=i.imageAtlasTexture.size,L=i.imageAtlasTexture;const e="composite"===d.kind||"camera"===d.kind;D=x||t.options.rotating||t.options.zooming||e?p.LINEAR:p.NEAREST}}else{const e=1!==r.layout.get("icon-size").constantOr(0)||u.iconsNeedLinear;C=i.imageAtlasTexture,O=h||t.options.rotating||t.options.zooming||e||x?p.LINEAR:p.NEAREST,B=i.imageAtlasTexture.size}const z="globe"===u.projection.name,Z=z?T:S,N=z?e.globeToMercatorTransition(y.zoom):0,U=wt(M,u.getProjection(),y),F=y.calculatePixelsToTileUnitsMatrix(i),j=nt(U,i.tileID.canonical,g,m,y,u.getProjection(),F),W=t.terrain&&g&&v?e.invert(e.create(),j):hr,V=it(U,i.tileID.canonical,g,m,y,u.getProjection(),F),K=A&&u.hasTextData(),G="none"!==r.layout.get("icon-text-fit")&&K&&u.hasIconData();if(v){const e=y.elevation,n=e?e.getAtTileOffsetFunc(M,y.center.lat,y.worldSize,u.getProjection()):null,r=rt(U,i.tileID.canonical,g,m,y,u.getProjection(),F);ut(u,U,t,o,r,V,g,l,n,M)}const H=v||o&&A||G,q=t.translatePosMatrix(U,i,a,s),Y=H?hr:j,X=t.translatePosMatrix(V,i,a,s,!0),Q=u.getProjection().createInversionMatrix(y,M.canonical),$=[];t.terrainRenderModeElevated()&&g&&$.push("PITCH_WITH_MAP_TERRAIN"),z&&$.push("PROJECTION_GLOBE_VIEW"),H&&$.push("PROJECTED_POS_ON_VIEWPORT");const J=h&&0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1);let ee;ee=h?u.iconsInText?ar(d.kind,P,b,g,t,q,Y,X,B,R,M,N,k,Q,Z,u.getProjection()):or(d.kind,P,b,g,t,q,Y,X,o,B,!0,M,N,k,Q,Z,u.getProjection()):ir(d.kind,P,b,g,t,q,Y,X,o,B,M,N,k,Q,Z,u.getProjection());const te={program:t.useProgram(yr(h,o,u),f,$),buffers:c,uniformValues:ee,atlasTexture:C,atlasTextureIcon:L,atlasInterpolation:O,atlasInterpolationIcon:D,isSDF:h,hasHalo:J,tile:i,labelPlaneMatrixInv:W};if(_&&u.canOverlap){w=!0;const t=c.segments.get();for(const n of t)I.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:te})}else I.push({segments:c.segments,sortKey:0,state:te})}w&&I.sort(((e,t)=>e.sortKey-t.sortKey));for(const e of I){const n=e.state;if(t.terrain&&t.terrain.setupElevationDraw(n.tile,n.program,{useDepthForOcclusion:!E,labelPlaneMatrixInv:n.labelPlaneMatrixInv}),d.activeTexture.set(p.TEXTURE0),n.atlasTexture.bind(n.atlasInterpolation,p.CLAMP_TO_EDGE),n.atlasTextureIcon&&(d.activeTexture.set(p.TEXTURE1),n.atlasTextureIcon&&n.atlasTextureIcon.bind(n.atlasInterpolationIcon,p.CLAMP_TO_EDGE)),n.isSDF){const i=n.uniformValues;n.hasHalo&&(i.u_is_halo=1,gr(n.buffers,e.segments,r,t,n.program,x,f,h,i)),i.u_is_halo=0}gr(n.buffers,e.segments,r,t,n.program,x,f,h,n.uniformValues)}}function gr(t,n,r,i,o,a,s,u,c){const l=i.context,f=[t.dynamicLayoutVertexBuffer,t.opacityVertexBuffer,t.globeExtVertexBuffer];o.draw(l,l.gl.TRIANGLES,a,s,u,e.CullFaceMode.disabled,c,r.id,t.layoutVertexBuffer,t.indexBuffer,n,r.paint,i.transform.zoom,t.programConfigurations.get(r.id),f)}function vr(t,n,r,i,o,a,s){const u=t.context.gl,c=r.paint.get("fill-pattern"),l=c&&c.constantOr(1);let f,h,d,p,y;s?(h=l&&!r.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",f=u.LINES):(h=l?"fillPattern":"fill",f=u.TRIANGLES);for(const m of i){const i=n.getTile(m);if(l&&!i.patternsLoaded())continue;const g=i.getBucket(r);if(!g)continue;t.prepareDrawTile();const v=g.programConfigurations.get(r.id),b=t.useProgram(h,v);l&&(t.context.activeTexture.set(u.TEXTURE0),i.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),v.updatePaintBuffers());const _=c.constantOr(null);if(_&&i.imageAtlas){const e=i.imageAtlas.patternPositions[_.toString()];e&&v.setConstantPatternPositions(e)}const w=t.translatePosMatrix(m.projMatrix,i,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));if(s){p=g.indexBuffer2,y=g.segments2;const e=t.terrain&&t.terrain.renderingToTexture?t.terrain.drapeBufferSize:[u.drawingBufferWidth,u.drawingBufferHeight];d="fillOutlinePattern"===h&&l?jn(w,t,i,e):Fn(w,e)}else p=g.indexBuffer,y=g.segments,d=l?Un(w,t,i):Nn(w);t.prepareDrawProgram(t.context,b,m.toUnwrapped()),b.draw(t.context,f,o,t.stencilModeForClipping(m),a,e.CullFaceMode.disabled,d,r.id,g.layoutVertexBuffer,p,y,r.paint,t.transform.zoom,v)}}function br(t,n,r,i,o,a,s){const u=t.context,c=u.gl,l=t.transform,f=r.paint.get("fill-extrusion-pattern"),h=f.constantOr(1),d=r.paint.get("fill-extrusion-opacity"),p=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),r.paint.get("fill-extrusion-ambient-occlusion-radius")],y=r.layout.get("fill-extrusion-edge-radius"),m="globe"===l.projection.name?e.fillExtrusionHeightLift():0,g="globe"===l.projection.name,v=g?e.globeToMercatorTransition(l.zoom):0,b=[e.mercatorXfromLng(l.center.lng),e.mercatorYfromLat(l.center.lat)],_=[];g&&_.push("PROJECTION_GLOBE_VIEW"),p[0]>0&&_.push("FAUX_AO");for(const w of i){const i=n.getTile(w),x=i.getBucket(r);if(!x||x.projection.name!==l.projection.name)continue;const k=x.programConfigurations.get(r.id),A=t.useProgram(h?"fillExtrusionPattern":"fillExtrusion",k,_);if(t.terrain){const e=t.terrain;if(t.style.terrainSetForDrapingOnly())e.setupElevationDraw(i,A,{useMeterToDem:!0});else{if(!x.enableTerrain)continue;if(e.setupElevationDraw(i,A,{useMeterToDem:!0}),_r(u,n,w,x,r,e),!x.centroidVertexBuffer){const e=A.attributes.a_centroid_pos;void 0!==e&&c.vertexAttrib2f(e,0,0)}}}h&&(t.context.activeTexture.set(c.TEXTURE0),i.imageAtlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE),k.updatePaintBuffers());const E=f.constantOr(null);if(E&&i.imageAtlas){const e=i.imageAtlas.patternPositions[E.toString()];e&&k.setConstantPatternPositions(e)}const I=t.translatePosMatrix(w.projMatrix,i,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),S=l.projection.createInversionMatrix(l,w.canonical),T=r.paint.get("fill-extrusion-vertical-gradient"),M=h?Zn(I,t,T,d,p,y,w,i,m,v,b,S):zn(I,t,T,d,p,y,w,m,v,b,S);t.prepareDrawProgram(u,A,w.toUnwrapped());const P=[];t.terrain&&P.push(x.centroidVertexBuffer),g&&P.push(x.layoutVertexExtBuffer),A.draw(u,u.gl.TRIANGLES,o,a,s,e.CullFaceMode.backCCW,M,r.id,x.layoutVertexBuffer,x.indexBuffer,x.segments,r.paint,t.transform.zoom,k,P)}}function _r(t,n,r,i,o,a){const s=[t=>{let n=t.canonical.x-1,r=t.wrap;return n<0&&(n=(1<<t.canonical.z)-1,r--),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>{let n=t.canonical.x+1,r=t.wrap;return n===1<<t.canonical.z&&(n=0,r++),new e.OverscaledTileID(t.overscaledZ,r,t.canonical.z,n,t.canonical.y)},t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,(0===t.canonical.y?1<<t.canonical.z:t.canonical.y)-1),t=>new e.OverscaledTileID(t.overscaledZ,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y===(1<<t.canonical.z)-1?0:t.canonical.y+1)],u=e=>{const t=n.getSource().minzoom,r=e=>{const t=n.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},i=[0,-1,1];for(const n of i){if(e.overscaledZ+n<t)continue;const i=r(e.calculateScaledKey(e.overscaledZ+n));if(i)return i}},c=[0,0,0],l=(t,n)=>(c[0]=Math.min(t.min.y,n.min.y),c[1]=Math.max(t.max.y,n.max.y),c[2]=e.EXTENT-n.min.x>t.max.x?n.min.x-e.EXTENT:t.max.x,c),f=(t,n)=>(c[0]=Math.min(t.min.x,n.min.x),c[1]=Math.max(t.max.x,n.max.x),c[2]=e.EXTENT-n.min.y>t.max.y?n.min.y-e.EXTENT:t.max.y,c),h=[(e,t)=>l(e,t),(e,t)=>l(t,e),(e,t)=>f(e,t),(e,t)=>f(t,e)],d=new e.pointGeometry(0,0);let p,y,m;const g=(t,n,i,o,s)=>{const u=[[o?i:t,o?t:i,0],[o?i:n,o?n:i,0]],c=s<0?e.EXTENT+s:s,l=[o?c:(t+n)/2,o?(t+n)/2:c,0];return 0===i&&s<0||0!==i&&s>0?a.getForTilePoints(m,[l],!0,y):u.push(l),a.getForTilePoints(r,u,!0,p),Math.max(u[0][2],u[1][2],l[2])/a.exaggeration()};for(let v=0;v<4;v++){const t=(v<2?1:5)-v,n=i.borders[v];if(0===n.length)continue;const o=m=s[v](r),c=u(o);if(!(c&&c instanceof e.FillExtrusionBucket&&c.enableTerrain))continue;if(i.borderDoneWithNeighborZ[v]===c.canonical.z&&c.borderDoneWithNeighborZ[t]===i.canonical.z)continue;if(y=a.findDEMTileFor(o),!y||!y.dem)continue;if(!p){const e=a.findDEMTileFor(r);if(!e||!e.dem)return;p=e}const l=c.borders[t];let f=0;const b=c.borderDoneWithNeighborZ[t]!==i.canonical.z;if(i.canonical.z===c.canonical.z){for(let r=0;r<n.length;r++){const o=i.featuresOnBorder[n[r]],a=o.borders[v];let s;for(;f<l.length&&(s=c.featuresOnBorder[l[f]],!(s.borders[t][1]>a[0]+3));)b&&c.encodeCentroid(void 0,s,!1),f++;if(s&&f<l.length){const n=f;let r=0;for(;!(s.borders[t][0]>a[1]-3)&&(r++,++f!==l.length);)s=c.featuresOnBorder[l[f]];if(s=c.featuresOnBorder[l[n]],o.intersectsCount()>1||s.intersectsCount()>1||1!==r){1!==r&&(f=n),i.encodeCentroid(void 0,o,!1),b&&c.encodeCentroid(void 0,s,!1);continue}const u=h[v](o,s),p=v%2?e.EXTENT-1:0;d.x=g(u[0],Math.min(e.EXTENT-1,u[1]),p,v<2,u[2]),d.y=0,i.encodeCentroid(d,o,!1),b&&c.encodeCentroid(d,s,!1)}else i.encodeCentroid(void 0,o,!1)}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0,b&&(c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0)}else{for(const e of n)i.encodeCentroid(void 0,i.featuresOnBorder[e],!1);if(b){for(const e of l)c.encodeCentroid(void 0,c.featuresOnBorder[e],!1);c.borderDoneWithNeighborZ[t]=i.canonical.z,c.needsCentroidUpdate=!0}i.borderDoneWithNeighborZ[v]=c.canonical.z,i.needsCentroidUpdate=!0}}(i.needsCentroidUpdate||!i.centroidVertexBuffer&&0!==i.centroidVertexArray.length)&&i.uploadCentroid(t)}const wr=new e.Color(1,0,0,1),xr=new e.Color(0,1,0,1),kr=new e.Color(0,0,1,1),Ar=new e.Color(1,0,1,1),Er=new e.Color(0,1,1,1);function Ir(t,n,r){const i=t.context,o=t.transform,a=i.gl,s="globe"===o.projection.name,u=s?["PROJECTION_GLOBE_VIEW"]:null;let c=r.projMatrix;if(s&&e.globeToMercatorTransition(o.zoom)>0){const t=e.transitionTileAABBinECEF(r.canonical,o),n=e.globeDenormalizeECEF(t);c=e.multiply(new Float32Array(16),o.globeMatrix,n),e.multiply(c,o.projMatrix,c)}const l=t.useProgram("debug",null,u),f=n.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(f,l);const h=e.DepthMode.disabled,d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),y="$debug";i.activeTexture.set(a.TEXTURE0),t.emptyTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s?f._makeGlobeTileDebugBuffers(t.context,o):f._makeDebugTileBoundsBuffers(t.context,o.projection);const m=f._tileDebugBuffer||t.debugBuffer,g=f._tileDebugIndexBuffer||t.debugIndexBuffer,v=f._tileDebugSegments||t.debugSegments;l.draw(i,a.LINE_STRIP,h,d,p,e.CullFaceMode.disabled,Hn(c,e.Color.red),y,m,g,v,null,null,null,[f._globeTileDebugBorderBuffer]);const b=f.latestRawTileData,_=Math.floor((b&&b.byteLength||0)/1024),w=n.getTile(r).tileSize,x=512/Math.min(w,512)*(r.overscaledZ/o.zoom)*.5;let k=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(k+=` => ${r.overscaledZ}`),k+=` ${_}kb`,function(e,t){e.initDebugOverlayCanvas();const n=e.debugOverlayCanvas,r=e.context.gl,i=e.debugOverlayCanvas.getContext("2d");i.clearRect(0,0,n.width,n.height),i.shadowColor="white",i.shadowBlur=2,i.lineWidth=1.5,i.strokeStyle="white",i.textBaseline="top",i.font="bold 36px Open Sans, sans-serif",i.fillText(t,5,5),i.strokeText(t,5,5),e.debugOverlayTexture.update(n),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,k);const A=f._tileDebugTextBuffer||t.debugBuffer,E=f._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,I=f._tileDebugTextSegments||t.debugSegments;l.draw(i,a.TRIANGLES,h,d,e.ColorMode.alphaBlended,e.CullFaceMode.disabled,Hn(c,e.Color.transparent,x),y,A,E,I,null,null,null,[f._globeTileDebugTextBuffer])}function Sr(e,t,n,r){Mr(e,0,t+n/2,e.transform.width,n,r)}function Tr(e,t,n,r){Mr(e,t-n/2,0,n,e.transform.height,r)}function Mr(t,n,r,i,o,a){const s=t.context,u=s.gl;u.enable(u.SCISSOR_TEST),u.scissor(n*e.exported.devicePixelRatio,r*e.exported.devicePixelRatio,i*e.exported.devicePixelRatio,o*e.exported.devicePixelRatio),s.clear({color:a}),u.disable(u.SCISSOR_TEST)}const Pr=e.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Br}=Pr;function Cr(e,t,n,r){e.emplaceBack(t,n,r)}class Or{constructor(t){this.vertexArray=new e.StructArrayLayout3f12,this.indices=new e.StructArrayLayout3ui6,Cr(this.vertexArray,-1,-1,1),Cr(this.vertexArray,1,-1,1),Cr(this.vertexArray,-1,1,1),Cr(this.vertexArray,1,1,1),Cr(this.vertexArray,-1,-1,-1),Cr(this.vertexArray,1,-1,-1),Cr(this.vertexArray,-1,1,-1),Cr(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,Br),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.SegmentVector.simpleSegment(0,0,36,12)}}function Dr(t,n,r,i,o,a){const s=t.gl,u=n.paint.get("sky-atmosphere-color"),c=n.paint.get("sky-atmosphere-halo-color"),l=n.paint.get("sky-atmosphere-sun-intensity"),f=((e,t,n,r,i)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:n,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[i.r,i.g,i.b,i.a],u_luminance:5e-5}))(e.fromMat4(e.create$1(),i),o,l,u,c);s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,n.skyboxTexture,0),r.draw(t,s.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,e.ColorMode.unblended,e.CullFaceMode.frontCW,f,"skyboxCapture",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}const Rr=e.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Lr{constructor(t){const n=new e.StructArrayLayout5f20;n.emplaceBack(-1,1,1,0,0),n.emplaceBack(1,1,1,1,0),n.emplaceBack(1,-1,1,1,1),n.emplaceBack(-1,-1,1,0,1);const r=new e.StructArrayLayout3ui6;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(n,Rr.members),this.indexBuffer=t.createIndexBuffer(r),this.segments=e.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const zr={symbol:function(t,n,r,i,o){if("translucent"!==t.renderPass)return;const a=e.StencilMode.disabled,s=t.colorModeForRenderPass();r.layout.get("text-variable-anchor")&&function(t,n,r,i,o,a,s){const u=n.transform,c="map"===o,l="map"===a;for(const f of t){const t=i.getTile(f),n=t.getBucket(r);if(!n||!n.text||!n.text.segments.get().length)continue;const o=e.evaluateSizeForZoom(n.textSizeData,u.zoom),a=wt(f,n.getProjection(),u),h=u.calculatePixelsToTileUnitsMatrix(t),d=nt(a,t.tileID.canonical,l,c,u,n.getProjection(),h),p="none"!==r.layout.get("icon-text-fit")&&n.hasIconData();if(o){const r=Math.pow(2,u.zoom-t.tileID.overscaledZ);pr(n,c,l,s,e.symbolSize,u,d,f,r,o,p)}}}(i,t,r,n,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o),0!==r.paint.get("icon-opacity").constantOr(1)&&mr(t,n,r,i,!1,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),r.layout.get("icon-rotation-alignment"),r.layout.get("icon-pitch-alignment"),r.layout.get("icon-keep-upright"),a,s),0!==r.paint.get("text-opacity").constantOr(1)&&mr(t,n,r,i,!0,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),r.layout.get("text-keep-upright"),a,s),n.map.showCollisionBoxes&&(fr(t,n,r,i,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),fr(t,n,r,i,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),u=void 0!==r.layout.get("circle-sort-key").constantOr(1);if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const c=t.context,l=c.gl,f=t.transform,h=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),d=e.StencilMode.disabled,p=t.colorModeForRenderPass(),y="globe"===f.projection.name,m=[e.mercatorXfromLng(f.center.lng),e.mercatorYfromLat(f.center.lat)],g=[];for(let b=0;b<i.length;b++){const o=i[b],a=n.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==f.projection.name)continue;const c=s.programConfigurations.get(r.id),l=Kn(r);y&&l.push("PROJECTION_GLOBE_VIEW");const h=t.useProgram("circle",c,l),d=s.layoutVertexBuffer,p=s.globeExtVertexBuffer,v=s.indexBuffer,_=f.projection.createInversionMatrix(f,o.canonical),w={programConfiguration:c,program:h,layoutVertexBuffer:d,globeExtVertexBuffer:p,indexBuffer:v,uniformValues:Vn(t,o,a,_,m,r),tile:a};if(u){const t=s.segments.get();for(const n of t)g.push({segments:new e.SegmentVector([n]),sortKey:n.sortKey,state:w})}else g.push({segments:s.segments,sortKey:0,state:w})}u&&g.sort(((e,t)=>e.sortKey-t.sortKey));const v={useDepthForOcclusion:!y};for(const b of g){const{programConfiguration:n,program:i,layoutVertexBuffer:o,globeExtVertexBuffer:a,indexBuffer:s,uniformValues:u,tile:y}=b.state,m=b.segments;t.terrain&&t.terrain.setupElevationDraw(y,i,v),t.prepareDrawProgram(c,i,y.tileID.toUnwrapped()),i.draw(c,l.TRIANGLES,h,d,p,e.CullFaceMode.disabled,u,r.id,o,s,m,r.paint,f.zoom,n,[a])}},heatmap:function(t,n,r,i){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=e.StencilMode.disabled,u=new e.ColorMode([a.ONE,a.ONE],e.Color.transparent,[!0,!0,!0,!0]);!function(e,t,n,r){const i=e.gl,o=t.width*r,a=t.height*r;e.activeTexture.set(i.TEXTURE1),e.viewport.set([0,0,o,a]);let s=n.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=i.createTexture();i.bindTexture(i.TEXTURE_2D,t),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),s=n.heatmapFbo=e.createFramebuffer(o,a,!1),function(e,t,n,r,i,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.isWebGL2&&e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,i,o,0,a.RGBA,e.extRenderToTextureHalfFloat?e.isWebGL2?a.HALF_FLOAT:e.extTextureHalfFloat.HALF_FLOAT_OES:a.UNSIGNED_BYTE,null),r.colorAttachment.set(n)}(e,0,t,s,o,a)}else i.bindTexture(i.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,r,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.Color.transparent});const c=t.transform,l="globe"===c.projection.name,f=l?["PROJECTION_GLOBE_VIEW"]:null,h=l?e.CullFaceMode.frontCCW:e.CullFaceMode.disabled,d=[e.mercatorXfromLng(c.center.lng),e.mercatorYfromLat(c.center.lat)];for(let p=0;p<i.length;p++){const y=i[p];if(n.hasRenderableParent(y))continue;const m=n.getTile(y),g=m.getBucket(r);if(!g||g.projection.name!==c.projection.name)continue;const v=g.programConfigurations.get(r.id),b=t.useProgram("heatmap",v,f),{zoom:_}=t.transform;t.terrain&&t.terrain.setupElevationDraw(m,b),t.prepareDrawProgram(o,b,y.toUnwrapped());const w=c.projection.createInversionMatrix(c,y.canonical);b.draw(o,a.TRIANGLES,e.DepthMode.disabled,s,u,h,Yn(t,y,m,w,d,_,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,v,l?[g.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,n){const r=t.context,i=r.gl,o=n.heatmapFbo;if(!o)return;r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(i.TEXTURE1);let a=n.colorRampTexture;a||(a=n.colorRampTexture=new e.Texture(r,n.colorRamp,i.RGBA)),a.bind(i.LINEAR,i.CLAMP_TO_EDGE),t.useProgram("heatmapTexture").draw(r,i.TRIANGLES,e.DepthMode.disabled,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.disabled,((e,t,n,r)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,n),n.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,n.paint,t.transform.zoom)}(t,r))},line:function(t,n,r,i){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),u=t.colorModeForRenderPass(),c=t.terrain&&t.terrain.renderingToTexture?1:e.exported.devicePixelRatio,l=r.paint.get("line-dasharray"),f=l.constantOr(1),h=r.layout.get("line-cap"),d=r.paint.get("line-pattern"),p=d.constantOr(1),y=r.paint.get("line-gradient"),m=p?"linePattern":"line",g=t.context,v=g.gl,b=(e=>{const t=[];er(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const n=e.paint.get("line-trim-offset");0===n[0]&&0===n[1]||t.push("RENDER_LINE_TRIM_OFFSET");const r=e.paint.get("line-pattern").constantOr(1),i=1!==e.paint.get("line-opacity").constantOr(1);return!r&&i&&t.push("RENDER_LINE_ALPHA_DISCARD"),t})(r);let _=b.includes("RENDER_LINE_ALPHA_DISCARD");t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(_=!1);for(const w of i){const i=n.getTile(w);if(p&&!i.patternsLoaded())continue;const o=i.getBucket(r);if(!o)continue;t.prepareDrawTile();const a=o.programConfigurations.get(r.id),x=t.useProgram(m,a,b),k=d.constantOr(null);if(k&&i.imageAtlas){const e=i.imageAtlas.patternPositions[k.toString()];e&&a.setConstantPatternPositions(e)}const A=l.constantOr(null),E=h.constantOr(null);if(!p&&A&&E&&i.lineAtlas){const e=i.lineAtlas.getDash(A,E);e&&a.setConstantPatternPositions(e)}let[I,S]=r.paint.get("line-trim-offset");if("round"===E||"square"===E){const e=1;I!==S&&(0===I&&(I-=e),1===S&&(S+=e))}const T=t.terrain?w.projMatrix:null,M=p?Qn(t,i,r,T,c):Xn(t,i,r,T,o.lineClipsArray.length,c,[I,S]);if(y){const i=o.gradients[r.id];let a=i.texture;if(r.gradientVersion!==i.version){let s=256;if(r.stepInterpolant){const r=n.getSource().maxzoom,i=w.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-w.canonical.z):1;s=e.clamp(e.nextPowerOfTwo(o.maxLineLength/e.EXTENT*1024*i),256,g.maxTextureSize)}i.gradient=e.renderColorRamp({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:s,image:i.gradient||void 0,clips:o.lineClipsArray}),i.texture?i.texture.update(i.gradient):i.texture=new e.Texture(g,i.gradient,v.RGBA),i.version=r.gradientVersion,a=i.texture}g.activeTexture.set(v.TEXTURE1),a.bind(r.stepInterpolant?v.NEAREST:v.LINEAR,v.CLAMP_TO_EDGE)}f&&(g.activeTexture.set(v.TEXTURE0),i.lineAtlasTexture.bind(v.LINEAR,v.REPEAT),a.updatePaintBuffers()),p&&(g.activeTexture.set(v.TEXTURE0),i.imageAtlasTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE),a.updatePaintBuffers()),t.prepareDrawProgram(g,x,w.toUnwrapped());const P=n=>{x.draw(g,v.TRIANGLES,s,n,u,e.CullFaceMode.disabled,M,r.id,o.layoutVertexBuffer,o.indexBuffer,o.segments,r.paint,t.transform.zoom,a,[o.layoutVertexBuffer2])};if(_){const n=t.stencilModeForClipping(w).ref;0===n&&t.terrain&&g.clear({stencil:0});const r={func:v.EQUAL,mask:255};M.u_alpha_discard_threshold=.8,P(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.INVERT)),M.u_alpha_discard_threshold=0,P(new e.StencilMode(r,n,255,v.KEEP,v.KEEP,v.KEEP))}else P(t.stencilModeForClipping(w))}_&&(t.resetStencilClippingMasks(),t.terrain&&g.clear({stencil:0}))},fill:function(t,n,r,i){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=t.colorModeForRenderPass(),u=r.paint.get("fill-pattern"),c=t.opaquePassEnabledForLayer()&&!u.constantOr(1)&&1===o.constantOr(e.Color.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";if(t.renderPass===c){const o=t.depthModeForSublayer(1,"opaque"===t.renderPass?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly);vr(t,n,r,i,o,s,!1)}if("translucent"===t.renderPass&&r.paint.get("fill-antialias")){const o=t.depthModeForSublayer(r.getPaintProperty("fill-outline-color")?2:0,e.DepthMode.ReadOnly);vr(t,n,r,i,o,s,!0)}},"fill-extrusion":function(t,n,r,i){const o=r.paint.get("fill-extrusion-opacity");if(0!==o&&"translucent"===t.renderPass){const a=new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D);if(1!==o||r.paint.get("fill-extrusion-pattern").constantOr(1))br(t,n,r,i,a,e.StencilMode.disabled,e.ColorMode.disabled),br(t,n,r,i,a,t.stencilModeFor3D(),t.colorModeForRenderPass()),t.resetStencilClippingMasks();else{const o=t.colorModeForRenderPass();br(t,n,r,i,a,e.StencilMode.disabled,o)}}},hillshade:function(t,n,r,i){if("offscreen"!==t.renderPass&&"translucent"!==t.renderPass)return;const o=t.context,a=t.depthModeForSublayer(0,e.DepthMode.ReadOnly),s=t.colorModeForRenderPass(),u=t.terrain&&t.terrain.renderingToTexture,[c,l]="translucent"!==t.renderPass||u?[{},i]:t.stencilConfigForOverlap(i);for(const f of l){const i=n.getTile(f);if(i.needsHillshadePrepare&&"offscreen"===t.renderPass)bn(t,i,r,a,e.StencilMode.disabled,s);else if("translucent"===t.renderPass){const e=u&&t.terrain?t.terrain.stencilModeForRTTOverlap(f):c[f.overscaledZ];gn(t,f,i,r,a,e,s)}}o.viewport.set([0,0,t.width,t.height]),t.resetStencilClippingMasks()},raster:function(t,n,r,i,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;if(!i.length)return;const s=t.context,u=s.gl,c=n.getSource(),l=t.useProgram("raster"),f=t.colorModeForRenderPass(),h=t.terrain&&t.terrain.renderingToTexture,[d,p]=c instanceof Be||h?[{},i]:t.stencilConfigForOverlap(i),y=p[p.length-1].overscaledZ,m=!t.options.moving;for(const g of p){const i=h?e.DepthMode.disabled:t.depthModeForSublayer(g.overscaledZ-y,1===r.paint.get("raster-opacity")?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly,u.LESS),o=g.toUnwrapped(),p=n.getTile(g);if(h&&(!p||!p.hasData()))continue;const v=h?g.projMatrix:t.transform.calculateProjMatrix(o,m),b=t.terrain&&h?t.terrain.stencilModeForRTTOverlap(g):d[g.overscaledZ],_=a?0:r.paint.get("raster-fade-duration");p.registerFadeDuration(_);const w=n.findLoadedParent(g,0),x=Mn(p,w,n,t.transform,_);let k,A;t.terrain&&t.terrain.prepareDrawTile();const E="nearest"===r.paint.get("raster-resampling")?u.NEAREST:u.LINEAR;s.activeTexture.set(u.TEXTURE0),p.texture.bind(E,u.CLAMP_TO_EDGE),s.activeTexture.set(u.TEXTURE1),w?(w.texture.bind(E,u.CLAMP_TO_EDGE),k=Math.pow(2,w.tileID.overscaledZ-p.tileID.overscaledZ),A=[p.tileID.canonical.x*k%1,p.tileID.canonical.y*k%1]):p.texture.bind(E,u.CLAMP_TO_EDGE);const I=tr(v,A||[0,0],k||1,x,r,c instanceof Be?c.perspectiveTransform:[0,0]);if(t.prepareDrawProgram(s,l,o),c instanceof Be)c.boundsBuffer&&c.boundsSegments&&l.draw(s,u.TRIANGLES,i,e.StencilMode.disabled,f,e.CullFaceMode.disabled,I,r.id,c.boundsBuffer,t.quadTriangleIndexBuffer,c.boundsSegments);else{const{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:a}=t.getTileBoundsBuffers(p);l.draw(s,u.TRIANGLES,i,b,f,e.CullFaceMode.disabled,I,r.id,n,o,a)}}t.resetStencilClippingMasks()},background:function(t,n,r,i){const o=r.paint.get("background-color"),a=r.paint.get("background-opacity");if(0===a)return;const s=t.context,u=s.gl,c=t.transform,l=c.tileSize,f=r.paint.get("background-pattern");if(t.isPatternMissing(f))return;const h=!f&&1===o.a&&1===a&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==h)return;const d=e.StencilMode.disabled,p=t.depthModeForSublayer(0,"opaque"===h?e.DepthMode.ReadWrite:e.DepthMode.ReadOnly),y=t.colorModeForRenderPass(),m=t.useProgram(f?"backgroundPattern":"background");let g,v=i;v||(g=t.getBackgroundTiles(),v=Object.values(g).map((e=>e.tileID))),f&&(s.activeTexture.set(u.TEXTURE0),t.imageManager.bind(t.context));for(const b of v){const h=b.toUnwrapped(),v=i?b.projMatrix:t.transform.calculateProjMatrix(h);t.prepareDrawTile();const _=n?n.getTile(b):g?g[b.key]:new e.Tile(b,l,c.zoom,t),w=f?ur(v,a,t,f,{tileID:b,tileSize:l}):sr(v,a,o);t.prepareDrawProgram(s,m,h);const{tileBoundsBuffer:x,tileBoundsIndexBuffer:k,tileBoundsSegments:A}=t.getTileBoundsBuffers(_);m.draw(s,u.TRIANGLES,p,d,y,e.CullFaceMode.disabled,w,r.id,x,k,A)}},sky:function(t,n,r){const i=t.transform,o="mercator"===i.projection.name||"globe"===i.projection.name?1:e.smoothstep(7,8,i.zoom),a=r.paint.get("sky-opacity")*o;if(0===a)return;const s=t.context,u=r.paint.get("sky-type"),c=new e.DepthMode(s.gl.LEQUAL,e.DepthMode.ReadOnly,[0,1]),l=t.frameCounter/1e3%1;"atmosphere"===u?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,n,r,i){const o=t.context,a=o.gl;let s=n.skyboxFbo;if(!s){s=n.skyboxFbo=o.createFramebuffer(32,32,!1),n.skyboxGeometry=new Or(o),n.skyboxTexture=o.gl.createTexture(),a.bindTexture(a.TEXTURE_CUBE_MAP,n.skyboxTexture),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_CUBE_MAP,a.TEXTURE_MAG_FILTER,a.LINEAR);for(let e=0;e<6;++e)a.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,a.RGBA,32,32,0,a.RGBA,a.UNSIGNED_BYTE,null)}o.bindFramebuffer.set(s.framebuffer),o.viewport.set([0,0,32,32]);const u=n.getCenter(t,!0),c=t.useProgram("skyboxCapture"),l=new Float64Array(16);e.identity(l),e.rotateY(l,l,.5*-Math.PI),Dr(o,n,c,l,u,0),e.identity(l),e.rotateY(l,l,.5*Math.PI),Dr(o,n,c,l,u,1),e.identity(l),e.rotateX(l,l,.5*-Math.PI),Dr(o,n,c,l,u,2),e.identity(l),e.rotateX(l,l,.5*Math.PI),Dr(o,n,c,l,u,3),e.identity(l),Dr(o,n,c,l,u,4),e.identity(l),e.rotateY(l,l,Math.PI),Dr(o,n,c,l,u,5),o.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,u=t.transform,c=t.useProgram("skybox");a.activeTexture.set(s.TEXTURE0),s.bindTexture(s.TEXTURE_CUBE_MAP,n.skyboxTexture);const l=((e,t,n,r,i)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:i}))(u.skyboxMatrix,n.getCenter(t,!1),0,i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,l,"skybox",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,l):"gradient"===u&&"sky"===t.renderPass&&function(t,n,r,i,o){const a=t.context,s=a.gl,u=t.transform,c=t.useProgram("skyboxGradient");n.skyboxGeometry||(n.skyboxGeometry=new Or(a)),a.activeTexture.set(s.TEXTURE0);let l=n.colorRampTexture;l||(l=n.colorRampTexture=new e.Texture(a,n.colorRamp,s.RGBA)),l.bind(s.LINEAR,s.CLAMP_TO_EDGE);const f=((t,n,r,i,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:n,u_radius:e.degToRad(r),u_opacity:i,u_temporal_offset:o}))(u.skyboxMatrix,n.getCenter(t,!1),n.paint.get("sky-gradient-radius"),i,o);t.prepareDrawProgram(a,c),c.draw(a,s.TRIANGLES,r,e.StencilMode.disabled,t.colorModeForRenderPass(),e.CullFaceMode.backCW,f,"skyboxGradient",n.skyboxGeometry.vertexBuffer,n.skyboxGeometry.indexBuffer,n.skyboxGeometry.segment)}(t,r,c,a,l)},debug:function(e,t,n){for(let r=0;r<n.length;r++)Ir(e,t,n[r])},custom:function(t,n,r,i){const o=t.context,a=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isLayerDraped()){if("offscreen"===t.renderPass){const n=a.prerender;if(n){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;n.call(a,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else n.call(a,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const n=a.renderToTile;if(n){const r=i[0].canonical,s=new e.MercatorCoordinate(r.x+i[0].wrap*(1<<r.z),r.y,r.z);o.setDepthMode(e.DepthMode.disabled),o.setStencilMode(e.StencilMode.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),n.call(a,o.gl,s),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(e.StencilMode.disabled);const n="3d"===a.renderingMode?new e.DepthMode(t.context.gl.LEQUAL,e.DepthMode.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,e.DepthMode.ReadOnly);if(o.setDepthMode(n),"globe"===t.transform.projection.name){const n=t.transform.pointMerc;a.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.globeToMercatorTransition(t.transform.zoom),[n.x,n.y],t.transform.pixelsPerMeterRatio)}else a.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class Zr{constructor(t,n,r=!1){this.context=new Ie(t,r),this.transform=n,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=e.SourceCache.maxUnderzooming+e.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ht,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(e,t){const n=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(n||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new On(this,e));const r=this._terrain;this.transform.elevation=n?r:null,r.update(e,this.transform,t)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[n,r]=t.getFovAdjustedRange(this.transform._fov);if(n>r)return void(this.transform.fogCullDistSq=null);const i=n+.78*(r-n);this.transform.fogCullDistSq=i*i}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(t,n){if(this.width=t*e.exported.devicePixelRatio,this.height=n*e.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._layers[e].resize()}setup(){const t=this.context,n=new e.StructArrayLayout2i4;n.emplaceBack(0,0),n.emplaceBack(e.EXTENT,0),n.emplaceBack(0,e.EXTENT),n.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=t.createVertexBuffer(n,e.posAttributes.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);const r=new e.StructArrayLayout2i4;r.emplaceBack(0,0),r.emplaceBack(e.EXTENT,0),r.emplaceBack(0,e.EXTENT),r.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=t.createVertexBuffer(r,e.posAttributes.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);const i=new e.StructArrayLayout2i4;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(-1,1),i.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(i,e.posAttributes.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);const o=new e.StructArrayLayout4i8;o.emplaceBack(0,0,0,0),o.emplaceBack(e.EXTENT,0,e.EXTENT,0),o.emplaceBack(0,e.EXTENT,0,e.EXTENT),o.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.boundsAttributes.members),this.mercatorBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);const a=new e.StructArrayLayout3ui6;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.StructArrayLayout1ui2;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.Texture(t,new e.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA),this.identityMat=e.create();const u=this.context.gl;this.stencilClearMode=new e.StencilMode({func:u.ALWAYS,mask:0},0,255,u.ZERO,u.ZERO,u.ZERO),this.loadTimeStamps.push(e.window.performance.now()),this.atmosphereBuffer=new Lr(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const t=this.context,n=t.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(t,n.TRIANGLES,e.DepthMode.disabled,this.stencilClearMode,e.ColorMode.disabled,e.CullFaceMode.disabled,Tn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(t,n,r){if(!n||this.currentStencilSource===n.id||!t.isTileClipped()||!r||0===r.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of r)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=n.id;const i=this.context,o=i.gl;this.nextStencilID+r.length>256&&this.clearStencil(),i.setColorMode(e.ColorMode.disabled),i.setDepthMode(e.DepthMode.disabled);const a=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const s of r){const t=n.getTile(s),r=this._tileClippingMaskIDs[s.key]=this.nextStencilID++,{tileBoundsBuffer:u,tileBoundsIndexBuffer:c,tileBoundsSegments:l}=this.getTileBoundsBuffers(t);a.draw(i,o.TRIANGLES,e.DepthMode.disabled,new e.StencilMode({func:o.ALWAYS,mask:0},r,255,o.KEEP,o.KEEP,o.REPLACE),e.ColorMode.disabled,e.CullFaceMode.disabled,Tn(s.projMatrix),"$clipping",u,c,l)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const t=this.nextStencilID++,n=this.context.gl;return new e.StencilMode({func:n.NOTEQUAL,mask:255},t,255,n.KEEP,n.KEEP,n.REPLACE)}stencilModeForClipping(t){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(t);const n=this.context.gl;return new e.StencilMode({func:n.EQUAL,mask:255},this._tileClippingMaskIDs[t.key],0,n.KEEP,n.KEEP,n.REPLACE)}stencilConfigForOverlap(t){const n=this.context.gl,r=t.sort(((e,t)=>t.overscaledZ-e.overscaledZ)),i=r[r.length-1].overscaledZ,o=r[0].overscaledZ-i+1;if(o>1){this.currentStencilSource=void 0,this.nextStencilID+o>256&&this.clearStencil();const t={};for(let r=0;r<o;r++)t[r+i]=new e.StencilMode({func:n.GEQUAL,mask:255},r+this.nextStencilID,255,n.KEEP,n.KEEP,n.REPLACE);return this.nextStencilID+=o,[t,r]}return[{[i]:e.StencilMode.disabled},r]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const n=1/8;return new e.ColorMode([t.CONSTANT_COLOR,t.ONE],new e.Color(n,n,n,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?e.ColorMode.unblended:e.ColorMode.alphaBlended}depthModeForSublayer(t,n,r){if(!this.opaquePassEnabledForLayer())return e.DepthMode.disabled;const i=1-((1+this.currentLayer)*this.numSublayers+t)*this.depthEpsilon;return new e.DepthMode(r||this.context.gl.LEQUAL,n,[i,i])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(t,n){this.style=t,this.options=n,this.imageManager=t.imageManager,this.glyphManager=t.glyphManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.exported.now()),this.imageManager.beginFrame();const r=this.style.order,i=this.style._sourceCaches;for(const e in i){const t=i[e];t.used&&t.prepare(this.context)}const o={},a={},s={};for(const e in i){const t=i[e];o[e]=t.getVisibleCoordinates(),a[e]=o[e].slice().reverse(),s[e]=t.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let e=0;e<r.length;e++)if(this.style._layers[r[e]].is3D()){this.opaquePassCutoff=e;break}if(this.terrain&&(this.terrain.updateTileBinding(s),this.opaquePassCutoff=0),"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.GlobeSharedBuffers(this.context)),e.isMapAuthenticated(this.context.gl)){this.renderPass="offscreen";for(const e of r){const n=this.style._layers[e],r=t._getLayerSourceCache(n);if(!n.hasOffscreenPass()||n.isHidden(this.transform.zoom))continue;const i=r?a[r.id]:void 0;("custom"===n.type||n.isSky()||i&&i.length)&&this.renderLayer(this,r,n,i)}if(this.depthRangeFor3D=[0,1-(t.order.length+2)*this.numSublayers*this.depthEpsilon],this.terrain&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&this.terrain.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:n.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=n.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=r.length-1;this.currentLayer>=0;this.currentLayer--){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky())continue;const i=n?a[n.id]:void 0;this._renderTileClippingMasks(e,n,i),this.renderLayer(this,n,e,i)}if(this.style.fog&&this.transform.projection.supportsFog&&function(t,n){const r=t.context,i=r.gl,o=t.transform,a=new e.DepthMode(i.LEQUAL,e.DepthMode.ReadOnly,[0,1]),s=t.useProgram("globeAtmosphere",null,"globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),u=e.globeToMercatorTransition(o.zoom),c=n.properties.get("color").toArray01(),l=n.properties.get("high-color").toArray01(),f=n.properties.get("space-color").toArray01PremultipliedAlpha(),h=e.identity$1([]);e.rotateY$1(h,h,-e.degToRad(o._center.lng)),e.rotateX$1(h,h,e.degToRad(o._center.lat)),e.rotateZ$1(h,h,o.angle),e.rotateX$1(h,h,-o._pitch);const d=e.fromQuat(new Float32Array(16),h),p=e.mapValue(n.properties.get("star-intensity"),0,1,0,.25),y=5e-4,m=e.mapValue(n.properties.get("horizon-blend"),0,1,y,.25),g=e.globeUseCustomAntiAliasing(t,r,o)&&m===y?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,v=t.frameCounter/1e3%1,b=e.length(o.globeCenterInViewSpace),_=Math.sqrt(Math.pow(b,2)-Math.pow(g,2)),w=Math.acos(_/b),x=((t,n,r,i,o,a,s,u,c,l,f,h,d,p)=>({u_frustum_tl:t,u_frustum_tr:n,u_frustum_br:r,u_frustum_bl:i,u_horizon:o,u_transition:a,u_fadeout_range:s,u_color:u,u_high_color:c,u_space_color:l,u_star_intensity:f,u_star_size:5*e.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:h,u_horizon_angle:d,u_rotation_matrix:p}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,u,m,c,l,f,p,v,w,d);t.prepareDrawProgram(r,s);const k=t.atmosphereBuffer;k&&s.draw(r,i.TRIANGLES,a,e.StencilMode.disabled,e.ColorMode.alphaBlended,e.CullFaceMode.backCW,x,"skybox",k.vertexBuffer,k.indexBuffer,k.segments)}(this,this.style.fog),this.renderPass="sky",(e.globeToMercatorTransition(this.transform.zoom)>0||"globe"!==this.transform.projection.name)&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<r.length;this.currentLayer++){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,n,e,n?a[n.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<r.length;){const e=this.style._layers[r[this.currentLayer]],n=t._getLayerSourceCache(e);if(e.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const i=n?("symbol"===e.type?s:a)[n.id]:void 0;this._renderTileClippingMasks(e,n,n?o[n.id]:void 0),this.renderLayer(this,n,e,i),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let n=null;e.values(this.style._layers).forEach((e=>{const r=t._getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&(!n||n.getSource().maxzoom<r.getSource().maxzoom)&&(n=r)})),n&&this.options.showTileBoundaries&&zr.debug(this,n,n.getVisibleCoordinates())}this.options.showPadding&&function(e){const t=e.transform.padding;Sr(e,e.transform.height-(t.top||0),3,wr),Sr(e,t.bottom||0,3,xr),Tr(e,t.left||0,3,kr),Tr(e,e.transform.width-(t.right||0),3,Ar);const n=e.transform.centerPoint;!function(e,t,n,r){Mr(e,t-1,n-10,2,20,r),Mr(e,t-10,n-1,20,2,r)}(e,n.x,e.transform.height-n.y,Er)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(e.window.performance.now()),this.saveCanvasCopy())}}renderLayer(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||"sky"===n.type||"custom"===n.type||r&&r.length)&&(this.id=n.id,this.gpuTimingStart(n),(!e.transform.projection.unsupportedLayers||!e.transform.projection.unsupportedLayers.includes(n.type)||e.terrain&&"custom"===n.type)&&zr[n.type](e,t,n,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery;let n=this.gpuTimers[e.id];n||(n=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:t.createQueryEXT()}),n.calls++,t.beginQueryEXT(t.TIME_ELAPSED_EXT,n.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=e.createQueryEXT();this.deferredRenderGpuTimeQueries.push(t),e.beginQueryEXT(e.TIME_ELAPSED_EXT,t)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const e=this.context.extTimerQuery;e.endQueryEXT(e.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const n in e){const r=e[n],i=this.context.extTimerQuery,o=i.getQueryObjectEXT(r.query,i.QUERY_RESULT_EXT)/1e6;i.deleteQueryEXT(r.query),t[n]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.extTimerQuery;let n=0;for(const r of e)n+=t.getQueryObjectEXT(r,t.QUERY_RESULT_EXT)/1e6,t.deleteQueryEXT(r);return n}translatePosMatrix(t,n,r,i,o){if(!r[0]&&!r[1])return t;const a=o?"map"===i?this.transform.angle:0:"viewport"===i?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:O(n,r[0],this.transform.zoom),o?r[1]:O(n,r[1],this.transform.zoom),0],u=new Float32Array(16);return e.translate(u,t,s),u}saveTileTexture(e){const t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}isPatternMissing(e){return null===e||void 0!==e&&!this.imageManager.getPattern(e.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const e=this.terrain&&this.terrain.renderingToTexture,t=this.terrain&&0===this.terrain.exaggeration(),n=this.style&&this.style.fog,r=[];return this.terrainRenderModeElevated()&&r.push("TERRAIN"),"globe"===this.transform.projection.name&&r.push("GLOBE"),t&&r.push("ZERO_EXAGGERATION"),n&&!e&&0!==n.getOpacity(this.transform.pitch)&&r.push("FOG"),e&&r.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&r.push("OVERDRAW_INSPECTOR"),r}useProgram(e,t,n){this.cache=this.cache||{};const r=n||[],i=this.currentGlobalDefines().concat(r),o=Dn.cacheKey(hn[e],e,i,t);return this.cache[o]||(this.cache[o]=new Dn(this.context,e,hn[e],t,cr[e],i)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(t,n,r){if(this.terrain&&this.terrain.renderingToTexture)return;const i=this.style.fog;if(i){const o=i.getOpacity(this.transform.pitch),a=((t,n,r,i,o,a,s,u,c,l,f)=>{const h=t.transform,d=n.properties.get("color").toArray01();d[3]=i;const p=t.frameCounter/1e3%1;return{u_fog_matrix:r?h.calculateFogTileMatrix(r):t.identityMat,u_fog_range:n.getFovAdjustedRange(h._fov),u_fog_color:d,u_fog_horizon_blend:n.properties.get("horizon-blend"),u_fog_temporal_offset:p,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:u,u_globe_pos:c,u_globe_radius:l,u_viewport:f,u_globe_transition:e.globeToMercatorTransition(h.zoom),u_is_globe:+("globe"===h.projection.name)}})(this,i,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.exported.devicePixelRatio,this.transform.height*e.exported.devicePixelRatio]);n.setFogUniformValues(t,a)}}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const t=this._backgroundTiles,n=this._backgroundTiles={},r=this.transform.coveringTiles({tileSize:512});for(const i of r)n[i.key]=t[i.key]||new e.Tile(i,512,this.transform.tileZoom,this);return n}clearBackgroundTiles(){this._backgroundTiles={}}}class Nr{constructor(e=0,t=0,n=0,r=0){if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(n)||n<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=n,this.right=r}interpolate(t,n,r){return null!=n.top&&null!=t.top&&(this.top=e.number(t.top,n.top,r)),null!=n.bottom&&null!=t.bottom&&(this.bottom=e.number(t.bottom,n.bottom,r)),null!=n.left&&null!=t.left&&(this.left=e.number(t.left,n.left,r)),null!=n.right&&null!=t.right&&(this.right=e.number(t.right,n.right,r)),this}getCenter(t,n){const r=e.clamp((this.left+t-this.right)/2,0,t),i=e.clamp((this.top+n-this.bottom)/2,0,n);return new e.pointGeometry(r,i)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Nr(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Ur(t,n){const r=e.getColumn(t,3);e.fromQuat(t,n),e.setColumn(t,3,r)}function Fr(t,n){const r=e.identity$1([]);return e.rotateZ$1(r,r,-n),e.rotateX$1(r,r,-t),r}function jr(t,n){const r=[t[0],t[1],0],i=[n[0],n[1],0];if(e.length(r)>=1e-15){const t=e.normalize([],r);e.scale$2(i,t,e.dot(i,t)),n[0]=i[0],n[1]=i[1]}const o=e.cross([],n,t);if(e.len(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Fr(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}class Wr{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const n=t instanceof e.MercatorCoordinate?t:new e.MercatorCoordinate(t[0],t[1],t[2]);this._renderWorldCopies&&(n.x=e.wrap(n.x,0,1)),this._position=n}else this._position=null}lookAtPoint(t,n){if(this.orientation=null,!this.position)return;const r=this._elevation?this._elevation.getAtPointOrZero(e.MercatorCoordinate.fromLngLat(t)):0,i=this.position,o=e.MercatorCoordinate.fromLngLat(t,r),a=[o.x-i.x,o.y-i.y,o.z-i.z];n||(n=[0,0,1]),n[2]=Math.abs(n[2]),this.orientation=jr(a,n)}setPitchBearing(t,n){this.orientation=Fr(e.degToRad(t),e.degToRad(-n))}}class Vr{constructor(t,n){this._transform=e.identity([]),this.orientation=n,this.position=t}get mercatorPosition(){const t=this.position;return new e.MercatorCoordinate(t[0],t[1],t[2])}get position(){const t=e.getColumn(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var n;t&&e.setColumn(this._transform,3,[(n=t)[0],n[1],n[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.identity$1([]),t&&Ur(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Fr(e,t),Ur(this._transform,this._orientation)}forward(){const t=e.getColumn(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.getColumn(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.getColumn(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,n){const r=new Float64Array(16);return e.invert(r,this.getWorldToCamera(t,n)),r}getWorldToCameraPosition(t,n,r){const i=this.position;e.scale$2(i,i,-t);const o=new Float64Array(16);return e.fromScaling(o,[r,r,r]),e.translate(o,o,i),o[10]*=n,o}getWorldToCamera(t,n){const r=new Float64Array(16),i=new Float64Array(4),o=this.position;return e.conjugate(i,this._orientation),e.scale$2(o,o,-t),e.fromQuat(r,i),e.translate(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=n,r[9]*=n,r[10]*=n,r[11]*=n,r}getCameraToClipPerspective(t,n,r,i){const o=new Float64Array(16);return e.perspective(o,t,n,r,i),o}getDistanceToElevation(t,n=!1){const r=0===t?0:e.mercatorZfromAltitude(t,n?e.latFromMercatorY(this.position[1]):this.position[1]),i=this.forward();return(r-this.position[2])/i[2]}clone(){return new Vr([...this.position],[...this.orientation])}}function Kr(t,n){const r=Hr(t.projection,t.zoom,t.width,t.height),i=function(t,n,r,i,o){const a=new e.LngLat(r.lng-180*qr,r.lat),s=new e.LngLat(r.lng+180*qr,r.lat),u=t.project(a.lng,a.lat),c=t.project(s.lng,s.lat),l=-Math.atan2(c.y-u.y,c.x-u.x),f=e.MercatorCoordinate.fromLngLat(r);f.y=e.clamp(f.y,-.999975,.999975);const h=f.toLngLat(),d=t.project(h.lng,h.lat),p=e.MercatorCoordinate.fromLngLat(h);p.x+=qr;const y=p.toLngLat(),m=t.project(y.lng,y.lat),g=Xr(m.x-d.x,m.y-d.y,l),v=e.MercatorCoordinate.fromLngLat(h);v.y+=qr;const b=v.toLngLat(),_=t.project(b.lng,b.lat),w=Xr(_.x-d.x,_.y-d.y,l),x=Math.abs(g.x)/Math.abs(w.y),k=e.identity([]);e.rotateZ(k,k,-l*(1-(o?0:i)));const A=e.identity([]);return e.scale(A,A,[1,1-(1-x)*i,1]),A[4]=-w.x/w.y*i,e.rotateZ(A,A,l),e.multiply(A,k,A),A}(t.projection,0,t.center,r,n),o=Gr(t);return e.scale(i,i,[o,o,1]),i}function Gr(t){const n=t.projection,r=Hr(t.projection,t.zoom,t.width,t.height),i=Yr(n,t.center),o=Yr(n,e.LngLat.convert(n.center));return Math.pow(2,i*r+(1-r)*o)}function Hr(t,n,r,i,o=1/0){const a=t.range;if(!a)return 0;const s=Math.min(o,Math.max(r,i)),u=Math.log(s/1024)/Math.LN2;return e.smoothstep(a[0]+u,a[1]+u,n)}const qr=1/4e4;function Yr(t,n){const r=e.clamp(n.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),i=new e.LngLat(n.lng-180*qr,r),o=new e.LngLat(n.lng+180*qr,r),a=t.project(i.lng,r),s=t.project(o.lng,r),u=e.MercatorCoordinate.fromLngLat(i),c=e.MercatorCoordinate.fromLngLat(o),l=s.x-a.x,f=s.y-a.y,h=c.x-u.x,d=c.y-u.y,p=Math.sqrt((h*h+d*d)/(l*l+f*f));return Math.log(p)/Math.LN2}function Xr(e,t,n){const r=Math.cos(n),i=Math.sin(n);return{x:e*r-t*i,y:e*i+t*r}}class Qr{constructor(t,n,r,i,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=n||22,this._minPitch=null==r?0:r,this._maxPitch=null==i?60:i,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Nr,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Vr,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const e=new Qr(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(e,t=!1){const n=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||n)&&this._updateCameraOnTerrain(),(e||n)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.pick(this.projection,["name","center","parallels"])}setProjection(n){this.projectionOptions=n||{name:"mercator"};const r=this.projection?this.getProjection():void 0;this.projection=e.getProjection(this.projectionOptions);const i=!t(r,this.getProjection());return i&&this._calcMatrices(),this.mercatorFromTransition=!1,i}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.getProjection({name:"mercator"});const n=t!==this.projection.name;return n&&this._calcMatrices(),n}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.pointGeometry(this.width,this.height)}get bearing(){return e.wrap(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const n=-t*Math.PI/180;var r;this.angle!==n&&(this._unmodified=!1,this.angle=n,this._calcMatrices(),this.rotationMatrix=(r=new e.ARRAY_TYPE(4),e.ARRAY_TYPE!=Float32Array&&(r[1]=0,r[2]=0),r[0]=1,r[3]=1,r),function(e,t,n){var r=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(n),u=Math.cos(n);e[0]=r*u+o*s,e[1]=i*u+a*s,e[2]=r*-s+o*u,e[3]=i*-s+a*u}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const n=e.clamp(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==n&&(this._unmodified=!1,this._pitch=n,this._calcMatrices())}get aspect(){return this.width/this.height}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.degToRad(t),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const e=this._elevation;this._centerAltitude=e.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=e.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){void 0!==this._centerAltitudeValidForExaggeration&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,n=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let i=0,o=0;for(let a=0;a<n.length;a++){const s=new e.pointGeometry(n[a][0]*this.width,r+n[a][1]*(this.height-r)),u=t.pointCoordinate(s);if(!u)continue;const c=1/Math.hypot(u[0]-this._camera.position[0],u[1]-this._camera.position[1]);i+=u[3]*c,o+=c}return 0===o?NaN:i/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),n=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),i=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-n,i);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const n=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[n.x,n.y,n.z]:[t.x,t.y,t.z];const i=e.length(e.sub([],this._camera.position,r));return e.clamp(this._zoomFromMercatorZ(i),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let n=!1;if(t.orientation&&!e.exactEquals(t.orientation,this._camera.orientation)&&(n=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.exactEquals$1(r,this._camera.position)||(this._setCameraPosition(r),n=!0)}n&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,n=new Wr;return n.position=new e.MercatorCoordinate(t[0],t[1],t[2]),n.orientation=this._camera.orientation,n._elevation=this.elevation,n._renderWorldCopies=this.renderWorldCopies,n}_setCameraOrientation(t){if(!e.length$1(t))return!1;e.normalize$1(t,t);const n=e.transformQuat([],[0,0,-1],t),r=e.transformQuat([],[0,-1,0],t);if(r[2]<0)return!1;const i=jr(n,r);return!!i&&(this._camera.orientation=i,!0)}_setCameraPosition(t){const n=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,i=this.cameraToCenterDistance;t[2]=e.clamp(t[2],i/r,i/n),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,n){this._unmodified=!1,this._edgeInsets.interpolate(e,t,n),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const n=[new e.UnwrappedTileID(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.pointGeometry(0,0)),i=this.pointCoordinate(new e.pointGeometry(this.width,0)),o=this.pointCoordinate(new e.pointGeometry(this.width,this.height)),a=this.pointCoordinate(new e.pointGeometry(0,this.height)),s=Math.floor(Math.min(r.x,i.x,o.x,a.x)),u=Math.floor(Math.max(r.x,i.x,o.x,a.x)),c=1;for(let l=s-c;l<=u+c;l++)0!==l&&n.push(new e.UnwrappedTileID(l,t))}return n}coveringTiles(t){let n=this.coveringZoomLevel(t);const r=n,i=this.elevation&&!t.isTerrainDEM,o="mercator"===this.projection.name;if(void 0!==t.minzoom&&n<t.minzoom)return[];void 0!==t.maxzoom&&n>t.maxzoom&&(n=t.maxzoom);const a=this.locationCoordinate(this.center),s=this.center.lat,u=1<<n,c=[u*a.x,u*a.y,0],l="globe"===this.projection.name,f=!l,h=e.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,n,f),d=l?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),p=u*e.mercatorZfromAltitude(1,this.center.lat),y=this._camera.position[2]/e.mercatorZfromAltitude(1,this.center.lat),m=[u*d.x,u*d.y,y*(f?1:p)],g=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),v=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?n:0,b=t.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,_=t.isTerrainDEM?-b:this._elevation?this._elevation.getMinElevationBelowMSL():0,w=this.projection.isReprojectedInTileSpace?Gr(this):1,x=t=>{const n=1/4e4,r=new e.MercatorCoordinate(t.x+n,t.y,t.z),i=new e.MercatorCoordinate(t.x,t.y+n,t.z),o=t.toLngLat(),a=r.toLngLat(),s=i.toLngLat(),u=this.locationCoordinate(o),c=this.locationCoordinate(a),l=this.locationCoordinate(s),f=Math.hypot(c.x-u.x,c.y-u.y),h=Math.hypot(l.x-u.x,l.y-u.y);return Math.sqrt(f*h)*w/n},k=t=>{const n=b,r=_;return{aabb:e.tileAABB(this,u,0,0,0,t,r,n,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:n,wrap:t,fullyVisible:!1}},A=[];let E=[];const I=n,S=t.reparseOverscaled?r:n,T=e=>e*e,M=T((y-this._centerAltitude)*p),P=e=>{if(!this._elevation||!e.tileID||!o)return;const t=this._elevation.getMinMaxForTile(e.tileID),n=e.aabb;t?(n.min[2]=t.min,n.max[2]=t.max,n.center[2]=(n.min[2]+n.max[2])/2):(e.shouldSplit=B(e),e.shouldSplit||(n.min[2]=n.max[2]=n.center[2]=this._centerAltitude))},B=t=>{if(t.zoom<v)return!0;if(t.zoom===I)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const n=t.aabb.distanceX(m),o=t.aabb.distanceY(m);let a=M,u=1;if(l){a=T(t.aabb.distanceZ(m));const n=Math.pow(2,t.zoom),r=e.latFromMercatorY((t.y+1)/n),i=e.latFromMercatorY(t.y/n),o=Math.min(Math.max(s,r),i),c=e.circumferenceAtLatitude(o)/e.circumferenceAtLatitude(s);if(u=o===s?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,c/this._mercatorScaleRatio),this.zoom<=e.GLOBE_ZOOM_THRESHOLD_MIN&&t.zoom===I-1&&c>=.9)return!0}else if(i&&(a=T(t.aabb.distanceZ(m)*p)),this.projection.isReprojectedInTileSpace&&r<=5){const n=Math.pow(2,t.zoom),r=x(new e.MercatorCoordinate((t.x+.5)/n,(t.y+.5)/n));u=r>.85?1:r}const c=n*n+o*o+a,f=T((1<<I-t.zoom)*g*u*((e,t)=>{if(t*T(.707)<e)return 1;const n=Math.sqrt(t/e);return n/(1.4144271570014144+(Math.pow(1.1,n-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(a,M),c));return c<f};if(this.renderWorldCopies)for(let e=1;e<=3;e++)A.push(k(-e)),A.push(k(e));for(A.push(k(0));A.length>0;){const r=A.pop(),a=r.x,s=r.y;let f=r.fullyVisible;if(!f){const e=r.aabb.intersects(h);if(0===e)continue;f=2===e}if(r.zoom!==I&&B(r))for(let t=0;t<4;t++){const n=(a<<1)+t%2,c=(s<<1)+(t>>1),h={aabb:o?r.aabb.quadrant(t):e.tileAABB(this,u,r.zoom+1,n,c,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:n,y:c,wrap:r.wrap,fullyVisible:f,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};i&&!l&&(h.tileID=new e.OverscaledTileID(r.zoom+1===I?S:r.zoom+1,r.wrap,r.zoom+1,n,c),P(h)),A.push(h)}else{const i=r.zoom===I?S:r.zoom;if(t.minzoom&&t.minzoom>i)continue;const o=c[0]-(.5+a+(r.wrap<<r.zoom))*(1<<n-r.zoom),u=c[1]-.5-s,l=r.tileID?r.tileID:new e.OverscaledTileID(i,r.wrap,r.zoom,a,s);E.push({tileID:l,distanceSq:o*o+u*u})}}if(this.fogCullDistSq){const n=this.fogCullDistSq,r=this.horizonLineFromTop();E=E.filter((i=>{const o=[0,0,0,1],a=[e.EXTENT,e.EXTENT,0,1],s=this.calculateFogTileMatrix(i.tileID.toUnwrapped());e.transformMat4$1(o,o,s),e.transformMat4$1(a,a,s);const u=e.getAABBPointSquareDist(o,a);if(0===u)return!0;let c=!1;const l=this._elevation;if(l&&u>n&&0!==r){const n=this.calculateProjMatrix(i.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=l.getMinMaxForTile(i.tileID)),o||(o={min:_,max:b});const a=e.furthestTileCorner(this.rotation),s=[a[0]*e.EXTENT,a[1]*e.EXTENT,o.max];e.transformMat4(s,s,n),c=(1-s[1])*this.height*.5<r}return u<n||c}))}return E.sort(((e,t)=>e.distanceSq-t.distanceSq)).map((e=>e.tileID))}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const n=e.clamp(t.lat,-e.MAX_MERCATOR_LATITUDE,e.MAX_MERCATOR_LATITUDE),r=this.projection.project(t.lng,n);return new e.pointGeometry(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,n){let r,i;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(n.x-o.x)/e,i=(n.y-o.y)/e}else{const e=this.pointCoordinate(n),t=this.pointCoordinate(o);r=e.x-t.x,i=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.MercatorCoordinate(a.x-r,a.y-i))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e){return this.projection.locationPoint(this,e)}locationPoint3D(e){return this.projection.locationPoint(this,e,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e){return this.coordinateLocation(this.pointCoordinate3D(e))}locationCoordinate(t,n){const r=n?e.mercatorZfromAltitude(n,t.lat):void 0,i=this.projection.project(t.lng,t.lat);return new e.MercatorCoordinate(i.x,i.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,n){const r=null!=n?n:this._centerAltitude,i=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.transformMat4$1(i,i,this.pixelMatrixInverse),e.transformMat4$1(o,o,this.pixelMatrixInverse);const a=o[3];e.scale$1(i,i,1/i[3]),e.scale$1(o,o,1/a);const s=i[2],u=o[2];return{p0:i,p1:o,t:s===u?0:(r-s)/(u-s)}}screenPointToMercatorRay(t){const n=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.transformMat4$1(n,n,this.pixelMatrixInverse),e.transformMat4$1(r,r,this.pixelMatrixInverse),e.scale$1(n,n,1/n[3]),e.scale$1(r,r,1/r[3]),n[2]=e.mercatorZfromAltitude(n[2],this._center.lat)*this.worldSize,r[2]=e.mercatorZfromAltitude(r[2],this._center.lat)*this.worldSize,e.scale$1(n,n,1/this.worldSize),e.scale$1(r,r,1/this.worldSize),new e.Ray([n[0],n[1],n[2]],e.normalize([],e.sub([],r,n)))}rayIntersectionCoordinate(t){const{p0:n,p1:r,t:i}=t,o=e.mercatorZfromAltitude(n[2],this._center.lat),a=e.mercatorZfromAltitude(r[2],this._center.lat);return new e.MercatorCoordinate(e.number(n[0],r[0],i)/this.worldSize,e.number(n[1],r[1],i)/this.worldSize,e.number(o,a,i))}pointCoordinate(e,t=this._centerAltitude){return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t){if(!this.elevation)return this.pointCoordinate(t);let n=this.projection.pointCoordinate3D(this,t.x,t.y);if(n)return new e.MercatorCoordinate(n[0],n[1],n[2]);let r=0,i=this.horizonLineFromTop();if(t.y>i)return this.pointCoordinate(t);const o=.02*i,a=t.clone();for(let s=0;s<10&&i-r>o;s++){a.y=e.number(r,i,.66);const t=this.projection.pointCoordinate3D(this,a.x,a.y);t?(i=a.y,n=t):r=a.y}return n?new e.MercatorCoordinate(n[0],n[1],n[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}_coordinatePoint(t,n){const r=n&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,i=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.transformMat4$1(i,i,this.pixelMatrix),i[3]>0?new e.pointGeometry(i[0]/i[3],i[1]/i[3]):new e.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:n}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,i=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.pointGeometry(n,t)),a=this.pointLocation3D(new e.pointGeometry(i,t)),s=this.pointLocation3D(new e.pointGeometry(i,r)),u=this.pointLocation3D(new e.pointGeometry(n,r));let c=Math.min(o.lng,a.lng,s.lng,u.lng),l=Math.max(o.lng,a.lng,s.lng,u.lng),f=Math.min(o.lat,a.lat,s.lat,u.lat),h=Math.max(o.lat,a.lat,s.lat,u.lat);const d=Math.pow(2,-this.zoom)/16*270,p="globe"===this.projection.name?1:4,y=(t,n,r,i,o)=>{const a=(t+r)/2,s=(n+i)/2,u=new e.pointGeometry(a,s),{lng:m,lat:g}=this.pointLocation3D(u),v=Math.max(0,c-m,f-g,m-l,g-h);c=Math.min(c,m),l=Math.max(l,m),f=Math.min(f,g),h=Math.max(h,g),(o<p||v>d)&&(y(t,n,a,s,o+1),y(a,s,r,i,o+1))};if(y(n,t,i,t,1),y(i,t,i,r,1),y(i,r,n,r,1),y(n,r,n,t,1),"globe"===this.projection.name){const[t,n]=e.polesInViewport(this);t?(h=90,l=180,c=-180):n&&(f=-90,l=180,c=-180)}return new e.LngLatBounds(new e.LngLat(c,f),new e.LngLat(l,h))}_getBoundsRectangular(t,n){const{top:r,left:i}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.pointGeometry(i,r),u=new e.pointGeometry(a,r),c=new e.pointGeometry(a,o),l=new e.pointGeometry(i,o);let f=this.pointCoordinate(s,t),h=this.pointCoordinate(u,t);const d=this.pointCoordinate(c,n),p=this.pointCoordinate(l,n),y=(e,t)=>(t.y-e.y)/(t.x-e.x);return f.y>1&&h.y>=0?f=new e.MercatorCoordinate((1-p.y)/y(p,f)+p.x,1):f.y<0&&h.y<=1&&(f=new e.MercatorCoordinate(-p.y/y(p,f)+p.x,0)),h.y>1&&f.y>=0?h=new e.MercatorCoordinate((1-d.y)/y(d,h)+d.x,1):h.y<0&&f.y<=1&&(h=new e.MercatorCoordinate(-d.y/y(d,h)+d.x,0)),(new e.LngLatBounds).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(p)).extend(this.coordinateLocation(d))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce(((e,t)=>{if(t.dem){const n=t.dem.tree;e.min=Math.min(e.min,n.minimums[0]),e.max=Math.max(e.max,n.maximums[0])}return e}),{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(e=!0){const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,n=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,n):n}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-e.MAX_MERCATOR_LATITUDE,this.maxLat=e.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=e.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=e.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=e.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const n=t.key,r=this._distanceTileDataCache;if(r[n])return r[n];const i=t.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(i.z),u=(i.x+Math.pow(2,i.z)*t.wrap)*s,c=i.y*s,l=this.point;l.x*=a/this.worldSize,l.y*=a/this.worldSize;const f=this.angle,h=Math.sin(-f),d=-Math.cos(-f);return r[n]={bearing:[h,d],center:[(l.x-u)*o,(l.y-c)*o],scale:s/e.EXTENT*o},r[n]}calculateFogTileMatrix(t){const n=t.key,r=this._fogTileMatrixCache;if(r[n])return r[n];const i=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.multiply(i,this.worldToFogMatrix,i),r[n]=new Float32Array(i),r[n]}calculateProjMatrix(t,n=!1){const r=t.key,i=n?this._alignedProjMatrixCache:this._projMatrixCache;if(i[r])return i[r];const o=this.calculatePosMatrix(t,this.worldSize);return e.multiply(o,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:n?this.alignedProjMatrix:this.projMatrix,o),i[r]=new Float32Array(o),i[r]}calculatePixelsToTileUnitsMatrix(t){const n=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[n])return r[n];const i=function(t,n){const{scale:r}=t.tileTransform,i=r*e.EXTENT/(t.tileSize*Math.pow(2,n.zoom-t.tileID.overscaledZ+t.tileID.canonical.z));return o=new Float32Array(4),u=(a=n.inverseAdjustmentMatrix)[1],c=a[2],l=a[3],h=(s=[i,i])[1],o[0]=a[0]*(f=s[0]),o[1]=u*f,o[2]=c*h,o[3]=l*h,o;var o,a,s,u,c,l,f,h}(t,this);return r[n]=i,r[n]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,n=e.fromScaling([],[t,t,t]);return e.multiply(n,n,this.globeMatrix),n}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const n=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(n),i=this._camera.forward(),o=e.mercatorZfromAltitude(1,this._center.lat);r[2]/=o,i[2]/=o,e.normalize(i,i);const a=t.raycast(r,i,t.exaggeration());if(a){const t=e.scaleAndAdd([],r,i,a),n=new e.MercatorCoordinate(t[0],t[1],e.mercatorZfromAltitude(t[2],e.latFromMercatorY(t[1]))),s=(n.z+e.length([n.x-r[0],n.y-r[1],n.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=n.toAltitude(),this._center=this.coordinateLocation(n),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(t=!1){if(!this._elevation)return;const n=this._elevation,r=e.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,i=this._computeCameraPosition(r),o=n.getAtPointOrZero(new e.MercatorCoordinate(...i)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),u=i[2]-a;if(u<=s)if(u<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),n=[i[0],i[1],t.z-i[2]],r=e.length(n);n[2]-=(s-u)/this._pixelsPerMercatorPixel;const o=e.length(n);if(0===o)return;e.scale$2(n,n,r/o*this._pixelsPerMercatorPixel),this._camera.position=[i[0],i[1],t.z*this._pixelsPerMercatorPixel-n[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const n=this.center;return n.lat=e.clamp(n.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(n.lng=e.clamp(n.lng,this.minLng,this.maxLng)),this.center=n,void(this._constraining=!1)}const n=this._unmodified,{x:r,y:i}=this.point;let o=0,a=r,s=i;const u=this.width/2,c=this.height/2,l=this.worldMinY*this.scale,f=this.worldMaxY*this.scale;if(i-c<l&&(s=l+c),i+c>f&&(s=f-c),f-l<this.height&&(o=Math.max(o,this.height/(f-l)),s=(f+l)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,n=this.worldSize/2-(e+t)/2;a=(r+n+this.worldSize)%this.worldSize-n,a-u<e&&(a=e+u),a+u>t&&(a=t-u),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===r&&s===i||(this.center=this.unproject(new e.pointGeometry(a,s))),o&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=n,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,n=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.mercatorZfromAltitude(1,this.center.lat)/e.mercatorZfromAltitude(1,e.GLOBE_SCALE_MATCH_LATITUDE));const r=Hr(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,r),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const i="meters"===this.projection.zAxisUnit?n:1,o=this._camera.getWorldToCamera(this.worldSize,i),a=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);a[8]=2*-t.x/this.width,a[9]=2*t.y/this.height;let s=e.mul([],a,o);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),n=e.identity([]);e.translate(n,n,[t.x*this.worldSize,t.y*this.worldSize,0]),e.multiply(n,n,Kr(this)),e.translate(n,n,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.multiply(s,s,n),this.inverseAdjustmentMatrix=function(e){const t=Kr(e,!0);return v([],[t[0],t[1],t[4],t[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=e.scale([],s,[this.worldSize,this.worldSize,this.worldSize/i,1]),this.projMatrix=s,this.invProjMatrix=e.invert(new Float64Array(16),this.projMatrix);const u=e.invert([],a);this.frustumCorners=e.FrustumCorners.fromInvProjectionMatrix(u,this.horizonLineFromTop(),this.height);const c=new Float32Array(16);e.identity(c),e.scale(c,c,[1,-1,1]),e.rotateX(c,c,this._pitch),e.rotateZ(c,c,this.angle);const l=e.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),f=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;l[8]=2*-t.x/this.width,l[9]=2*(t.y+f)/this.height,this.skyboxMatrix=e.multiply(c,l,c);const h=this.point,d=h.x,p=h.y,y=this.width%2/2,m=this.height%2/2,g=Math.cos(this.angle),b=Math.sin(this.angle),_=d-Math.round(d)+g*y+b*m,w=p-Math.round(p)+g*m+b*y,x=new Float64Array(s);if(e.translate(x,x,[_>.5?_-1:_,w>.5?w-1:w,0]),this.alignedProjMatrix=x,s=e.create(),e.scale(s,s,[this.width/2,-this.height/2,1]),e.translate(s,s,[1,-1,0]),this.labelPlaneMatrix=s,s=e.create(),e.scale(s,s,[1,-1,1]),e.translate(s,s,[-1,-1,0]),e.scale(s,s,[2/this.width,2/this.height,1]),this.glCoordMatrix=s,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},s=e.invert(new Float64Array(16),this.pixelMatrix),!s)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=s,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.calculateGlobeMatrix(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.transformMat4(t,t,o),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=s;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,n=this.cameraPixelsPerMeter,r=this._camera.position,i=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,n];e.scale$2(o,o,i),e.scale$2(r,r,-1),e.multiply$2(r,r,o);const a=e.create();e.translate(a,a,r),e.scale(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,n,i)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,n=this._camera.forward(),r=this.point,i=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-n[0]*i,r.y/this.worldSize-n[1]*i,e/this.worldSize*this._centerAltitude-n[2]*i]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const n=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],i=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),i>0&&(o=Math.min((n-r)/i,1)),this._camera.position=e.scaleAndAdd([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,n=this._camera.forward(),{pitch:r,bearing:i}=this._camera.getPitchBearing(),o=e.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.degToRad(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),u=this._zoomFromMercatorZ(s);e.scaleAndAdd(t,t,n,s),this._pitch=e.clamp(r,e.degToRad(this.minPitch),e.degToRad(this.maxPitch)),this.angle=e.wrap(i,-Math.PI,Math.PI),this._setZoom(e.clamp(u,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.MercatorCoordinate(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min((null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(e*this.tileSize))}zoomFromMercatorZAdjusted(t){let n=0,r=e.GLOBE_ZOOM_THRESHOLD_MAX,i=0,o=1/0;for(;r-n>1e-6&&r>n;){const e=n+.5*(r-n),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),u=this.scaleZoom(s/(t*this.tileSize)),c=Math.abs(e-u);c<o&&(o=c,i=e),e<u?n=e:r=e}return i}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,n){const r=Math.min(t.x,n.x),i=Math.max(t.x,n.x),o=Math.min(t.y,n.y),a=Math.max(t.y,n.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.pointGeometry(r,o),new e.pointGeometry(i,a),new e.pointGeometry(r,a),new e.pointGeometry(i,o)],u=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const n=this.rayIntersectionCoordinate(t);if(n.x<u||n.y<0||n.x>c||n.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.pointGeometry(0,0),new e.pointGeometry(this.width,this.height))}zoomDeltaToMovement(t,n){const r=e.length(e.sub([],this._camera.position,t)),i=this._zoomFromMercatorZ(r)+n;return r-this._mercatorZfromZoom(i)}getCameraPoint(){if("globe"===this.projection.name){const t=function([t,n,r],i){const o=[t,n,r,1];e.transformMat4$1(o,o,i);const a=o[3]=Math.max(o[3],1e-6);return o[0]/=a,o[1]/=a,o[2]/=a,o}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.pointGeometry(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.pointGeometry(0,t))}}getCameraToCenterDistance(e,t=this.zoom,n=this.worldSize){const r=Hr(e,t,this.width,this.height,1024),i=e.pixelSpaceConversion(this.center.lat,n,r);return.5/Math.tan(.5*this._fov)*this.height*i}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.multiply(t,t,this.globeMatrix),t}}function $r(e,t){let n=!1,r=null;const i=()=>{r=null,n&&(e(),r=setTimeout(i,t),n=!1)};return()=>(n=!0,r||i(),r)}class Jr{constructor(t){this._hashName=t&&encodeURIComponent(t),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=$r(this._updateHashUnthrottled.bind(this),300)}addTo(t){return this._map=t,e.window.addEventListener("hashchange",this._onHashChange,!1),t.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),e.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const t=this._map;if(!t)return"";const n=ei(t);if(this._hashName){const t=this._hashName;let r=!1;const i=e.window.location.hash.slice(1).split("&").map((e=>{const i=e.split("=")[0];return i===t?(r=!0,`${i}=${n}`):e})).filter((e=>e));return r||i.push(`${t}=${n}`),`#${i.join("&")}`}return`#${n}`}_getCurrentHash(){const t=e.window.location.hash.replace("#","");if(this._hashName){let e;return t.split("&").map((e=>e.split("="))).forEach((t=>{t[0]===this._hashName&&(e=t)})),(e&&e[1]||"").split("/")}return t.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some((e=>isNaN(e)))){const n=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:n,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){const t=e.window.location.href.replace(/(#.+)?$/,this.getHashString());e.window.history.replaceState(e.window.history.state,null,t)}}function ei(e,t){const n=e.getCenter(),r=Math.round(100*e.getZoom())/100,i=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,i),a=Math.round(n.lng*o)/o,s=Math.round(n.lat*o)/o,u=e.getBearing(),c=e.getPitch();let l=t?`/${a}/${s}/${r}`:`${r}/${s}/${a}`;return(u||c)&&(l+="/"+Math.round(10*u)/10),c&&(l+=`/${Math.round(c)}`),l}const ti={linearity:.3,easing:e.bezier(0,0,.3,1)},ni=e.extend({deceleration:2500,maxSpeed:1400},ti),ri=e.extend({deceleration:20,maxSpeed:1400},ti),ii=e.extend({deceleration:1e3,maxSpeed:360},ti),oi=e.extend({deceleration:1e3,maxSpeed:90},ti);class ai{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.exported.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,n=e.exported.now();for(;t.length>0&&n-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const n={zoom:0,bearing:0,pitch:0,pan:new e.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)n.zoom+=e.zoomDelta||0,n.bearing+=e.bearingDelta||0,n.pitch+=e.pitchDelta||0,e.panDelta&&n.pan._add(e.panDelta),e.around&&(n.around=e.around),e.pinchAround&&(n.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,i={};if(n.pan.mag()){const o=ui(n.pan.mag(),r,e.extend({},ni,t||{}));i.offset=n.pan.mult(o.amount/n.pan.mag()),i.center=this._map.transform.center,si(i,o)}if(n.zoom){const e=ui(n.zoom,r,ri);i.zoom=this._map.transform.zoom+e.amount,si(i,e)}if(n.bearing){const t=ui(n.bearing,r,ii);i.bearing=this._map.transform.bearing+e.clamp(t.amount,-179,179),si(i,t)}if(n.pitch){const e=ui(n.pitch,r,oi);i.pitch=this._map.transform.pitch+e.amount,si(i,e)}if(i.zoom||i.bearing){const e=void 0===n.pinchAround?n.around:n.pinchAround;i.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),i.noMoveStart=!0,i}}function si(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function ui(t,n,r){const{maxSpeed:i,linearity:o,deceleration:a}=r,s=e.clamp(t*o/(n/1e3),-i,i),u=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*u,amount:s*(u/2)}}class ci extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r,i={}){const o=p(n.getCanvasContainer(),r),a=n.unproject(o);super(t,e.extend({point:o,lngLat:a,originalEvent:r},i)),this._defaultPrevented=!1,this.target=n}}class li extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,n,r){const i="touchend"===t?r.changedTouches:r.touches,o=y(n.getCanvasContainer(),i),a=o.map((e=>n.unproject(e))),s=o.reduce(((e,t,n,r)=>e.add(t.div(r.length))),new e.pointGeometry(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:n.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class fi extends e.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t,n){super(e,{originalEvent:n}),this._defaultPrevented=!1}}class hi{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new fi(e.type,this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new ci(e.type,this._map,e))}mouseup(e){this._map.fire(new ci(e.type,this._map,e))}preclick(t){const n=e.extend({},t);n.type="preclick",this._map.fire(new ci(n.type,this._map,n))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new ci(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new ci(e.type,this._map,e))}mouseover(e){this._map.fire(new ci(e.type,this._map,e))}mouseout(e){this._map.fire(new ci(e.type,this._map,e))}touchstart(e){return this._firePreventable(new li(e.type,this._map,e))}touchmove(e){this._map.fire(new li(e.type,this._map,e))}touchend(e){this._map.fire(new li(e.type,this._map,e))}touchcancel(e){this._map.fire(new li(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class di{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new ci(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new ci(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class pi{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(l(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const n=t,r=this._startPos,i=this._lastPos;if(!r||!i||i.equals(n)||!this._box&&n.dist(r)<this._clickTolerance)return;this._lastPos=n,this._box||(this._box=o("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const a=Math.min(r.x,n.x),s=Math.max(r.x,n.x),u=Math.min(r.y,n.y),c=Math.max(r.y,n.y);this._map._requestDomTask((()=>{this._box&&(this._box.style.transform=`translate(${a}px,${u}px)`,this._box.style.width=s-a+"px",this._box.style.height=c-u+"px")}))}mouseupWindow(t,n){if(!this._active)return;const r=this._startPos,i=n;if(r&&0===t.button){if(this.reset(),d(),r.x!==i.x||r.y!==i.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,i,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),f(),delete this._startPos,delete this._lastPos}_fireEvent(t,n){return this._map.fire(new e.Event(t,{originalEvent:n}))}}function yi(e,t){const n={};for(let r=0;r<e.length;r++)n[e[r].identifier]=t[r];return n}class mi{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,n,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const n=new e.pointGeometry(0,0);for(const e of t)n._add(e);return n.div(t.length)}(n),this.touches=yi(r,n)))}touchmove(e,t,n){if(this.aborted||!this.centroid)return;const r=yi(n,t);for(const i in this.touches){const e=this.touches[i],t=r[i];(!t||t.dist(e)>30)&&(this.aborted=!0)}}touchend(e,t,n){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===n.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class gi{constructor(e){this.singleTap=new mi(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,n){this.singleTap.touchstart(e,t,n)}touchmove(e,t,n){this.singleTap.touchmove(e,t,n)}touchend(e,t,n){const r=this.singleTap.touchend(e,t,n);if(r){const t=e.timeStamp-this.lastTime<500,n=!this.lastTap||this.lastTap.dist(r)<30;if(t&&n||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class vi{constructor(){this._zoomIn=new gi({numTouches:1,numTaps:2}),this._zoomOut=new gi({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,n){this._zoomIn.touchstart(e,t,n),this._zoomOut.touchstart(e,t,n)}touchmove(e,t,n){this._zoomIn.touchmove(e,t,n),this._zoomOut.touchmove(e,t,n)}touchend(e,t,n){const r=this._zoomIn.touchend(e,t,n),i=this._zoomOut.touchend(e,t,n);return r?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):i?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(i)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const bi={0:1,2:2};class _i{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const n=m(e);this._correctButton(e,n)&&(this._lastPoint=t,this._eventButton=n)}mousemoveWindow(e,t){const n=this._lastPoint;if(n)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const n=bi[t];return void 0===e.buttons||(e.buttons&n)!==n}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(n)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(n,t)}mouseupWindow(e){this._lastPoint&&m(e)===this._eventButton&&(this._moved&&d(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wi extends _i{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class xi extends _i{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=.8*(t.x-e.x);if(n)return this._active=!0,{bearingDelta:n}}contextmenu(e){e.preventDefault()}}class ki extends _i{_correctButton(e,t){return 0===t&&e.ctrlKey||2===t}_move(e,t){const n=-.5*(t.y-e.y);if(n)return this._active=!0,{pitchDelta:n}}contextmenu(e){e.preventDefault()}}class Ai{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=n.clickTolerance||1,this.reset(),e.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.pointGeometry(0,0)}touchstart(e,t,n){return this._calculateTransform(e,t,n)}touchmove(t,n,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.isFullscreen())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,n,r)}}touchend(e,t,n){this._calculateTransform(e,t,n),this._active&&n.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,n,r){r.length>0&&(this._active=!0);const i=yi(r,n),o=new e.pointGeometry(0,0),a=new e.pointGeometry(0,0);let s=0;for(const e in i){const t=i[e],n=this._touches[e];n&&(o._add(t),a._add(t.sub(n)),s++,i[e]=t)}if(this._touches=i,s<this._minTouches||!a.mag())return;const u=a.div(s);return this._sum._add(u),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:u}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")}),500)}}class Ei{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,n){return{}}touchstart(e,t,n){this._firstTwoTouches||n.length<2||(this._firstTwoTouches=[n[0].identifier,n[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,n){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[i,o]=r,a=Ii(n,t,i),s=Ii(n,t,o);if(!a||!s)return;const u=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],u,e)}touchend(e,t,n){if(!this._firstTwoTouches)return;const[r,i]=this._firstTwoTouches,o=Ii(n,t,r),a=Ii(n,t,i);o&&a||(this._active&&d(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Ii(e,t,n){for(let r=0;r<e.length;r++)if(e[r].identifier===n)return t[r]}function Si(e,t){return Math.log(e/t)/Math.LN2}class Ti extends Ei{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const n=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Si(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Si(this._distance,n),pinchAround:t}}}function Mi(e,t){return 180*e.angleWith(t)/Math.PI}class Pi extends Ei{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const n=this._vector;if(this._vector=e[0].sub(e[1]),n&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Mi(this._vector,n),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,n=this._startVector;if(!n)return!1;const r=Mi(e,n);return Math.abs(r)<t}}function Bi(e){return Math.abs(e.y)>Math.abs(e.x)}class Ci extends Ei{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,Bi(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,n,r){const i=this._lastPoints;if(!i)return;const o=t[0].sub(i[0]),a=t[1].sub(i[1]);return this._map._cooperativeGestures&&!e.isFullscreen()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,n){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,i=t.mag()>=2;if(!r&&!i)return;if(!r||!i)return null==this._firstMove&&(this._firstMove=n),n-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return Bi(e)&&Bi(t)&&o}}const Oi={panStep:100,bearingStep:15,pitchStep:10};class Di{constructor(){const e=Oi;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,n=0,r=0,i=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),i=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),i=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(n=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Ri,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+n*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-i*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Ri(e){return e*(2-e)}const Li=4.000244140625;class zi{constructor(t,n){this._map=t,this._el=t.getCanvasContainer(),this._handler=n,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,e.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.isFullscreen()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let n=t.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.exported.now(),i=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==n&&n%Li==0?this._type="wheel":0!==n&&Math.abs(n)<4?this._type="trackpad":i>400?(this._type=null,this._lastValue=n,this._timeout=setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(i*n)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,n+=this._lastValue)),t.shiftKey&&n&&(n/=4),this._type&&(this._lastWheelEvent=t,this._delta-=n,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=p(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const n=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>Li?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const i=n(),o=Math.pow(2,i),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=i,this._easing=this._smoothOutEasing(200)),this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:n(),i=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&i&&o){const t=Math.min((e.exported.now()-this._lastWheelEventTime)/200,1),n=o(t);a=e.number(i,r,n),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;return this._active=!0,s&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!s,zoomDelta:a-n(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let n=e.ease;if(this._prevEase){const t=this._prevEase,r=(e.exported.now()-t.start)/t.duration,i=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(i*i+1e-4)*.01,a=Math.sqrt(.0729-o*o);n=e.bezier(o,a,.25,1)}return this._prevEase={start:e.exported.now(),duration:t,easing:n},n}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=o("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(e.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout((()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")}),200)}}class Zi{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ni{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:n=>{n.easeTo({duration:300,zoom:n.getZoom()+(e.shiftKey?-1:1),around:n.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ui{constructor(){this._tap=new gi({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,n){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?n.length>0&&(this._swipePoint=t[0],this._swipeTouch=n[0].identifier):this._tap.touchstart(e,t,n))}touchmove(e,t,n){if(this._tapTime){if(this._swipePoint){if(n[0].identifier!==this._swipeTouch)return;const r=t[0],i=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:i/128}}}else this._tap.touchmove(e,t,n)}touchend(e,t,n){this._tapTime?this._swipePoint&&0===n.length&&this.reset():this._tap.touchend(e,t,n)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Fi{constructor(e,t,n){this._el=e,this._mousePan=t,this._touchPan=n}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class ji{constructor(e,t,n){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=n}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Wi{constructor(e,t,n,r){this._el=e,this._touchZoom=t,this._touchRotate=n,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Vi=e=>e.zoom||e.drag||e.pitch||e.rotate;class Ki extends e.Event{}class Gi{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,n){const r=e.sub([],n,t);this.radius=e.length(r[2]<0?e.div([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.div(t,t,this.constants),e.normalize(t,t),e.mul$1(t,t,this.constants);const n=e.scale$2([],t,this.radius);if(n[2]>0){const t=e.scale$2([],[0,0,1],e.dot(n,[0,0,1])),r=e.scale$2([],e.normalize([],[n[0],n[1],0]),this.radius),i=e.add([],n,e.scale$2([],e.sub([],e.add([],r,t),n),2));n[0]=i[0],n[1]=i[1]}return n}}function Hi(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class qi{constructor(t,n){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new ai(t),this._bearingSnap=n.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Gi,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(n),e.bindAll(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[e.window,"blur",void 0]];for(const[i,o,a]of this._listeners)i.addEventListener(o,i===e.window.document?this.handleWindowEvent:this.handleEvent,a)}destroy(){for(const[t,n,r]of this._listeners)t.removeEventListener(n,t===e.window.document?this.handleWindowEvent:this.handleEvent,r)}_addDefaultHandlers(e){const t=this._map,n=t.getCanvasContainer();this._add("mapEvent",new hi(t,e));const r=t.boxZoom=new pi(t,e);this._add("boxZoom",r);const i=new vi,o=new Ni;t.doubleClickZoom=new Zi(o,i),this._add("tapZoom",i),this._add("clickZoom",o);const a=new Ui;this._add("tapDragZoom",a);const s=t.touchPitch=new Ci(t);this._add("touchPitch",s);const u=new xi(e),c=new ki(e);t.dragRotate=new ji(e,u,c),this._add("mouseRotate",u,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const l=new wi(e),f=new Ai(t,e);t.dragPan=new Fi(n,l,f),this._add("mousePan",l),this._add("touchPan",f,["touchZoom","touchRotate"]);const h=new Pi,d=new Ti;t.touchZoomRotate=new Wi(n,d,h,a),this._add("touchRotate",h,["touchPan","touchZoom"]),this._add("touchZoom",d,["touchPan","touchRotate"]),this._add("blockableMapEvent",new di(t));const p=t.scrollZoom=new zi(t,this);this._add("scrollZoom",p,["mousePan"]);const y=t.keyboard=new Di;this._add("keyboard",y);for(const m of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[m]&&t[m].enable(e[m])}_add(e,t,n){this._handlers.push({handlerName:e,handler:t,allowed:n}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Vi(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,n){for(const r in e)if(r!==n&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,`${e.type}Window`)}_getMapTouches(e){const t=[];for(const n of e)this._el.contains(n.target)&&t.push(n);return t}handleEvent(e,t){this._updatingCamera=!0;const n="renderFrame"===e.type,r=n?void 0:e,i={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,u=s?y(this._el,s):n?void 0:p(this._el,e);for(const{handlerName:f,handler:h,allowed:d}of this._handlers){if(!h.isEnabled())continue;let n;this._blockedByActive(a,d,f)?h.reset():h[t||e.type]&&(n=h[t||e.type](e,u,s),this.mergeHandlerResult(i,o,n,f,r),n&&n.needsRenderFrame&&this._triggerRenderFrame()),(n||h.isActive())&&(a[f]=h)}const c={};for(const f in this._previousActiveHandlers)a[f]||(c[f]=r);this._previousActiveHandlers=a,(Object.keys(c).length||Hi(i))&&(this._changes.push([i,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||Hi(i))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:l}=i;l&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],l(this._map))}mergeHandlerResult(t,n,r,i,o){if(!r)return;e.extend(t,r);const a={handlerName:i,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(n.zoom=a),void 0!==r.panDelta&&(n.drag=a),void 0!==r.pitchDelta&&(n.pitch=a),void 0!==r.bearingDelta&&(n.rotate=a)}_applyChanges(){const t={},n={},r={};for(const[i,o,a]of this._changes)i.panDelta&&(t.panDelta=(t.panDelta||new e.pointGeometry(0,0))._add(i.panDelta)),i.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+i.zoomDelta),i.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+i.bearingDelta),i.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+i.pitchDelta),void 0!==i.around&&(t.around=i.around),void 0!==i.aroundCoord&&(t.aroundCoord=i.aroundCoord),void 0!==i.pinchAround&&(t.pinchAround=i.pinchAround),i.noInertia&&(t.noInertia=i.noInertia),e.extend(n,o),e.extend(r,a);this._updateMapTransform(t,n,r),this._changes=[]}_updateMapTransform(t,n,r){const i=this._map,o=i.transform,a=e=>[e.x,e.y,e.z];if((e=>{const t=this._eventsInProgress.drag;return t&&!this._handlersById[t.handlerName].isActive()})()&&!Hi(t)){const e=o.zoom;o.cameraElevationReference="sea",o.recenterOnTerrain(),o.cameraElevationReference="ground",e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&i._stop(!0),!Hi(t))return void this._fireEvents(n,r,!0);let{panDelta:s,zoomDelta:u,bearingDelta:c,pitchDelta:l,around:f,aroundCoord:h,pinchAround:d}=t;o._isCameraConstrained&&(u>0&&(u=0),o._isCameraConstrained=!1),void 0!==d&&(f=d),(u||(e=>n.drag&&!this._eventsInProgress.drag)())&&f&&(this._dragOrigin=a(o.pointCoordinate3D(f)),this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",i._stop(!0),f=f||i.transform.centerPoint,c&&(o.bearing+=c),l&&(o.pitch+=l),o._updateCameraState();const p=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(f.sub(s)).dir);p[0]=t[0]-e[0],p[1]=t[1]-e[1]}else{const t=o.pointCoordinate(f);if("globe"===o.projection.name){s=s.rotate(-o.angle);const n=o._pixelsPerMercatorPixel/o.worldSize;p[0]=-s.x*e.mercatorScale(e.latFromMercatorY(t.y))*n,p[1]=-s.y*e.mercatorScale(o.center.lat)*n}else{const e=o.pointCoordinate(f.sub(s));t&&e&&(p[0]=e.x-t.x,p[1]=e.y-t.y)}}const y=o.zoom,m=[0,0,0];if(u){const t=a(h||o.pointCoordinate3D(f)),n={dir:e.normalize([],e.sub([],t,o._camera.position))};if(n.dir[2]<0){const r=o.zoomDeltaToMovement(t,u);e.scale$2(m,n.dir,r)}}const g=e.add(p,p,m);o._translateCameraConstrained(g),u&&Math.abs(o.zoom-y)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(n,r,!0)}_fireEvents(t,n,r){const i=Vi(this._eventsInProgress),o=Vi(t),a={};for(const e in t){const{originalEvent:n}=t[e];this._eventsInProgress[e]||(a[`${e}start`]=n),this._eventsInProgress[e]=t[e]}!i&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:n}=t[e];this._fireEvent(e,n)}const s={};let u;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],u=n[t]||r,s[`${e}end`]=u)}for(const e in s)this._fireEvent(e,s[e]);const c=Vi(this._eventsInProgress);if(r&&(i||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),n=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(n(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:u})):(this._map.fire(new e.Event("moveend",{originalEvent:u})),n(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,n){this._map.fire(new e.Event(t,n?{originalEvent:n}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{this._frameId=void 0,this.handleEvent(new Ki("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const Yi="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class Xi extends e.Evented{constructor(t,n){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=n.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}getCenter(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,n,r){return t=e.pointGeometry.convert(t).mult(-1),this.panTo(this.transform.center,e.extend({offset:t},n),r)}panTo(t,n,r){return this.easeTo(e.extend({center:t},n),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,n,r){return this.easeTo(e.extend({zoom:t},n),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,n,r){return this.easeTo(e.extend({bearing:t},n),r)}resetNorth(t,n){return this.rotateTo(0,e.extend({duration:1e3},t),n),this}resetNorthPitch(t,n){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},t),n),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,n){t=e.LngLatBounds.convert(t);const r=n&&n.bearing||0,i=n&&n.pitch||0,o=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,i,n)}_extendCameraOptions(t){const n={top:0,bottom:0,right:0,left:0};if("number"==typeof(t=e.extend({padding:n,offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding){const e=t.padding;t.padding={top:e,bottom:e,right:e,left:e}}return t.padding=e.extend(n,t.padding),t}_minimumAABBFrustumDistance(e,t){const n=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return n/r>e.aspect?n/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,n,r,i,o,a){const s=t.clone(),u=this._extendCameraOptions(a);s.bearing=i,s.pitch=o;const c=e.LngLat.convert(n),l=e.LngLat.convert(r),f=.5*(c.lat+l.lat),h=.5*(c.lng+l.lng),d=e.latLngToECEF(f,h),p=e.normalize([],d),y=e.normalize([],e.cross([],p,[0,1,0])),m=e.cross([],y,p),g=[y[0],y[1],y[2],0,m[0],m[1],m[2],0,p[0],p[1],p[2],0,0,0,0,1],v=[d,e.latLngToECEF(c.lat,c.lng),e.latLngToECEF(l.lat,c.lng),e.latLngToECEF(l.lat,l.lng),e.latLngToECEF(c.lat,l.lng),e.latLngToECEF(f,c.lng),e.latLngToECEF(f,l.lng),e.latLngToECEF(c.lat,h),e.latLngToECEF(l.lat,h)];let b=e.Aabb.fromPoints(v.map((t=>[e.dot(y,t),e.dot(m,t),e.dot(p,t)])));const _=e.transformMat4([],b.center,g);0===e.squaredLength(_)&&e.set(_,0,0,1),e.normalize(_,_),e.scale$2(_,_,e.GLOBE_RADIUS),s.center=e.ecefToLatLng(_);const w=s.getWorldToCameraMatrix(),x=e.invert(new Float64Array(16),w);b=e.Aabb.applyTransform(b,e.multiply([],w,g)),e.transformMat4(_,_,w);const k=.5*(b.max[2]-b.min[2]),A=this._minimumAABBFrustumDistance(s,b),E=e.scale$2([],[0,0,1],k),I=e.add(E,_,E),S=A+(0===s.pitch?0:e.distance(_,I)),T=s.globeCenterInViewSpace,M=e.sub([],_,[T[0],T[1],T[2]]);e.normalize(M,M),e.scale$2(M,M,S);const P=e.add([],_,M);e.transformMat4(P,P,x);const B=e.earthRadius/e.GLOBE_RADIUS,C=e.length(P),O=e.mercatorZfromAltitude(Math.max(C*B-e.earthRadius,Number.EPSILON),0),D=Math.min(s.zoomFromMercatorZAdjusted(O),u.maxZoom);return D>.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"mercator"}),s.zoom=D,this._cameraForBounds(s,n,r,i,o,a)):{center:s.center,zoom:D,bearing:i,pitch:o}}queryTerrainElevation(t,n){const r=this.transform.elevation;return r?(n=e.extend({},{exaggerated:!0},n),r.getAtPoint(e.MercatorCoordinate.fromLngLat(t),null,n.exaggerated)):null}_cameraForBounds(t,n,r,i,o,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,n,r,i,o,a);const s=t.clone(),u=this._extendCameraOptions(a),c=s.padding;s.bearing=i,s.pitch=o;const l=e.LngLat.convert(n),f=e.LngLat.convert(r),h=new e.LngLat(l.lng,f.lat),d=new e.LngLat(f.lng,l.lat),p=s.project(l),y=s.project(f),m=this.queryTerrainElevation(l),g=this.queryTerrainElevation(f),v=this.queryTerrainElevation(h),b=this.queryTerrainElevation(d),_=[[p.x,p.y,Math.min(m||0,g||0,v||0,b||0)],[y.x,y.y,Math.max(m||0,g||0,v||0,b||0)]];let w=e.Aabb.fromPoints(_);const x=s.getWorldToCameraMatrix(),k=e.invert(new Float64Array(16),x);w=e.Aabb.applyTransform(w,x);const A=e.sub([],w.max,w.min),E=c.left||0,I=c.right||0,S=c.bottom||0,T=c.top||0,{left:M,right:P,top:B,bottom:C}=u.padding,O=.5*(E+I),D=.5*(T+S),R=Math.min(s.scaleZoom(s.scale*Math.min((s.width-(E+I+M+P))/A[0],(s.height-(S+T+C+B))/A[1])),u.maxZoom),L=s.scale/s.zoomScale(R);w=new e.Aabb([w.min[0]-(M+O)*L,w.min[1]-(C+D)*L,w.min[2]],[w.max[0]+(P+O)*L,w.max[1]+(B+D)*L,w.max[2]]);const z=.5*A[2],Z=this._minimumAABBFrustumDistance(s,w),N=[0,0,1,0];e.transformMat4$1(N,N,x),e.normalize$2(N,N);const U=e.scale$2([],N,Z+z),F=e.add([],w.center,U),j=("number"==typeof u.offset.x&&"number"==typeof u.offset.y?new e.pointGeometry(u.offset.x,u.offset.y):e.pointGeometry.convert(u.offset)).rotate(-e.degToRad(i));w.center[0]-=j.x*L,w.center[1]+=j.y*L,e.transformMat4(w.center,w.center,k),e.transformMat4(F,F,k);const W=[w.center[0],w.center[1],F[2]*s.pixelsPerMeter];e.scale$2(W,W,1/s.worldSize);const V=e.lngFromMercatorX(W[0]),K=e.latFromMercatorY(W[1]),G=Math.min(s._zoomFromMercatorZ(W[2]),u.maxZoom),H=new e.LngLat(V,K);return s.mercatorFromTransition&&G<.5*(e.GLOBE_ZOOM_THRESHOLD_MIN+e.GLOBE_ZOOM_THRESHOLD_MAX)?(s.setProjection({name:"globe"}),s.zoom=G,this._cameraForBounds(s,n,r,i,o,a)):{center:H,zoom:G,bearing:i,pitch:o}}fitBounds(e,t,n){const r=this.cameraForBounds(e,t);return this._fitInternal(r,t,n)}fitScreenCoordinates(t,n,r,i,o){const a=e.pointGeometry.convert(t),s=e.pointGeometry.convert(n),u=new e.pointGeometry(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.pointGeometry(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const l=this.transform.pointLocation3D(u),f=this.transform.pointLocation3D(c),h=this.transform.pointLocation3D(new e.pointGeometry(u.x,c.y)),d=this.transform.pointLocation3D(new e.pointGeometry(c.x,u.y)),p=[Math.min(l.lng,f.lng,h.lng,d.lng),Math.min(l.lat,f.lat,h.lat,d.lat)],y=[Math.max(l.lng,f.lng,h.lng,d.lng),Math.max(l.lat,f.lat,h.lat,d.lat)],m=i&&i.pitch?i.pitch:this.getPitch(),g=this._cameraForBounds(this.transform,p,y,r,m,i);return this._fitInternal(g,i,o)}_fitInternal(t,n,r){return t?(delete(n=e.extend(t,n)).padding,n.linear?this.easeTo(n,r):this.flyTo(n,r)):this}jumpTo(t,n){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let i=!1,o=!1,a=!1;return"zoom"in t&&r.zoom!==+t.zoom&&(i=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.LngLat.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch),null==t.padding||r.isPaddingEqual(t.padding)||(r.padding=t.padding),t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),i&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),o&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),a&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.warnOnce(Yi),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,n){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.warnOnce(Yi),this;this.stop();const i=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=i!==r.zoom,u=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.Event("movestart",n)).fire(new e.Event("move",n)),s&&this.fire(new e.Event("zoomstart",n)).fire(new e.Event("zoom",n)).fire(new e.Event("zoomend",n)),c&&this.fire(new e.Event("rotatestart",n)).fire(new e.Event("rotate",n)).fire(new e.Event("rotateend",n)),u&&this.fire(new e.Event("pitchstart",n)).fire(new e.Event("pitch",n)).fire(new e.Event("pitchend",n)),this.fire(new e.Event("moveend",n)),this}easeTo(t,n){this._stop(!1,t.easeId),(!1===(t=e.extend({offset:[0,0],duration:500,easing:e.ease},t)).animate||!t.essential&&e.exported.prefersReducedMotion)&&(t.duration=0);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),u="zoom"in t?+t.zoom:i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,l="pitch"in t?+t.pitch:a,f="padding"in t?t.padding:r.padding,h=e.pointGeometry.convert(t.offset);let d,p,y;if("globe"===r.projection.name){const n=e.MercatorCoordinate.fromLngLat(r.center),i=h.rotate(-r.angle);n.x+=i.x/r.worldSize,n.y+=i.y/r.worldSize;const o=n.toLngLat(),a=e.LngLat.convert(t.center||o);this._normalizeCenter(a),d=r.centerPoint.add(i),p=new e.pointGeometry(n.x,n.y).mult(r.worldSize),y=new e.pointGeometry(e.mercatorXfromLng(a.lng),e.mercatorYfromLat(a.lat)).mult(r.worldSize).sub(p)}else{d=r.centerPoint.add(h);const n=r.pointLocation(d),i=e.LngLat.convert(t.center||n);this._normalizeCenter(i),p=r.project(n),y=r.project(i).sub(p)}const m=r.zoomScale(u-i);let g,v;t.around&&(g=e.LngLat.convert(t.around),v=r.locationPoint(g));const b=this._zooming||u!==i,_=this._rotating||o!==c,w=this._pitching||l!==a,x=!r.isPaddingEqual(f),k=r=>k=>{if(b&&(r.zoom=e.number(i,u,k)),_&&(r.bearing=e.number(o,c,k)),w&&(r.pitch=e.number(a,l,k)),x&&(r.interpolatePadding(s,f,k),d=r.centerPoint.add(h)),g)r.setLocationAtPoint(g,v);else{const e=r.zoomScale(r.zoom-i),t=u>i?Math.min(2,m):Math.max(.5,m),n=Math.pow(t,1-k),o=r.unproject(p.add(y.mult(k*n)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,d)}return t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(k,t.duration,r);return this._preloadTiles(e),this}const A={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=b,this._rotating=_,this._pitching=w,this._padding=x,this._easeId=t.easeId,this._prepareEase(n,t.noMoveStart,A),this._ease(k(r),(e=>{r.recenterOnTerrain(),this._afterEase(n,e)}),t),this}_prepareEase(t,n,r={}){this._moving=!0,this.transform.cameraElevationReference="sea",n||r.moving||this.fire(new e.Event("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.Event("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.Event("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.Event("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.Event("move",t)),this._zooming&&this.fire(new e.Event("zoom",t)),this._rotating&&this.fire(new e.Event("rotate",t)),this._pitching&&this.fire(new e.Event("pitch",t))}_afterEase(t,n){if(this._easeId&&n&&this._easeId===n)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,i=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.Event("zoomend",t)),i&&this.fire(new e.Event("rotateend",t)),o&&this.fire(new e.Event("pitchend",t)),this.fire(new e.Event("moveend",t))}flyTo(t,n){if(!t.essential&&e.exported.prefersReducedMotion){const r=e.pick(t,["center","zoom","bearing","pitch","around"]);return this.jumpTo(r,n)}this.stop(),t=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},t);const r=this.transform,i=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),u="zoom"in t?e.clamp(+t.zoom,r.minZoom,r.maxZoom):i,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,l="pitch"in t?+t.pitch:a,f="padding"in t?t.padding:r.padding,h=r.zoomScale(u-i),d=e.pointGeometry.convert(t.offset);let p=r.centerPoint.add(d);const y=r.pointLocation(p),m=e.LngLat.convert(t.center||y);this._normalizeCenter(m);const g=r.project(y),v=r.project(m).sub(g);let b=t.curve;const _=Math.max(r.width,r.height),w=_/h,x=v.mag();if("minZoom"in t){const n=e.clamp(Math.min(t.minZoom,i,u),r.minZoom,r.maxZoom),o=_/r.zoomScale(n-i);b=Math.sqrt(o/x*2)}const k=b*b;function A(e){const t=(w*w-_*_+(e?-1:1)*k*k*x*x)/(2*(e?w:_)*k*x);return Math.log(Math.sqrt(t*t+1)-t)}function E(e){return(Math.exp(e)-Math.exp(-e))/2}function I(e){return(Math.exp(e)+Math.exp(-e))/2}const S=A(0);let T=function(e){return I(S)/I(S+b*e)},M=function(e){return _*((I(S)*(E(t=S+b*e)/I(t))-E(S))/k)/x;var t},P=(A(1)-S)/b;if(Math.abs(x)<1e-6||!isFinite(P)){if(Math.abs(_-w)<1e-6)return this.easeTo(t,n);const e=w<_?-1:1;P=Math.abs(Math.log(w/_))/b,M=function(){return 0},T=function(t){return Math.exp(e*b*t)}}t.duration="duration"in t?+t.duration:1e3*P/("screenSpeed"in t?+t.screenSpeed/b:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const B=o!==c,C=l!==a,O=!r.isPaddingEqual(f),D=r=>h=>{const y=h*P,b=1/T(y);r.zoom=1===h?u:i+r.scaleZoom(b),B&&(r.bearing=e.number(o,c,h)),C&&(r.pitch=e.number(a,l,h)),O&&(r.interpolatePadding(s,f,h),p=r.centerPoint.add(d));const _=1===h?m:r.unproject(g.add(v.mult(M(y))).mult(b));return r.setLocationAtPoint(r.renderWorldCopies?_.wrap():_,p),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(n),r};if(t.preloadOnly){const e=this._emulate(D,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=B,this._pitching=C,this._padding=O,this._prepareEase(n,!1),this._ease(D(r),(()=>this._afterEase(n)),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,n,r){!1===r.animate||0===r.duration?(t(1),n()):(this._easeStart=e.exported.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=n,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.exported.now()-this._easeStart)/this._easeOptions.duration,1),n=this._onEaseFrame;n&&n(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,n){t=e.wrap(t,-180,180);const r=Math.abs(t-n);return Math.abs(t-360-n)<r&&(t-=360),Math.abs(t+360-n)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(!t.renderWorldCopies||t.maxBounds)return;const n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}_emulate(e,t,n){const r=Math.ceil(15*t/1e3),i=[],o=e(n.clone());for(let a=0;a<=r;a++){const e=o(a/r);i.push(e.clone())}return i}}class Qi{constructor(t={}){this.options=t,e.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact;return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=o("button","mapboxgl-ctrl-attrib-button",this._container),o("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=o("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(e,t){const n=this._map._getUIString(`AttributionControl.${t}`);e.setAttribute("aria-label",n),e.removeAttribute("title"),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const n=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(t){const r=n.reduce(((e,t,r)=>(t.value&&(e+=`${t.key}=${t.value}${r<n.length-1?"&":""}`),e)),"?");t.href=`${e.config.FEEDBACK_URL}/${r}#${ei(this._map,!0)}`,t.rel="noopener nofollow",this._setElementTitle(t,"MapFeedback")}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._sourceCaches;for(const r in t){const n=t[r];if(n.used){const t=n.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort(((e,t)=>e.length-t.length)),e=e.filter(((t,n)=>{for(let r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0})),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const n=e.join(" | ");n!==this._attribHTML&&(this._attribHTML=n,e.length?(this._innerContainer.innerHTML=n,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class $i{constructor(){e.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=o("div","mapboxgl-ctrl");const t=o("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const n=e[t].getSource();if(n.hasOwnProperty("mapbox_logo")&&!n.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class Ji{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,n=t?this._queue.concat(t):this._queue;for(const r of n)if(r.id===e)return void(r.cancelled=!0)}run(e=0){const t=this._currentlyRunning=this._queue;this._queue=[];for(const n of t)if(!n.cancelled&&(n.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function eo(t,n,r){if(t=new e.LngLat(t.lng,t.lat),n){const i=new e.LngLat(t.lng-360,t.lat),o=new e.LngLat(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint(t).distSqr(n),u=n.x<0||n.y<0||n.x>r.width||n.y>r.height;r.locationPoint(i).distSqr(n)<s&&(u||Math.abs(i.lng-r.center.lng)<a)?t=i:r.locationPoint(o).distSqr(n)<s&&(u||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const to={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class no extends e.Evented{constructor(t,n){if(super(),(t instanceof e.window.HTMLElement||n)&&(t=e.extend({element:t},n)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=t&&t.anchor||"center",this._color=t&&t.color||"#3FB1CE",this._scale=t&&t.scale||1,this._draggable=t&&t.draggable||!1,this._clickTolerance=t&&t.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=t&&t.rotation||0,this._rotationAlignment=t&&t.rotationAlignment||"auto",this._pitchAlignment=t&&t.pitchAlignment&&t.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=t&&t.occludedOpacity||.2,t&&t.element)this._element=t.element,this._offset=e.pointGeometry.convert(t&&t.offset||[0,0]);else{this._defaultMarker=!0,this._element=o("div");const n=41,r=27,i=a("svg",{display:"block",height:n*this._scale+"px",width:r*this._scale+"px",viewBox:`0 0 ${r} ${n}`},this._element),s=a("radialGradient",{id:"shadowGradient"},a("defs",{},i));a("stop",{offset:"10%","stop-opacity":.4},s),a("stop",{offset:"100%","stop-opacity":.05},s),a("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},i),a("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},i),a("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},i),a("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},i),this._offset=e.pointGeometry.convert(t&&t.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(e=>{e.preventDefault()})),this._element.addEventListener("mousedown",(e=>{e.preventDefault()}));const r=this._element.classList;for(const e in to)r.remove(`mapboxgl-marker-anchor-${e}`);r.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.LngLat.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,n=13.5,r=Math.sqrt(Math.pow(n,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-t],"bottom-left":[r,-1*(t-n+r)],"bottom-right":[-r,-1*(t-n+r)],left:[n,-1*(t-n)],right:[-n,-1*(t-n)]}:this._offset}this._popup=e,e._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,n=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==n&&13!==n||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const n=e.unproject(t),r=e.getFreeCameraOptions();if(!r.position)return!1;const i=r.position.toLngLat();return i.distanceTo(n)<.9*i.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const n=this._pos;if(!n||n.x<0||n.x>t.transform.width||n.y<0||n.y>t.transform.height)return void this._clearFadeTimer();const r=t.unproject(n);let i;t._showingGlobe()&&e.isLngLatBehindGlobe(t.transform,this._lngLat)?i=0:(i=1-t._queryFogOpacity(r),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(i*=this._occludedOpacity)),this._element.style.opacity=`${i}`,this._element.style.pointerEvents=i>0?"auto":"none",this._popup&&this._popup._setOpacity(i),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform=`\n            translate(${e.x}px,${e.y}px)\n            ${to[this._anchor]}\n            ${this._calculateXYTransform()} ${this._calculateZTransform()}\n            translate(${t.x}px,${t.y}px)\n        `}_calculateXYTransform(){const t=this._pos,n=this._map,r=this.getPitchAlignment();if(!n||!t||"map"!==r)return"";if(!n._showingGlobe()){const e=n.getPitch();return e?`rotateX(${e}deg)`:""}const i=e.radToDeg(e.globeTiltAtLngLat(n.transform,this._lngLat)),o=t.sub(e.globeCenterToScreenPoint(n.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=i/a;return`rotateX(${-o.y*s}deg) rotateY(${o.x*s}deg)`}_calculateZTransform(){const t=this._pos,n=this._map;if(!n||!t)return"";let r=0;const i=this.getRotationAlignment();if("map"===i)if(n._showingGlobe()){const t=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),i=n.project(new e.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(t);r=e.radToDeg(Math.atan2(i.y,i.x))-90}else r=-n.getBearing();else if("horizon"===i){const i=e.smoothstep(4,6,n.getZoom()),o=e.globeCenterToScreenPoint(n.transform);o.y+=i*n.transform.height;const a=t.sub(o),s=e.radToDeg(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-i)}return r+=this._rotation,r?`rotateZ(${r}deg)`:""}_update(t){e.window.cancelAnimationFrame(this._updateFrameId);const n=this._map;n&&(n.transform.renderWorldCopies&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),this._pos=n.project(this._lngLat),!0===t?this._updateFrameId=e.window.requestAnimationFrame((()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())})):this._pos=this._pos.round(),n._requestDomTask((()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(n._showingGlobe()||n.getTerrain()||n.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))})))}getOffset(){return this._offset}setOffset(t){return this._offset=e.pointGeometry.convert(t),this._update(),this}_onMove(t){const n=this._map;if(!n)return;const r=this._pointerdownPos,i=this._positionDelta;if(r&&i){if(!this._isDragging){const e=this._clickTolerance||n._clickTolerance;if(t.point.dist(r)<e)return;this._isDragging=!0}this._pos=t.point.sub(i),this._lngLat=n.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,n=this._pos;t&&n&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(n),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||"auto",this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const ro={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},io=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function oo(t=new e.pointGeometry(0,0),n="bottom"){if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(n){case"top":return new e.pointGeometry(0,t);case"top-left":return new e.pointGeometry(r,r);case"top-right":return new e.pointGeometry(-r,r);case"bottom":return new e.pointGeometry(0,-t);case"bottom-left":return new e.pointGeometry(r,-r);case"bottom-right":return new e.pointGeometry(-r,-r);case"left":return new e.pointGeometry(t,0);case"right":return new e.pointGeometry(-t,0)}return new e.pointGeometry(0,0)}return t instanceof e.pointGeometry||Array.isArray(t)?e.pointGeometry.convert(t):e.pointGeometry.convert(t[n]||[0,0])}class ao{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const n=e.easeCubicInOut((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-n)+this._end*n}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,n){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+n}}const so={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},uo={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},co={showCompass:!0,showZoom:!0,visualizePitch:!1};class lo{constructor(t,n,r=!1){this._clickTolerance=10,this.element=n,this.mouseRotate=new xi({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new ki({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),n.addEventListener("mousedown",this.mousedown),n.addEventListener("touchstart",this.touchstart,{passive:!1}),n.addEventListener("touchmove",this.touchmove),n.addEventListener("touchend",this.touchend),n.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),l()}move(e,t){const n=this.map,r=this.mouseRotate.mousemoveWindow(e,t),i=r&&r.bearingDelta;if(i&&n.setBearing(n.getBearing()+i),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),i=r&&r.pitchDelta;i&&n.setPitch(n.getPitch()+i)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart,{passive:!1}),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){f(),e.window.removeEventListener("mousemove",this.mousemove),e.window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.extend({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),p(this.element,t)),e.window.addEventListener("mousemove",this.mousemove),e.window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,p(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=y(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=y(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const fo={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},ho={maxWidth:100,unit:"metric"};function po(e,t,n){const r=yo(t),i=r/t,o={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[n];this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML=`${r}&nbsp;${o}`}))}function yo(e){const t=Math.pow(10,`${Math.floor(e)}`.length-1);let n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:n>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(n),t*n}const mo={version:e.version,supported:n,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:class extends Xi{constructor(t){if(e.LivePerformanceUtils.mark(e.PerformanceMarkers.create),null!=(t=e.extend({},uo,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.isSafariWithAntialiasingBug(e.window)&&(t.antialias=!1,e.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Qr(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies),t),this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._useWebGL2=t.useWebGL2,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._optimizeForTerrain=t.optimizeForTerrain,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new Ji,this._domRenderTaskQueue=new Ji,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.uniqueId(),this._locale=e.extend({},so,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new ao(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new e.RequestManager(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,"string"==typeof t.container){if(this._container=e.window.document.getElementById(t.container),!this._container)throw new Error(`Container '${t.container}' not found.`)}else{if(!(t.container instanceof e.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1),e.window.addEventListener("orientationchange",this._onWindowResize,!1),e.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new qi(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,t.style&&this.setStyle(t.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this._hash=t.hash&&new Jr("string"==typeof t.hash&&t.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),t.bounds&&(this.resize(),this.fitBounds(t.bounds,e.extend({},t.fitBoundsOptions,{duration:0})))),this.resize(),t.attributionControl&&this.addControl(new Qi({customAttribution:t.customAttribution})),this._logoControl=new $i,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(t=>{this._update("style"===t.dataType),this.fire(new e.Event(`${t.dataType}data`,t))})),this.on("dataloading",(t=>{this.fire(new e.Event(`${t.dataType}dataloading`,t))}))}_getMapId(){return this._mapId}addControl(t,n){if(void 0===n&&(n=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const i=this._controlPositions[n];return-1!==n.indexOf("bottom")?i.insertBefore(r,i.firstChild):i.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(t);return n>-1&&this._controls.splice(n,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const n=!this._moving;return n&&this.fire(new e.Event("movestart",t)).fire(new e.Event("move",t)),this.fire(new e.Event("resize",t)),n&&this.fire(new e.Event("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.LngLatBounds.convert(t)),this._update()}setMinZoom(t){if((t=null==t?-2:t)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null==t?22:t)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.Event("zoomstart")).fire(new e.Event("zoom")).fire(new e.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null==t?0:t)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null==t?85:t)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.Event("pitchstart")).fire(new e.Event("pitch")).fire(new e.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(t){return"auto"===t?e.window.navigator.language:Array.isArray(t)?0===t.length?void 0:t.map((t=>"auto"===t?e.window.navigator.language:t)):t}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style._reloadSources();for(const n of this._controls)n._setLanguage&&n._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,n=t.projection.name;let r;"globe"===n&&t.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?(t.setMercatorFromTransition(),r=!0):"mercator"===n&&t.zoom<e.GLOBE_ZOOM_THRESHOLD_MAX&&(t.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let n;if(n="globe"===t.name&&this.transform.zoom>=e.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),n){this.painter.clearBackgroundTiles();for(const e in this.style._sourceCaches)this.style._sourceCaches[e].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(t){return this.transform.locationPoint3D(e.LngLat.convert(t))}unproject(t){return this.transform.pointLocation3D(e.pointGeometry.convert(t))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,n){if("mouseenter"===e||"mouseover"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e))),a=o.length?this.queryRenderedFeatures(i.point,{layers:o}):[];a.length?r||(r=!0,n.call(this,new ci(e,this,i.originalEvent,{features:a}))):r=!1},o=()=>{r=!1};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}if("mouseleave"===e||"mouseout"===e){let r=!1;const i=i=>{const o=t.filter((e=>this.getLayer(e)));(o.length?this.queryRenderedFeatures(i.point,{layers:o}):[]).length?r=!0:r&&(r=!1,n.call(this,new ci(e,this,i.originalEvent)))},o=t=>{r&&(r=!1,n.call(this,new ci(e,this,t.originalEvent)))};return{layers:new Set(t),listener:n,delegates:{mousemove:i,mouseout:o}}}{const r=e=>{const r=t.filter((e=>this.getLayer(e))),i=r.length?this.queryRenderedFeatures(e.point,{layers:r}):[];i.length&&(e.features=i,n.call(this,e),delete e.features)};return{layers:new Set(t),listener:n,delegates:{[e]:r}}}}on(e,t,n){if(void 0===n)return super.on(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const i in r.delegates)this.on(i,r.delegates[i]);return this}once(e,t,n){if(void 0===n)return super.once(e,t);Array.isArray(t)||(t=[t]);const r=this._createDelegatedListener(e,t,n);for(const i in r.delegates)this.once(i,r.delegates[i]);return this}off(e,t,n){if(void 0===n)return super.off(e,t);t=new Set(Array.isArray(t)?t:[t]);const r=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0},i=this._delegatedListeners?this._delegatedListeners[e]:void 0;return i&&(e=>{for(let i=0;i<e.length;i++){const o=e[i];if(o.listener===n&&r(o.layers,t)){for(const e in o.delegates)this.off(e,o.delegates[e]);return e.splice(i,1),this}}})(i),this}queryRenderedFeatures(t,n){return this.style?(void 0!==n||void 0===t||t instanceof e.pointGeometry||Array.isArray(t)||(n=t,t=void 0),this.style.queryRenderedFeatures(t=t||[[0,0],[this.transform.width,this.transform.height]],n=n||{},this.transform)):[]}querySourceFeatures(e,t){return this.style.querySourceFeatures(e,t)}setStyle(t,n){return!1!==(n=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},n)).diff&&n.localIdeographFontFamily===this._localIdeographFontFamily&&n.localFontFamily===this._localFontFamily&&this.style&&t?(this._diffStyle(t,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._localFontFamily=n.localFontFamily,this._updateStyle(t,n))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error(`Missing UI string '${e}'`);return t}_updateStyle(e,t){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),e&&(this.style=new Jt(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Jt(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(t,n){if("string"==typeof t){const r=this._requestManager.normalizeStyleURL(t),i=this._requestManager.transformRequest(r,e.ResourceType.Style);e.getJSON(i,((t,r)=>{t?this.fire(new e.ErrorEvent(t)):r&&this._updateDiff(r,n)}))}else"object"==typeof t&&this._updateDiff(t,n)}_updateDiff(t,n){try{this.style.setState(t)&&this._update(!0)}catch(r){e.warnOnce(`Unable to perform style diff: ${r.message||r.error||r}.  Rebuilding the style from scratch.`),this._updateStyle(t,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.warnOnce("There is no style added to the map."),!1)}addSource(e,t){return this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)}isSourceLoaded(e){return!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){const e=this.style&&this.style._sourceCaches;for(const t in e){const n=e[t]._tiles;for(const e in n){const t=n[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}addSourceType(e,t,n){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,n)}removeSource(e){return this.style.removeSource(e),this._updateTerrain(),this._update(!0)}getSource(e){return this.style.getSource(e)}addImage(t,n,{pixelRatio:r=1,sdf:i=!1,stretchX:o,stretchY:a,content:s}={}){if(this._lazyInitEmptyStyle(),n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap){const{width:u,height:c,data:l}=e.exported.getImageData(n);this.style.addImage(t,{data:new e.RGBAImage({width:u,height:c},l),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0})}else if(void 0===n.width||void 0===n.height)this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:u,height:c}=n,l=n;this.style.addImage(t,{data:new e.RGBAImage({width:u,height:c},new Uint8Array(l.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:i,version:0,userImage:l}),l.onAdd&&l.onAdd(this,t)}}updateImage(t,n){const r=this.style.getImage(t);if(!r)return void this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const i=n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap?e.exported.getImageData(n):n,{width:o,height:a}=i;void 0!==o&&void 0!==a?o===r.data.width&&a===r.data.height?(r.data.replace(i.data,!(n instanceof e.window.HTMLImageElement||e.window.ImageBitmap&&n instanceof e.window.ImageBitmap)),this.style.updateImage(t,r)):this.fire(new e.ErrorEvent(new Error(`The width and height of the updated image (${o}, ${a})\n                must be that same as the previous version of the image\n                (${r.data.width}, ${r.data.height})`))):this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(t){return t?!!this.style.getImage(t):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(e){this.style.removeImage(e)}loadImage(t,n){e.getImage(this._requestManager.transformRequest(t,e.ResourceType.Image),((t,r)=>{n(t,r instanceof e.window.HTMLImageElement?e.exported.getImageData(r):r)}))}listImages(){return this.style.listImages()}addLayer(e,t){return this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)}moveLayer(e,t){return this.style.moveLayer(e,t),this._update(!0)}removeLayer(e){return this.style.removeLayer(e),this._update(!0)}getLayer(e){return this.style.getLayer(e)}setLayerZoomRange(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0)}setFilter(e,t,n={}){return this.style.setFilter(e,t,n),this._update(!0)}getFilter(e){return this.style.getFilter(e)}setPaintProperty(e,t,n,r={}){return this.style.setPaintProperty(e,t,n,r),this._update(!0)}getPaintProperty(e,t){return this.style.getPaintProperty(e,t)}setLayoutProperty(e,t,n,r={}){return this.style.setLayoutProperty(e,t,n,r),this._update(!0)}getLayoutProperty(e,t){return this.style.getLayoutProperty(e,t)}setLight(e,t={}){return this._lazyInitEmptyStyle(),this.style.setLight(e,t),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.LngLat.convert(t),this.transform):0}setFeatureState(e,t){return this.style.setFeatureState(e,t),this._update()}removeFeatureState(e,t){return this.style.removeFeatureState(e,t),this._update()}getFeatureState(e){return this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const t=this._container.getBoundingClientRect().width||400,n=this._container.getBoundingClientRect().height||300;let r,i,o,a=this._container;for(;a&&(!i||!o);){const t=e.window.getComputedStyle(a).transform;t&&"none"!==t&&(r=t.match(/matrix.*\((.+)\)/)[1].split(", "),r[0]&&"0"!==r[0]&&"1"!==r[0]&&(i=r[0]),r[3]&&"0"!==r[3]&&"1"!==r[3]&&(o=r[3])),a=a.parentElement}this._containerWidth=i?Math.abs(t/i):t,this._containerHeight=o?Math.abs(n/o):n}_detectMissingCSS(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=o("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=o("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=o("canvas","mapboxgl-canvas",t),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const n=this._controlContainer=o("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((e=>{r[e]=o("div",`mapboxgl-ctrl-${e}`,n)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,n){const r=e.exported.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(n),this._canvas.style.width=`${t}px`,this._canvas.style.height=`${n}px`}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.extend({},n.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),r=this._useWebGL2&&this._canvas.getContext("webgl2",t),i=r||this._canvas.getContext("webgl",t)||this._canvas.getContext("experimental-webgl",t);i?(this._useWebGL2&&!r&&e.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),e.storeAuthState(i,!0),this.painter=new Zr(i,this.transform,!!r),this.on("data",(e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)})),e.exported$1.testSupport(i)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let n;const r=this.painter.context.extTimerQuery,i=e.exported.now();if(this.listens("gpu-timing-frame")&&(n=r.createQueryEXT(),r.beginQueryEXT(r.TIME_ELAPSED_EXT,n)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],e.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],e.window.performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const o=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,n=this.transform.pitch,r=e.exported.now(),i=new e.EvaluationParameters(t,{now:r,fadeDuration:o,pitch:n,transition:this.style.getTransition()});this.style.update(i)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let a=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),a=this._updateAverageElevation(i),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):a=this._updateAverageElevation(i),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,o,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:o,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),n){const t=e.exported.now()-i;r.endQueryEXT(r.TIME_ELAPSED_EXT,n),setTimeout((()=>{const o=r.getQueryObjectEXT(n,r.QUERY_RESULT_EXT)/1e6;r.deleteQueryEXT(n),this.fire(new e.Event("gpu-timing-frame",{cpuTime:t,gpuTime:o})),e.window.performance.mark("frame-gpu",{startTime:i,detail:{gpuTime:o}})}),50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout((()=>{const n=this.painter.queryGpuTimers(t);this.fire(new e.Event("gpu-timing-layer",{layerTimes:n}))}),50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout((()=>{const n=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.Event("gpu-timing-deferred-render",{gpuTime:n}))}),50)}const s=this._sourcesDirty||this._styleDirty||this._placementDirty||a;if(s||this._repaint)this.triggerRepaint();else{const t=!this.isMoving()&&this.loaded();if(t&&(a=this._updateAverageElevation(i,!0)),a)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.Event("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||s||(this._fullyLoaded=!0,e.LivePerformanceUtils.mark(e.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&e.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e,t=!1){const n=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&n(0);if((t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let r=this.transform.sampleAverageElevation(),i=!1;this.transform.elevation&&(i=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(r)?r=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-r);if(o>1){if(this._isInitialLoad||i)return this._averageElevation.jumpTo(r),n(r);this._averageElevation.easeTo(r,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(r),n(r)}return!!this._averageElevation.isEasing(e)&&n(this._averageElevation.getValue(e))}_authenticate(){e.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(t=>{if(t&&(t.message===e.AUTH_ERR_MSG||401===t.status)){const t=this.painter.context.gl;e.storeAuthState(t,!1),this._logoControl instanceof $i&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}})),e.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,(()=>{}))}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const n=this.painter.context.gl,r=n.createFramebuffer();function i(e){n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);const t=new Uint8Array(n.drawingBufferWidth*n.drawingBufferHeight*4);return n.readPixels(0,0,n.drawingBufferWidth,n.drawingBufferHeight,n.RGBA,n.UNSIGNED_BYTE,t),t}return n.bindFramebuffer(n.FRAMEBUFFER,r),this._canvasPixelComparison(i(e),t.canvasCopies.map(i),t.timeStamps)}_canvasPixelComparison(e,t,n){let r=n[1]-n[0];const i=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(n[o+2]-n[o+1])*(1-s/i)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("orientationchange",this._onWindowResize,!1),e.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1),e.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),e.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new e.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.exported.frame((e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)})))}_preloadTiles(t){const n=this.style?Object.values(this.style._sourceCaches):[];return e.asyncAll(n,((e,n)=>e._preloadTiles(t,n)),(()=>{this.triggerRepaint()})),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===e.window.document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,e&&this._update())}_setCacheLimits(t,n){e.setCacheLimits(t,n)}get version(){return e.version}},NavigationControl:class{constructor(t){this.options=e.extend({},co,t),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(e=>{this._map&&this._map.zoomIn({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(e=>{this._map&&this._map.zoomOut({},{originalEvent:e})})),o("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))})),this._compassIcon=o("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),n=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=n,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",n.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5)}) rotateX(${e.transform.pitch}deg) rotateZ(${e.transform.angle*(180/Math.PI)}deg)`:`rotate(${e.transform.angle*(180/Math.PI)}deg)`;e._requestDomTask((()=>{this._compassIcon&&(this._compassIcon.style.transform=t)}))}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new lo(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const n=o("button",e,this._container);return n.type="button",n.addEventListener("click",t),n}_setButtonTitle(e,t){if(!this._map)return;const n=this._map._getUIString(`NavigationControl.${t}`);e.setAttribute("aria-label",n),e.firstElementChild&&e.firstElementChild.setAttribute("title",n)}},GeolocateControl:class extends e.Evented{constructor(t){super(),this.options=e.extend({geolocation:e.window.navigator.geolocation},fo,t),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=$r(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(t){const n=(e=!!this.options.geolocation)=>{this._supportsGeolocation=e,t(e)};void 0!==this._supportsGeolocation?t(this._supportsGeolocation):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then((e=>n("denied"!==e.state))).catch((()=>n())):n()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),n=e.coords;return!!t&&(n.longitude<t.getWest()||n.longitude>t.getEast()||n.latitude<t.getSouth()||n.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",t)),this._finish()}}_updateCamera(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,i=this._map.getBearing(),o=e.extend({bearing:i},this.options.fitBoundsOptions);this._map.fitBounds(n.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const n=new e.LngLat(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(n).addTo(this._map),this._userLocationDotMarker.setLngLat(n).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,n=e.mercatorZfromAltitude(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*n);this._circleElement.style.width=`${r}px`,this._circleElement.style.height=`${r}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=o("button","mapboxgl-ctrl-geolocate",this._container),o("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o("div","mapboxgl-user-location"),this._dotElement.appendChild(o("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(o("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new no({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=o("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new no({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.Event("trackuserlocationend")))}))}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const t=()=>{e.window.addEventListener("ondeviceorientationabsolute"in e.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};void 0!==e.window.DeviceMotionEvent&&"function"==typeof e.window.DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then((e=>{"granted"===e&&t()})).catch(console.error):t()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),e.window.removeEventListener("deviceorientation",this._onDeviceOrientation),e.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:Qi,ScaleControl:class{constructor(t){this.options=e.extend({},ho,t),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch(e){return!1}}()||(this._setScale=po.bind(this)),e.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,n=t._containerHeight/2,r=t._containerWidth/2-e/2,i=t.unproject([r,n]),o=t.unproject([r+e,n]),a=i.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,n){const r=yo(t),i=r/t;this._map._requestDomTask((()=>{this._container.style.width=e*i+"px",this._container.innerHTML="nautical-mile"!==n?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:n}).format(r):`${r}&nbsp;nm`}))}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=o("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(t){this._fullscreen=!1,t&&t.container&&(t.container instanceof e.window.HTMLElement?this._container=t.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in e.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=o("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!e.window.document.fullscreenEnabled&&!e.window.document.webkitFullscreenEnabled)}_setupUI(){const t=this._fullscreenButton=o("button","mapboxgl-ctrl-fullscreen",this._controlContainer);o("span","mapboxgl-ctrl-icon",t).setAttribute("aria-hidden","true"),t.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(e.window.document.fullscreenElement||e.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.Evented{constructor(t){super(),this.options=e.extend(Object.create(ro),t),e.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.LngLat.convert(t),this._pos=null,this._trackPointer=!1,this._update();const n=this._map;return n&&(n.on("move",this._update),n.off("mousemove",this._onMouseEvent),n._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(t){return this.setDOMContent(e.window.document.createTextNode(t))}setHTML(t){const n=e.window.document.createDocumentFragment(),r=e.window.document.createElement("body");let i;for(r.innerHTML=t;i=r.firstChild,i;)n.appendChild(i);return this.setDOMContent(n)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=o("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=o("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.setAttribute("aria-hidden","true"),e.innerHTML="&#215;",e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,n=this._container,r=this._pos;if(!t||!n||!r)return"bottom";const i=n.offsetWidth,o=n.offsetHeight,a=r.x<i/2,s=r.x>t.transform.width-i/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const n=this._map,r=this._content;if(!n||!this._lngLat&&!this._trackPointer||!r)return;let i=this._container;if(i||(i=this._container=o("div","mapboxgl-popup",n.getContainer()),this._tip=o("div","mapboxgl-popup-tip",i),i.appendChild(r)),this.options.maxWidth&&i.style.maxWidth!==this.options.maxWidth&&(i.style.maxWidth=this.options.maxWidth),n.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=eo(this._lngLat,this._pos,n.transform)),!this._trackPointer||t){const e=this._pos=this._trackPointer&&t?t:n.project(this._lngLat),r=oo(this.options.offset),i=this._anchor=this._getAnchor(r.y),o=oo(this.options.offset,i),a=e.add(o).round();n._requestDomTask((()=>{this._container&&i&&(this._container.style.transform=`${to[i]} translate(${a.x}px,${a.y}px)`)}))}if(!this._marker&&n._showingGlobe()){const t=e.isLngLatBehindGlobe(n.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(io);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity=`${e}`),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:no,Style:Jt,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.pointGeometry,MercatorCoordinate:e.MercatorCoordinate,FreeCameraOptions:Wr,Evented:e.Evented,config:e.config,prewarm:function(){je().acquire(Ne)},clearPrewarmedResources:function(){const e=Fe;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Ne),Fe=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(t){e.config.ACCESS_TOKEN=t},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(t){e.config.API_URL=t},get workerCount(){return Ue.workerCount},set workerCount(e){Ue.workerCount=e},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.config.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.clearTileCache(t)},workerUrl:"",workerClass:null,setNow:e.exported.setNow,restoreNow:e.exported.restoreNow};return mo})),n}()},7420:function(){},95856:function(){},46601:function(){},73897:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports},85372:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},63405:function(e,t,n){var r=n(73897);e.exports=function(e){if(Array.isArray(e))return r(e)},e.exports.__esModule=!0,e.exports.default=e.exports},66115:function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},17156:function(e){function t(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=e.apply(n,r);function s(e){t(a,i,o,s,u,"next",e)}function u(e){t(a,i,o,s,u,"throw",e)}s(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},56690:function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},3515:function(e,t,n){var r=n(6015),i=n(69617);function o(t,n,a){return i()?(e.exports=o=Reflect.construct.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=o=function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&r(o,n.prototype),o},e.exports.__esModule=!0,e.exports.default=e.exports),o.apply(null,arguments)}e.exports=o,e.exports.__esModule=!0,e.exports.default=e.exports},89728:function(e,t,n){var r=n(64062);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}e.exports=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},74704:function(e,t,n){var r=n(86116);e.exports=function(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=r(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}},e.exports.__esModule=!0,e.exports.default=e.exports},26389:function(e,t,n){var r=n(73808),i=n(69617),o=n(94993);e.exports=function(e){var t=i();return function(){var n,i=r(e);if(t){var a=r(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return o(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports},38416:function(e,t,n){var r=n(64062);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},41588:function(e,t,n){var r=n(1753);function i(){return"undefined"!==typeof Reflect&&Reflect.get?(e.exports=i=Reflect.get.bind(),e.exports.__esModule=!0,e.exports.default=e.exports):(e.exports=i=function(e,t,n){var i=r(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},e.exports.__esModule=!0,e.exports.default=e.exports),i.apply(this,arguments)}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},73808:function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},61655:function(e,t,n){var r=n(6015);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},64836:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},46035:function(e){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")},e.exports.__esModule=!0,e.exports.default=e.exports},69617:function(e){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports},79498:function(e){e.exports=function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},68872:function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},12218:function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},42281:function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},42122:function(e,t,n){var r=n(38416);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},94993:function(e,t,n){var r=n(18698).default,i=n(66115);e.exports=function(e,t){if(t&&("object"===r(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},17061:function(e,t,n){var r=n(18698).default;function i(){"use strict";e.exports=i=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(B){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),s=new T(r||[]);return a(o,"_invoke",{value:A(e,n,s)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(B){return{type:"throw",arg:B}}}t.wrap=h;var p={};function y(){}function m(){}function g(){}var v={};f(v,u,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(M([])));_&&_!==n&&o.call(_,u)&&(v=_);var w=g.prototype=y.prototype=Object.create(v);function x(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(i,a,s,u){var c=d(e[i],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==r(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var i;a(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}})}function A(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=E(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=d(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===p)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function M(e){if(e){var t=e[u];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(o.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:m,configurable:!0}),m.displayName=f(g,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,f(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},x(k.prototype),f(k.prototype,c,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new k(h(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},x(w),f(w,l,"Generator"),f(w,u,(function(){return this})),f(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=M,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:M(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},6015:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},27424:function(e,t,n){var r=n(85372),i=n(68872),o=n(86116),a=n(12218);e.exports=function(e,t){return r(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},1753:function(e,t,n){var r=n(73808);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=r(e)););return e},e.exports.__esModule=!0,e.exports.default=e.exports},51589:function(e,t,n){var r=n(85372),i=n(79498),o=n(86116),a=n(12218);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},861:function(e,t,n){var r=n(63405),i=n(79498),o=n(86116),a=n(42281);e.exports=function(e){return r(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},95036:function(e,t,n){var r=n(18698).default;e.exports=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},64062:function(e,t,n){var r=n(18698).default,i=n(95036);e.exports=function(e){var t=i(e,"string");return"symbol"===r(t)?t:String(t)},e.exports.__esModule=!0,e.exports.default=e.exports},18698:function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},86116:function(e,t,n){var r=n(73897);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},33496:function(e,t,n){var r=n(73808),i=n(6015),o=n(46035),a=n(3515);function s(t){var n="function"===typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!o(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return a(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i(t,e)},e.exports.__esModule=!0,e.exports.default=e.exports,s(t)}e.exports=s,e.exports.__esModule=!0,e.exports.default=e.exports},64687:function(e,t,n){var r=n(17061)();e.exports=r;try{regeneratorRuntime=r}catch(i){"object"===typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}},4443:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeDecode=void 0;t.encodeDecode=function(e){return{decode:e.decode.bind(e),encode:e.encode.bind(e)}}},66807:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.u256be=t.u256=t.u192be=t.u192=t.u128be=t.u128=t.u64be=t.u64=t.bigIntBE=t.bigInt=void 0;var i=n(62576),o=n(86070),a=n(4443);t.bigInt=function(e){return function(t){var n=(0,i.blob)(e,t),s=(0,a.encodeDecode)(n),u=s.encode,c=s.decode,l=n;return l.decode=function(e,t){var n=c(e,t);return(0,o.toBigIntLE)(r.from(n))},l.encode=function(t,n,r){var i=(0,o.toBufferLE)(t,e);return u(i,n,r)},l}};t.bigIntBE=function(e){return function(t){var n=(0,i.blob)(e,t),s=(0,a.encodeDecode)(n),u=s.encode,c=s.decode,l=n;return l.decode=function(e,t){var n=c(e,t);return(0,o.toBigIntBE)(r.from(n))},l.encode=function(t,n,r){var i=(0,o.toBufferBE)(t,e);return u(i,n,r)},l}},t.u64=(0,t.bigInt)(8),t.u64be=(0,t.bigIntBE)(8),t.u128=(0,t.bigInt)(16),t.u128be=(0,t.bigIntBE)(16),t.u192=(0,t.bigInt)(24),t.u192be=(0,t.bigIntBE)(24),t.u256=(0,t.bigInt)(32),t.u256be=(0,t.bigIntBE)(32)},50864:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decimal=t.WAD=void 0;var i=r(n(17144)),o=n(4443),a=n(66807);t.WAD=new i.default("1e+18");t.decimal=function(e){var n=(0,a.u128)(e),r=(0,o.encodeDecode)(n),s=r.encode,u=r.decode,c=n;return c.decode=function(e,n){var r=u(e,n).toString();return new i.default(r).div(t.WAD)},c.encode=function(e,n,r){var i=BigInt(e.times(t.WAD).integerValue().toString());return s(i,n,r)},c}},17329:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(4443),t),i(n(66807),t),i(n(50864),t),i(n(53420),t),i(n(2171),t)},53420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bool=void 0;var r=n(62576),i=n(4443);t.bool=function(e){var t=(0,r.u8)(e),n=(0,i.encodeDecode)(t),o=n.encode,a=n.decode,s=t;return s.decode=function(e,t){return!!a(e,t)},s.encode=function(e,t,n){var r=Number(e);return o(r,t,n)},s}},2171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.publicKey=void 0;var r=n(62576),i=n(96322),o=n(4443);t.publicKey=function(e){var t=(0,r.blob)(32,e),n=(0,o.encodeDecode)(t),a=n.encode,s=n.decode,u=t;return u.decode=function(e,t){var n=s(e,t);return new i.PublicKey(n)},u.encode=function(e,t,n){var r=e.toBuffer();return a(r,t,n)},u}},55541:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(17061).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.amountToUiAmount=void 0;var a=n(96322),s=n(82084),u=n(64978);t.amountToUiAmount=function(e,t,n,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TOKEN_PROGRAM_ID;return o(this,void 0,void 0,i().mark((function o(){var s,f,h,d;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=(new a.Transaction).add((0,u.createAmountToUiAmountInstruction)(n,c,l)),i.next=3,e.simulateTransaction(s,[t],!1);case 3:if(f=i.sent.value,h=f.returnData,d=f.err,!(null===h||void 0===h?void 0:h.data)){i.next=8;break}return i.abrupt("return",r.from(h.data[0],h.data[1]).toString("utf-8"));case 8:return i.abrupt("return",d);case 9:case"end":return i.stop()}}),o)})))}},23477:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.approve=void 0;var s=n(96322),u=n(82084),c=n(96671),l=n(43586);t.approve=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],y=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,p),g=o(u,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,c.createApproveInstruction)(n,f,v,d,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},86366:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.approveChecked=void 0;var s=n(96322),u=n(82084),c=n(79517),l=n(43586);t.approveChecked=function(e,t,n,f,h,d,p,y){var m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],g=arguments.length>9?arguments[9]:void 0,v=arguments.length>10&&void 0!==arguments[10]?arguments[10]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,b,_,w,x;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(d,m),b=o(u,2),_=b[0],w=b[1],x=(new s.Transaction).add((0,c.createApproveCheckedInstruction)(f,n,h,_,p,y,m,v)),r.next=4,(0,s.sendAndConfirmTransaction)(e,x,[t].concat(i(w)),g);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},41227:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.burn=void 0;var s=n(96322),u=n(82084),c=n(31514),l=n(43586);t.burn=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],y=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,p),g=o(u,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,c.createBurnInstruction)(n,f,v,d,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},30411:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.burnChecked=void 0;var s=n(96322),u=n(82084),c=n(12057),l=n(43586);t.burnChecked=function(e,t,n,f,h,d,p){var y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],m=arguments.length>8?arguments[8]:void 0,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,v,b,_,w;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,y),v=o(u,2),b=v[0],_=v[1],w=(new s.Transaction).add((0,c.createBurnCheckedInstruction)(n,f,b,d,p,y,g)),r.next=4,(0,s.sendAndConfirmTransaction)(e,w,[t].concat(i(_)),m);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},91573:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.closeAccount=void 0;var s=n(96322),u=n(82084),c=n(58235),l=n(43586);t.closeAccount=function(e,t,n,f,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,m,g,v,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,d),m=o(u,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,c.createCloseAccountInstruction)(n,f,g,d,y)),r.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t].concat(i(v)),p);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},83157:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createAccount=void 0;var o=n(96322),a=n(82084),s=n(73382),u=n(55305),c=n(56218),l=n(35347);t.createAccount=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,y,m,g;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(h){r.next=4;break}return r.next=3,(0,l.createAssociatedTokenAccount)(e,t,n,f,d,p);case 3:return r.abrupt("return",r.sent);case 4:return r.next=6,(0,c.getMint)(e,n,null===d||void 0===d?void 0:d.commitment,p);case 6:return a=r.sent,y=(0,s.getAccountLenForMint)(a),r.next=10,e.getMinimumBalanceForRentExemption(y);case 10:return m=r.sent,g=(new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:h.publicKey,space:y,lamports:m,programId:p}),(0,u.createInitializeAccountInstruction)(h.publicKey,n,f,p)),r.next=14,(0,o.sendAndConfirmTransaction)(e,g,[t,h],d);case 14:return r.abrupt("return",h.publicKey);case 15:case"end":return r.stop()}}),i)})))}},35347:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createAssociatedTokenAccount=void 0;var o=n(96322),a=n(82084),s=n(63120),u=n(56218);t.createAssociatedTokenAccount=function(e,t,n,c,l){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.TOKEN_PROGRAM_ID,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.ASSOCIATED_TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,d;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.getAssociatedTokenAddress)(n,c,!1,f,h);case 2:return a=r.sent,d=(new o.Transaction).add((0,s.createAssociatedTokenAccountInstruction)(t.publicKey,a,c,n,f,h)),r.next=6,(0,o.sendAndConfirmTransaction)(e,d,[t],l);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),i)})))}},84742:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createAssociatedTokenAccountIdempotent=void 0;var o=n(96322),a=n(82084),s=n(63120),u=n(56218);t.createAssociatedTokenAccountIdempotent=function(e,t,n,c,l){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.TOKEN_PROGRAM_ID,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.ASSOCIATED_TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,d;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.getAssociatedTokenAddress)(n,c,!1,f,h);case 2:return a=r.sent,d=(new o.Transaction).add((0,s.createAssociatedTokenAccountIdempotentInstruction)(t.publicKey,a,c,n,f,h)),r.next=6,(0,o.sendAndConfirmTransaction)(e,d,[t],l);case 6:return r.abrupt("return",a);case 7:case"end":return r.stop()}}),i)})))}},91118:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createMint=void 0;var o=n(96322),a=n(82084),s=n(17121),u=n(56218);t.createMint=function(e,t,n,c,l){var f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.Keypair.generate(),h=arguments.length>6?arguments[6]:void 0,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:a.TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,p;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.getMinimumBalanceForRentExemptMint)(e);case 2:return a=r.sent,p=(new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:f.publicKey,space:u.MINT_SIZE,lamports:a,programId:d}),(0,s.createInitializeMint2Instruction)(f.publicKey,l,n,c,d)),r.next=6,(0,o.sendAndConfirmTransaction)(e,p,[t,f],h);case 6:return r.abrupt("return",f.publicKey);case 7:case"end":return r.stop()}}),i)})))}},72728:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createMultisig=void 0;var o=n(96322),a=n(82084),s=n(44083),u=n(17365);t.createMultisig=function(e,t,n,c){var l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.Keypair.generate(),f=arguments.length>5?arguments[5]:void 0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,d;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,u.getMinimumBalanceForRentExemptMultisig)(e);case 2:return a=r.sent,d=(new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:l.publicKey,space:u.MULTISIG_SIZE,lamports:a,programId:h}),(0,s.createInitializeMultisigInstruction)(l.publicKey,n,c,h)),r.next=6,(0,o.sendAndConfirmTransaction)(e,d,[t,l],f);case 6:return r.abrupt("return",l.publicKey);case 7:case"end":return r.stop()}}),i)})))}},42849:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createNativeMint=void 0;var o=n(96322),a=n(82084),s=n(87290);t.createNativeMint=function(e,t,n){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.NATIVE_MINT_2022,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TOKEN_2022_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(new o.Transaction).add((0,s.createCreateNativeMintInstruction)(t.publicKey,u,c)),r.next=3,(0,o.sendAndConfirmTransaction)(e,a,[t],n);case 3:case"end":return r.stop()}}),i)})))}},52909:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.createWrappedNativeAccount=void 0;var o=n(96322),a=n(82084),s=n(63120),u=n(55305),c=n(11087),l=n(78762),f=n(56218),h=n(83157);t.createWrappedNativeAccount=function(e,t,n,d,p,y){var m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:a.TOKEN_PROGRAM_ID,g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:a.NATIVE_MINT;return i(this,void 0,void 0,r().mark((function i(){var v,b,_,w;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d){r.next=4;break}return r.next=3,(0,h.createAccount)(e,t,g,n,p,y,m);case 3:return r.abrupt("return",r.sent);case 4:if(p){r.next=12;break}return r.next=7,(0,f.getAssociatedTokenAddress)(g,n,!1,m,a.ASSOCIATED_TOKEN_PROGRAM_ID);case 7:return v=r.sent,b=(new o.Transaction).add((0,s.createAssociatedTokenAccountInstruction)(t.publicKey,v,n,g,m,a.ASSOCIATED_TOKEN_PROGRAM_ID),o.SystemProgram.transfer({fromPubkey:t.publicKey,toPubkey:v,lamports:d}),(0,c.createSyncNativeInstruction)(v,m)),r.next=11,(0,o.sendAndConfirmTransaction)(e,b,[t],y);case 11:return r.abrupt("return",v);case 12:return r.next=14,(0,l.getMinimumBalanceForRentExemptAccount)(e);case 14:return _=r.sent,w=(new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:p.publicKey,space:l.ACCOUNT_SIZE,lamports:_,programId:m}),o.SystemProgram.transfer({fromPubkey:t.publicKey,toPubkey:p.publicKey,lamports:d}),(0,u.createInitializeAccountInstruction)(p.publicKey,g,n,m)),r.next=18,(0,o.sendAndConfirmTransaction)(e,w,[t,p],y);case 18:return r.abrupt("return",p.publicKey);case 19:case"end":return r.stop()}}),i)})))}},42430:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.freezeAccount=void 0;var s=n(96322),u=n(82084),c=n(99011),l=n(43586);t.freezeAccount=function(e,t,n,f,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,m,g,v,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,d),m=o(u,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,c.createFreezeAccountInstruction)(n,f,g,d,y)),r.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t].concat(i(v)),p);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},84501:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateAssociatedTokenAccount=void 0;var o=n(96322),a=n(82084),s=n(20422),u=n(63120),c=n(78762),l=n(56218);t.getOrCreateAssociatedTokenAccount=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]&&arguments[4],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:a.TOKEN_PROGRAM_ID,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:a.ASSOCIATED_TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,l.getAssociatedTokenAddress)(n,f,h,y,m);case 2:return a=r.sent,r.prev=3,r.next=6,(0,c.getAccount)(e,a,d,y);case 6:g=r.sent,r.next=26;break;case 9:if(r.prev=9,r.t0=r.catch(3),!(r.t0 instanceof s.TokenAccountNotFoundError||r.t0 instanceof s.TokenInvalidAccountOwnerError)){r.next=25;break}return r.prev=12,v=(new o.Transaction).add((0,u.createAssociatedTokenAccountInstruction)(t.publicKey,a,f,n,y,m)),r.next=16,(0,o.sendAndConfirmTransaction)(e,v,[t],p);case 16:r.next=20;break;case 18:r.prev=18,r.t1=r.catch(12);case 20:return r.next=22,(0,c.getAccount)(e,a,d,y);case 22:g=r.sent,r.next=26;break;case 25:throw r.t0;case 26:if(g.mint.equals(n)){r.next=28;break}throw new s.TokenInvalidMintError;case 28:if(g.owner.equals(f)){r.next=30;break}throw new s.TokenInvalidOwnerError;case 30:return r.abrupt("return",g);case 31:case"end":return r.stop()}}),i,null,[[3,9],[12,18]])})))}},99445:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(55541),t),i(n(23477),t),i(n(86366),t),i(n(41227),t),i(n(30411),t),i(n(91573),t),i(n(83157),t),i(n(35347),t),i(n(84742),t),i(n(91118),t),i(n(72728),t),i(n(42849),t),i(n(52909),t),i(n(42430),t),i(n(84501),t),i(n(91993),t),i(n(22272),t),i(n(39886),t),i(n(31129),t),i(n(90942),t),i(n(87842),t),i(n(21475),t),i(n(87356),t),i(n(38075),t)},43586:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSigners=void 0;var r=n(96322);t.getSigners=function(e,t){return e instanceof r.PublicKey?[e,t]:[e.publicKey,[e]]}},91993:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.mintTo=void 0;var s=n(96322),u=n(82084),c=n(67217),l=n(43586);t.mintTo=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],y=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,p),g=o(u,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,c.createMintToInstruction)(n,f,v,d,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},22272:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.mintToChecked=void 0;var s=n(96322),u=n(82084),c=n(68357),l=n(43586);t.mintToChecked=function(e,t,n,f,h,d,p){var y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],m=arguments.length>8?arguments[8]:void 0,g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,v,b,_,w;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,y),v=o(u,2),b=v[0],_=v[1],w=(new s.Transaction).add((0,c.createMintToCheckedInstruction)(n,f,b,d,p,y,g)),r.next=4,(0,s.sendAndConfirmTransaction)(e,w,[t].concat(i(_)),m);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},39886:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.revoke=void 0;var s=n(96322),u=n(82084),c=n(77164),l=n(43586);t.revoke=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,y,m,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(f,h),y=o(u,2),m=y[0],g=y[1],v=(new s.Transaction).add((0,c.createRevokeInstruction)(n,m,h,p)),r.next=4,(0,s.sendAndConfirmTransaction)(e,v,[t].concat(i(g)),d);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},31129:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setAuthority=void 0;var s=n(96322),u=n(82084),c=n(60862),l=n(43586);t.setAuthority=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],y=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(f,p),g=o(u,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,c.createSetAuthorityInstruction)(n,v,h,d,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},90942:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.syncNative=void 0;var o=n(96322),a=n(82084),s=n(11087);t.syncNative=function(e,t,n,u){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:a.TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=(new o.Transaction).add((0,s.createSyncNativeInstruction)(n,c)),r.next=3,(0,o.sendAndConfirmTransaction)(e,a,[t],u);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),i)})))}},87842:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.thawAccount=void 0;var s=n(96322),u=n(82084),c=n(53688),l=n(43586);t.thawAccount=function(e,t,n,f,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,m,g,v,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,d),m=o(u,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,c.createThawAccountInstruction)(n,f,g,d,y)),r.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t].concat(i(v)),p);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},21475:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.transfer=void 0;var s=n(96322),u=n(82084),c=n(11056),l=n(43586);t.transfer=function(e,t,n,f,h,d){var p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],y=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(h,p),g=o(u,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,c.createTransferInstruction)(n,f,v,d,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},87356:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.transferChecked=void 0;var s=n(96322),u=n(82084),c=n(98313),l=n(43586);t.transferChecked=function(e,t,n,f,h,d,p,y){var m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],g=arguments.length>9?arguments[9]:void 0,v=arguments.length>10&&void 0!==arguments[10]?arguments[10]:u.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var u,b,_,w,x;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,l.getSigners)(d,m),b=o(u,2),_=b[0],w=b[1],x=(new s.Transaction).add((0,c.createTransferCheckedInstruction)(n,f,h,_,p,y,m,v)),r.next=4,(0,s.sendAndConfirmTransaction)(e,x,[t].concat(i(w)),g);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},38075:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(17061).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.uiAmountToAmount=void 0;var a=n(17329),s=n(96322),u=n(82084),c=n(24498);t.uiAmountToAmount=function(e,t,n,l){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.TOKEN_PROGRAM_ID;return o(this,void 0,void 0,i().mark((function o(){var u,h,d,p,y;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=(new s.Transaction).add((0,c.createUiAmountToAmountInstruction)(n,l,f)),i.next=3,e.simulateTransaction(u,[t],!1);case 3:if(h=i.sent.value,d=h.returnData,p=h.err,!d){i.next=9;break}return y=r.from(d.data[0],d.data[1]),i.abrupt("return",(0,a.u64)().decode(y));case 9:return i.abrupt("return",p);case 10:case"end":return i.stop()}}),o)})))}},82084:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.programSupportsExtensions=t.NATIVE_MINT_2022=t.NATIVE_MINT=t.ASSOCIATED_TOKEN_PROGRAM_ID=t.TOKEN_2022_PROGRAM_ID=t.TOKEN_PROGRAM_ID=void 0;var r=n(96322);t.TOKEN_PROGRAM_ID=new r.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),t.TOKEN_2022_PROGRAM_ID=new r.PublicKey("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb"),t.ASSOCIATED_TOKEN_PROGRAM_ID=new r.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),t.NATIVE_MINT=new r.PublicKey("So11111111111111111111111111111111111111112"),t.NATIVE_MINT_2022=new r.PublicKey("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP"),t.programSupportsExtensions=function(e){return e!==t.TOKEN_PROGRAM_ID}},20422:function(e,t,n){"use strict";var r=n(89728).default,i=n(56690).default,o=n(61655).default,a=n(26389).default,s=n(33496).default;Object.defineProperty(t,"__esModule",{value:!0}),t.TokenUnsupportedInstructionError=t.TokenInvalidInstructionTypeError=t.TokenInvalidInstructionDataError=t.TokenInvalidInstructionKeysError=t.TokenInvalidInstructionProgramError=t.TokenOwnerOffCurveError=t.TokenInvalidOwnerError=t.TokenInvalidMintError=t.TokenInvalidAccountSizeError=t.TokenInvalidAccountOwnerError=t.TokenInvalidAccountError=t.TokenAccountNotFoundError=t.TokenError=void 0;var u=function(e){o(n,e);var t=a(n);function n(e){return i(this,n),t.call(this,e)}return r(n)}(s(Error));t.TokenError=u;var c=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenAccountNotFoundError",e}return r(n)}(u);t.TokenAccountNotFoundError=c;var l=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidAccountError",e}return r(n)}(u);t.TokenInvalidAccountError=l;var f=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidAccountOwnerError",e}return r(n)}(u);t.TokenInvalidAccountOwnerError=f;var h=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidAccountSizeError",e}return r(n)}(u);t.TokenInvalidAccountSizeError=h;var d=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidMintError",e}return r(n)}(u);t.TokenInvalidMintError=d;var p=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidOwnerError",e}return r(n)}(u);t.TokenInvalidOwnerError=p;var y=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenOwnerOffCurveError",e}return r(n)}(u);t.TokenOwnerOffCurveError=y;var m=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidInstructionProgramError",e}return r(n)}(u);t.TokenInvalidInstructionProgramError=m;var g=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidInstructionKeysError",e}return r(n)}(u);t.TokenInvalidInstructionKeysError=g;var v=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidInstructionDataError",e}return r(n)}(u);t.TokenInvalidInstructionDataError=v;var b=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenInvalidInstructionTypeError",e}return r(n)}(u);t.TokenInvalidInstructionTypeError=b;var _=function(e){o(n,e);var t=a(n);function n(){var e;return i(this,n),(e=t.apply(this,arguments)).name="TokenUnsupportedInstructionError",e}return r(n)}(u);t.TokenUnsupportedInstructionError=_},2156:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ACCOUNT_TYPE_SIZE=t.AccountType=void 0,function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Mint=1]="Mint",e[e.Account=2]="Account"}(t.AccountType||(t.AccountType={})),t.ACCOUNT_TYPE_SIZE=1},13284:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.disableCpiGuard=t.enableCpiGuard=void 0;var s=n(96322),u=n(43586),c=n(82084),l=n(86657);t.enableCpiGuard=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,y,m,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(f,h),y=o(c,2),m=y[0],g=y[1],v=(new s.Transaction).add((0,l.createEnableCpiGuardInstruction)(n,m,g,p)),r.next=4,(0,s.sendAndConfirmTransaction)(e,v,[t].concat(i(g)),d);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))},t.disableCpiGuard=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,y,m,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(f,h),y=o(c,2),m=y[0],g=y[1],v=(new s.Transaction).add((0,l.createDisableCpiGuardInstruction)(n,m,g,p)),r.next=4,(0,s.sendAndConfirmTransaction)(e,v,[t].concat(i(g)),d);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},12122:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(13284),t),i(n(86657),t),i(n(50706),t)},86657:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createDisableCpiGuardInstruction=t.createEnableCpiGuardInstruction=t.cpiGuardInstructionData=t.CpiGuardInstruction=void 0;var i,o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e,n,i,o,f){if(!(0,s.programSupportsExtensions)(f))throw new u.TokenUnsupportedInstructionError;var h=(0,c.addSigners)([{pubkey:n,isSigner:!1,isWritable:!0}],i,o),d=r.alloc(t.cpiGuardInstructionData.span);return t.cpiGuardInstructionData.encode({instruction:l.TokenInstruction.CpiGuardExtension,cpiGuardInstruction:e},d),new a.TransactionInstruction({keys:h,programId:f,data:d})}!function(e){e[e.Enable=0]="Enable",e[e.Disable=1]="Disable"}(i=t.CpiGuardInstruction||(t.CpiGuardInstruction={})),t.cpiGuardInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("cpiGuardInstruction")]),t.createEnableCpiGuardInstruction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_2022_PROGRAM_ID;return f(i.Enable,e,t,n,r)},t.createDisableCpiGuardInstruction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_2022_PROGRAM_ID;return f(i.Disable,e,t,n,r)}},50706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCpiGuard=t.CPI_GUARD_SIZE=t.CpiGuardLayout=void 0;var r=n(62576),i=n(17329),o=n(73382);t.CpiGuardLayout=(0,r.struct)([(0,i.bool)("lockCpi")]),t.CPI_GUARD_SIZE=t.CpiGuardLayout.span,t.getCpiGuard=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.CpiGuard,e.tlvData);return null!==n?t.CpiGuardLayout.decode(n):null}},65873:function(e,t,n){"use strict";var r=n(861).default,i=n(27424).default,o=n(17061).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateDefaultAccountState=t.initializeDefaultAccountState=void 0;var s=n(96322),u=n(43586),c=n(82084),l=n(39278);t.initializeDefaultAccountState=function(e,t,n,r,i){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function a(){var c;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=(new s.Transaction).add((0,l.createInitializeDefaultAccountStateInstruction)(n,r,u)),o.next=3,(0,s.sendAndConfirmTransaction)(e,c,[t],i);case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}}),a)})))},t.updateDefaultAccountState=function(e,t,n,f,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function a(){var c,m,g,v,b;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=(0,u.getSigners)(h,d),m=i(c,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,l.createUpdateDefaultAccountStateInstruction)(n,f,g,v,y)),o.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t].concat(r(v)),p);case 4:return o.abrupt("return",o.sent);case 5:case"end":return o.stop()}}),a)})))}},39218:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(65873),t),i(n(39278),t),i(n(86294),t)},39278:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createUpdateDefaultAccountStateInstruction=t.createInitializeDefaultAccountStateInstruction=t.defaultAccountStateInstructionData=t.DefaultAccountStateInstruction=void 0;var i,o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);!function(e){e[e.Initialize=0]="Initialize",e[e.Update=1]="Update"}(i=t.DefaultAccountStateInstruction||(t.DefaultAccountStateInstruction={})),t.defaultAccountStateInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("defaultAccountStateInstruction"),(0,o.u8)("accountState")]),t.createInitializeDefaultAccountStateInstruction=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TOKEN_2022_PROGRAM_ID;if(!(0,s.programSupportsExtensions)(o))throw new u.TokenUnsupportedInstructionError;var c=[{pubkey:e,isSigner:!1,isWritable:!0}],f=r.alloc(t.defaultAccountStateInstructionData.span);return t.defaultAccountStateInstructionData.encode({instruction:l.TokenInstruction.DefaultAccountStateExtension,defaultAccountStateInstruction:i.Initialize,accountState:n},f),new a.TransactionInstruction({keys:c,programId:o,data:f})},t.createUpdateDefaultAccountStateInstruction=function(e,n,o){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TOKEN_2022_PROGRAM_ID;if(!(0,s.programSupportsExtensions)(h))throw new u.TokenUnsupportedInstructionError;var d=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0}],o,f),p=r.alloc(t.defaultAccountStateInstructionData.span);return t.defaultAccountStateInstructionData.encode({instruction:l.TokenInstruction.DefaultAccountStateExtension,defaultAccountStateInstruction:i.Update,accountState:n},p),new a.TransactionInstruction({keys:d,programId:h,data:p})}},86294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultAccountState=t.DEFAULT_ACCOUNT_STATE_SIZE=t.DefaultAccountStateLayout=void 0;var r=n(62576),i=n(73382);t.DefaultAccountStateLayout=(0,r.struct)([(0,r.u8)("state")]),t.DEFAULT_ACCOUNT_STATE_SIZE=t.DefaultAccountStateLayout.span,t.getDefaultAccountState=function(e){var n=(0,i.getExtensionData)(i.ExtensionType.DefaultAccountState,e.tlvData);return null!==n?t.DefaultAccountStateLayout.decode(n):null}},73382:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAccountLenForMint=t.getExtensionTypes=t.getExtensionData=t.getAccountLen=t.getMintLen=t.getAccountTypeOfMintType=t.isAccountExtension=t.isMintExtension=t.getTypeLen=t.LENGTH_SIZE=t.TYPE_SIZE=t.ExtensionType=void 0;var r,i=n(78762),o=n(56218),a=n(17365),s=n(2156),u=n(12122),c=n(39218),l=n(36741),f=n(23763),h=n(74034),d=n(32394),p=n(63421),y=n(73189),m=n(64798);function g(e){switch(e){case r.Uninitialized:return 0;case r.TransferFeeConfig:return m.TRANSFER_FEE_CONFIG_SIZE;case r.TransferFeeAmount:return m.TRANSFER_FEE_AMOUNT_SIZE;case r.MintCloseAuthority:return d.MINT_CLOSE_AUTHORITY_SIZE;case r.ConfidentialTransferMint:return 97;case r.ConfidentialTransferAccount:return 286;case r.CpiGuard:return u.CPI_GUARD_SIZE;case r.DefaultAccountState:return c.DEFAULT_ACCOUNT_STATE_SIZE;case r.ImmutableOwner:return l.IMMUTABLE_OWNER_SIZE;case r.MemoTransfer:return h.MEMO_TRANSFER_SIZE;case r.NonTransferable:return p.NON_TRANSFERABLE_SIZE;case r.InterestBearingConfig:return f.INTEREST_BEARING_MINT_CONFIG_STATE_SIZE;case r.PermanentDelegate:return y.PERMANENT_DELEGATE_SIZE;default:throw Error("Unknown extension type: ".concat(e))}}function v(e){switch(e){case r.TransferFeeConfig:return r.TransferFeeAmount;case r.ConfidentialTransferMint:return r.ConfidentialTransferAccount;case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.CpiGuard:case r.DefaultAccountState:case r.ImmutableOwner:case r.MemoTransfer:case r.MintCloseAuthority:case r.NonTransferable:case r.Uninitialized:case r.InterestBearingConfig:case r.PermanentDelegate:return r.Uninitialized}}function b(e,n){if(0===e.length)return n;var r=i.ACCOUNT_SIZE+s.ACCOUNT_TYPE_SIZE+e.filter((function(t,n){return n===e.indexOf(t)})).map((function(e){return g(e)+t.TYPE_SIZE+t.LENGTH_SIZE})).reduce((function(e,t){return e+t}));return r===a.MULTISIG_SIZE?r+t.TYPE_SIZE:r}function _(e){return b(e,i.ACCOUNT_SIZE)}function w(e){for(var n=[],r=0;r<e.length;){var i=e.readUInt16LE(r);n.push(i);var o=e.readUInt16LE(r+t.TYPE_SIZE);r+=t.TYPE_SIZE+t.LENGTH_SIZE+o}return n}!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.TransferFeeConfig=1]="TransferFeeConfig",e[e.TransferFeeAmount=2]="TransferFeeAmount",e[e.MintCloseAuthority=3]="MintCloseAuthority",e[e.ConfidentialTransferMint=4]="ConfidentialTransferMint",e[e.ConfidentialTransferAccount=5]="ConfidentialTransferAccount",e[e.DefaultAccountState=6]="DefaultAccountState",e[e.ImmutableOwner=7]="ImmutableOwner",e[e.MemoTransfer=8]="MemoTransfer",e[e.NonTransferable=9]="NonTransferable",e[e.InterestBearingConfig=10]="InterestBearingConfig",e[e.CpiGuard=11]="CpiGuard",e[e.PermanentDelegate=12]="PermanentDelegate"}(r=t.ExtensionType||(t.ExtensionType={})),t.TYPE_SIZE=2,t.LENGTH_SIZE=2,t.getTypeLen=g,t.isMintExtension=function(e){switch(e){case r.TransferFeeConfig:case r.MintCloseAuthority:case r.ConfidentialTransferMint:case r.DefaultAccountState:case r.NonTransferable:case r.InterestBearingConfig:case r.PermanentDelegate:return!0;case r.Uninitialized:case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.ImmutableOwner:case r.MemoTransfer:case r.CpiGuard:return!1;default:throw Error("Unknown extension type: ".concat(e))}},t.isAccountExtension=function(e){switch(e){case r.TransferFeeAmount:case r.ConfidentialTransferAccount:case r.ImmutableOwner:case r.MemoTransfer:case r.CpiGuard:return!0;case r.Uninitialized:case r.TransferFeeConfig:case r.MintCloseAuthority:case r.ConfidentialTransferMint:case r.DefaultAccountState:case r.NonTransferable:case r.InterestBearingConfig:case r.PermanentDelegate:return!1;default:throw Error("Unknown extension type: ".concat(e))}},t.getAccountTypeOfMintType=v,t.getMintLen=function(e){return b(e,o.MINT_SIZE)},t.getAccountLen=_,t.getExtensionData=function(e,n){for(var r=0;r+t.TYPE_SIZE+t.LENGTH_SIZE<=n.length;){var i=n.readUInt16LE(r),o=n.readUInt16LE(r+t.TYPE_SIZE),a=r+t.TYPE_SIZE+t.LENGTH_SIZE;if(i==e)return n.slice(a,a+o);r=a+o}return null},t.getExtensionTypes=w,t.getAccountLenForMint=function(e){return _(w(e.tlvData).map(v))}},36741:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImmutableOwner=t.IMMUTABLE_OWNER_SIZE=t.ImmutableOwnerLayout=void 0;var r=n(62576),i=n(73382);t.ImmutableOwnerLayout=(0,r.struct)([]),t.IMMUTABLE_OWNER_SIZE=t.ImmutableOwnerLayout.span,t.getImmutableOwner=function(e){var n=(0,i.getExtensionData)(i.ExtensionType.ImmutableOwner,e.tlvData);return null!==n?t.ImmutableOwnerLayout.decode(n):null}},84513:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(2156),t),i(n(12122),t),i(n(39218),t),i(n(73382),t),i(n(36741),t),i(n(12594),t),i(n(74034),t),i(n(32394),t),i(n(63421),t),i(n(64798),t),i(n(73189),t)},86421:function(e,t,n){"use strict";var r=n(861).default,i=n(27424).default,o=n(17061).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateRateInterestBearingMint=t.createInterestBearingMint=void 0;var s=n(96322),u=n(43586),c=n(82084),l=n(41340),f=n(73382),h=n(52080);t.createInterestBearingMint=function(e,t,n,r,i,u,d){var p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:s.Keypair.generate(),y=arguments.length>8?arguments[8]:void 0,m=arguments.length>9&&void 0!==arguments[9]?arguments[9]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function a(){var c,g,v;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=(0,f.getMintLen)([f.ExtensionType.InterestBearingConfig]),o.next=3,e.getMinimumBalanceForRentExemption(c);case 3:return g=o.sent,v=(new s.Transaction).add(s.SystemProgram.createAccount({fromPubkey:t.publicKey,newAccountPubkey:p.publicKey,space:c,lamports:g,programId:m}),(0,h.createInitializeInterestBearingMintInstruction)(p.publicKey,i,u,m),(0,l.createInitializeMintInstruction)(p.publicKey,d,n,r,m)),o.next=7,(0,s.sendAndConfirmTransaction)(e,v,[t,p],y);case 7:return o.abrupt("return",p.publicKey);case 8:case"end":return o.stop()}}),a)})))},t.updateRateInterestBearingMint=function(e,t,n,l,f){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function a(){var c,m,g,v,b;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=(0,u.getSigners)(l,d),m=i(c,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,h.createUpdateRateInterestBearingMintInstruction)(n,g,f,v,y)),o.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t,l].concat(r(v)),p);case 4:return o.abrupt("return",o.sent);case 5:case"end":return o.stop()}}),a)})))}},12594:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(86421),t),i(n(52080),t),i(n(23763),t)},52080:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createUpdateRateInterestBearingMintInstruction=t.createInitializeInterestBearingMintInstruction=t.interestBearingMintUpdateRateInstructionData=t.interestBearingMintInitializeInstructionData=t.InterestBearingMintInstruction=void 0;var i,o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(36031),l=n(50639);!function(e){e[e.Initialize=0]="Initialize",e[e.UpdateRate=1]="UpdateRate"}(i=t.InterestBearingMintInstruction||(t.InterestBearingMintInstruction={})),t.interestBearingMintInitializeInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("interestBearingMintInstruction"),(0,a.publicKey)("rateAuthority"),(0,o.s16)("rate")]),t.interestBearingMintUpdateRateInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("interestBearingMintInstruction"),(0,o.s16)("rate")]),t.createInitializeInterestBearingMintInstruction=function(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.TOKEN_2022_PROGRAM_ID,c=[{pubkey:e,isSigner:!1,isWritable:!0}],f=r.alloc(t.interestBearingMintInitializeInstructionData.span);return t.interestBearingMintInitializeInstructionData.encode({instruction:l.TokenInstruction.InterestBearingMintExtension,interestBearingMintInstruction:i.Initialize,rateAuthority:n,rate:o},f),new s.TransactionInstruction({keys:c,programId:a,data:f})},t.createUpdateRateInterestBearingMintInstruction=function(e,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.TOKEN_2022_PROGRAM_ID,h=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!a.length,isWritable:!1}],n,a),d=r.alloc(t.interestBearingMintUpdateRateInstructionData.span);return t.interestBearingMintUpdateRateInstructionData.encode({instruction:l.TokenInstruction.InterestBearingMintExtension,interestBearingMintInstruction:i.UpdateRate,rate:o},d),new s.TransactionInstruction({keys:h,programId:f,data:d})}},23763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterestBearingMintConfigState=t.INTEREST_BEARING_MINT_CONFIG_STATE_SIZE=t.InterestBearingMintConfigStateLayout=void 0;var r=n(62576),i=n(17329),o=n(73382);t.InterestBearingMintConfigStateLayout=(0,r.struct)([(0,i.publicKey)("rateAuthority"),(0,r.ns64)("initializationTimestamp"),(0,r.s16)("preUpdateAverageRate"),(0,r.ns64)("lastUpdateTimestamp"),(0,r.s16)("currentRate")]),t.INTEREST_BEARING_MINT_CONFIG_STATE_SIZE=t.InterestBearingMintConfigStateLayout.span,t.getInterestBearingMintConfigState=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.InterestBearingConfig,e.tlvData);return null!==n?t.InterestBearingMintConfigStateLayout.decode(n):null}},99132:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.disableRequiredMemoTransfers=t.enableRequiredMemoTransfers=void 0;var s=n(96322),u=n(43586),c=n(82084),l=n(75843);t.enableRequiredMemoTransfers=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,y,m,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(f,h),y=o(c,2),m=y[0],g=y[1],v=(new s.Transaction).add((0,l.createEnableRequiredMemoTransfersInstruction)(n,m,g,p)),r.next=4,(0,s.sendAndConfirmTransaction)(e,v,[t].concat(i(g)),d);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))},t.disableRequiredMemoTransfers=function(e,t,n,f){var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],d=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,y,m,g,v;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(f,h),y=o(c,2),m=y[0],g=y[1],v=(new s.Transaction).add((0,l.createDisableRequiredMemoTransfersInstruction)(n,m,g,p)),r.next=4,(0,s.sendAndConfirmTransaction)(e,v,[t].concat(i(g)),d);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))}},74034:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(99132),t),i(n(75843),t),i(n(26411),t)},75843:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createDisableRequiredMemoTransfersInstruction=t.createEnableRequiredMemoTransfersInstruction=t.memoTransferInstructionData=t.MemoTransferInstruction=void 0;var i,o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e,n,i,o,f){if(!(0,s.programSupportsExtensions)(f))throw new u.TokenUnsupportedInstructionError;var h=(0,c.addSigners)([{pubkey:n,isSigner:!1,isWritable:!0}],i,o),d=r.alloc(t.memoTransferInstructionData.span);return t.memoTransferInstructionData.encode({instruction:l.TokenInstruction.MemoTransferExtension,memoTransferInstruction:e},d),new a.TransactionInstruction({keys:h,programId:f,data:d})}!function(e){e[e.Enable=0]="Enable",e[e.Disable=1]="Disable"}(i=t.MemoTransferInstruction||(t.MemoTransferInstruction={})),t.memoTransferInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("memoTransferInstruction")]),t.createEnableRequiredMemoTransfersInstruction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_2022_PROGRAM_ID;return f(i.Enable,e,t,n,r)},t.createDisableRequiredMemoTransfersInstruction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_2022_PROGRAM_ID;return f(i.Disable,e,t,n,r)}},26411:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMemoTransfer=t.MEMO_TRANSFER_SIZE=t.MemoTransferLayout=void 0;var r=n(62576),i=n(17329),o=n(73382);t.MemoTransferLayout=(0,r.struct)([(0,i.bool)("requireIncomingTransferMemos")]),t.MEMO_TRANSFER_SIZE=t.MemoTransferLayout.span,t.getMemoTransfer=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.MemoTransfer,e.tlvData);return null!==n?t.MemoTransferLayout.decode(n):null}},32394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMintCloseAuthority=t.MINT_CLOSE_AUTHORITY_SIZE=t.MintCloseAuthorityLayout=void 0;var r=n(62576),i=n(17329),o=n(73382);t.MintCloseAuthorityLayout=(0,r.struct)([(0,i.publicKey)("closeAuthority")]),t.MINT_CLOSE_AUTHORITY_SIZE=t.MintCloseAuthorityLayout.span,t.getMintCloseAuthority=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.MintCloseAuthority,e.tlvData);return null!==n?t.MintCloseAuthorityLayout.decode(n):null}},63421:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNonTransferable=t.NON_TRANSFERABLE_SIZE=t.NonTransferableLayout=void 0;var r=n(62576),i=n(73382);t.NonTransferableLayout=(0,r.struct)([]),t.NON_TRANSFERABLE_SIZE=t.NonTransferableLayout.span,t.getNonTransferable=function(e){var n=(0,i.getExtensionData)(i.ExtensionType.NonTransferable,e.tlvData);return null!==n?t.NonTransferableLayout.decode(n):null}},73189:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPermanentDelegate=t.PERMANENT_DELEGATE_SIZE=t.PermanentDelegateLayout=void 0;var r=n(62576),i=n(17329),o=n(73382);t.PermanentDelegateLayout=(0,r.struct)([(0,i.publicKey)("delegate")]),t.PERMANENT_DELEGATE_SIZE=t.PermanentDelegateLayout.span,t.getPermanentDelegate=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.PermanentDelegate,e.tlvData);return null!==n?t.PermanentDelegateLayout.decode(n):null}},31314:function(e,t,n){"use strict";var r=n(17061).default,i=n(861).default,o=n(27424).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.harvestWithheldTokensToMint=t.withdrawWithheldTokensFromAccounts=t.withdrawWithheldTokensFromMint=t.transferCheckedWithFee=void 0;var s=n(96322),u=n(43586),c=n(82084),l=n(55239);t.transferCheckedWithFee=function(e,t,n,f,h,d,p,y,m){var g=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],v=arguments.length>10?arguments[10]:void 0,b=arguments.length>11&&void 0!==arguments[11]?arguments[11]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,_,w,x,k;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(d,g),_=o(c,2),w=_[0],x=_[1],k=(new s.Transaction).add((0,l.createTransferCheckedWithFeeInstruction)(n,f,h,w,p,y,m,g,b)),r.next=4,(0,s.sendAndConfirmTransaction)(e,k,[t].concat(i(x)),v);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))},t.withdrawWithheldTokensFromMint=function(e,t,n,f,h){var d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],p=arguments.length>6?arguments[6]:void 0,y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,m,g,v,b;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(h,d),m=o(c,2),g=m[0],v=m[1],b=(new s.Transaction).add((0,l.createWithdrawWithheldTokensFromMintInstruction)(n,f,g,v,y)),r.next=4,(0,s.sendAndConfirmTransaction)(e,b,[t].concat(i(v)),p);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))},t.withdrawWithheldTokensFromAccounts=function(e,t,n,f,h,d,p,y){var m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c,g,v,b,_;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(0,u.getSigners)(h,d),g=o(c,2),v=g[0],b=g[1],_=(new s.Transaction).add((0,l.createWithdrawWithheldTokensFromAccountsInstruction)(n,f,v,b,p,m)),r.next=4,(0,s.sendAndConfirmTransaction)(e,_,[t].concat(i(b)),y);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),a)})))},t.harvestWithheldTokensToMint=function(e,t,n,i,o){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:c.TOKEN_2022_PROGRAM_ID;return a(this,void 0,void 0,r().mark((function a(){var c;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=(new s.Transaction).add((0,l.createHarvestWithheldTokensToMintInstruction)(n,i,u)),r.next=3,(0,s.sendAndConfirmTransaction)(e,c,[t],o);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),a)})))}},64798:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(31314),t),i(n(55239),t),i(n(74018),t)},55239:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(74704).default,o=n(51589).default,a=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeHarvestWithheldTokensToMintInstructionUnchecked=t.decodeHarvestWithheldTokensToMintInstruction=t.createHarvestWithheldTokensToMintInstruction=t.harvestWithheldTokensToMintInstructionData=t.decodeWithdrawWithheldTokensFromAccountsInstructionUnchecked=t.decodeWithdrawWithheldTokensFromAccountsInstruction=t.createWithdrawWithheldTokensFromAccountsInstruction=t.withdrawWithheldTokensFromAccountsInstructionData=t.decodeWithdrawWithheldTokensFromMintInstructionUnchecked=t.decodeWithdrawWithheldTokensFromMintInstruction=t.createWithdrawWithheldTokensFromMintInstruction=t.withdrawWithheldTokensFromMintInstructionData=t.decodeTransferCheckedWithFeeInstructionUnchecked=t.decodeTransferCheckedWithFeeInstruction=t.createTransferCheckedWithFeeInstruction=t.transferCheckedWithFeeInstructionData=t.decodeInitializeTransferFeeConfigInstructionUnchecked=t.decodeInitializeTransferFeeConfigInstruction=t.createInitializeTransferFeeConfigInstruction=t.initializeTransferFeeConfigInstructionData=t.TransferFeeInstruction=void 0;var s,u=n(62576),c=n(17329),l=n(96322),f=n(82084),h=n(20422),d=n(36031),p=n(50639);function y(e){var n=e.programId,r=a(e.keys,1)[0],i=e.data,o=t.initializeTransferFeeConfigInstructionData.decode(i),s=o.instruction,u=o.transferFeeInstruction,c=o.transferFeeConfigAuthorityOption,l=o.transferFeeConfigAuthority,f=o.withdrawWithheldAuthorityOption,h=o.withdrawWithheldAuthority;return{programId:n,keys:{mint:r},data:{instruction:s,transferFeeInstruction:u,transferFeeConfigAuthority:c?l:null,withdrawWithheldAuthority:f?h:null,transferFeeBasisPoints:o.transferFeeBasisPoints,maximumFee:o.maximumFee}}}function m(e){var n=e.programId,r=o(e.keys),i=r[0],a=r[1],s=r[2],u=r[3],c=r.slice(4),l=e.data,f=t.transferCheckedWithFeeInstructionData.decode(l);return{programId:n,keys:{source:i,mint:a,destination:s,authority:u,signers:c},data:{instruction:f.instruction,transferFeeInstruction:f.transferFeeInstruction,amount:f.amount,decimals:f.decimals,fee:f.fee}}}function g(e){var n=e.programId,r=o(e.keys),i=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data,l=t.withdrawWithheldTokensFromMintInstructionData.decode(c);return{programId:n,keys:{mint:i,destination:a,authority:s,signers:u},data:{instruction:l.instruction,transferFeeInstruction:l.transferFeeInstruction}}}function v(e){var n=e.programId,r=e.keys,i=e.data,o=t.withdrawWithheldTokensFromAccountsInstructionData.decode(i),a=o.instruction,s=o.transferFeeInstruction,u=o.numTokenAccounts,c=[r[0],r[1],r[2],r.slice(3,3+u),r.slice(-1*u)];return{programId:n,keys:{mint:c[0],destination:c[1],authority:c[2],signers:c[3],sources:c[4]},data:{instruction:a,transferFeeInstruction:s,numTokenAccounts:u}}}function b(e){var n=e.programId,r=o(e.keys),i=r[0],a=r.slice(1),s=e.data,u=t.harvestWithheldTokensToMintInstructionData.decode(s);return{programId:n,keys:{mint:i,sources:a},data:{instruction:u.instruction,transferFeeInstruction:u.transferFeeInstruction}}}!function(e){e[e.InitializeTransferFeeConfig=0]="InitializeTransferFeeConfig",e[e.TransferCheckedWithFee=1]="TransferCheckedWithFee",e[e.WithdrawWithheldTokensFromMint=2]="WithdrawWithheldTokensFromMint",e[e.WithdrawWithheldTokensFromAccounts=3]="WithdrawWithheldTokensFromAccounts",e[e.HarvestWithheldTokensToMint=4]="HarvestWithheldTokensToMint",e[e.SetTransferFee=5]="SetTransferFee"}(s=t.TransferFeeInstruction||(t.TransferFeeInstruction={})),t.initializeTransferFeeConfigInstructionData=(0,u.struct)([(0,u.u8)("instruction"),(0,u.u8)("transferFeeInstruction"),(0,u.u8)("transferFeeConfigAuthorityOption"),(0,c.publicKey)("transferFeeConfigAuthority"),(0,u.u8)("withdrawWithheldAuthorityOption"),(0,c.publicKey)("withdrawWithheldAuthority"),(0,u.u16)("transferFeeBasisPoints"),(0,c.u64)("maximumFee")]),t.createInitializeTransferFeeConfigInstruction=function(e,n,i,o,a){var u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.TOKEN_2022_PROGRAM_ID;if(!(0,f.programSupportsExtensions)(u))throw new h.TokenUnsupportedInstructionError;var c=[{pubkey:e,isSigner:!1,isWritable:!0}],d=r.alloc(t.initializeTransferFeeConfigInstructionData.span);return t.initializeTransferFeeConfigInstructionData.encode({instruction:p.TokenInstruction.TransferFeeExtension,transferFeeInstruction:s.InitializeTransferFeeConfig,transferFeeConfigAuthorityOption:n?1:0,transferFeeConfigAuthority:n||new l.PublicKey(0),withdrawWithheldAuthorityOption:i?1:0,withdrawWithheldAuthority:i||new l.PublicKey(0),transferFeeBasisPoints:o,maximumFee:a},d),new l.TransactionInstruction({keys:c,programId:u,data:d})},t.decodeInitializeTransferFeeConfigInstruction=function(e,n){if(!e.programId.equals(n))throw new h.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeTransferFeeConfigInstructionData.span)throw new h.TokenInvalidInstructionDataError;var r=y(e),i=r.keys.mint,o=r.data;if(o.instruction!==p.TokenInstruction.TransferFeeExtension||o.transferFeeInstruction!==s.InitializeTransferFeeConfig)throw new h.TokenInvalidInstructionTypeError;if(!i)throw new h.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:i},data:o}},t.decodeInitializeTransferFeeConfigInstructionUnchecked=y,t.transferCheckedWithFeeInstructionData=(0,u.struct)([(0,u.u8)("instruction"),(0,u.u8)("transferFeeInstruction"),(0,c.u64)("amount"),(0,u.u8)("decimals"),(0,c.u64)("fee")]),t.createTransferCheckedWithFeeInstruction=function(e,n,i,o,a,u,c){var y=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:f.TOKEN_2022_PROGRAM_ID;if(!(0,f.programSupportsExtensions)(m))throw new h.TokenUnsupportedInstructionError;var g=r.alloc(t.transferCheckedWithFeeInstructionData.span);t.transferCheckedWithFeeInstructionData.encode({instruction:p.TokenInstruction.TransferFeeExtension,transferFeeInstruction:s.TransferCheckedWithFee,amount:a,decimals:u,fee:c},g);var v=(0,d.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}],o,y);return new l.TransactionInstruction({keys:v,programId:m,data:g})},t.decodeTransferCheckedWithFeeInstruction=function(e,n){if(!e.programId.equals(n))throw new h.TokenInvalidInstructionProgramError;if(e.data.length!==t.transferCheckedWithFeeInstructionData.span)throw new h.TokenInvalidInstructionDataError;var r=m(e),i=r.keys,o=i.source,a=i.mint,u=i.destination,c=i.authority,l=i.signers,f=r.data;if(f.instruction!==p.TokenInstruction.TransferFeeExtension||f.transferFeeInstruction!==s.TransferCheckedWithFee)throw new h.TokenInvalidInstructionTypeError;if(!a)throw new h.TokenInvalidInstructionKeysError;return{programId:n,keys:{source:o,mint:a,destination:u,authority:c,signers:l||null},data:f}},t.decodeTransferCheckedWithFeeInstructionUnchecked=m,t.withdrawWithheldTokensFromMintInstructionData=(0,u.struct)([(0,u.u8)("instruction"),(0,u.u8)("transferFeeInstruction")]),t.createWithdrawWithheldTokensFromMintInstruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f.TOKEN_2022_PROGRAM_ID;if(!(0,f.programSupportsExtensions)(a))throw new h.TokenUnsupportedInstructionError;var u=r.alloc(t.withdrawWithheldTokensFromMintInstructionData.span);t.withdrawWithheldTokensFromMintInstructionData.encode({instruction:p.TokenInstruction.TransferFeeExtension,transferFeeInstruction:s.WithdrawWithheldTokensFromMint},u);var c=(0,d.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,o);return new l.TransactionInstruction({keys:c,programId:a,data:u})},t.decodeWithdrawWithheldTokensFromMintInstruction=function(e,n){if(!e.programId.equals(n))throw new h.TokenInvalidInstructionProgramError;if(e.data.length!==t.withdrawWithheldTokensFromMintInstructionData.span)throw new h.TokenInvalidInstructionDataError;var r=g(e),i=r.keys,o=i.mint,a=i.destination,u=i.authority,c=i.signers,l=r.data;if(l.instruction!==p.TokenInstruction.TransferFeeExtension||l.transferFeeInstruction!==s.WithdrawWithheldTokensFromMint)throw new h.TokenInvalidInstructionTypeError;if(!o)throw new h.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,destination:a,authority:u,signers:c||null},data:l}},t.decodeWithdrawWithheldTokensFromMintInstructionUnchecked=g,t.withdrawWithheldTokensFromAccountsInstructionData=(0,u.struct)([(0,u.u8)("instruction"),(0,u.u8)("transferFeeInstruction"),(0,u.u8)("numTokenAccounts")]),t.createWithdrawWithheldTokensFromAccountsInstruction=function(e,n,o,a,u){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.TOKEN_2022_PROGRAM_ID;if(!(0,f.programSupportsExtensions)(c))throw new h.TokenUnsupportedInstructionError;var y=r.alloc(t.withdrawWithheldTokensFromAccountsInstructionData.span);t.withdrawWithheldTokensFromAccountsInstructionData.encode({instruction:p.TokenInstruction.TransferFeeExtension,transferFeeInstruction:s.WithdrawWithheldTokensFromAccounts,numTokenAccounts:u.length},y);var m,g=(0,d.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],o,a),v=i(u);try{for(v.s();!(m=v.n()).done;){var b=m.value;g.push({pubkey:b,isSigner:!1,isWritable:!0})}}catch(_){v.e(_)}finally{v.f()}return new l.TransactionInstruction({keys:g,programId:c,data:y})},t.decodeWithdrawWithheldTokensFromAccountsInstruction=function(e,n){if(!e.programId.equals(n))throw new h.TokenInvalidInstructionProgramError;if(e.data.length!==t.withdrawWithheldTokensFromAccountsInstructionData.span)throw new h.TokenInvalidInstructionDataError;var r=v(e),i=r.keys,o=i.mint,a=i.destination,u=i.authority,c=i.signers,l=i.sources,f=r.data;if(f.instruction!==p.TokenInstruction.TransferFeeExtension||f.transferFeeInstruction!==s.WithdrawWithheldTokensFromAccounts)throw new h.TokenInvalidInstructionTypeError;if(!o)throw new h.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,destination:a,authority:u,signers:c||null,sources:l||null},data:f}},t.decodeWithdrawWithheldTokensFromAccountsInstructionUnchecked=v,t.harvestWithheldTokensToMintInstructionData=(0,u.struct)([(0,u.u8)("instruction"),(0,u.u8)("transferFeeInstruction")]),t.createHarvestWithheldTokensToMintInstruction=function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.TOKEN_2022_PROGRAM_ID;if(!(0,f.programSupportsExtensions)(o))throw new h.TokenUnsupportedInstructionError;var a=r.alloc(t.harvestWithheldTokensToMintInstructionData.span);t.harvestWithheldTokensToMintInstructionData.encode({instruction:p.TokenInstruction.TransferFeeExtension,transferFeeInstruction:s.HarvestWithheldTokensToMint},a);var u=[];u.push({pubkey:e,isSigner:!1,isWritable:!0});var c,d=i(n);try{for(d.s();!(c=d.n()).done;){var y=c.value;u.push({pubkey:y,isSigner:!1,isWritable:!0})}}catch(m){d.e(m)}finally{d.f()}return new l.TransactionInstruction({keys:u,programId:o,data:a})},t.decodeHarvestWithheldTokensToMintInstruction=function(e,n){if(!e.programId.equals(n))throw new h.TokenInvalidInstructionProgramError;if(e.data.length!==t.harvestWithheldTokensToMintInstructionData.span)throw new h.TokenInvalidInstructionDataError;var r=b(e),i=r.keys,o=i.mint,a=i.sources,u=r.data;if(u.instruction!==p.TokenInstruction.TransferFeeExtension||u.transferFeeInstruction!==s.HarvestWithheldTokensToMint)throw new h.TokenInvalidInstructionTypeError;if(!o)throw new h.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,sources:a},data:u}},t.decodeHarvestWithheldTokensToMintInstructionUnchecked=b},74018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTransferFeeAmount=t.getTransferFeeConfig=t.TRANSFER_FEE_AMOUNT_SIZE=t.TransferFeeAmountLayout=t.TRANSFER_FEE_CONFIG_SIZE=t.TransferFeeConfigLayout=t.transferFeeLayout=t.ONE_IN_BASIS_POINTS=t.MAX_FEE_BASIS_POINTS=void 0;var r=n(62576),i=n(17329),o=n(73382);function a(e){return(0,r.struct)([(0,i.u64)("epoch"),(0,i.u64)("maximumFee"),(0,r.u16)("transferFeeBasisPoints")],e)}t.MAX_FEE_BASIS_POINTS=1e4,t.ONE_IN_BASIS_POINTS=t.MAX_FEE_BASIS_POINTS,t.transferFeeLayout=a,t.TransferFeeConfigLayout=(0,r.struct)([(0,i.publicKey)("transferFeeConfigAuthority"),(0,i.publicKey)("withdrawWithheldAuthority"),(0,i.u64)("withheldAmount"),a("olderTransferFee"),a("newerTransferFee")]),t.TRANSFER_FEE_CONFIG_SIZE=t.TransferFeeConfigLayout.span,t.TransferFeeAmountLayout=(0,r.struct)([(0,i.u64)("withheldAmount")]),t.TRANSFER_FEE_AMOUNT_SIZE=t.TransferFeeAmountLayout.span,t.getTransferFeeConfig=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.TransferFeeConfig,e.tlvData);return null!==n?t.TransferFeeConfigLayout.decode(n):null},t.getTransferFeeAmount=function(e){var n=(0,o.getExtensionData)(o.ExtensionType.TransferFeeAmount,e.tlvData);return null!==n?t.TransferFeeAmountLayout.decode(n):null}},70916:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(99445),t),i(n(82084),t),i(n(20422),t),i(n(84513),t),i(n(31979),t),i(n(48157),t)},64978:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeAmountToUiAmountInstructionUnchecked=t.decodeAmountToUiAmountInstruction=t.createAmountToUiAmountInstruction=t.amountToUiAmountInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data;return{programId:n,keys:{mint:r},data:t.amountToUiAmountInstructionData.decode(o)}}t.amountToUiAmountInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount")]),t.createAmountToUiAmountInstruction=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.TOKEN_PROGRAM_ID,o=[{pubkey:e,isSigner:!1,isWritable:!1}],a=r.alloc(t.amountToUiAmountInstructionData.span);return t.amountToUiAmountInstructionData.encode({instruction:l.TokenInstruction.AmountToUiAmount,amount:BigInt(n)},a),new s.TransactionInstruction({keys:o,programId:i,data:a})},t.decodeAmountToUiAmountInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.amountToUiAmountInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys.mint,o=r.data;if(o.instruction!==l.TokenInstruction.AmountToUiAmount)throw new c.TokenInvalidInstructionTypeError;if(!i)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:i},data:o}},t.decodeAmountToUiAmountInstructionUnchecked=f},96671:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeApproveInstructionUnchecked=t.decodeApproveInstruction=t.createApproveInstruction=t.approveInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,delegate:a,owner:s,multiSigners:u},data:t.approveInstructionData.decode(c)}}t.approveInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount")]),t.createApproveInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TOKEN_PROGRAM_ID,h=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}],i,a),d=r.alloc(t.approveInstructionData.span);return t.approveInstructionData.encode({instruction:f.TokenInstruction.Approve,amount:BigInt(o)},d),new s.TransactionInstruction({keys:h,programId:c,data:d})},t.decodeApproveInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.approveInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.account,a=i.delegate,s=i.owner,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.Approve)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,delegate:a,owner:s,multiSigners:l},data:d}},t.decodeApproveInstructionUnchecked=h},79517:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeApproveCheckedInstructionUnchecked=t.decodeApproveCheckedInstruction=t.createApproveCheckedInstruction=t.approveCheckedInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r[3],c=r.slice(4),l=e.data;return{programId:n,keys:{account:o,mint:a,delegate:s,owner:u,multiSigners:c},data:t.approveCheckedInstructionData.decode(l)}}t.approveCheckedInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount"),(0,o.u8)("decimals")]),t.createApproveCheckedInstruction=function(e,n,i,o,a,c){var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.TOKEN_PROGRAM_ID,p=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1}],o,h),y=r.alloc(t.approveCheckedInstructionData.span);return t.approveCheckedInstructionData.encode({instruction:f.TokenInstruction.ApproveChecked,amount:BigInt(a),decimals:c},y),new s.TransactionInstruction({keys:p,programId:d,data:y})},t.decodeApproveCheckedInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.approveCheckedInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.account,a=i.mint,s=i.delegate,l=i.owner,d=i.multiSigners,p=r.data;if(p.instruction!==f.TokenInstruction.ApproveChecked)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s||!l)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,delegate:s,owner:l,multiSigners:d},data:p}},t.decodeApproveCheckedInstructionUnchecked=h},63120:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createAssociatedTokenAccountIdempotentInstruction=t.createAssociatedTokenAccountInstruction=void 0;var i=n(96322),o=n(82084);function a(e,t,n,r,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.TOKEN_PROGRAM_ID,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:o.ASSOCIATED_TOKEN_PROGRAM_ID,c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:i.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:s,isSigner:!1,isWritable:!1}];return new i.TransactionInstruction({keys:c,programId:u,data:a})}t.createAssociatedTokenAccountInstruction=function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.TOKEN_PROGRAM_ID,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.ASSOCIATED_TOKEN_PROGRAM_ID;return a(e,t,n,i,r.alloc(0),s,u)},t.createAssociatedTokenAccountIdempotentInstruction=function(e,t,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.TOKEN_PROGRAM_ID,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:o.ASSOCIATED_TOKEN_PROGRAM_ID;return a(e,t,n,i,r.from([1]),s,u)}},31514:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBurnInstructionUnchecked=t.decodeBurnInstruction=t.createBurnInstruction=t.burnInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,mint:a,owner:s,multiSigners:u},data:t.burnInstructionData.decode(c)}}t.burnInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount")]),t.createBurnInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TOKEN_PROGRAM_ID,h=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,a),d=r.alloc(t.burnInstructionData.span);return t.burnInstructionData.encode({instruction:f.TokenInstruction.Burn,amount:BigInt(o)},d),new s.TransactionInstruction({keys:h,programId:c,data:d})},t.decodeBurnInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.burnInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.account,a=i.mint,s=i.owner,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.Burn)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,owner:s,multiSigners:l},data:d}},t.decodeBurnInstructionUnchecked=h},12057:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBurnCheckedInstructionUnchecked=t.decodeBurnCheckedInstruction=t.createBurnCheckedInstruction=t.burnCheckedInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,mint:a,owner:s,multiSigners:u},data:t.burnCheckedInstructionData.decode(c)}}t.burnCheckedInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount"),(0,o.u8)("decimals")]),t.createBurnCheckedInstruction=function(e,n,i,o,a){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.TOKEN_PROGRAM_ID,d=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,c),p=r.alloc(t.burnCheckedInstructionData.span);return t.burnCheckedInstructionData.encode({instruction:f.TokenInstruction.BurnChecked,amount:BigInt(o),decimals:a},p),new s.TransactionInstruction({keys:d,programId:h,data:p})},t.decodeBurnCheckedInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.burnCheckedInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.account,a=i.mint,s=i.owner,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.BurnChecked)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,owner:s,multiSigners:l},data:d}},t.decodeBurnCheckedInstructionUnchecked=h},58235:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeCloseAccountInstructionUnchecked=t.decodeCloseAccountInstruction=t.createCloseAccountInstruction=t.closeAccountInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,destination:a,authority:s,multiSigners:u},data:t.closeAccountInstructionData.decode(c)}}t.closeAccountInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createCloseAccountInstruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TOKEN_PROGRAM_ID,f=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,o),h=r.alloc(t.closeAccountInstructionData.span);return t.closeAccountInstructionData.encode({instruction:l.TokenInstruction.CloseAccount},h),new a.TransactionInstruction({keys:f,programId:u,data:h})},t.decodeCloseAccountInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.closeAccountInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.destination,c=i.authority,h=i.multiSigners,d=r.data;if(d.instruction!==l.TokenInstruction.CloseAccount)throw new u.TokenInvalidInstructionTypeError;if(!o||!a||!c)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,destination:a,authority:c,multiSigners:h},data:d}},t.decodeCloseAccountInstructionUnchecked=f},87290:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createCreateNativeMintInstruction=t.createNativeMintInstructionData=void 0;var i=n(62576),o=n(96322),a=n(82084),s=n(20422),u=n(50639);t.createNativeMintInstructionData=(0,i.struct)([(0,i.u8)("instruction")]),t.createCreateNativeMintInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.NATIVE_MINT_2022,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.TOKEN_2022_PROGRAM_ID;if(!(0,a.programSupportsExtensions)(i))throw new s.TokenUnsupportedInstructionError;var c=[{pubkey:e,isSigner:!0,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1}],l=r.alloc(t.createNativeMintInstructionData.span);return t.createNativeMintInstructionData.encode({instruction:u.TokenInstruction.CreateNativeMint},l),new o.TransactionInstruction({keys:c,programId:i,data:l})}},22554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUiamountToAmountInstruction=t.isAmountToUiAmountInstruction=t.isInitializeMint2Instruction=t.isInitializeAccount3Instruction=t.isSyncNativeInstruction=t.isInitializeAccount2Instruction=t.isBurnCheckedInstruction=t.isMintToCheckedInstruction=t.isApproveCheckedInstruction=t.isTransferCheckedInstruction=t.isThawAccountInstruction=t.isFreezeAccountInstruction=t.isCloseAccountInstruction=t.isBurnInstruction=t.isMintToInstruction=t.isSetAuthorityInstruction=t.isRevokeInstruction=t.isApproveInstruction=t.isTransferInstruction=t.isInitializeMultisigInstruction=t.isInitializeAccountInstruction=t.isInitializeMintInstruction=t.decodeInstruction=void 0;var r=n(62576),i=n(82084),o=n(20422),a=n(64978),s=n(96671),u=n(79517),c=n(31514),l=n(12057),f=n(58235),h=n(99011),d=n(55305),p=n(32020),y=n(33744),m=n(41340),g=n(17121),v=n(44083),b=n(67217),_=n(68357),w=n(77164),x=n(60862),k=n(11087),A=n(53688),E=n(11056),I=n(98313),S=n(50639),T=n(24498);t.decodeInstruction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.TOKEN_PROGRAM_ID;if(!e.data.length)throw new o.TokenInvalidInstructionDataError;var n=(0,r.u8)().decode(e.data);if(n===S.TokenInstruction.InitializeMint)return(0,m.decodeInitializeMintInstruction)(e,t);if(n===S.TokenInstruction.InitializeAccount)return(0,d.decodeInitializeAccountInstruction)(e,t);if(n===S.TokenInstruction.InitializeMultisig)return(0,v.decodeInitializeMultisigInstruction)(e,t);if(n===S.TokenInstruction.Transfer)return(0,E.decodeTransferInstruction)(e,t);if(n===S.TokenInstruction.Approve)return(0,s.decodeApproveInstruction)(e,t);if(n===S.TokenInstruction.Revoke)return(0,w.decodeRevokeInstruction)(e,t);if(n===S.TokenInstruction.SetAuthority)return(0,x.decodeSetAuthorityInstruction)(e,t);if(n===S.TokenInstruction.MintTo)return(0,b.decodeMintToInstruction)(e,t);if(n===S.TokenInstruction.Burn)return(0,c.decodeBurnInstruction)(e,t);if(n===S.TokenInstruction.CloseAccount)return(0,f.decodeCloseAccountInstruction)(e,t);if(n===S.TokenInstruction.FreezeAccount)return(0,h.decodeFreezeAccountInstruction)(e,t);if(n===S.TokenInstruction.ThawAccount)return(0,A.decodeThawAccountInstruction)(e,t);if(n===S.TokenInstruction.TransferChecked)return(0,I.decodeTransferCheckedInstruction)(e,t);if(n===S.TokenInstruction.ApproveChecked)return(0,u.decodeApproveCheckedInstruction)(e,t);if(n===S.TokenInstruction.MintToChecked)return(0,_.decodeMintToCheckedInstruction)(e,t);if(n===S.TokenInstruction.BurnChecked)return(0,l.decodeBurnCheckedInstruction)(e,t);if(n===S.TokenInstruction.InitializeAccount2)return(0,p.decodeInitializeAccount2Instruction)(e,t);if(n===S.TokenInstruction.SyncNative)return(0,k.decodeSyncNativeInstruction)(e,t);if(n===S.TokenInstruction.InitializeAccount3)return(0,y.decodeInitializeAccount3Instruction)(e,t);if(n===S.TokenInstruction.InitializeMint2)return(0,g.decodeInitializeMint2Instruction)(e,t);if(n===S.TokenInstruction.AmountToUiAmount)return(0,a.decodeAmountToUiAmountInstruction)(e,t);if(n===S.TokenInstruction.UiAmountToAmount)return(0,T.decodeUiAmountToAmountInstruction)(e,t);if(n===S.TokenInstruction.InitializeMultisig2)throw new o.TokenInvalidInstructionTypeError;throw new o.TokenInvalidInstructionTypeError},t.isInitializeMintInstruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeMint},t.isInitializeAccountInstruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeAccount},t.isInitializeMultisigInstruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeMultisig},t.isTransferInstruction=function(e){return e.data.instruction===S.TokenInstruction.Transfer},t.isApproveInstruction=function(e){return e.data.instruction===S.TokenInstruction.Approve},t.isRevokeInstruction=function(e){return e.data.instruction===S.TokenInstruction.Revoke},t.isSetAuthorityInstruction=function(e){return e.data.instruction===S.TokenInstruction.SetAuthority},t.isMintToInstruction=function(e){return e.data.instruction===S.TokenInstruction.MintTo},t.isBurnInstruction=function(e){return e.data.instruction===S.TokenInstruction.Burn},t.isCloseAccountInstruction=function(e){return e.data.instruction===S.TokenInstruction.CloseAccount},t.isFreezeAccountInstruction=function(e){return e.data.instruction===S.TokenInstruction.FreezeAccount},t.isThawAccountInstruction=function(e){return e.data.instruction===S.TokenInstruction.ThawAccount},t.isTransferCheckedInstruction=function(e){return e.data.instruction===S.TokenInstruction.TransferChecked},t.isApproveCheckedInstruction=function(e){return e.data.instruction===S.TokenInstruction.ApproveChecked},t.isMintToCheckedInstruction=function(e){return e.data.instruction===S.TokenInstruction.MintToChecked},t.isBurnCheckedInstruction=function(e){return e.data.instruction===S.TokenInstruction.BurnChecked},t.isInitializeAccount2Instruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeAccount2},t.isSyncNativeInstruction=function(e){return e.data.instruction===S.TokenInstruction.SyncNative},t.isInitializeAccount3Instruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeAccount3},t.isInitializeMint2Instruction=function(e){return e.data.instruction===S.TokenInstruction.InitializeMint2},t.isAmountToUiAmountInstruction=function(e){return e.data.instruction===S.TokenInstruction.AmountToUiAmount},t.isUiamountToAmountInstruction=function(e){return e.data.instruction===S.TokenInstruction.UiAmountToAmount}},99011:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeFreezeAccountInstructionUnchecked=t.decodeFreezeAccountInstruction=t.createFreezeAccountInstruction=t.freezeAccountInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,mint:a,authority:s,multiSigners:u},data:t.freezeAccountInstructionData.decode(c)}}t.freezeAccountInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createFreezeAccountInstruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TOKEN_PROGRAM_ID,f=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}],i,o),h=r.alloc(t.freezeAccountInstructionData.span);return t.freezeAccountInstructionData.encode({instruction:l.TokenInstruction.FreezeAccount},h),new a.TransactionInstruction({keys:f,programId:u,data:h})},t.decodeFreezeAccountInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.freezeAccountInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.mint,c=i.authority,h=i.multiSigners,d=r.data;if(d.instruction!==l.TokenInstruction.FreezeAccount)throw new u.TokenInvalidInstructionTypeError;if(!o||!a||!c)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,authority:c,multiSigners:h},data:d}},t.decodeFreezeAccountInstructionUnchecked=f},31979:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(63120),t),i(n(22554),t),i(n(50639),t),i(n(41340),t),i(n(55305),t),i(n(44083),t),i(n(11056),t),i(n(96671),t),i(n(77164),t),i(n(60862),t),i(n(67217),t),i(n(31514),t),i(n(58235),t),i(n(99011),t),i(n(53688),t),i(n(98313),t),i(n(79517),t),i(n(68357),t),i(n(12057),t),i(n(32020),t),i(n(11087),t),i(n(33744),t),i(n(29892),t),i(n(17121),t),i(n(11127),t),i(n(64978),t),i(n(24498),t),i(n(76886),t),i(n(82040),t),i(n(87290),t),i(n(80617),t),i(n(41583),t)},55305:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeAccountInstructionUnchecked=t.decodeInitializeAccountInstruction=t.createInitializeAccountInstruction=t.initializeAccountInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(50639);function l(e){var n=e.programId,r=i(e.keys,4),o=r[0],a=r[1],s=r[2],u=r[3],c=e.data;return{programId:n,keys:{account:o,mint:a,owner:s,rent:u},data:t.initializeAccountInstructionData.decode(c)}}t.initializeAccountInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createInitializeAccountInstruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_PROGRAM_ID,u=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:a.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],l=r.alloc(t.initializeAccountInstructionData.span);return t.initializeAccountInstructionData.encode({instruction:c.TokenInstruction.InitializeAccount},l),new a.TransactionInstruction({keys:u,programId:o,data:l})},t.decodeInitializeAccountInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeAccountInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=l(e),i=r.keys,o=i.account,a=i.mint,f=i.owner,h=i.rent,d=r.data;if(d.instruction!==c.TokenInstruction.InitializeAccount)throw new u.TokenInvalidInstructionTypeError;if(!o||!a||!f||!h)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,owner:f,rent:h},data:d}},t.decodeInitializeAccountInstructionUnchecked=l},32020:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeAccount2InstructionUnchecked=t.decodeInitializeAccount2Instruction=t.createInitializeAccount2Instruction=t.initializeAccount2InstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,3),o=r[0],a=r[1],s=r[2],u=e.data;return{programId:n,keys:{account:o,mint:a,rent:s},data:t.initializeAccount2InstructionData.decode(u)}}t.initializeAccount2InstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.publicKey)("owner")]),t.createInitializeAccount2Instruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.TOKEN_PROGRAM_ID,a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],c=r.alloc(t.initializeAccount2InstructionData.span);return t.initializeAccount2InstructionData.encode({instruction:l.TokenInstruction.InitializeAccount2,owner:i},c),new s.TransactionInstruction({keys:a,programId:o,data:c})},t.decodeInitializeAccount2Instruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeAccount2InstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.mint,s=i.rent,h=r.data;if(h.instruction!==l.TokenInstruction.InitializeAccount2)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,rent:s},data:h}},t.decodeInitializeAccount2InstructionUnchecked=f},33744:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeAccount3InstructionUnchecked=t.decodeInitializeAccount3Instruction=t.createInitializeAccount3Instruction=t.initializeAccount3InstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,2),o=r[0],a=r[1],s=e.data;return{programId:n,keys:{account:o,mint:a},data:t.initializeAccount3InstructionData.decode(s)}}t.initializeAccount3InstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.publicKey)("owner")]),t.createInitializeAccount3Instruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.TOKEN_PROGRAM_ID,a=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}],c=r.alloc(t.initializeAccount3InstructionData.span);return t.initializeAccount3InstructionData.encode({instruction:l.TokenInstruction.InitializeAccount3,owner:i},c),new s.TransactionInstruction({keys:a,programId:o,data:c})},t.decodeInitializeAccount3Instruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeAccount3InstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.mint,s=r.data;if(s.instruction!==l.TokenInstruction.InitializeAccount3)throw new c.TokenInvalidInstructionTypeError;if(!o||!a)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a},data:s}},t.decodeInitializeAccount3InstructionUnchecked=f},11127:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeImmutableOwnerInstructionUnchecked=t.decodeInitializeImmutableOwnerInstruction=t.createInitializeImmutableOwnerInstruction=t.initializeImmutableOwnerInstructionData=void 0;var o=n(62576),a=n(96322),s=n(20422),u=n(50639);function c(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data;return{programId:n,keys:{account:r},data:{instruction:t.initializeImmutableOwnerInstructionData.decode(o).instruction}}}t.initializeImmutableOwnerInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createInitializeImmutableOwnerInstruction=function(e,n){var i=[{pubkey:e,isSigner:!1,isWritable:!0}],o=r.alloc(t.initializeImmutableOwnerInstructionData.span);return t.initializeImmutableOwnerInstructionData.encode({instruction:u.TokenInstruction.InitializeImmutableOwner},o),new a.TransactionInstruction({keys:i,programId:n,data:o})},t.decodeInitializeImmutableOwnerInstruction=function(e,n){if(!e.programId.equals(n))throw new s.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeImmutableOwnerInstructionData.span)throw new s.TokenInvalidInstructionDataError;var r=c(e),i=r.keys.account,o=r.data;if(o.instruction!==u.TokenInstruction.InitializeImmutableOwner)throw new s.TokenInvalidInstructionTypeError;if(!i)throw new s.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:i},data:o}},t.decodeInitializeImmutableOwnerInstructionUnchecked=c},41340:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeMintInstructionUnchecked=t.decodeInitializeMintInstruction=t.createInitializeMintInstruction=t.initializeMintInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,2),o=r[0],a=r[1],s=e.data,u=t.initializeMintInstructionData.decode(s),c=u.instruction,l=u.decimals,f=u.mintAuthority,h=u.freezeAuthorityOption,d=u.freezeAuthority;return{programId:n,keys:{mint:o,rent:a},data:{instruction:c,decimals:l,mintAuthority:f,freezeAuthority:h?d:null}}}t.initializeMintInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("decimals"),(0,a.publicKey)("mintAuthority"),(0,o.u8)("freezeAuthorityOption"),(0,a.publicKey)("freezeAuthority")]),t.createInitializeMintInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.TOKEN_PROGRAM_ID,c=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],f=r.alloc(t.initializeMintInstructionData.span);return t.initializeMintInstructionData.encode({instruction:l.TokenInstruction.InitializeMint,decimals:n,mintAuthority:i,freezeAuthorityOption:o?1:0,freezeAuthority:o||new s.PublicKey(0)},f),new s.TransactionInstruction({keys:c,programId:a,data:f})},t.decodeInitializeMintInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeMintInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.mint,a=i.rent,s=r.data;if(s.instruction!==l.TokenInstruction.InitializeMint)throw new c.TokenInvalidInstructionTypeError;if(!o||!a)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,rent:a},data:s}},t.decodeInitializeMintInstructionUnchecked=f},17121:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeMint2InstructionUnchecked=t.decodeInitializeMint2Instruction=t.createInitializeMint2Instruction=t.initializeMint2InstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data,a=t.initializeMint2InstructionData.decode(o),s=a.instruction,u=a.decimals,c=a.mintAuthority,l=a.freezeAuthorityOption,f=a.freezeAuthority;return{programId:n,keys:{mint:r},data:{instruction:s,decimals:u,mintAuthority:c,freezeAuthority:l?f:null}}}t.initializeMint2InstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("decimals"),(0,a.publicKey)("mintAuthority"),(0,o.u8)("freezeAuthorityOption"),(0,a.publicKey)("freezeAuthority")]),t.createInitializeMint2Instruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:u.TOKEN_PROGRAM_ID,c=[{pubkey:e,isSigner:!1,isWritable:!0}],f=r.alloc(t.initializeMint2InstructionData.span);return t.initializeMint2InstructionData.encode({instruction:l.TokenInstruction.InitializeMint2,decimals:n,mintAuthority:i,freezeAuthorityOption:o?1:0,freezeAuthority:o||new s.PublicKey(0)},f),new s.TransactionInstruction({keys:c,programId:a,data:f})},t.decodeInitializeMint2Instruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeMint2InstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys.mint,o=r.data;if(o.instruction!==l.TokenInstruction.InitializeMint2)throw new c.TokenInvalidInstructionTypeError;if(!i)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:i},data:o}},t.decodeInitializeMint2InstructionUnchecked=f},76886:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeMintCloseAuthorityInstructionUnchecked=t.decodeInitializeMintCloseAuthorityInstruction=t.createInitializeMintCloseAuthorityInstruction=t.initializeMintCloseAuthorityInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data,a=t.initializeMintCloseAuthorityInstructionData.decode(o),s=a.instruction,u=a.closeAuthorityOption,c=a.closeAuthority;return{programId:n,keys:{mint:r},data:{instruction:s,closeAuthority:u?c:null}}}t.initializeMintCloseAuthorityInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("closeAuthorityOption"),(0,a.publicKey)("closeAuthority")]),t.createInitializeMintCloseAuthorityInstruction=function(e,n,i){if(!(0,u.programSupportsExtensions)(i))throw new c.TokenUnsupportedInstructionError;var o=[{pubkey:e,isSigner:!1,isWritable:!0}],a=r.alloc(t.initializeMintCloseAuthorityInstructionData.span);return t.initializeMintCloseAuthorityInstructionData.encode({instruction:l.TokenInstruction.InitializeMintCloseAuthority,closeAuthorityOption:n?1:0,closeAuthority:n||new s.PublicKey(0)},a),new s.TransactionInstruction({keys:o,programId:i,data:a})},t.decodeInitializeMintCloseAuthorityInstruction=function(e,n){if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeMintCloseAuthorityInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys.mint,o=r.data;if(o.instruction!==l.TokenInstruction.InitializeMintCloseAuthority)throw new c.TokenInvalidInstructionTypeError;if(!i)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:i},data:o}},t.decodeInitializeMintCloseAuthorityInstructionUnchecked=f},44083:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default,o=n(74704).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializeMultisigInstructionUnchecked=t.decodeInitializeMultisigInstruction=t.createInitializeMultisigInstruction=t.initializeMultisigInstructionData=void 0;var a=n(62576),s=n(96322),u=n(82084),c=n(20422),l=n(50639);function f(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r.slice(2),u=e.data;return{programId:n,keys:{account:o,rent:a,signers:s},data:t.initializeMultisigInstructionData.decode(u)}}t.initializeMultisigInstructionData=(0,a.struct)([(0,a.u8)("instruction"),(0,a.u8)("m")]),t.createInitializeMultisigInstruction=function(e,n,i){var a,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u.TOKEN_PROGRAM_ID,f=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:s.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],h=o(n);try{for(h.s();!(a=h.n()).done;){var d=a.value;f.push({pubkey:d instanceof s.PublicKey?d:d.publicKey,isSigner:!1,isWritable:!1})}}catch(y){h.e(y)}finally{h.f()}var p=r.alloc(t.initializeMultisigInstructionData.span);return t.initializeMultisigInstructionData.encode({instruction:l.TokenInstruction.InitializeMultisig,m:i},p),new s.TransactionInstruction({keys:f,programId:c,data:p})},t.decodeInitializeMultisigInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializeMultisigInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.rent,s=i.signers,h=r.data;if(h.instruction!==l.TokenInstruction.InitializeMultisig)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s.length)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,rent:a,signers:s},data:h}},t.decodeInitializeMultisigInstructionUnchecked=f},29892:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80617:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createInitializeNonTransferableMintInstruction=t.initializeNonTransferableMintInstructionData=void 0;var i=n(62576),o=n(96322),a=n(82084),s=n(20422),u=n(50639);t.initializeNonTransferableMintInstructionData=(0,i.struct)([(0,i.u8)("instruction")]),t.createInitializeNonTransferableMintInstruction=function(e,n){if(!(0,a.programSupportsExtensions)(n))throw new s.TokenUnsupportedInstructionError;var i=[{pubkey:e,isSigner:!1,isWritable:!0}],c=r.alloc(t.initializeNonTransferableMintInstructionData.span);return t.initializeNonTransferableMintInstructionData.encode({instruction:u.TokenInstruction.InitializeNonTransferableMint},c),new o.TransactionInstruction({keys:i,programId:n,data:c})}},41583:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeInitializePermanentDelegateInstructionUnchecked=t.decodeInitializePermanentDelegateInstruction=t.createInitializePermanentDelegateInstruction=t.initializePermanentDelegateInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(96322),c=n(82084),l=n(20422),f=n(50639);function h(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data,a=t.initializePermanentDelegateInstructionData.decode(o);return{programId:n,keys:{mint:r},data:{instruction:a.instruction,delegate:a.delegate}}}t.initializePermanentDelegateInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.publicKey)("delegate")]),t.createInitializePermanentDelegateInstruction=function(e,n,i){if(!(0,c.programSupportsExtensions)(i))throw new l.TokenUnsupportedInstructionError;var o=[{pubkey:e,isSigner:!1,isWritable:!0}],a=r.alloc(t.initializePermanentDelegateInstructionData.span);return t.initializePermanentDelegateInstructionData.encode({instruction:f.TokenInstruction.InitializePermanentDelegate,delegate:n||new s.PublicKey(0)},a),new u.TransactionInstruction({keys:o,programId:i,data:a})},t.decodeInitializePermanentDelegateInstruction=function(e,n){if(!e.programId.equals(n))throw new l.TokenInvalidInstructionProgramError;if(e.data.length!==t.initializePermanentDelegateInstructionData.span)throw new l.TokenInvalidInstructionDataError;var r=h(e),i=r.keys.mint,o=r.data;if(o.instruction!==f.TokenInstruction.InitializePermanentDelegate)throw new l.TokenInvalidInstructionTypeError;if(!i)throw new l.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:i},data:o}},t.decodeInitializePermanentDelegateInstructionUnchecked=h},36031:function(e,t,n){"use strict";var r=n(74704).default;Object.defineProperty(t,"__esModule",{value:!0}),t.addSigners=void 0;var i=n(96322);t.addSigners=function(e,t,n){if(n.length){e.push({pubkey:t,isSigner:!1,isWritable:!1});var o,a=r(n);try{for(a.s();!(o=a.n()).done;){var s=o.value;e.push({pubkey:s instanceof i.PublicKey?s:s.publicKey,isSigner:!0,isWritable:!1})}}catch(u){a.e(u)}finally{a.f()}}else e.push({pubkey:t,isSigner:!0,isWritable:!1});return e}},67217:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMintToInstructionUnchecked=t.decodeMintToInstruction=t.createMintToInstruction=t.mintToInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{mint:o,destination:a,authority:s,multiSigners:u},data:t.mintToInstructionData.decode(c)}}t.mintToInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount")]),t.createMintToInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TOKEN_PROGRAM_ID,h=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,a),d=r.alloc(t.mintToInstructionData.span);return t.mintToInstructionData.encode({instruction:f.TokenInstruction.MintTo,amount:BigInt(o)},d),new s.TransactionInstruction({keys:h,programId:c,data:d})},t.decodeMintToInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.mintToInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.mint,a=i.destination,s=i.authority,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.MintTo)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,destination:a,authority:s,multiSigners:l},data:d}},t.decodeMintToInstructionUnchecked=h},68357:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeMintToCheckedInstructionUnchecked=t.decodeMintToCheckedInstruction=t.createMintToCheckedInstruction=t.mintToCheckedInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{mint:o,destination:a,authority:s,multiSigners:u},data:t.mintToCheckedInstructionData.decode(c)}}t.mintToCheckedInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount"),(0,o.u8)("decimals")]),t.createMintToCheckedInstruction=function(e,n,i,o,a){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:u.TOKEN_PROGRAM_ID,d=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,c),p=r.alloc(t.mintToCheckedInstructionData.span);return t.mintToCheckedInstructionData.encode({instruction:f.TokenInstruction.MintToChecked,amount:BigInt(o),decimals:a},p),new s.TransactionInstruction({keys:d,programId:h,data:p})},t.decodeMintToCheckedInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.mintToCheckedInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.mint,a=i.destination,s=i.authority,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.MintToChecked)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{mint:o,destination:a,authority:s,multiSigners:l},data:d}},t.decodeMintToCheckedInstructionUnchecked=h},82040:function(e,t,n){"use strict";var r=n(19778).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.createReallocateInstruction=void 0;var i=n(62576),o=n(96322),a=n(82084),s=n(20422),u=n(36031),c=n(50639);t.createReallocateInstruction=function(e,t,n,l){var f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:a.TOKEN_2022_PROGRAM_ID;if(!(0,a.programSupportsExtensions)(h))throw new s.TokenUnsupportedInstructionError;var d=[{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!0,isWritable:!0},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1}],p=(0,u.addSigners)(d,l,f),y=(0,i.struct)([(0,i.u8)("instruction"),(0,i.seq)((0,i.u16)(),n.length,"extensionTypes")]),m=r.alloc(y.span);return y.encode({instruction:c.TokenInstruction.Reallocate,extensionTypes:n},m),new o.TransactionInstruction({keys:p,programId:h,data:m})}},77164:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeRevokeInstructionUnchecked=t.decodeRevokeInstruction=t.createRevokeInstruction=t.revokeInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r.slice(2),u=e.data;return{programId:n,keys:{account:o,owner:a,multiSigners:s},data:t.revokeInstructionData.decode(u)}}t.revokeInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createRevokeInstruction=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_PROGRAM_ID,u=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0}],n,i),f=r.alloc(t.revokeInstructionData.span);return t.revokeInstructionData.encode({instruction:l.TokenInstruction.Revoke},f),new a.TransactionInstruction({keys:u,programId:o,data:f})},t.decodeRevokeInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.revokeInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.owner,c=i.multiSigners,h=r.data;if(h.instruction!==l.TokenInstruction.Revoke)throw new u.TokenInvalidInstructionTypeError;if(!o||!a)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,owner:a,multiSigners:c},data:h}},t.decodeRevokeInstructionUnchecked=f},60862:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSetAuthorityInstructionUnchecked=t.decodeSetAuthorityInstruction=t.createSetAuthorityInstruction=t.setAuthorityInstructionData=t.AuthorityType=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r.slice(2),u=e.data,c=t.setAuthorityInstructionData.decode(u),l=c.instruction,f=c.authorityType,h=c.newAuthorityOption,d=c.newAuthority;return{programId:n,keys:{account:o,currentAuthority:a,multiSigners:s},data:{instruction:l,authorityType:f,newAuthority:h?d:null}}}!function(e){e[e.MintTokens=0]="MintTokens",e[e.FreezeAccount=1]="FreezeAccount",e[e.AccountOwner=2]="AccountOwner",e[e.CloseAccount=3]="CloseAccount"}(t.AuthorityType||(t.AuthorityType={})),t.setAuthorityInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,o.u8)("authorityType"),(0,o.u8)("newAuthorityOption"),(0,a.publicKey)("newAuthority")]),t.createSetAuthorityInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TOKEN_PROGRAM_ID,h=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0}],n,a),d=r.alloc(t.setAuthorityInstructionData.span);return t.setAuthorityInstructionData.encode({instruction:f.TokenInstruction.SetAuthority,authorityType:i,newAuthorityOption:o?1:0,newAuthority:o||new s.PublicKey(0)},d),new s.TransactionInstruction({keys:h,programId:c,data:d})},t.decodeSetAuthorityInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.setAuthorityInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.account,a=i.currentAuthority,s=i.multiSigners,l=r.data;if(l.instruction!==f.TokenInstruction.SetAuthority)throw new c.TokenInvalidInstructionTypeError;if(!o||!a)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,currentAuthority:a,multiSigners:s},data:l}},t.decodeSetAuthorityInstructionUnchecked=h},11087:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeSyncNativeInstructionUnchecked=t.decodeSyncNativeInstruction=t.createSyncNativeInstruction=t.syncNativeInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(50639);function l(e){var n=e.programId,r=i(e.keys,1)[0],o=e.data;return{programId:n,keys:{account:r},data:t.syncNativeInstructionData.decode(o)}}t.syncNativeInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createSyncNativeInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID,i=[{pubkey:e,isSigner:!1,isWritable:!0}],o=r.alloc(t.syncNativeInstructionData.span);return t.syncNativeInstructionData.encode({instruction:c.TokenInstruction.SyncNative},o),new a.TransactionInstruction({keys:i,programId:n,data:o})},t.decodeSyncNativeInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.syncNativeInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=l(e),i=r.keys.account,o=r.data;if(o.instruction!==c.TokenInstruction.SyncNative)throw new u.TokenInvalidInstructionTypeError;if(!i)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:i},data:o}},t.decodeSyncNativeInstructionUnchecked=l},53688:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeThawAccountInstructionUnchecked=t.decodeThawAccountInstruction=t.createThawAccountInstruction=t.thawAccountInstructionData=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(36031),l=n(50639);function f(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{account:o,mint:a,authority:s,multiSigners:u},data:t.thawAccountInstructionData.decode(c)}}t.thawAccountInstructionData=(0,o.struct)([(0,o.u8)("instruction")]),t.createThawAccountInstruction=function(e,n,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:s.TOKEN_PROGRAM_ID,f=(0,c.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}],i,o),h=r.alloc(t.thawAccountInstructionData.span);return t.thawAccountInstructionData.encode({instruction:l.TokenInstruction.ThawAccount},h),new a.TransactionInstruction({keys:f,programId:u,data:h})},t.decodeThawAccountInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new u.TokenInvalidInstructionProgramError;if(e.data.length!==t.thawAccountInstructionData.span)throw new u.TokenInvalidInstructionDataError;var r=f(e),i=r.keys,o=i.account,a=i.mint,c=i.authority,h=i.multiSigners,d=r.data;if(d.instruction!==l.TokenInstruction.ThawAccount)throw new u.TokenInvalidInstructionTypeError;if(!o||!a||!c)throw new u.TokenInvalidInstructionKeysError;return{programId:n,keys:{account:o,mint:a,authority:c,multiSigners:h},data:d}},t.decodeThawAccountInstructionUnchecked=f},11056:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTransferInstructionUnchecked=t.decodeTransferInstruction=t.createTransferInstruction=t.transferInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r.slice(3),c=e.data;return{programId:n,keys:{source:o,destination:a,owner:s,multiSigners:u},data:t.transferInstructionData.decode(c)}}t.transferInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount")]),t.createTransferInstruction=function(e,n,i,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:u.TOKEN_PROGRAM_ID,h=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}],i,a),d=r.alloc(t.transferInstructionData.span);return t.transferInstructionData.encode({instruction:f.TokenInstruction.Transfer,amount:BigInt(o)},d),new s.TransactionInstruction({keys:h,programId:c,data:d})},t.decodeTransferInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.transferInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.source,a=i.destination,s=i.owner,l=i.multiSigners,d=r.data;if(d.instruction!==f.TokenInstruction.Transfer)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{source:o,destination:a,owner:s,multiSigners:l},data:d}},t.decodeTransferInstructionUnchecked=h},98313:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(51589).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeTransferCheckedInstructionUnchecked=t.decodeTransferCheckedInstruction=t.createTransferCheckedInstruction=t.transferCheckedInstructionData=void 0;var o=n(62576),a=n(17329),s=n(96322),u=n(82084),c=n(20422),l=n(36031),f=n(50639);function h(e){var n=e.programId,r=i(e.keys),o=r[0],a=r[1],s=r[2],u=r[3],c=r.slice(4),l=e.data;return{programId:n,keys:{source:o,mint:a,destination:s,owner:u,multiSigners:c},data:t.transferCheckedInstructionData.decode(l)}}t.transferCheckedInstructionData=(0,o.struct)([(0,o.u8)("instruction"),(0,a.u64)("amount"),(0,o.u8)("decimals")]),t.createTransferCheckedInstruction=function(e,n,i,o,a,c){var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:u.TOKEN_PROGRAM_ID,p=(0,l.addSigners)([{pubkey:e,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:i,isSigner:!1,isWritable:!0}],o,h),y=r.alloc(t.transferCheckedInstructionData.span);return t.transferCheckedInstructionData.encode({instruction:f.TokenInstruction.TransferChecked,amount:BigInt(a),decimals:c},y),new s.TransactionInstruction({keys:p,programId:d,data:y})},t.decodeTransferCheckedInstruction=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.TOKEN_PROGRAM_ID;if(!e.programId.equals(n))throw new c.TokenInvalidInstructionProgramError;if(e.data.length!==t.transferCheckedInstructionData.span)throw new c.TokenInvalidInstructionDataError;var r=h(e),i=r.keys,o=i.source,a=i.mint,s=i.destination,l=i.owner,d=i.multiSigners,p=r.data;if(p.instruction!==f.TokenInstruction.TransferChecked)throw new c.TokenInvalidInstructionTypeError;if(!o||!a||!s||!l)throw new c.TokenInvalidInstructionKeysError;return{programId:n,keys:{source:o,mint:a,destination:s,owner:l,multiSigners:d},data:p}},t.decodeTransferCheckedInstructionUnchecked=h},50639:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenInstruction=void 0,function(e){e[e.InitializeMint=0]="InitializeMint",e[e.InitializeAccount=1]="InitializeAccount",e[e.InitializeMultisig=2]="InitializeMultisig",e[e.Transfer=3]="Transfer",e[e.Approve=4]="Approve",e[e.Revoke=5]="Revoke",e[e.SetAuthority=6]="SetAuthority",e[e.MintTo=7]="MintTo",e[e.Burn=8]="Burn",e[e.CloseAccount=9]="CloseAccount",e[e.FreezeAccount=10]="FreezeAccount",e[e.ThawAccount=11]="ThawAccount",e[e.TransferChecked=12]="TransferChecked",e[e.ApproveChecked=13]="ApproveChecked",e[e.MintToChecked=14]="MintToChecked",e[e.BurnChecked=15]="BurnChecked",e[e.InitializeAccount2=16]="InitializeAccount2",e[e.SyncNative=17]="SyncNative",e[e.InitializeAccount3=18]="InitializeAccount3",e[e.InitializeMultisig2=19]="InitializeMultisig2",e[e.InitializeMint2=20]="InitializeMint2",e[e.GetAccountDataSize=21]="GetAccountDataSize",e[e.InitializeImmutableOwner=22]="InitializeImmutableOwner",e[e.AmountToUiAmount=23]="AmountToUiAmount",e[e.UiAmountToAmount=24]="UiAmountToAmount",e[e.InitializeMintCloseAuthority=25]="InitializeMintCloseAuthority",e[e.TransferFeeExtension=26]="TransferFeeExtension",e[e.ConfidentialTransferExtension=27]="ConfidentialTransferExtension",e[e.DefaultAccountStateExtension=28]="DefaultAccountStateExtension",e[e.Reallocate=29]="Reallocate",e[e.MemoTransferExtension=30]="MemoTransferExtension",e[e.CreateNativeMint=31]="CreateNativeMint",e[e.InitializeNonTransferableMint=32]="InitializeNonTransferableMint",e[e.InterestBearingMintExtension=33]="InterestBearingMintExtension",e[e.CpiGuardExtension=34]="CpiGuardExtension",e[e.InitializePermanentDelegate=35]="InitializePermanentDelegate"}(t.TokenInstruction||(t.TokenInstruction={}))},24498:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default;Object.defineProperty(t,"__esModule",{value:!0}),t.decodeUiAmountToAmountInstructionUnchecked=t.decodeUiAmountToAmountInstruction=t.createUiAmountToAmountInstruction=void 0;var o=n(62576),a=n(96322),s=n(82084),u=n(20422),c=n(50639);function l(e){var t=e.programId,n=i(e.keys,1)[0],r=e.data;return{programId:t,keys:{mint:n},data:(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(r.length-1,"amount")]).decode(r)}}t.createUiAmountToAmountInstruction=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TOKEN_PROGRAM_ID,i=[{pubkey:e,isSigner:!1,isWritable:!1}],u=r.from(t,"utf8"),l=(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(u.length,"amount")]),f=r.alloc(l.span);return l.encode({instruction:c.TokenInstruction.UiAmountToAmount,amount:u},f),new a.TransactionInstruction({keys:i,programId:n,data:f})},t.decodeUiAmountToAmountInstruction=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.TOKEN_PROGRAM_ID;if(!e.programId.equals(t))throw new u.TokenInvalidInstructionProgramError;var n=(0,o.struct)([(0,o.u8)("instruction"),(0,o.blob)(e.data.length-1,"amount")]);if(e.data.length!==n.span)throw new u.TokenInvalidInstructionDataError;var r=l(e),i=r.keys.mint,a=r.data;if(a.instruction!==c.TokenInstruction.UiAmountToAmount)throw new u.TokenInvalidInstructionTypeError;if(!i)throw new u.TokenInvalidInstructionKeysError;return{programId:t,keys:{mint:i},data:a}},t.decodeUiAmountToAmountInstructionUnchecked=l},78762:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(17061).default,o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.unpackAccount=t.getMinimumBalanceForRentExemptAccountWithExtensions=t.getMinimumBalanceForRentExemptAccount=t.getMultipleAccounts=t.getAccount=t.ACCOUNT_SIZE=t.AccountLayout=t.AccountState=void 0;var a,s=n(62576),u=n(17329),c=n(82084),l=n(20422),f=n(2156),h=n(73382),d=n(17365);function p(e,t,n){return o(this,void 0,void 0,i().mark((function r(){var o;return i().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=(0,h.getAccountLen)(t),r.next=3,e.getMinimumBalanceForRentExemption(o,n);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))}function y(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.TOKEN_PROGRAM_ID;if(!n)throw new l.TokenAccountNotFoundError;if(!n.owner.equals(i))throw new l.TokenInvalidAccountOwnerError;if(n.data.length<t.ACCOUNT_SIZE)throw new l.TokenInvalidAccountSizeError;var o=t.AccountLayout.decode(n.data.slice(0,t.ACCOUNT_SIZE)),s=r.alloc(0);if(n.data.length>t.ACCOUNT_SIZE){if(n.data.length===d.MULTISIG_SIZE)throw new l.TokenInvalidAccountSizeError;if(n.data[t.ACCOUNT_SIZE]!=f.AccountType.Account)throw new l.TokenInvalidAccountError;s=n.data.slice(t.ACCOUNT_SIZE+f.ACCOUNT_TYPE_SIZE)}return{address:e,mint:o.mint,owner:o.owner,amount:o.amount,delegate:o.delegateOption?o.delegate:null,delegatedAmount:o.delegatedAmount,isInitialized:o.state!==a.Uninitialized,isFrozen:o.state===a.Frozen,isNative:!!o.isNativeOption,rentExemptReserve:o.isNativeOption?o.isNative:null,closeAuthority:o.closeAuthorityOption?o.closeAuthority:null,tlvData:s}}!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initialized=1]="Initialized",e[e.Frozen=2]="Frozen"}(a=t.AccountState||(t.AccountState={})),t.AccountLayout=(0,s.struct)([(0,u.publicKey)("mint"),(0,u.publicKey)("owner"),(0,u.u64)("amount"),(0,s.u32)("delegateOption"),(0,u.publicKey)("delegate"),(0,s.u8)("state"),(0,s.u32)("isNativeOption"),(0,u.u64)("isNative"),(0,u.u64)("delegatedAmount"),(0,s.u32)("closeAuthorityOption"),(0,u.publicKey)("closeAuthority")]),t.ACCOUNT_SIZE=t.AccountLayout.span,t.getAccount=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.TOKEN_PROGRAM_ID;return o(this,void 0,void 0,i().mark((function o(){var a;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getAccountInfo(t,n);case 2:return a=i.sent,i.abrupt("return",y(t,a,r));case 4:case"end":return i.stop()}}),o)})))},t.getMultipleAccounts=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.TOKEN_PROGRAM_ID;return o(this,void 0,void 0,i().mark((function o(){var a;return i().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getMultipleAccountsInfo(t,n);case 2:return a=i.sent,i.abrupt("return",t.map((function(e,t){return y(e,a[t],r)})));case 4:case"end":return i.stop()}}),o)})))},t.getMinimumBalanceForRentExemptAccount=function(e,t){return o(this,void 0,void 0,i().mark((function n(){return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(e,[],t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))},t.getMinimumBalanceForRentExemptAccountWithExtensions=p,t.unpackAccount=y},48157:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(78762),t),i(n(56218),t),i(n(17365),t)},56218:function(e,t,n){"use strict";var r=n(19778).Buffer,i=n(27424).default,o=n(17061).default,a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAssociatedTokenAddressSync=t.getAssociatedTokenAddress=t.getMinimumBalanceForRentExemptMintWithExtensions=t.getMinimumBalanceForRentExemptMint=t.unpackMint=t.getMint=t.MINT_SIZE=t.MintLayout=void 0;var s=n(62576),u=n(17329),c=n(96322),l=n(82084),f=n(20422),h=n(2156),d=n(73382),p=n(78762),y=n(17365);function m(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.TOKEN_PROGRAM_ID;if(!n)throw new f.TokenAccountNotFoundError;if(!n.owner.equals(i))throw new f.TokenInvalidAccountOwnerError;if(n.data.length<t.MINT_SIZE)throw new f.TokenInvalidAccountSizeError;var o=t.MintLayout.decode(n.data.slice(0,t.MINT_SIZE)),a=r.alloc(0);if(n.data.length>t.MINT_SIZE){if(n.data.length<=p.ACCOUNT_SIZE)throw new f.TokenInvalidAccountSizeError;if(n.data.length===y.MULTISIG_SIZE)throw new f.TokenInvalidAccountSizeError;if(n.data[p.ACCOUNT_SIZE]!=h.AccountType.Mint)throw new f.TokenInvalidMintError;a=n.data.slice(p.ACCOUNT_SIZE+h.ACCOUNT_TYPE_SIZE)}return{address:e,mintAuthority:o.mintAuthorityOption?o.mintAuthority:null,supply:o.supply,decimals:o.decimals,isInitialized:o.isInitialized,freezeAuthority:o.freezeAuthorityOption?o.freezeAuthority:null,tlvData:a}}function g(e,t,n){return a(this,void 0,void 0,o().mark((function r(){var i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=(0,d.getMintLen)(t),r.next=3,e.getMinimumBalanceForRentExemption(i,n);case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}}),r)})))}t.MintLayout=(0,s.struct)([(0,s.u32)("mintAuthorityOption"),(0,u.publicKey)("mintAuthority"),(0,u.u64)("supply"),(0,s.u8)("decimals"),(0,u.bool)("isInitialized"),(0,s.u32)("freezeAuthorityOption"),(0,u.publicKey)("freezeAuthority")]),t.MINT_SIZE=t.MintLayout.span,t.getMint=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.TOKEN_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function i(){var a;return o().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.getAccountInfo(t,n);case 2:return a=i.sent,i.abrupt("return",m(t,a,r));case 4:case"end":return i.stop()}}),i)})))},t.unpackMint=m,t.getMinimumBalanceForRentExemptMint=function(e,t){return a(this,void 0,void 0,o().mark((function n(){return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g(e,[],t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))},t.getMinimumBalanceForRentExemptMintWithExtensions=g,t.getAssociatedTokenAddress=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.TOKEN_PROGRAM_ID,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.ASSOCIATED_TOKEN_PROGRAM_ID;return a(this,void 0,void 0,o().mark((function a(){var u,l,h;return o().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n||c.PublicKey.isOnCurve(t.toBuffer())){o.next=2;break}throw new f.TokenOwnerOffCurveError;case 2:return o.next=4,c.PublicKey.findProgramAddress([t.toBuffer(),r.toBuffer(),e.toBuffer()],s);case 4:return u=o.sent,l=i(u,1),h=l[0],o.abrupt("return",h);case 8:case"end":return o.stop()}}),a)})))},t.getAssociatedTokenAddressSync=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.TOKEN_PROGRAM_ID,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.ASSOCIATED_TOKEN_PROGRAM_ID;if(!n&&!c.PublicKey.isOnCurve(t.toBuffer()))throw new f.TokenOwnerOffCurveError;var a=c.PublicKey.findProgramAddressSync([t.toBuffer(),r.toBuffer(),e.toBuffer()],o);return i(a,1)[0]}},17365:function(e,t,n){"use strict";var r=n(17061).default,i=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getMinimumBalanceForRentExemptMultisig=t.unpackMultisig=t.getMultisig=t.MULTISIG_SIZE=t.MultisigLayout=void 0;var o=n(62576),a=n(17329),s=n(82084),u=n(20422);function c(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.TOKEN_PROGRAM_ID;if(!n)throw new u.TokenAccountNotFoundError;if(!n.owner.equals(r))throw new u.TokenInvalidAccountOwnerError;if(n.data.length!=t.MULTISIG_SIZE)throw new u.TokenInvalidAccountSizeError;var i=t.MultisigLayout.decode(n.data);return Object.assign({address:e},i)}t.MultisigLayout=(0,o.struct)([(0,o.u8)("m"),(0,o.u8)("n"),(0,a.bool)("isInitialized"),(0,a.publicKey)("signer1"),(0,a.publicKey)("signer2"),(0,a.publicKey)("signer3"),(0,a.publicKey)("signer4"),(0,a.publicKey)("signer5"),(0,a.publicKey)("signer6"),(0,a.publicKey)("signer7"),(0,a.publicKey)("signer8"),(0,a.publicKey)("signer9"),(0,a.publicKey)("signer10"),(0,a.publicKey)("signer11")]),t.MULTISIG_SIZE=t.MultisigLayout.span,t.getMultisig=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s.TOKEN_PROGRAM_ID;return i(this,void 0,void 0,r().mark((function i(){var a;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getAccountInfo(t,n);case 2:return a=r.sent,r.abrupt("return",c(t,a,o));case 4:case"end":return r.stop()}}),i)})))},t.unpackMultisig=c,t.getMinimumBalanceForRentExemptMultisig=function(e,n){return i(this,void 0,void 0,r().mark((function i(){return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getMinimumBalanceForRentExemption(t.MULTISIG_SIZE,n);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),i)})))}},30907:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return r}})},83878:function(e,t,n){"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{Z:function(){return r}})},97326:function(e,t,n){"use strict";function r(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.d(t,{Z:function(){return r}})},15861:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise((function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,u,"next",e)}function u(e){r(a,i,o,s,u,"throw",e)}s(void 0)}))}}n.d(t,{Z:function(){return i}})},15671:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{Z:function(){return r}})},43144:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(49142);function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(0,r.Z)(i.key),i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}},37762:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(40181);function i(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=(0,r.Z)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){u=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(u)throw a}}}}},29388:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(61120),i=n(78814),o=n(82963);function a(e){var t=(0,i.Z)();return function(){var n,i=(0,r.Z)(e);if(t){var a=(0,r.Z)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,o.Z)(this,n)}}},4942:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(49142);function i(e,t,n){return(t=(0,r.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},11752:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(61120);function i(){return i="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=(0,r.Z)(e)););return e}(e,t);if(i){var o=Object.getOwnPropertyDescriptor(i,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},i.apply(this,arguments)}},61120:function(e,t,n){"use strict";function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}n.d(t,{Z:function(){return r}})},60136:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(89611);function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&(0,r.Z)(e,t)}},78814:function(e,t,n){"use strict";function r(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}n.d(t,{Z:function(){return r}})},59199:function(e,t,n){"use strict";function r(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{Z:function(){return r}})},25267:function(e,t,n){"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{Z:function(){return r}})},1413:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(4942);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},44925:function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}n.d(t,{Z:function(){return r}})},82963:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(71002),i=n(97326);function o(e,t){if(t&&("object"===(0,r.Z)(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return(0,i.Z)(e)}},74165:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(71002);function i(){i=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(P){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),s=new S(r||[]);return o(a,"_invoke",{value:k(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(P){return{type:"throw",arg:P}}}e.wrap=f;var d={};function p(){}function y(){}function m(){}var g={};l(g,s,(function(){return this}));var v=Object.getPrototypeOf,b=v&&v(v(T([])));b&&b!==t&&n.call(b,s)&&(g=b);var _=m.prototype=p.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(o,a,s,u){var c=h(e[o],e,a);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==(0,r.Z)(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,s,u)}),(function(e){i("throw",e,s,u)})):t.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return i("throw",e,s,u)}))}u(c.arg)}var a;o(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function k(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=h(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function A(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,A(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function T(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:M}}function M(){return{value:void 0,done:!0}}return y.prototype=m,o(_,"constructor",{value:m,configurable:!0}),o(m,"constructor",{value:y,configurable:!0}),y.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},w(x.prototype),l(x.prototype,u,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(_),l(_,c,"Generator"),l(_,s,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=T,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:T(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}},89611:function(e,t,n){"use strict";function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}n.d(t,{Z:function(){return r}})},29439:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(83878);var i=n(40181),o=n(25267);function a(e,t){return(0,r.Z)(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],u=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);u=!0);}catch(l){c=!0,i=l}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||(0,i.Z)(e,t)||(0,o.Z)()}},93433:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(30907);var i=n(59199),o=n(40181);function a(e){return function(e){if(Array.isArray(e))return(0,r.Z)(e)}(e)||(0,i.Z)(e)||(0,o.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},49142:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(71002);function i(e){var t=function(e,t){if("object"!==(0,r.Z)(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==(0,r.Z)(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===(0,r.Z)(t)?t:String(t)}},71002:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{Z:function(){return r}})},40181:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(30907);function i(e,t){if(e){if("string"===typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}},98737:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(61120),i=n(89611);var o=n(78814);function a(e,t,n){return a=(0,o.Z)()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&(0,i.Z)(o,n.prototype),o},a.apply(null,arguments)}function s(e){var t="function"===typeof Map?new Map:void 0;return s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return a(e,arguments,(0,r.Z)(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),(0,i.Z)(o,e)},s(e)}},9344:function(e,t,n){"use strict";function r(e,t,n){return t<=e&&e<=n}function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}n.r(t),n.d(t,{TextDecoder:function(){return l},TextEncoder:function(){return f}});var o=-1;function a(e){this.tokens=[].slice.call(e)}a.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():o},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.pop());else this.tokens.unshift(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.shift());else this.tokens.push(e)}};var s=-1;function u(e,t){if(e)throw TypeError("Decoder error");return t||65533}var c="utf-8";function l(e,t){if(!(this instanceof l))return new l(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=Boolean(t.fatal),this._ignoreBOM=Boolean(t.ignoreBOM),Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function f(e,t){if(!(this instanceof f))return new f(e,t);if((e=void 0!==e?String(e).toLowerCase():c)!==c)throw new Error("Encoding not supported. Only utf-8 is supported");t=i(t),this._streaming=!1,this._encoder=null,this._options={fatal:Boolean(t.fatal)},Object.defineProperty(this,"encoding",{value:"utf-8"})}function h(e){var t=e.fatal,n=0,i=0,a=0,c=128,l=191;this.handler=function(e,f){if(f===o&&0!==a)return a=0,u(t);if(f===o)return s;if(0===a){if(r(f,0,127))return f;if(r(f,194,223))a=1,n=f-192;else if(r(f,224,239))224===f&&(c=160),237===f&&(l=159),a=2,n=f-224;else{if(!r(f,240,244))return u(t);240===f&&(c=144),244===f&&(l=143),a=3,n=f-240}return n<<=6*a,null}if(!r(f,c,l))return n=a=i=0,c=128,l=191,e.prepend(f),u(t);if(c=128,l=191,n+=f-128<<6*(a-(i+=1)),i!==a)return null;var h=n;return n=a=i=0,h}}function d(e){e.fatal;this.handler=function(e,t){if(t===o)return s;if(r(t,0,127))return t;var n,i;r(t,128,2047)?(n=1,i=192):r(t,2048,65535)?(n=2,i=224):r(t,65536,1114111)&&(n=3,i=240);for(var a=[(t>>6*n)+i];n>0;){var u=t>>6*(n-1);a.push(128|63&u),n-=1}return a}}l.prototype={decode:function(e,t){var n;n="object"===typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"===typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0),t=i(t),this._streaming||(this._decoder=new h({fatal:this._fatal}),this._BOMseen=!1),this._streaming=Boolean(t.stream);for(var r,o=new a(n),u=[];!o.endOfStream()&&(r=this._decoder.handler(o,o.read()))!==s;)null!==r&&(Array.isArray(r)?u.push.apply(u,r):u.push(r));if(!this._streaming){do{if((r=this._decoder.handler(o,o.read()))===s)break;null!==r&&(Array.isArray(r)?u.push.apply(u,r):u.push(r))}while(!o.endOfStream());this._decoder=null}return u.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===u[0]?(this._BOMseen=!0,u.shift()):this._BOMseen=!0)),function(e){for(var t="",n=0;n<e.length;++n){var r=e[n];r<=65535?t+=String.fromCharCode(r):(r-=65536,t+=String.fromCharCode(55296+(r>>10),56320+(1023&r)))}return t}(u)}},f.prototype={encode:function(e,t){e=e?String(e):"",t=i(t),this._streaming||(this._encoder=new d(this._options)),this._streaming=Boolean(t.stream);for(var n,r=[],o=new a(function(e){for(var t=String(e),n=t.length,r=0,i=[];r<n;){var o=t.charCodeAt(r);if(o<55296||o>57343)i.push(o);else if(56320<=o&&o<=57343)i.push(65533);else if(55296<=o&&o<=56319)if(r===n-1)i.push(65533);else{var a=e.charCodeAt(r+1);if(56320<=a&&a<=57343){var s=1023&o,u=1023&a;i.push(65536+(s<<10)+u),r+=1}else i.push(65533)}r+=1}return i}(e));!o.endOfStream()&&(n=this._encoder.handler(o,o.read()))!==s;)Array.isArray(n)?r.push.apply(r,n):r.push(n);if(!this._streaming){for(;(n=this._encoder.handler(o,o.read()))!==s;)Array.isArray(n)?r.push.apply(r,n):r.push(n);this._encoder=null}return new Uint8Array(r)}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return r[e]}}));return a.default=function(){return r},n.d(o,a),o}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+"."+{59:"21e21aa5",126:"ff553559",608:"1c776821",724:"6660542d",997:"6dbbf694"}[e]+".chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="ohr-frontend:";n.l=function(r,i,o,a){if(e[r])e[r].push(i);else{var s,u;if(void 0!==o)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+o){s=f;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var h=function(t,n){s.onerror=s.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/ohr/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,o,a=r[0],s=r[1],u=r[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)u(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkohr_frontend=self.webpackChunkohr_frontend||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e,t=n(72791),r=n(1250),i=n(29439),o=n(96322);!function(e){e.Mainnet="mainnet-beta",e.Testnet="testnet",e.Devnet="devnet"}(e||(e={}));var a,s=n(93433),u=n(44925),c=n(74165),l=n(15861),f=n(15671),h=n(43144),d=n(60136),p=n(29388),y=n(37762),m=n(97143),g=n(98737),v=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;return(0,f.Z)(this,n),(i=t.call(this,e)).error=r,i}return(0,h.Z)(n)}((0,g.Z)(Error)),b=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletNotReadyError",e}return(0,h.Z)(n)}(v),_=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletLoadError",e}return(0,h.Z)(n)}(v),w=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletConfigError",e}return(0,h.Z)(n)}(v),x=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletConnectionError",e}return(0,h.Z)(n)}(v),k=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletDisconnectedError",e}return(0,h.Z)(n)}(v),A=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletDisconnectionError",e}return(0,h.Z)(n)}(v),E=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletAccountError",e}return(0,h.Z)(n)}(v),I=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletPublicKeyError",e}return(0,h.Z)(n)}(v),S=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletNotConnectedError",e}return(0,h.Z)(n)}(v),T=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletSendTransactionError",e}return(0,h.Z)(n)}(v),M=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletSignMessageError",e}return(0,h.Z)(n)}(v),P=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletSignTransactionError",e}return(0,h.Z)(n)}(v),B=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletTimeoutError",e}return(0,h.Z)(n)}(v),C=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletWindowBlockedError",e}return(0,h.Z)(n)}(v),O=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletWindowClosedError",e}return(0,h.Z)(n)}(v);!function(e){e.Installed="Installed",e.NotDetected="NotDetected",e.Loadable="Loadable",e.Unsupported="Unsupported"}(a||(a={}));var D=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"connected",get:function(){return!!this.publicKey}},{key:"autoConnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"prepareTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,o=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>2&&void 0!==o[2]?o[2]:{},i=this.publicKey){e.next=4;break}throw new S;case 4:if(t.feePayer=t.feePayer||i,e.t0=t.recentBlockhash,e.t0){e.next=10;break}return e.next=9,n.getLatestBlockhash({commitment:r.preflightCommitment,minContextSlot:r.minContextSlot});case 9:e.t0=e.sent.blockhash;case 10:return t.recentBlockhash=e.t0,e.abrupt("return",t);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(m);function R(e){if("undefined"!==typeof window&&"undefined"!==typeof document){var t=[],n=setInterval(r,1e3);t.push((function(){return clearInterval(n)})),"loading"===document.readyState&&(document.addEventListener("DOMContentLoaded",r,{once:!0}),t.push((function(){return document.removeEventListener("DOMContentLoaded",r)}))),"complete"!==document.readyState&&(window.addEventListener("load",r,{once:!0}),t.push((function(){return window.removeEventListener("load",r)}))),r()}function r(){if(e()){var n,r=(0,y.Z)(t);try{for(r.s();!(n=r.n()).done;){(0,n.value)()}}catch(i){r.e(i)}finally{r.f()}}}}function L(){if(!navigator)return!1;var e=navigator.userAgent.toLowerCase(),t=e.includes("iphone")||e.includes("ipad"),n=e.includes("safari");return t&&n}function z(e){return"version"in e}var Z=["signers"],N=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"sendTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,o,a,l,f,h,d=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{},i=!0,e.prev=2,!z(t)){e.next=26;break}if(this.supportedTransactionVersions){e.next=6;break}throw new T("Sending versioned transactions isn't supported by this wallet");case 6:if(this.supportedTransactionVersions.has(t.version)){e.next=8;break}throw new T("Sending transaction version ".concat(t.version," isn't supported by this wallet"));case 8:return e.prev=8,e.next=11,this.signTransaction(t);case 11:return t=e.sent,o=t.serialize(),e.next=15,n.sendRawTransaction(o,r);case 15:case 38:return e.abrupt("return",e.sent);case 18:if(e.prev=18,e.t0=e.catch(8),!(e.t0 instanceof P)){e.next=23;break}throw i=!1,e.t0;case 23:throw new T(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 24:e.next=47;break;case 26:return e.prev=26,l=r.signers,f=(0,u.Z)(r,Z),e.next=30,this.prepareTransaction(t,n,f);case 30:return t=e.sent,(null===l||void 0===l?void 0:l.length)&&(a=t).partialSign.apply(a,(0,s.Z)(l)),e.next=34,this.signTransaction(t);case 34:return t=e.sent,h=t.serialize(),e.next=38,n.sendRawTransaction(h,f);case 41:if(e.prev=41,e.t1=e.catch(26),!(e.t1 instanceof P)){e.next=46;break}throw i=!1,e.t1;case 46:throw new T(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 47:e.next=53;break;case 49:throw e.prev=49,e.t2=e.catch(2),i&&this.emit("error",e.t2),e.t2;case 53:case"end":return e.stop()}}),e,this,[[2,49],[8,18],[26,41]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i,o,a,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,y.Z)(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=12;break}if(!z(i=r.value)){e.next=10;break}if(this.supportedTransactionVersions){e.next=8;break}throw new P("Signing versioned transactions isn't supported by this wallet");case 8:if(this.supportedTransactionVersions.has(i.version)){e.next=10;break}throw new P("Signing transaction version ".concat(i.version," isn't supported by this wallet"));case 10:e.next=3;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),n.e(e.t0);case 17:return e.prev=17,n.f(),e.finish(17);case 20:o=[],a=(0,y.Z)(t),e.prev=22,a.s();case 24:if((s=a.n()).done){e.next=33;break}return u=s.value,e.t1=o,e.next=29,this.signTransaction(u);case 29:e.t2=e.sent,e.t1.push.call(e.t1,e.t2);case 31:e.next=24;break;case 33:e.next=38;break;case 35:e.prev=35,e.t3=e.catch(22),a.e(e.t3);case 38:return e.prev=38,a.f(),e.finish(38);case 41:return e.abrupt("return",o);case 42:case"end":return e.stop()}}),e,this,[[1,14,17,20],[22,35,38,41]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(D),U=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n)}(N),F=["signers"],j="Phantom",W=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this)).name=j,e.url="https://phantom.app",e.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjM0IiB3aWR0aD0iMzQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iLjUiIHgyPSIuNSIgeTE9IjAiIHkyPSIxIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM1MzRiYjEiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiM1NTFiZjkiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgeDE9Ii41IiB4Mj0iLjUiIHkxPSIwIiB5Mj0iMSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9Ii44MiIvPjwvbGluZWFyR3JhZGllbnQ+PGNpcmNsZSBjeD0iMTciIGN5PSIxNyIgZmlsbD0idXJsKCNhKSIgcj0iMTciLz48cGF0aCBkPSJtMjkuMTcwMiAxNy4yMDcxaC0yLjk5NjljMC02LjEwNzQtNC45NjgzLTExLjA1ODE3LTExLjA5NzUtMTEuMDU4MTctNi4wNTMyNSAwLTEwLjk3NDYzIDQuODI5NTctMTEuMDk1MDggMTAuODMyMzctLjEyNDYxIDYuMjA1IDUuNzE3NTIgMTEuNTkzMiAxMS45NDUzOCAxMS41OTMyaC43ODM0YzUuNDkwNiAwIDEyLjg0OTctNC4yODI5IDEzLjk5OTUtOS41MDEzLjIxMjMtLjk2MTktLjU1MDItMS44NjYxLTEuNTM4OC0xLjg2NjF6bS0xOC41NDc5LjI3MjFjMCAuODE2Ny0uNjcwMzggMS40ODQ3LTEuNDkwMDEgMS40ODQ3LS44MTk2NCAwLTEuNDg5OTgtLjY2ODMtMS40ODk5OC0xLjQ4NDd2LTIuNDAxOWMwLS44MTY3LjY3MDM0LTEuNDg0NyAxLjQ4OTk4LTEuNDg0Ny44MTk2MyAwIDEuNDkwMDEuNjY4IDEuNDkwMDEgMS40ODQ3em01LjE3MzggMGMwIC44MTY3LS42NzAzIDEuNDg0Ny0xLjQ4OTkgMS40ODQ3LS44MTk3IDAtMS40OS0uNjY4My0xLjQ5LTEuNDg0N3YtMi40MDE5YzAtLjgxNjcuNjcwNi0xLjQ4NDcgMS40OS0xLjQ4NDcuODE5NiAwIDEuNDg5OS42NjggMS40ODk5IDEuNDg0N3oiIGZpbGw9InVybCgjYikiLz48L3N2Zz4K",e.supportedTransactionVersions=new Set(["legacy",0]),e._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.NotDetected,e._disconnected=function(){var t=e._wallet;t&&(t.off("disconnect",e._disconnected),t.off("accountChanged",e._accountChanged),e._wallet=null,e._publicKey=null,e.emit("error",new k),e.emit("disconnect"))},e._accountChanged=function(t){var n=e._publicKey;if(n){try{t=new o.PublicKey(t.toBytes())}catch(r){return void e.emit("error",new I(null===r||void 0===r?void 0:r.message,r))}n.equals(t)||(e._publicKey=t,e.emit("connect",t))}},e._connecting=!1,e._wallet=null,e._publicKey=null,e._readyState!==a.Unsupported&&(L()?(e._readyState=a.Loadable,e.emit("readyStateChange",e._readyState)):R((function(){var t,n,r;return!!(null!==(t=window.phantom)&&void 0!==t&&null!==(n=t.solana)&&void 0!==n&&n.isPhantom||null!==(r=window.solana)&&void 0!==r&&r.isPhantom)&&(e._readyState=a.Installed,e.emit("readyStateChange",e._readyState),!0)}))),e}return(0,h.Z)(n,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"readyState",get:function(){return this._readyState}},{key:"autoConnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.readyState!==a.Installed){e.next=3;break}return e.next=3,this.connect();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r,i,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this.readyState!==a.Loadable){e.next=8;break}return n=encodeURIComponent(window.location.href),r=encodeURIComponent(window.location.origin),window.location.href="https://phantom.app/ul/browse/".concat(n,"?ref=").concat(r),e.abrupt("return");case 8:if(this.readyState===a.Installed){e.next=10;break}throw new b;case 10:if(this._connecting=!0,(i=(null===(t=window.phantom)||void 0===t?void 0:t.solana)||window.solana).isConnected){e.next=21;break}return e.prev=13,e.next=16,i.connect();case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(13),new x(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 21:if(i.publicKey){e.next=23;break}throw new E;case 23:e.prev=23,s=new o.PublicKey(i.publicKey.toBytes()),e.next=30;break;case 27:throw e.prev=27,e.t1=e.catch(23),new I(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 30:i.on("disconnect",this._disconnected),i.on("accountChanged",this._accountChanged),this._wallet=i,this._publicKey=s,this.emit("connect",s),e.next=41;break;case 37:throw e.prev=37,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 41:return e.prev=41,this._connecting=!1,e.finish(41);case 44:case"end":return e.stop()}}),e,this,[[0,37,41,44],[13,18],[23,27]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=14;break}return t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,e.prev=6,e.next=9,t.disconnect();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 14:this.emit("disconnect");case 15:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,o,a,l,f,h,d=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{},e.prev=1,i=this._wallet){e.next=5;break}throw new S;case 5:if(e.prev=5,o=r.signers,a=(0,u.Z)(r,F),!z(t)){e.next=11;break}(null===o||void 0===o?void 0:o.length)&&t.sign(o),e.next=15;break;case 11:return e.next=13,this.prepareTransaction(t,n,a);case 13:t=e.sent,(null===o||void 0===o?void 0:o.length)&&(l=t).partialSign.apply(l,(0,s.Z)(o));case 15:return a.preflightCommitment=a.preflightCommitment||n.commitment,e.next=18,i.signAndSendTransaction(t,a);case 18:return f=e.sent,h=f.signature,e.abrupt("return",h);case 23:if(e.prev=23,e.t0=e.catch(5),!(e.t0 instanceof v)){e.next=27;break}throw e.t0;case 27:throw new T(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 28:e.next=34;break;case 30:throw e.prev=30,e.t1=e.catch(1),this.emit("error",e.t1),e.t1;case 34:case"end":return e.stop()}}),e,this,[[1,30],[5,23]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signTransaction(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signAllTransactions(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signMessage(t);case 7:return r=e.sent,i=r.signature,e.abrupt("return",i);case 12:throw e.prev=12,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 21:case"end":return e.stop()}}),e,this,[[0,17],[4,12]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(U),V=n(1413),K=["signers"],G="Glow",H=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if((0,f.Z)(this,n),(e=t.call(this)).name=G,e.url="https://glow.app",e.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAMAAABrrFhUAAAB4FBMVEUAAACjON6dNNyjONd7C+GIHNq1S+K9W+O3TeLAVOe6TuSJHtqcMdPBVeiuQt2kOdeRJc7AVeeyRd95COR9DeF7CuKWKtCaL9KoPdr78/789/7//f+zPt7u0Pi7ROG5SuK9TOT67/315PzVYfHAT+bx1Pry4PuiMNWmMdaqN9moM9fv2vqvOdvtzff15/ysN9mxO9yzRN/13/ysPdz46Py/SeTFVemPE+/EUOe5QeC3P+DJW+y9SOOfLtPZYvT46/2TGOu2R+GNEPKaI9/PXO7t1fjbZfWgLNfu0/jIV+rQX++ZKdCQIdSWIOGmN9iYJNvCVOjRVe/CTOaKE+eZKNSgKd2TIdnLV+yECfGfKdqKEO2dJ9ylL9iNHdr02/uHC/KjLdp+BfCcKdbKU+t7B+eUJs+dLNKTHeG+ROXUW/GLGeCFFd6PHN+JDfOuQd3JS+vNWu2EEeGOF+WiNtbOUe2BDOf02fuSGuWOFOuUJdPWXfGFDuvMT+yVHOWIF9vCSOiZJteACeyLHNV9C+N4A+x1A+mGGOPHUOmKHN2aLtKFEOWXHubarPLXju7CfevoxvffuPXQmu7QfuvnvfXJje3dnPHBauTOcOu4bfDjp/SqUOytStugNu6yXd6bKueVNOUmkAxzAAAAGXRSTlMAIxB+3D9C/WLfo2CcxcXf34TffL6cvc/vU7i1KQAAOkJJREFUeNrElMFuqlAQhivICpLehFofgb6ET1CjCwk7drZNwA0SFqYJ8Upq1Ke+/wwz9hwurtT2m5lT0933z+jDLRgMPN/3w3AEnoihkAt1l10PU3SHN+aP8EwEQeC6ru973sB5+GWgHY4gW5jk1LlNjSFruy13FLEz5KGP/p9X5Xg8jp8D1/cGDz+N44WjYd6cKRorAozBDgHUaIX1YV13lo8WdS5OgKfrrxwFDsL1fuogHH80bHrcG/MEUAbqv6PC37ROU3v/zI7mjYb/ofZd/TfUUeyVyQQ9Du5/C174tGxsEEFViX7znYEF++/0AlJF/MmbS+Dtb2C7QZmQvHA2R5uM3Ttm4ITDJWg6EVTwRwsNHwBaqQ0QgrpTEa28wQat9Bx/+5q77/Lo3ycD72nJWOpsL/4NTV4Q3evP2krrQ4rz7zCdog3gzxFg/Wg27/nqvxvyR5qyLCPUJIomUeDdT395tucAyL8p+EEAyt5MwOBwsN0TLmRgAn3lLG4e/yvswdmerctyIoUUwNi/i76eAA3Loxu8NKeWYr/fFwu8pyzPEUSW11mW1TX1IevY69/pFC36SSL2cbyJ2RyNR3kXe4H0eaShj8H7eLsrGOj2vxo8/AlTVeTN6ixPb1GcsgL6GUWAb0IGyJ8TYFbpCtghYEg9QYM2gVh4pbHtgS4fq9fF4wi6BIMb/fSJPRfbV7AXOILWXi8A+idM1gvrrwiSp1a2WpsY+hguiuCSP906tPkC+nFvcf1DtV8qpE+jQF5ZIAHaPqYvgwPkoU9vukosNlr4SPom6m/IR2hOAK8ym83KWWlx9ffAGen1f9tTG/IoNlcWSgbWFy8A/miTrVYM7AhIHk36SiTAEto96PfAuW79JP5Fj/IX/gafmIXtvpcS5TXNCupo3j2eD06ASKnnsNf1b7cxdWzxrlj2ZfTyEkWia9RMX+bxil+CEOpfNEszgcriE71g4P/J5sJ6sRbIXAIgPmhA8pEw8/m8fbYEJ2DKm/r29l+QgOhe5IpfAmf0j9SyaWkjisIwrS0I7bbgIn/AUDBlFm4Ds8hKs2lloouQILrLIiATGAQDycZf3ed85c4dTTX2Oefe+LF6znlndGv2eQKUh7XKNzQ8oE5BigD6mFvxlam7OTef6N+r99h4CrL1z3/P74JcX+xzTuVw5Xz0Mfj0ZauE/kblOQ9afDbKs5hzuKhnTQDXMgLg9kupezEPrqgLs7+SekojwFtKL3D/3F5xccBeL/+CuwWPwUcef8jyr/pBs25aeAT0LGX90A0A8nSoI8/+XZ71y6Fh/jTPuZun+Ef2Q7+vgjgDd2EfoJ//MYFvBB+4N5tbGv3Zeq++FFxzHPbPZbD7WjMQj74yZgIXF2NPQHoIuvrJHlrr79v+T+mckC/8KCfHB/pvFey3txv8Z7cz/BNNhok3DIB2edG3DNS1qtPBlbgbZTkuYwREwNefE/LJX+j3+5f95Fvo9uOmikspvZSjg17/4c8ERB//dgAqumoPICH6Qo2/URvy7gt/2z/rl97p34wFVZ5oz0ejOTUy/46+4f7hzSn0FPY9aEiUo4P9Af3ZZqbs078mAKlSAuItWC/VnwkYZm5XaZg+TT3d2ADUH338R7hLOaGf9m/OdIIfKTEMncDB/gTAJ8DlEah2NHQ3AKuV+HNgpfrBfRuxd0pB9DlywWQ+gVEbt4+nP20fzpL4Ty86wa89DMcHPv9BSkCFv16N1nU1NfsUACbg21/VMoM6oea4O2OpFAHcXf9m4owS2V8/9++r/dkplcw5r3N5+d4JfL0N/7DfaK1lCFWbaTWdTq+b9v6BCbB7j0A2gMd72OmXbD8Y0+g7XXt4GQBfPnVWnLnkgJO+WFiZPingTXny6b3//4S+uQdVNaua2D76Qpb/AHd62B4A9o++/6BkAoEFwNiz/zwA7i9Y9tW6p6dHFxBDcMjA2/8PfO74awJcn9PZPvqcYJXA3dj5Gzt3lw9CPgUgi0CuH/4uj77lfoB3gm8W3Rgwgbf+K/6xNdzfymH/0EiZfh4AXgDOkh4OaZnDMA2ADAS5fjlO+kFXHzJ/DUCkfzAoegPoLVoFi0WWAV6G39/8A5DvP6MKEKdoKrE6TwkAnYDKox+8OoCbMtt/sDcA/vYHe/cNlF5ONgM6ZnD0zxeA+cf+YdPVb/RMXybg/Bx/118Nawp9G8AL/449144/O/3JngCEvQ1AMH0aYw5N/er1aPvJX9rN5bWpIIzi+BYFFz7AqOSWLBTflSKloQsTEFcuBR+BVHBbQUEUpIviMjFtbSmllv6tnvkePTN37qRW6ZmZGxvr4nfmfN8MCQKfMTgxtQHk/Y/5dzl+uv/OzwR81QTgdcU1Go1evsR8SX6sV3Tg1bs0AYM7gzuYoG8KAOBBpAb4tpuehAXpu3ORBVPawLW0/DFzA4ZhQGoB8Q8SMB/wJQMSA2hlRAMCfFjkBz6m0TMB0JImAPjgN/wkAbr7c6CfJbvimwFYeHovMBWL4EzS/+gA2PEwftUyxnDYRwSUHvhvA7zQm4z+2SjI8GHASGT8YJcl9K/wIP8SDBB6237Meybtf1IAef1z88GukjciC84WDKidgGkBEN8cEANE/f686huGw2OAHuOZ4pMfCwEYRfjGj2kGhOeLpRdLA5HwswCCAdx/zATf4amPmHiPKSgVwZVaAJRcZ7b/y8vgDwnoiwVmgEzh9weebgCeFgDDpwVAlwX5/mMGiQGDgd0ATcr/2NsfJiWZ73bJTx/owKniCQA5PwbF64/zQ8M+ZA0Q8gpgAr5KBFgBln5Mp9ceIOjUm7CWVANRHADQewBmzYFI3Vvdbneh+wQO9Gr8qIKg4klwjfyEfx0eQ+M/CD/xYQCWByBYUGsBkDuA7dfhGWACVPQB9W9SfnNA+EGv4glICf3CAvAXYEAPSm1wBy6VOmC9/0F5BcAAzP6yBiDil6fBf/YAIAIrGGkPBD5FAzwARp8HgAbMzTXhgx0jqIfpiqrAe+HZUgdUC8guz1oHcFkCpAWYvAnOB3ywi4TYEwDt7Uy2xutrnU7rpqjVub+2Pt6YnKtyA1Sof0zgqwGYNID4EOBdPRggj5CENARNEbioXwA4PS3AyPlZA6p5SughwfcegCXa35mMO0Au6v7mxrm75GcFRB8CCL/guwGsfvK32712L8oAliYA4lGYBeADO0C6/8N8/xv52QSUHvtvCdgj+yHqbE6qmL92CfLyB37Cj/B3ia8WVJEJUyNwJnwFCDEAbP/N/OgBhQBYBr56DGTnx4j7UdQZb98dDOhAnACI/HEFOL2pCqtHWRdojMA14ce3PzwANQJ5/pmAsgHGji6I+O9P1m7+k9Ymv5t64F29A0BpACDlT9SrggniQ9wGahE4cfAdsNKzBZT4+4UA1LW/C/p/1+YEBtzLWsADVUMCJPqJqoopEHq/DpxMvgeCYACvQAJPlfe/HACM3a1C8o9SC7/LPSA5AS0BNXgoFEJV7wPpdfA0+P0b0OYPQModsJwAbv7/6eF2/FF48yWILSDBD8tf1AD2gUtxC9QEQJL/1YS/0P+oZv6dqfg3dOrjUHUmtY8CD/hn4wuw81NAp5gBMSBqg1eiAKyyA/AAsNtfKQAU8W83UxOb5DfiUbLgl1qg/HkPzM4AaLFytWVUtaPgFCvA+YGPscoEJOkfEr/IT/ycnha4iFx+jxYEAx6zBbAC8v1fxAgGtDGzCHgGLvEMcPE7cOC78v5XdIC1nyNhMgEyigngr6UWbHsPVEkFMACgjwxok32x5oCHAOcAz4Afwv/+g9KTf+iiAYfw763X6ZOf/En0JBHsDvxNar1KL4LpHUDwGQFhl4HpOUgicJ63IJXhvwZ/Af/wApi0GuC5u3zBYDRu2Ip+lT9Eam2kPZABqDfARagK0yKgFvBKGBw45S2ABqgF+ArsSPtPA/aeJ/SOxx+zzJPTX5O/zEL0qCoYUA8AJPz2jKvAE3BZ+U9GLcBEAwr4BQO2ai3PFP0pfsr7GTTTIL+U18IGSyA2oJscAAeawZIU0AA6oE3gjLcASPFX2QBKNwDyU779hjRNtMbtoBl8W15pURSC5kMw5a+wPAfsA0kXOMtbQJIAsH9X/iOcAFr9bHT/p/q/T1LQ+mkGzBZKYJGamUEGsCoXbwPeBa/mFQB8LOcf/k0BjDaiA+wYlKZg/EQc4D0wSwAF+pm4EUT3wQtJD/zCCgj4UHr9L+Sf8Vf84+DPU/BoxvlZAbUO+FTgRfInJsAjYFehT94DvqQJ8Bvw3wRgt8XtP07RgkfbWQ+o7/9TYcfS13oNQNflHij/ASY2wL4ErtV/Tk9NDP8Y6WmB6w9v5/7aZhWHccVLRUHw9kO80L6hBrUaFdu1IJIpFBWVjnlBNm84UFj7SyeSiSjiYMY1TROb1Rrb+a/6fO/n5OStlzmfc96TqKB8nvOc75t0fb/uugHCXxqwsgITlB8GLKQGyGeB2+kmcMX41QDAWw2o/wJEwzX+3/jjpgBdTwPgDjj9wgpdC4nKCNBt4D4yQB8C0gAI/od/9xNAfwq/gesWKkLQdwPK/cfmqwF+BiIDbsA9dBcUA74W0W8Bx03wHP8haNCX+CU/1LDl1pgRGRiGAWGBJUCO/0qRgNSAO+ibABug+MiAHgDAn9Pb4GufFviJAetJ8Ws0MCG8ykL8eMF0W+LdTchq4dJ8+V1Y+FV/4QDdBx9OA8APAcCANAEn7v/O6qCyO5/BhwfhREhcMldkoVVl/ya3q0ZxCGBAyY+L+c2BxbIKmAF3SgL8CEBUACQBmPJnwHUGrA9Wj1rOX6/woRRnRC4FFvoiKeGIWFANHp97wmuACehMD15e8bIYEVjIDKCvQ5spP+DVAZZwY62vf50jfAgU/H+rR8MHUUQk3pcpeey5ucfnm6gDVgLiLuDxx8KvZkFEIAy4UhoAAV62/1x5/EP08be1c/ry4VLKfxNW8PAJYbUhHmPVAzLC5wAUYHXA9z9LANAJfsUPwfSNEF+GcwPUAvsNKFx5BBw/7v8j/F7A0ahxSxVumCWtuWcff/wX+TxA/O5A3AMF/+zK4uLiAl2lAfRJ6Hbm31b+LAEYLDhQ//kPWzGBAwhBQ1Vh3ALlh2T0Ir4MLTT1MyGdgcCPMwB8SgBbIJpfCAfEgLskALkD51LVff6dMD/UPoIB72YhqGzcGk/25ujPx1/Ys/vhr/4T0eC3/OPiCNghyMvg3TCABH6W8tMw5fQhFH+Iq99Qfkv+aMnRQ5kL/40T7fHTT9OPRHb9dtiYyz8IMz+T8/678kMgn4XvKxMAJftPi+OHdpwfOgQ/6XD9nyWg+jf4o5f4h+PPzi833IHWgpVA49ftF3otA5KBLAH3sAHcAKLmBOh9cHVaI+eHmjv6sNQfg8bfS0BF17+pGvizUv4Twpde6jcgc+C3tARqAII+IpA6IF8GHrqyLQG4RgZcKwwA+rnVkn9g/KIxJ+Aq5h+jEjB/X2H6q6sqnJo2ibQ/x78wSgn4pQFFBnbjBKQF0Oj51TKQnIE71AAE4Bqkz0GeS7U6S0eV8psm9tTwVbMAqipQJJxVAR//sFT5T/aP6bdm5bfl5lFwzAIpA8oPxR3wrPJHAEoD9FPANrUB0Mdf/9qAVsJfEefQ+cmCwbpsoe8l1KgdVb7/9jqVpHb/+BV/au7p568rv2fgkyIB2H58CMglBsQZeOC2R7a3v6bhDQC+pcc/DZ7GDI2dvzIdMj+m6HCdmTENqWI1Sn76R+EVzdw8qTLjr754RQzgBMwbfzhwPSkBtv8YZ/MUBD8bcC++DcMBiA3Qh4Czp0ASnaYJHQl/YOGltcMlIDQZVaVKfD/qNf+sIu0fywPEkYB+o3TgQAJg9DQXCZ9nmQAzYBuKBMgRwLAEkPhXYMsDQPgdQ+sMQB/axPjjcFjNNCETg2besOL90vgrbx9iCThopEoOARng4v3HsqYGlA7AgIe3SVkCsodAcGHRAOA6LQdA8t9JHGh1we0maC8l8uCmtDQ6juZB4IfIgOfyEumHIBKAIfSsxVBUwdSAa6IIAMZlOMD0wh9//l15AXB1MAaCHxG4aQ+G4+Op/jF6BAZWHXMHGqeSACySBSaEYHFN+HMD7mcDwgHgk/ghQMxVnr77GPCg7/wdF3nQ+i7n36Srt0nXZPyPTVgfHbzCjbSCP4rgEqHzCcnLwJ4bcJYdCBVVoM4APgTpU5CrMiIBkzgAUxok+GDH2sPa6232oC8ng/56x+NCk18wptUajo5/zvvnZQY8NeDsRQbiEPwaCWDsMGCtPANhwJUsAcYfFjA6Llar4De1uoGP2SP+ngzVxmQwHu4JepCHBet7o8HxV9FFL+2gZPzQvvB7qQwH3vA/EWD4OABra2vGv5hEAAZYR1Cit88BKb/8Dnzo0G4AnVKDogTABKX/HtfHNKA/fj8eDMaj/lA1Go3Gg4Pjr37+hhT4ZgDRYxr/XFXIHdjVBOQG0H1gdgQehAHKzxZwAtAR4TKG7b+hFwGojcDFi3QEeoSf6PuP2QLT24UMXy3w+Pv+awnsn2DAshhAnwCNXSZCMIOfDLBOmJQAa4AC/EhAxn/o/O1Ou8LAmzbT03oI9ovE30PrPNl6WuWd49fzg90TMLsCQr9Xs+QRKBIAer0TrpU3QjJAdJWWd6+GBSKCvlwGoGLkSoa+wJGh8GNhD1gRAOd/GwMz7aaZN1HEDE3tPwegPgPLOf8aLxBlwBQ1gBNwRR24ui3faC/RCAMu1wQAvApu/LBkQvS9q9h/zICP/e+FBbVNJIHPY2b+6R5Y60BEIHZfBimNwDxLDJBWoIQfjcDCAFYZAMaFBRBeXCPuGMcuyBL0zi5DE1AG4BvwJyr4B3zjqD8Eb2QBcC3yIppRBNmAbWXHoFczoAxARfD5YFXt1jvcMi/1gLUlAQhFAj7AAH/gSw/N8vzrs7P79B/CVBPKCPxKd0HbfSxYhd8DYA5EDUAb3DwCl1j+FLhpzwNQNw63ROQDzd4WsW9R+Le8i2YeAOCHyu0Peub/ndmxYC0MKCKwFlqUmUcABoBd+DEUXgZagAh86Ogv+dtDghcLMHHBAtHHNQFI+YV+6vNPdA+iHwbucgBUFc8iAil/fgoEPz0Dt20CHxc74Am4JNJH4N2GvhiAA1DvwA3BReM4lXXQpGGNdL9R/g+ijfJ7mNQ6EtPw38puf/rY4HrHpZ+k4zSoAb/FCWAFf/HTcTJAxQmwCHAbGEt/xKAVARCV/O3B1iXtm8aDuUWgtz66eAd4lrDTOqODquHHc7NzgR8hYCOiDDbOiAPBHg6o0gSorl2UBOgRgLgPSvTC8BIIzELE7mfgyxB7AAEdF1ags6SJLhblx+4zPhbb/ah+SeeIUadUJS5EBH6RBET+g39NzsDMBFgAQI+pNSBNwBAGcABO1A3tmCZT36cNVGX7pYsqVuw87T6GKGue7Pj22CyfgOXCAjsHEoEn9QyclIAFws8NoI9wYFd8PgTY+HgQ/sgrwIkaaLswdwGDuscx/Abv/gZetI3qD8Q+pS8Kfn9car5zkjwCp+pPwJmpM2AGXNzkLsCMbl2gTuc6tACcrCHgIfZAV+Br21S84JXpOQCEX9KXN3/rm/YLth+jTnYjuA7+mRYY/mKSABPzwwFeoK4UAH8I/vSeBeBkLd0g5ugXt4GZigygBrLcQRfCEvQqo4/tBzxpn+CX/zICT+oRKFR+I8wNIHShNwNCN+gERADqNbFOYRs09B2odUA/hNA41fQ5FLufGhB9k5YhOIBFFYaUZ6CsARhn3ADmLwzASPvA8QOgch/ACZAANNsna8z7XvQM8wQAO/idniX4UIb/jPVMeP5gWdShJSwIWRncXVH8+gjUJwBL1yXwmN1+BKDZbLoNpR3DIM+lm7+B6dvPw/QK0ef4WdeMZ0cM7+Io8BQrIgL7HoAyA6xIgP9PQDQBOb/gd2m2ogQ2obbMWboB/lLaM9Kap85QRp+dfusatW/obYxUHgM1oJEa8NOpIgJRBMwALYKSgK5Z8F0XDSCIf6c7kXsA6Bkdrzwg+2v7G83JLAMYH9d5mucz8NdJSm+KtnFp07A2sDEz+igLePEIvJwYcIouT8BaGPBqHIHvv/cEcACC/zSaP5AHh3YCmq62v9FVPRioAdErbQML6FneNvPzaBj3OVuAMdU3L7afdUAGGH+YkBYGM+B68Bt+fQLAbwZsSRvkpA0i8PFmpztMDGjxJYo3bfOgnwbg/eiWF/xZx7hQ0TVPy9+zqnHbIqBrqU5SBDj+GKd4YBJ+/oXwVTaA6MEvBmCgD3TCT+pGCWDUFkYTSzN945HYMwNAThbU8efw2e7nj4pbw4hhWxyIWQiHgA1YFgNAjxIARQL0ThgJQP2LAACfZAFwdW9wCaAAKG2bkf1Nlof3s0Zx3CMt2gWGMv5i+5P8m/baoghBfQTezIpgODD9o+HbLAAia4E/ZUCXamBWAmACLfEGw4LRnBC/4bPOswPWLC3k/KqsZ3RC/wIvhg9ZNaw1YPes4WsEwoLFMzgBJE1AHgHgk7L9RzUcSwngAADWlnhDabAwDBhfQ+AKenlFuyzf/Y+KpqnJ8beuYXOC7/zt2QZUXgVB/9MFOgai9PtA1ACgO34YAH2XaagnQHMur0quPkQ0xnoEYv9d2fZ/hvGRbD8cyPsFPa8GRL8U3ARSGXvpgFZBLv8/Af+C8mMm9wFLgP0/0KIGCH83d2A9NcAy0G61gj0OQrMv/FCQJx5oqzjGJ2UtI/OekYGPazfD57W+CCxLAuQEYLK8CCxEDQD7j/z/gepFDehSAMKALzHTEtDiBRJm5EFccO2l6T+fROAzDFpMH5mYvrz7RQBIfYMPE06ognoXvIBTAAOsDJgFkQDQs3oegUv6Ew2z4B28Wg0U7ta0mjKhFg8+Alz04AIug5c3oeAvm0VBwu7aF+bEAMzaIvAyGwD8C6gDloDAx7QEkAW9qIGQFoF3MCBaJlwDEQADTlV68ZLy57LNLwPwjPLnx3/agCfkkza4m/CB8We5oAbsEi1t/wWWOHBGIpAmwALQI36rAdEF/Ttc8OLQSkAddf76uycA+x/4uGp3vwyApd/VbsZXEFyqMgKZAT8RPE0xgEKgRSASoAbo7osB0Qedf7A1Lgw4UQfgB75l4LzhY6mPv/PXBOBPys7tJ64qjOJVY+o16otaK6WFTlERtQwYLV7SWJSi9mKaEqMSY2PFxAhJDYmmCY0vjQmUFgpIGv9X13fba1/mUF3nMjNeHtZvr+/bew4zZ05n7zfUPpJgAHBUTQAA9g2A2g//ECNQ9AD84Q4BoH+zT607gHLYubcAvhGx/X19YPm/kRNQ++XNchTAYZgPBraLvBJaANspAAUA+oc8Af4roLD/Hey3AJCAu+yBjHq37lysekBjH3t9u9Dy6ke4p3Z98CF95hSsIPIIGIBNser+CeC9S7EWZBOEDIAiwDXsFsCXm0fZA0dqBu3L+/5zCSkAHf0/3BfrX+w2AxLAqwagfvuN3aVdseyCPQJQBK5LeRMggLAfBVADmCWAjhZY1MM9vfIBVfa7OyAXQGo/BO/Y7bSlrtkICAMTgxAoAUx5CwgxA5dsKsxXghoAQ2B/zviy0qkAMO6m47GVA2j8d9qvbhfIBhjD/6oR2PJBj4dWU+CA08cG4PZtBMAInM8jcMmaABPACoD8V4CqAPx0AgB8EhhX/wcjWJcSeLh/I9B2ALNf3Tb8nY1klEGILBBJmgePZAF4FwhwSgAMgQGIFui/gxkFcLFsgkcdQG573DcRwRiA2v/XrX+6L94BVDeLo38DwPQz/ykAdo6FwG0oCJzHFgnQErAm4CVAAvUc+AkBaAnQN7aSBB7IYN1KwGe/cv3TUf8QO6DK218OYBI7VtqtyIEA3rtd9QACYA0gARAB6CSAv+PE7+Bgkxc/YSXcJIAswreDCADyxj/sU+0CMJTyT/sh4SAAaJePVAmAywCM/3lNACcCJiD3f/UX7QDZj+B4EpAAWQeN0HWbfr4MAHrhQ+wPaAAIvqu2b3eNHwgABCwEB4oJYAWgBbAJQHFJgAAgAIB9yAPwSYw/fhjNALxVuBwPGhx6fSQAqBn/jgCw/ov7hVKeAEyzxiFYtBHwpSAAsAMsnIfePZ+KQNyzBByBfHIBCWAAZPcewJWwe20fWAcG4GtV2f6prvzTfwtA7E8yBrKJ+LwBcNsBuOqJkADcPpTG3xKAXQGcUAAjZpGO/RgnCW+Ct3j1uwHQ+m8ngMEAJjH+CiEYpCBMYVMSUEyDt6Hcv7QC1oBfGQUAlSZAFQFQAgmALITYAzzu6jpynyOxEuj2X8e/vQRG+9TWJCKgG62ThR1AEQmYUvtOQErAqiAmQlUA+O7PlIAvr8YvAToDfUkAYrgoBI5/Vg73fgj7GYAu+yUA+m8BjFgGJsM2/WevIwGT6Y3AwoIQWDD/DqA7ARfhHs4pDcSmLYQ8ADb8yXdwYCDu4zcTTZ3pZ/7pvqMBMgGSgawR1idsLIFeJADOPQIkwIVA3QMuQjQvIdBF4d1YCI0PlFKxklDdAQBXd/dvABT+W+1OZjVg403/bAUBYCI6wAISgF3l/knAAXzBACQCFAisE0AHAT9qAB3L/3r9f/AEcEbPhydDWQ8clIApBbBtABauLUBKwWUEmADYVwCeAGw1AawM70cJjB8gMvgnADSrX9rv/hsA1PiHjk+SgJ1om3tKwH4AUPO0XyyFDIB8aNsB+Md46h/Du3iHCXiICOAz/dtf4/+Njvybe78CMFCTpQrjLAdbCuOiqANwkQEAMAIOQBPgAZAdrulf9Pf/A/BAAUDff1b6by+A0j8vgZQ/GwRZCibC+Sk7Ff75xAFsGQAYN7EPFguBQ2JfE/AFe4CcywT0/x8A/9yLMChXfy0Be/9XNEDaD9nL7SoAZRTSamDqhALYM//UiiNgDRgAIyD+2QPgWa1/YwHAyS+K/jcAQwDQ2Dfntf0k1n81+kSwU/g/hd02YpAtAGgASGBGM0ACJ50AAMSXtwyAC97FNwCYTuHd0H8GsH4FAExE0LZ/Eujof/QPGASQE4CMgrrXScAATBYAVlZWFlayubBNgAKIDHyDDQhkj5LAPJgAzGIL8SmFhSABcPrj5f9m+neJ/ToAlK2EOO7MgO9WAX5ZfKL2D5UALnkCYN0Q6KeXmQB7MBgxDWAtHI5BgU8rGHcSgG8/o30TAYgq+1Az/ARwuAnAIs6LiiBqIS0D9mMdCPtQICCAVAL86pKNPzzrZntoNwDAprknB4ehe8yC6ccim+7XPfxtB3zffj3MAQxn7rFxl5eL+jDCSSBLQALANhgAmICrmoCLkQEyMApfcxowl7O+EQifPUgVQP/Mf+X/7e7xf18kZ0cwAY9BgBDUvQeAPXAlJgECUARG4JITAACzbwREt2j+Gyh9tvWUTwNhk5sT4bOJK1ECY5qAdvLDHwAPan+8YbwpUrCPuOf2Pfl8IAB9M0z/LIK6DQKAILiqBYAIQBeVgQkUzP8tdkFGnb6LBKwTAET7B+XflLm38FNCYMesLqpVL/5F1gF29kADEPYZAb84RgAYf5N/iUPk/kkA/0y64MAEBASe7l+hf89+2/1oH2rLP90pNSewt7iItEvgZefQZ/UQPXAD9nMA56ILtAlIkgiYxDalAK72y2kg3OuZu/dAyD/8WF/9MP9R/V0XwCL/xyCc5VESMLy4CN8CYbFYCSAU8Sp64N5NAqCsDbIJEMBVScCtIPDND5n/H6QAQOCEdUF3HxD4klkYg/8PLQBV/Pl7ad3tjw0Q1pMsA5uIgMVeQHj64yQNIiYBtgAZfQgR4ExQJuDHmAR/D/8/AMDXsI5DdQsqm8BsBoGjP4vn0N0rP1zvAJB//rWq/9q/D3yJYGdRA6BFQAQ4DAqqw9eB2zdvOgDaZxvkRIhZIH2DXwBcDQBqHwDkQ+14eatqAux4DkMeoyruXZHvPjT+Ofqmjukv818A0G6wtQi5ddusF0QJsAUIgN8WFi7D/+VzJgVAAiyBHxUAhC+xiX3oa0oIQLdujflKQEfa7OLsDyZ7+s91AOB3Pvlzye34w34NoMh/HYFhA5AlINci3wuvSAAuw6xavywQuBpSRQ2kBEBXDEBFwPxDm/F+aLZS9Q/GrqMC1H85/cvsb+IHAAavf2m/JiBNQCGkEOQCAJsEewjAb7/BrJnvigAB/GgA4B87ARQJuJJqYPZArV/h9/7Ki99F+Lv6P/PfyJoACGBzAhoFChVgV4MUwOWFc3kCCCDvglYC9vVtVdgnANMVqwFrAgdplwD40Q8r/3b51z3/txIoux4AJyDmmQMCmJcOIC0gEsAIdCQgKoAEKgTy71gDB+nBdQAI/wMXPzg6/LP+g8AHVQSG1HwhEoirQRPWAi+7dSCYd//QIABMQADABU07cF1HauCK6B/OA93avp4BUO+Mfzn8fPvf+C9/MosEpAag8aIERJYDzgEggArA6HsC5ueFQQ3gkpeABYA1AMG3CQwSgbETnAc6db8JAPx31L/5J4D2F7Owf6B7ENhdXI0aoGI6iFXQ8s2b6AAWgJ9//lnME4AsB2dAIAHgFEAAMvCZtAag+1kbHJqNkz1hBbADMP3038a/+c28LAAiQ+A6OYQA6E6ldsBV0E34dwDnfsY+D5UJIACMf7QABqCS18CDsg3SOp9uf84AtG/9Wf2dy1/aJwArgyX9RzuWgGBAZS0QBcAEmOa1CLgaJIDnpQIaAESQA0AblIsCCmBIdhxVCHZRAc0X/zn3t/5pnwBY/5SHYGlvFd5Xx3GulFpgb1n9MwHz2ByASv5UEE3gSQCA8hJoAwAedRuEX9mwk4OeL6QAcPFL/53tn+Xf/lwOtXRsaenY0CrMrzYBKFrgbxEAAHCxCvQieQ0ACFoAlMZCIxAXxmAWMgi26b6OALADDux+NN+Mfwtg2o5pOS19sCQENlYXJQBCYRxHHYC2BcpG/wAww2mAAH7EDVxMrICKwHX8S74jUvtGQU/2uGsdkA2g6f2mgf4ZfwKgLANLSydXxb0icK0yAEckADmAeSAY/Xl+dHQeGEAgpoEZAuDd+zgJmMZ0U5l/SC4NTr1lAKA5bFAg2GYHzH4pPgfQ7d9U268QLEF3hYDEQM84VGkOFP/RAuAeCEZFFoEVAgABA0D7SuB6IkBhVJ3A53xDEO5xThzuMwCsfyn+7sVPs/4hgHBPLQEB2qAZt14gT4sAWAVAmP7UPgDMWwAsAjPoAYMAMAFyPSdCQAKobgD4/FTeBeYm5Mws9BmA8meyu6/9Mv7Y2vy3CDQClKcgOgADwP4HBCKLwLmVmRn41xKAagDXr4v9H+ifGbgO4T+qIgACc1b+eHaP/r0B9Duq//jx3b29rQ3X1tbe7u7Jevw7tLS0tVqrXAWrfxDwBojxH5UT2yAQeAIA4CUCAIG4i4td0cIhAocPIQGACMhaYMojMJtvCADv/RwNsF+O/tnDexs769tzcz3ss3Ozs71eb67nmri7v7G1d9KHv5vAV0MNgHoKgHTw//jj5z/EvkkJlACePfQiAcBeBkCMi+xRCWgE/knLQe99OGy/92EA8G//FZd9Tx/eugfnFKzDf6vt/Y29k5n/r3yjNjoDsMUASP/D4dZ187dE8L+gNfBuDYD+FQAFACIAgPCJMSwHIwLY49QvCiCb/mB+Y108z85RcC8HznKarSns7M1U3gPBUh0BaYHWAbeXAcD9ewJGM/lEcE67gDVBAjAFgBh9NaQA2AX6fFPIVQB0j/6L/nd4C+aH5nDImbI60ANnIWHexzMI9jsB78ntIBSHI9gYGICjR+ZTAMy9A/jDMyAR0HkA8hpoAfBWPpWI4D5XQ2HfA8AGEPYPb2yrb84Vg4UE0D61ub/1VRIQrE1Pr2F7b2i1h83EKXBf/AcAcc8AsAewBgzAM4MT4IIfJMDkAIBgln3QNJsFIC0AZOw3hyhNQKeQAOy0nzHYyxHkXaBXd8AiAAEAR0wDo04AALwHPAUA3QF4DTsJMAP6tnhqBATEu6tv/tP4n76zTt+y6Qs9wEF3ymqgS5sbM04AhbAm29pmr0f/fBvMDugRGC2lBGYgJAD+HQAJ0L8BoMoQ3GMRRATuZP4BYHhjk0tlWlcNToBs3WIMtAzW9no9+JejLgB2gI/U8kfYmAFNgAFgAtoCaP2/FgCMgRSBL4dMd/u5/8M++LZYnMAc4SMvmxKoO0Iv2mGrcY/BltmXA7rbE/vw3xQAhNH34Q8IKkUQACwCLxx6rADQjP8b2AZk4AFmgqIN7Ga3voV996fmITzB5gFozBMC9v+AQLWwqgQ4A9QFAOno0zwToDpfAWAHoH1jADkDpuC+LYcmT42rn/X0ZwCzPzE0MTE3IeM/FAlQFHje0Q57B9dAi2CjVyyBdqIAIPP/EQBg8HE4BJ8Iw78n4Onk/y8HkI9/CEFgBlRlG+hH/mHf/NuwT5hvP+P1rGxFAyyrgHXQhSAAXNssGsAyAfj4W/0rAPq3ElhRAJcA4IkcQBMAOKI0AmRwIbUBZOCON4Bhs2+b7ZZ+tS4IojOoPAqMAHUgguXltbXltT3xHw1gYbnugBp/kXIoegCnAQB4XAG0/nlVX8o6EMSyEEIbCALb9n/079O+JgCGgwIeZnFoEeCZcTAKZp8xEM2lbYD2Z0AACHbYAOfNPwNgBFQMQERgRmQA8IuT1RTY3tFMKbiiDwiDf45GI3yg/8edTfiESWfAk21zeCHuxbofegox/Q+Pwsay6NpQrAD22gIQ53pAZQKg6AHvAsAjBuAvCwCcVffzAwA7vBUIAYdw3wiM3Jf/48G62mUGsFebw4nh50YRgQWguw6EwF40wOXlpgN+hD2pXg3PpB7wCACwA0QA2m+0GYiog9A9JTBhw+9Df5D/WS8FeXAIOLI2kFrhw7V/DgT24Z8NkAGAfScw+qluXAxFBM5bCTx66FB0AAIob2lH4ZUAyBisg8DsAxl+eJMAQAGAIEjATt4WsUwwAL6r/VxD2LpgrC4O7YFATyeAfAnkAXD/nz4sAfjl6efVP0qAARCTvKOHHZoCy4ApCNwZe+3OOBZEUuO5e7LgFv9SW4IslHxlyNWwusauh51b+QIIyZ8/cXQbHGL86d/cf4qdTcACQAD469hhBUD/TQN4G7uLCAKAzAnj98b66/q+CBkwhVUcAaKgwDYJ/xMegCHPPk5BQFh0MPAF0OL88sYkht8bAN8FswF4GTADBiBWgs8CwIuSgDoAF/hnvVJMgan/2oNTRz5GJ5QMBAKPerite0L+JNogACgFaM4QYPNz63/SF0AnNpZXNP91AXgEIgHsAZn/GQfwDOyLCKD5Rnsfx5v9Nx1AMHAMm9oJfUU0MUiKoc5BahMiWw9g/MM23aeaoLJLIJPivl4BRP1bDbgGJ+ApAHjMAOQVcKFw3+/DPvwrAgj+k4TVuhPA+4JeTYBloQeHPxBwGvAnZp/55+7SN4Dx5cibzD9nAI4/xCbAJsgEvAAAT5ctEPYvXKhuakf12QsoJfAxCIw7gQ4KEgI9kwMB6FP4rHoAdxzuf4T+1T6U/EM+/h0AoCwBTwDA46kCxkiAf9fq93lbU1EiIIj881/3lMAUvrTERtApLpZqyehDDEC9M/42/6t7jn8RAHOvJ9GgaVAWggDwCAFAN8bMfwqAePfd1Q8ElN1sDgQYgg6xIKAKQk8OH+0O+/SP26aGfwLIGgBkCEaRAUlAaoPwr8KXBrAQ1HmQADwAr1+wHoDh7wsBV98gvF0ikGXC7sgrbAQMQZc4TRICJV47hz/8H9li/MM/J0DzzgQwAkUCsAyAXkpzwI0bYzcUQPhPACimoNDwSDQChGBubuI/qiVA89Uew/+xtf9RWC/8Q3kDZAKcQMcyAHrG/EM3UAL0/7oCoP1Xcwb9AgEycdpuOfifQ8CVUgXAoEQK2uG39neO7lXW/4IAAwDVACDxLwSeUgBPGwD6B4BIAOwXt7QqYoB/r977ViobJ17xXkgEne5dRFCItln9kxz+Izs+9ysA5p/+KSTAFoOpBUCcBESPA0D4v3Ej9w8ZANinLAtWCYDAzz9YGWgIJlcflgJeLxgsdU77HH6Jf9b96wUQ/ZcJ4CwQ7wRsEoAeZQLgvwTA73O3CMCm1s5RD8EIPrrYe3gh2DujLgA+J9C+3yz0Zlv+HH8CSHXQtIB4M/juo4dUzzMBJQBIC6BVtIRwjif64riEIBCsdiLg+6LODEz0aF/Tj7WPDv8e3/wX/jkD0L7tQDA4AeiB3gXZA9S/SyqbAajFnqhh0CfQzgmpgxNThmCcDLpAdKqnMvueflQ/F38Hjz81ygAUk6D2wOiCat9LAHL/TuDVbhUTpJ2P4/MDCQFjcPCaqB1/iOGP9E+M3hTV/q3+sdF+XQFcCfN6kLSAaAK6ChAGuX8I7gv/ZwZBwFbd/rVGAAZD/y8D7r6w38OFwNY/pP47AuAI0iTAOUDWga4X473wjQrAoI+0d3EwCHbecgSYEYzBuNTzAf2gY/BpH5e+9VJw65/V32m/bYKoAGkBoccsAfks2DcCdQCwq/AwgACzQASIgc4JqwhCXQ3F2yJ96BXuZeL30Yd9UVf+OxoAFwJ5ACIBL4R/rAQ8AFAEIAHgLR2S3vfHzqZABGRgEExptDkJ0rslfyT/0Zwhs88CoP9y/EeTCKCzB6ICQi/pm+G2BACAovX3/c4Gorocompw3poAApsVjYFBSBgoeod5uLfoq32v/RoA819eAoFz3UzpzUC9DJRFwJNqnTUwFj0AcgD1dzrju/xJXUGIyjl5V2MABg4BFBSDgaAWoUmId8Y195j49veWkzgDlv1fpGlX/yKF4BNBcTGAq4AnMgCPpiag9rH1X/cA/EoC4fwYDiIIKaMWxta2/14/GACCUQCHWiMq+6kg/obw0N41Mb6Ggx2ge/4f1RM3fc0CYAs8f0krgHqxnAUusAQq/3Rv32tXBl2N8YwyOYlSUAaA4BQcBMWfSUrm4X4H7s15HoBknzMA4x8MrAxsHTRKAvU7QbbBKgEO4NVIwGlYeT99pUFPOGyHoi2KX86TbJvDW6gFhwAKygEkku30o7FmHu6PbG9cW7PBl4d2BoB7VVn/Mf66Q6j/rgDYKogRiGkgawF4058K4PTpVACNLAZymP8ztZTP7samQRAOLlhW2+HcRn5qe2dmbc3th+Lyf9kAIdqPAOR1UAJw/1wE5BEggJgFISQgAHgABgOA2AzkqP0bvuG9nc1xWASIVkfN+9btNZfaX+uYANv6H/UDmz31BAz6qyBbICPgABgBUdh/9fSZM6cVQJcMQRRDq2zy2MUnxu9uTqyOHDmqOjI1NbS5vbOxNbO0tLaG3aXu6V8BVAEY5QogtpgCcOqqgBnOgXkE6N8yEAkwCPxWd5fMXetcdtZPDnGpFc2HmP92BqB/dcwm4C8+yqbAUQaAHaCIwFhFIEsAAnD6YQDS/NAMPHY5+fnYmaX3sZXu12xbSwS0+xX51w7QOf6Q9/7Bw99cDGz1CPxn82DfaiBmAahugh/IaXhwDBwDB9/+6RJ23+AaEUjuVeHfnVf5p//mCmAQ4AJAX5d/EWMAuAYo9Jh3QVXZBdEDAOAs/Wdf7tSzZ8BEwyaOP3zL0Z0A+s8SMNA/lwCcAXyvA8DxtwDwbVCpR58TAFwK9Z1AGYGzdG9nEf+Bq1gu6iv3zvF3BAwACbD7037rn1MACRQtwOy31wLZAes+2DQBSLqg+T8r9ulf86/usctWSQccUsNnjtG9RP8Y7ScItK8EOPzWAJJ9NsBR+rfUKwH3zjVw9akAdsBGz3ApxBqIAIDAaU2Al746H/5gePgDVw1hCf0uhh0vfGua/xrd19N/W//4LrT45x9BiUDEK+H2T8I/AYh/FkBbBDealYC6x24IIJh3Bm4dDMDBGTQQuHX5h6ax5/4h3Boe9pv+d84DYO3N/uSBs8545UXArABoXwLw5KOHOvVIXgNsAgHgrEi8GwMxHgoCpBBn9WxP3L4hYOPHN0AQgOks/V8pghj/azH8Nv7zVgFOADIAFM2XCwDOAN16LACwC8osQAAQnGMXJdfHSaBJgvrFA31XCdDvgDAAX4n929jUv98U7vLlFf82+LwkYBT+1X6a97KCkIMfEM8nQGwsgK424ASgvAaQAQUgXfCsRiAYwDn8Hz+OAximiQAHfIvUvj8WUuc4sLnM/W0WgN8STMcf0gTo+AcB2iaK0RD9138LOLANtF2APUC64FlxDgZmH7ax47BzLSkF2MfRaBoyBmF/TbL/3m3VtaQFIRD2kYBRBCAEAhECq4IMwDz2wv9BDYBtQAi4f9YAS4BtQCnoNGAR8BywKzAK0JId2vH4tVBjoOYh/7XoZRJQ97wlmBYAirr4MlAqAP9ILPZEoB7/J9kAugm8DACpBIiADLIeYC7NOxkcnwYGmCxugkEO04V93XX0Re6e/oXAyoLZRwSg5I8UfOCr3teO/2H6P0BPpwio+f6vv/pKiCEYzsQEZDJz8MqTGaf/TF/F8GsAVOV9oc9FA4BgrBJ983nr/zwvAvwvAkxAMRNk9mUHgW6pZ2NCtfbRAGGfHYD+IQUwLxVg5rDTcoWBX5Mtxp/+H6rHog1eIIHTTQaIQDPQyQD1EF7xorFvAHzscdB/DWAeAEZBwPtbGwX6Z/t3vcsV4H8jwC4A+0bg1wzA8Fmal/NxmQs7ExAg6D//Vvx708i+IIAMAX8fp0oAlAY4eaVvumf8PQD0/38IeBfQUxYBIggI0PFh+m01zYciBCenxbnsMK8A6J8JYASgPAE5DrpX87V95P9/6d/izp+1kRiI4l4vKOvFdvBVKY642ebKI7AEXLm0K5HmvkUI3PeHe9LM5K2klTnsmPz0x06KwHt6M1pIsd3TXysCMcEiAGZqANCDEogOW/z8PHuoH4bh7W2I8g15S7ae/8nkw4CPsxgQjjdLwJlDofyT6H+o6q8/D0xrAPz+WY1AbIMX9A/6CcnxR3wMyuswFQ/5StAPRL95AF1ngxlg7LX0Vb4ZYPf/NQ78kgjIZYgAvGMkjfAZg8CDug8DAj9ggw1T9HXgYgDW+DoKagCYWBCwJAS93Hn0qfzxSv1guQ4ZeDFgASPAEJTkwmWXGUkcCPKB7qMhAQhFAKgfU1C91B2X2EP5Wv79cnEd7acD75oBjMQE1sB/ZMAMqCbA4/iVUwTypQ+YB2gEMgC/qnZA9dTP9ndVGaANGNGCIgVVihgwBKUJwHtsdIAWiAMHyJeN0ifYr6byR3Bl/FkGvAmyDBwnPGfSGYecIawCy4CHAZ4OKAcxAaI+dKAUDvHYOQ6UzssP7JaL23CP9i8CZoBlYKTdkPL3WQXEmTng4xbVez96YAaEhYP8ozkQYepDmOSMlYU//pmVW9xOiypgBhILjvSAHTE3oWTI8TEE0I8ZGDFpAQi3GU2ow9r3PP6badZsBOIA9BtHsq9QGoBRWGA5MCwFYUghIAtiwrwRvPdOIn/TUMPNdfCShQBjzoNYCHlH0L3qgRf5r/pdsVaAKTmAOig0+Vgfc+oPo+A3bvGVdFv2gawOaEJZD7waZcMigwxM4NkRzQEM2mClcNKQJ4mPG+Rjp/yvxq1pgVC3YC/7bDVgowWYZoHXGfGAPmAG+OJUOeyTjpB6KOdrdUfIvwdN91hJAT3IfYDoI2MwfzlMrwa64DPGBFEr/YHSgfcbtL670bTbLAVhJNAEpqFoCLXeCNKCyCy4jA/q3eLONG6tJogBrISUoidgS/uCUvGAPmQ2YIRNpxjjw+dq1/Hs78vStf32iZUwfUC84MM+8YF1gZXfD9hYEIqv8rDpO3d/8WUWOviwfRITFH677ENigzBTEjqJxySrVd/vOtcsvpll41zXtW3b9zAE/FAgXGb+4CgWpGmQNfPYuFI2oAe73a7rnGu+RPc/7NDmX/6EDAkAAAAASUVORK5CYII=",e.supportedTransactionVersions=null,e._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.NotDetected,e._disconnected=function(){var t=e._wallet;t&&(t.off("disconnect",e._disconnected),e._wallet=null,e._publicKey=null,e.emit("error",new k),e.emit("disconnect"))},e._connecting=!1,e._wallet=null,e._publicKey=null,e._network=r.network||null,e._readyState!==a.Unsupported){var i=function t(n){"object"===typeof n.data&&n.data.__glow_loaded&&(e._readyState!==a.Installed&&(e._readyState=a.Installed,e.emit("readyStateChange",e._readyState)),window.removeEventListener("message",t))};window.addEventListener("message",i),R((function(){var t;return!(null===(t=window.glowSolana)||void 0===t||!t.isGlow)&&(window.removeEventListener("message",i),e._readyState!==a.Installed&&(e._readyState=a.Installed,e.emit("readyStateChange",e._readyState)),!0)}))}return e}return(0,h.Z)(n,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"connected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isConnected)}},{key:"readyState",get:function(){return this._readyState}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Installed){e.next=5;break}throw new b;case 5:return this._connecting=!0,t=window.glowSolana,e.prev=7,e.next=10,t.connect();case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(7),new x(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:if(t.publicKey){e.next=17;break}throw new E;case 17:e.prev=17,n=new o.PublicKey(t.publicKey.toBytes()),e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(17),new I(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 24:t.on("disconnect",this._disconnected),this._wallet=t,this._publicKey=n,this.emit("connect",n),e.next=34;break;case 30:throw e.prev=30,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 34:return e.prev=34,this._connecting=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[0,30,34,37],[7,12],[17,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=13;break}return t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,e.prev=5,e.next=8,t.disconnect();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 13:this.emit("disconnect");case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,o,a,l,f,h,d=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{},e.prev=1,i=this._wallet){e.next=5;break}throw new S;case 5:return e.prev=5,a=r.signers,l=(0,u.Z)(r,K),e.next=9,this.prepareTransaction(t,n,l);case 9:return t=e.sent,(null===a||void 0===a?void 0:a.length)&&(o=t).partialSign.apply(o,(0,s.Z)(a)),l.preflightCommitment=l.preflightCommitment||n.commitment,e.next=14,i.signAndSendTransaction(t,(0,V.Z)((0,V.Z)({},l),{},{network:this._network}));case 14:return f=e.sent,h=f.signature,e.abrupt("return",h);case 19:if(e.prev=19,e.t0=e.catch(5),!(e.t0 instanceof v)){e.next=23;break}throw e.t0;case 23:throw new T(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 24:e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(1),this.emit("error",e.t1),e.t1;case 30:case"end":return e.stop()}}),e,this,[[1,26],[5,19]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signTransaction(t,this._network);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signAllTransactions(t,this._network);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signMessage(t);case 7:return r=e.sent,i=r.signature,e.abrupt("return",i);case 12:throw e.prev=12,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 21:case"end":return e.stop()}}),e,this,[[0,17],[4,12]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(U),q=n(10792),Y="Slope",X=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.call(this)).name=Y,e.url="https://slope.finance",e.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTI4IiBoZWlnaHQ9IjEyOCIgdmlld0JveD0iMCAwIDEyOCAxMjgiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4IiByeD0iNjQiIGZpbGw9IiM2RTY2RkEiLz4KPHBhdGggZD0iTTI3Ljk0NzUgNTIuMTU5Nkw1MS45ODI2IDI4LjA1NzJMNzIuNjA5OCA3LjY1Mzg5QzczLjg3MzQgNi40MDQwMSA3Ni4wMTc4IDcuMjk5MSA3Ni4wMTc4IDkuMDc2NDJMNzYuMDE4NyA1Mi4xNTlMNTEuOTgzNiA3Ni4xMjY4TDI3Ljk0NzUgNTIuMTU5NloiIGZpbGw9InVybCgjcGFpbnQwX2xpbmVhcl8zNzk1XzI1NTQzKSIvPgo8cGF0aCBkPSJNMTAwLjA1MyA3NS45OTNMNzYuMDE4IDUxLjk1OEw1MS45ODI5IDc1Ljk5MzFMNTEuOTgyOSAxMTguOTI0QzUxLjk4MjkgMTIwLjcwMyA1NC4xMzEyIDEyMS41OTcgNTUuMzkzNyAxMjAuMzQzTDEwMC4wNTMgNzUuOTkzWiIgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3OTVfMjU1NDMpIi8+CjxwYXRoIGQ9Ik0yNy45NDcgNTIuMTYwMUg0NC42ODM5QzQ4LjcxNDcgNTIuMTYwMSA1MS45ODIyIDU1LjQyNzYgNTEuOTgyMiA1OS40NTgzVjc2LjEyNjlIMzUuMjQ1M0MzMS4yMTQ2IDc2LjEyNjkgMjcuOTQ3IDcyLjg1OTQgMjcuOTQ3IDY4LjgyODdWNTIuMTYwMVoiIGZpbGw9IiNGMUYwRkYiLz4KPHBhdGggZD0iTTc2LjAxNzggNTIuMTYwMUg5Mi43NTQ3Qzk2Ljc4NTUgNTIuMTYwMSAxMDAuMDUzIDU1LjQyNzYgMTAwLjA1MyA1OS40NTgzVjc2LjEyNjlIODMuMzE2MUM3OS4yODU0IDc2LjEyNjkgNzYuMDE3OCA3Mi44NTk0IDc2LjAxNzggNjguODI4N1Y1Mi4xNjAxWiIgZmlsbD0iI0YxRjBGRiIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI1MS45ODMxIiB5MT0iNy4wNzE1NSIgeDI9IjUxLjk4MzEiIHkyPSI3Ni4xMjY4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBOEFERkYiLz4KPHN0b3Agb2Zmc2V0PSIwLjY0ODU1NiIgc3RvcC1jb2xvcj0id2hpdGUiLz4KPC9saW5lYXJHcmFkaWVudD4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3OTVfMjU1NDMiIHgxPSI3Ni4wMTgiIHkxPSI1MS45NTgiIHgyPSI3Ni4wMTgiIHkyPSIxMjAuOTI4IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIG9mZnNldD0iMC4yNjA3ODQiIHN0b3AtY29sb3I9IiNCNkJBRkYiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRTRFMkZGIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==",e.supportedTransactionVersions=null,e._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.NotDetected,e._connecting=!1,e._wallet=null,e._publicKey=null,e._readyState!==a.Unsupported&&R((function(){return!("function"!==typeof window.Slope&&!window.slopeApp)&&(e._readyState=a.Installed,e.emit("readyStateChange",e._readyState),!0)})),e}return(0,h.Z)(n,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"readyState",get:function(){return this._readyState}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Installed&&"function"===typeof window.Slope){e.next=5;break}throw new b;case 5:return this._connecting=!0,t=new window.Slope,e.prev=7,e.next=10,t.connect();case 10:r=e.sent,n=r.data,e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),new x(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 17:if(n.publicKey){e.next=19;break}throw new E;case 19:e.prev=19,i=new o.PublicKey(n.publicKey),e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(19),new I(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 26:this._wallet=t,this._publicKey=i,this.emit("connect",i),e.next=35;break;case 31:throw e.prev=31,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 35:return e.prev=35,this._connecting=!1,e.finish(35);case 38:case"end":return e.stop()}}),e,this,[[0,31,35,38],[7,14],[19,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=22;break}return this._wallet=null,this._publicKey=null,e.prev=4,e.prev=5,e.next=8,t.disconnect();case 8:r=e.sent,n=r.msg,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(5),new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:if("ok"===n){e.next=17;break}throw new A(n);case 17:e.next=22;break;case 19:e.prev=19,e.t1=e.catch(4),this.emit("error",e.t1);case 22:this.emit("disconnect");case 23:case"end":return e.stop()}}),e,this,[[4,19],[5,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,s,u,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,r=q.encode(t.serializeMessage()),e.next=8,n.signTransaction(r);case 8:if(i=e.sent,a=i.msg,(s=i.data).publicKey&&s.signature){e.next=13;break}throw new P(a);case 13:return u=new o.PublicKey(s.publicKey),l=q.decode(s.signature),t.addSignature(u,l),e.abrupt("return",t);case 19:if(e.prev=19,e.t0=e.catch(4),!(e.t0 instanceof v)){e.next=23;break}throw e.t0;case 23:throw new P(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 24:e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 30:case"end":return e.stop()}}),e,this,[[0,26],[4,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i,a,s,u,l,f,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,i=t.map((function(e){return q.encode(e.serializeMessage())})),e.next=8,n.signAllTransactions(i);case 8:if(a=e.sent,s=a.msg,u=a.data,l=t.length,u.publicKey&&(null===(r=u.signatures)||void 0===r?void 0:r.length)===l){e.next=14;break}throw new P(s);case 14:for(f=new o.PublicKey(u.publicKey),h=0;h<l;h++)t[h].addSignature(f,q.decode(u.signatures[h]));return e.abrupt("return",t);case 19:if(e.prev=19,e.t0=e.catch(4),!(e.t0 instanceof v)){e.next=23;break}throw e.t0;case 23:throw new P(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 24:e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 30:case"end":return e.stop()}}),e,this,[[0,26],[4,19]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signMessage(t);case 7:return r=e.sent,e.abrupt("return",q.decode(r.data.signature));case 11:throw e.prev=11,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 14:e.next=20;break;case 16:throw e.prev=16,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 20:case"end":return e.stop()}}),e,this,[[0,16],[4,11]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(U),Q="Solflare",$=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)(this,r),(e=t.call(this)).name=Q,e.url="https://solflare.com",e.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjUwIiB2aWV3Qm94PSIwIDAgNTAgNTAiIHdpZHRoPSI1MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiNmZmMxMGIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNmYjNmMmUiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iYiIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHgxPSI2LjQ3ODM1IiB4Mj0iMzQuOTEwNyIgeGxpbms6aHJlZj0iI2EiIHkxPSI3LjkyIiB5Mj0iMzMuNjU5MyIvPjxyYWRpYWxHcmFkaWVudCBpZD0iYyIgY3g9IjAiIGN5PSIwIiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDQuOTkyMTg4MzIgMTIuMDYzODc5NjMgLTEyLjE4MTEzNjU1IDUuMDQwNzEwNzQgMjIuNTIwMiAyMC42MTgzKSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiIHI9IjEiIHhsaW5rOmhyZWY9IiNhIi8+PHBhdGggZD0ibTI1LjE3MDggNDcuOTEwNGMuNTI1IDAgLjk1MDcuNDIxLjk1MDcuOTQwM3MtLjQyNTcuOTQwMi0uOTUwNy45NDAyLS45NTA3LS40MjA5LS45NTA3LS45NDAyLjQyNTctLjk0MDMuOTUwNy0uOTQwM3ptLTEuMDMyOC00NC45MTU2NWMuNDY0Ni4wMzgzNi44Mzk4LjM5MDQuOTAyNy44NDY4MWwxLjEzMDcgOC4yMTU3NGMuMzc5OCAyLjcxNDMgMy42NTM1IDMuODkwNCA1LjY3NDMgMi4wNDU5bDExLjMyOTEtMTAuMzExNThjLjI3MzMtLjI0ODczLjY5ODktLjIzMTQ5Ljk1MDcuMDM4NTEuMjMwOS4yNDc3Mi4yMzc5LjYyNjk3LjAxNjEuODgyNzdsLTkuODc5MSAxMS4zOTU4Yy0xLjgxODcgMi4wOTQyLS40NzY4IDUuMzY0MyAyLjI5NTYgNS41OTc4bDguNzE2OC44NDAzYy40MzQxLjA0MTguNzUxNy40MjM0LjcwOTMuODUyNC0uMDM0OS4zNTM3LS4zMDc0LjYzOTUtLjY2MjguNjk0OWwtOS4xNTk0IDEuNDMwMmMtMi42NTkzLjM2MjUtMy44NjM2IDMuNTExNy0yLjEzMzkgNS41NTc2bDMuMjIgMy43OTYxYy4yNTk0LjMwNTguMjE4OC43NjE1LS4wOTA4IDEuMDE3OC0uMjYyMi4yMTcyLS42NDE5LjIyNTYtLjkxMzguMDIwM2wtMy45Njk0LTIuOTk3OGMtMi4xNDIxLTEuNjEwOS01LjIyOTctLjI0MTctNS40NTYxIDIuNDI0M2wtLjg3NDcgMTAuMzk3NmMtLjAzNjIuNDI5NS0uNDE3OC43NDg3LS44NTI1LjcxMy0uMzY5LS4wMzAzLS42NjcxLS4zMDk3LS43MTcxLS42NzIxbC0xLjM4NzEtMTAuMDQzN2MtLjM3MTctMi43MTQ0LTMuNjQ1NC0zLjg5MDQtNS42NzQzLTIuMDQ1OWwtMTIuMDUxOTUgMTAuOTc0Yy0uMjQ5NDcuMjI3MS0uNjM4MDkuMjExNC0uODY4LS4wMzUtLjIxMDk0LS4yMjYyLS4yMTczNS0uNTcyNC0uMDE0OTMtLjgwNmwxMC41MTgxOC0xMi4xMzg1YzEuODE4Ny0yLjA5NDIuNDg0OS01LjM2NDQtMi4yODc2LTUuNTk3OGwtOC43MTg3Mi0uODQwNWMtLjQzNDEzLS4wNDE4LS43NTE3Mi0uNDIzNS0uNzA5MzYtLjg1MjQuMDM0OTMtLjM1MzcuMzA3MzktLjYzOTQuNjYyNy0uNjk1bDkuMTUzMzgtMS40Mjk5YzIuNjU5NC0uMzYyNSAzLjg3MTgtMy41MTE3IDIuMTQyMS01LjU1NzZsLTIuMTkyLTIuNTg0MWMtLjMyMTctLjM3OTItLjI3MTMtLjk0NDMuMTEyNi0xLjI2MjEuMzI1My0uMjY5NC43OTYzLS4yNzk3IDEuMTMzNC0uMDI0OWwyLjY5MTggMi4wMzQ3YzIuMTQyMSAxLjYxMDkgNS4yMjk3LjI0MTcgNS40NTYxLTIuNDI0M2wuNzI0MS04LjU1OTk4Yy4wNDU3LS41NDA4LjUyNjUtLjk0MjU3IDEuMDczOS0uODk3Mzd6bS0yMy4xODczMyAyMC40Mzk2NWMuNTI1MDQgMCAuOTUwNjcuNDIxLjk1MDY3Ljk0MDNzLS40MjU2My45NDAzLS45NTA2Ny45NDAzYy0uNTI1MDQxIDAtLjk1MDY3LS40MjEtLjk1MDY3LS45NDAzcy40MjU2MjktLjk0MDMuOTUwNjctLjk0MDN6bTQ3LjY3OTczLS45NTQ3Yy41MjUgMCAuOTUwNy40MjEuOTUwNy45NDAzcy0uNDI1Ny45NDAyLS45NTA3Ljk0MDItLjk1MDctLjQyMDktLjk1MDctLjk0MDIuNDI1Ny0uOTQwMy45NTA3LS45NDAzem0tMjQuNjI5Ni0yMi40Nzk3Yy41MjUgMCAuOTUwNi40MjA5NzMuOTUwNi45NDAyNyAwIC41MTkzLS40MjU2Ljk0MDI3LS45NTA2Ljk0MDI3LS41MjUxIDAtLjk1MDctLjQyMDk3LS45NTA3LS45NDAyNyAwLS41MTkyOTcuNDI1Ni0uOTQwMjcuOTUwNy0uOTQwMjd6IiBmaWxsPSJ1cmwoI2IpIi8+PHBhdGggZD0ibTI0LjU3MSAzMi43NzkyYzQuOTU5NiAwIDguOTgwMi0zLjk3NjUgOC45ODAyLTguODgxOSAwLTQuOTA1My00LjAyMDYtOC44ODE5LTguOTgwMi04Ljg4MTlzLTguOTgwMiAzLjk3NjYtOC45ODAyIDguODgxOWMwIDQuOTA1NCA0LjAyMDYgOC44ODE5IDguOTgwMiA4Ljg4MTl6IiBmaWxsPSJ1cmwoI2MpIi8+PC9zdmc+",e.supportedTransactionVersions=new Set(["legacy",0]),e._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.Loadable,e._disconnected=function(){var t=e._wallet;t&&(t.off("disconnect",e._disconnected),e._wallet=null,e._publicKey=null,e.emit("error",new k),e.emit("disconnect"))},e._accountChanged=function(t){if(t){var n=e._publicKey;if(n){try{t=new o.PublicKey(t.toBytes())}catch(r){return void e.emit("error",new I(null===r||void 0===r?void 0:r.message,r))}n.equals(t)||(e._publicKey=t,e.emit("connect",t))}}},e._connecting=!1,e._publicKey=null,e._wallet=null,e._config=n,e._readyState!==a.Unsupported&&R((function(){var t;return!!(null!==(t=window.solflare)&&void 0!==t&&t.isSolflare||window.SolflareApp)&&(e._readyState=a.Installed,e.emit("readyStateChange",e._readyState),!0)})),e}return(0,h.Z)(r,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"connected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.connected)}},{key:"readyState",get:function(){return this._readyState}},{key:"autoConnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.readyState===a.Loadable&&L()){e.next=3;break}return e.next=3,this.connect();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,r,i,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Loadable||this._readyState===a.Installed){e.next=5;break}throw new b;case 5:if(this.readyState!==a.Loadable||!L()){e.next=10;break}return t=encodeURIComponent(window.location.href),r=encodeURIComponent(window.location.origin),window.location.href="https://solflare.com/ul/v1/browse/".concat(t,"?ref=").concat(r),e.abrupt("return");case 10:return e.prev=10,e.next=13,n.e(59).then(n.bind(n,77059));case 13:i=e.sent.default,e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(10),new _(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 19:e.prev=19,s=new i({network:this._config.network}),e.next=26;break;case 23:throw e.prev=23,e.t1=e.catch(19),new w(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 26:if(this._connecting=!0,s.connected){e.next=36;break}return e.prev=28,e.next=31,s.connect();case 31:e.next=36;break;case 33:throw e.prev=33,e.t2=e.catch(28),new x(null===e.t2||void 0===e.t2?void 0:e.t2.message,e.t2);case 36:if(s.publicKey){e.next=38;break}throw new x;case 38:e.prev=38,u=new o.PublicKey(s.publicKey.toBytes()),e.next=45;break;case 42:throw e.prev=42,e.t3=e.catch(38),new I(null===e.t3||void 0===e.t3?void 0:e.t3.message,e.t3);case 45:s.on("disconnect",this._disconnected),s.on("accountChanged",this._accountChanged),this._wallet=s,this._publicKey=u,this.emit("connect",u),e.next=56;break;case 52:throw e.prev=52,e.t4=e.catch(0),this.emit("error",e.t4),e.t4;case 56:return e.prev=56,this._connecting=!1,e.finish(56);case 59:case"end":return e.stop()}}),e,this,[[0,52,56,59],[10,16],[19,23],[28,33],[38,42]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=14;break}return t.off("disconnect",this._disconnected),t.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,e.prev=6,e.next=9,t.disconnect();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 14:this.emit("disconnect");case 15:case"end":return e.stop()}}),e,this,[[6,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signTransaction(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signAllTransactions(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signMessage(t,"utf8");case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 13:e.next=19;break;case 15:throw e.prev=15,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 19:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(U),J=["signers"],ee="Torus",te=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(){var e,n=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{params:{showTorusButton:!1}}).params,i=void 0===n?{showTorusButton:!1}:n;return(0,f.Z)(this,r),(e=t.call(this)).name=ee,e.url="https://tor.us",e.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",e.supportedTransactionVersions=null,e._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.Loadable,e._connecting=!1,e._wallet=null,e._publicKey=null,e._params=i,e}return(0,h.Z)(r,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"connected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.isLoggedIn)}},{key:"readyState",get:function(){return this._readyState}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,r,i,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Loadable){e.next=5;break}throw new b;case 5:return this._connecting=!0,e.prev=6,e.next=9,Promise.all([n.e(724),n.e(997)]).then(n.bind(n,23724));case 9:t=e.sent.default,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),new _(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:e.prev=15,r=window.torus||new t,e.next=22;break;case 19:throw e.prev=19,e.t1=e.catch(15),new w(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 22:if(r.isInitialized){e.next=31;break}return e.prev=23,e.next=26,r.init(this._params);case 26:e.next=31;break;case 28:throw e.prev=28,e.t2=e.catch(23),new x(null===e.t2||void 0===e.t2?void 0:e.t2.message,e.t2);case 31:return e.prev=31,e.next=34,r.login();case 34:i=e.sent,e.next=40;break;case 37:throw e.prev=37,e.t3=e.catch(31),new E(null===e.t3||void 0===e.t3?void 0:e.t3.message,e.t3);case 40:e.prev=40,s=new o.PublicKey(i[0]),e.next=47;break;case 44:throw e.prev=44,e.t4=e.catch(40),new I(null===e.t4||void 0===e.t4?void 0:e.t4.message,e.t4);case 47:this._wallet=r,this._publicKey=s,this.emit("connect",s),e.next=56;break;case 52:throw e.prev=52,e.t5=e.catch(0),this.emit("error",e.t5),e.t5;case 56:return e.prev=56,this._connecting=!1,e.finish(56);case 59:case"end":return e.stop()}}),e,this,[[0,52,56,59],[6,12],[15,19],[23,28],[31,37],[40,44]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=13;break}if(this._wallet=null,this._publicKey=null,e.prev=4,!t.isLoggedIn){e.next=8;break}return e.next=8,t.cleanUp();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 13:this.emit("disconnect");case 14:case"end":return e.stop()}}),e,this,[[4,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,o,a,l,f,h,d=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>2&&void 0!==d[2]?d[2]:{},e.prev=1,i=this._wallet){e.next=5;break}throw new S;case 5:return e.prev=5,a=r.signers,l=(0,u.Z)(r,J),e.next=9,this.prepareTransaction(t,n,l);case 9:return t=e.sent,(null===a||void 0===a?void 0:a.length)&&(o=t).partialSign.apply(o,(0,s.Z)(a)),l.preflightCommitment=l.preflightCommitment||n.commitment,e.next=14,i.signAndSendTransaction(t,l);case 14:return f=e.sent,h=f.signature,e.abrupt("return",h);case 19:if(e.prev=19,e.t0=e.catch(5),!(e.t0 instanceof v)){e.next=23;break}throw e.t0;case 23:throw new T(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 24:e.next=30;break;case 26:throw e.prev=26,e.t1=e.catch(1),this.emit("error",e.t1),e.t1;case 30:case"end":return e.stop()}}),e,this,[[1,26],[5,19]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signTransaction(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signAllTransactions(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signMessage(t);case 7:return e.abrupt("return",e.sent);case 10:throw e.prev=10,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 13:e.next=19;break;case 15:throw e.prev=15,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 19:case"end":return e.stop()}}),e,this,[[0,15],[4,10]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(U),ne=n(10670),re=n(19778).Buffer;var ie=1<<31>>>0;function oe(e){return(e|ie)>>>0}var ae=5,se=6,ue=0,ce=1,le=1,fe=2,he=255,de=224;function pe(e,t){return ye.apply(this,arguments)}function ye(){return(ye=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve(t,ae,ue,n);case 2:return r=e.sent,e.abrupt("return",new o.PublicKey(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=(0,l.Z)((0,c.Z)().mark((function e(t,n,r){var i,o,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(i=re.alloc(1)).writeUInt8(1,0),o=z(n)?n.message.serialize():n.serializeMessage(),a=re.concat([i,r,o]),e.next=6,ve(t,se,ce,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e,t,n,r){return be.apply(this,arguments)}function be(){return be=(0,l.Z)((0,c.Z)().mark((function e(t,n,r,i){var o,a,s,u,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=0,a=0,!(i.length>he)){e.next=14;break}case 3:if(!(i.length-a>he)){e.next=14;break}return s=i.slice(a,a+he),e.next=7,t.send(de,n,r,o|fe,s);case 7:if(2===e.sent.length){e.next=10;break}throw new ne.rZ(ne.WC.INCORRECT_DATA);case 10:o|=le,a+=he,e.next=3;break;case 14:return u=i.slice(a),e.next=17,t.send(de,n,r,o,u);case 17:return l=e.sent,e.abrupt("return",l.slice(0,l.length-2));case 19:case"end":return e.stop()}}),e)}))),be.apply(this,arguments)}var _e="Ledger",we=function(e){(0,d.Z)(r,e);var t=(0,p.Z)(r);function r(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,f.Z)(this,r),(e=t.call(this)).name=_e,e.url="https://ledger.com",e.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",e.supportedTransactionVersions=new Set(["legacy",0]),e._readyState="undefined"!==typeof window&&"undefined"!==typeof document&&"undefined"!==typeof navigator&&navigator.hid?a.Loadable:a.Unsupported,e._disconnected=function(){var t=e._transport;t&&(t.off("disconnect",e._disconnected),e._transport=null,e._publicKey=null,e.emit("error",new k),e.emit("disconnect"))},e._derivationPath=n.derivationPath||function(e,t){var n=void 0!==e?void 0===t?3:4:2,r=re.alloc(1+4*n),i=r.writeUInt8(n,0);return i=r.writeUInt32BE(oe(44),i),i=r.writeUInt32BE(oe(501),i),void 0!==e&&(i=r.writeUInt32BE(oe(e),i),void 0!==t&&r.writeUInt32BE(oe(t),i)),r}(0,0),e._connecting=!1,e._transport=null,e._publicKey=null,e}return(0,h.Z)(r,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"readyState",get:function(){return this._readyState}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Loadable){e.next=5;break}throw new b;case 5:return this._connecting=!0,e.prev=6,e.next=9,n.e(126).then(n.bind(n,34126));case 9:t=e.sent.default,e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(6),new _(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:return e.prev=15,e.next=18,t.create();case 18:r=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),new x(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 24:return e.prev=24,e.next=27,pe(r,this._derivationPath);case 27:i=e.sent,e.next=33;break;case 30:throw e.prev=30,e.t2=e.catch(24),new I(null===e.t2||void 0===e.t2?void 0:e.t2.message,e.t2);case 33:r.on("disconnect",this._disconnected),this._transport=r,this._publicKey=i,this.emit("connect",i),e.next=43;break;case 39:throw e.prev=39,e.t3=e.catch(0),this.emit("error",e.t3),e.t3;case 43:return e.prev=43,this._connecting=!1,e.finish(43);case 46:case"end":return e.stop()}}),e,this,[[0,39,43,46],[6,12],[15,21],[24,30]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._transport)){e.next=13;break}return t.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,e.prev=5,e.next=8,t.close();case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 13:this.emit("disconnect");case 14:case"end":return e.stop()}}),e,this,[[5,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._transport,r=this._publicKey,n&&r){e.next=5;break}throw new S;case 5:return e.prev=5,e.next=8,me(n,t,this._derivationPath);case 8:i=e.sent,t.addSignature(r,i),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(5),new P(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:return e.abrupt("return",t);case 18:throw e.prev=18,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 22:case"end":return e.stop()}}),e,this,[[0,18],[5,12]])})));return function(t){return e.apply(this,arguments)}}()}]),r}(N),xe=function(t){(0,d.Z)(i,t);var r=(0,p.Z)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=n.provider,s=n.network,u=void 0===s?e.Mainnet:s,c=n.timeout,l=void 0===c?1e4:c;return(0,f.Z)(this,i),(t=r.call(this)).supportedTransactionVersions=null,t._readyState="undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.NotDetected,t._disconnected=function(){var e=t._wallet;e&&(e.off("disconnect",t._disconnected),t._wallet=null,t._publicKey=null,t.emit("error",new k),t.emit("disconnect"))},t._provider=o,t._network=u,t._timeout=l,t._connecting=!1,t._wallet=null,t._publicKey=null,t._readyState!==a.Unsupported&&("string"===typeof t._provider?t._readyState=a.Loadable:R((function(){var e;return"function"===typeof(null===(e=window.sollet)||void 0===e?void 0:e.postMessage)&&(t._readyState=a.Installed,t.emit("readyStateChange",t._readyState),!0)}))),t}return(0,h.Z)(i,[{key:"publicKey",get:function(){return this._publicKey}},{key:"connecting",get:function(){return this._connecting}},{key:"connected",get:function(){var e;return!(null===(e=this._wallet)||void 0===e||!e.connected)}},{key:"readyState",get:function(){return this._readyState}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,r,i,s,u,l,f,h=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(this._readyState===a.Loadable||this._readyState===a.Installed){e.next=5;break}throw new b;case 5:return this._connecting=!0,t=this._provider||window.sollet,e.prev=7,e.next=10,n.e(608).then(n.bind(n,38608));case 10:r=e.sent.default,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(7),new _(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 16:e.prev=16,i=new r(t,this._network),e.next=23;break;case 20:throw e.prev=20,e.t1=e.catch(16),new w(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 23:return e.prev=23,s=i.handleDisconnect,e.prev=25,e.next=28,new Promise((function(e,n){var r=function t(){u&&clearTimeout(u),i.off("connect",t),e()};if(i.handleDisconnect=function(){i.off("connect",r),n(new O);for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];return s.apply(i,t)},i.on("connect",r),i.connect().catch((function(e){i.off("connect",r),n(e)})),"string"===typeof t){var o=0;l=setInterval((function(){var e=i._popup;e?e.closed&&n(new O):o>50&&n(new C),o++}),100)}else u=setTimeout((function(){return n(new B)}),h._timeout)}));case 28:return e.prev=28,i.handleDisconnect=s,l&&clearInterval(l),e.finish(28);case 32:e.next=39;break;case 34:if(e.prev=34,e.t2=e.catch(23),!(e.t2 instanceof v)){e.next=38;break}throw e.t2;case 38:throw new x(null===e.t2||void 0===e.t2?void 0:e.t2.message,e.t2);case 39:if(i.publicKey){e.next=41;break}throw new E;case 41:e.prev=41,f=new o.PublicKey(i.publicKey.toBytes()),e.next=48;break;case 45:throw e.prev=45,e.t3=e.catch(41),new I(null===e.t3||void 0===e.t3?void 0:e.t3.message,e.t3);case 48:i.on("disconnect",this._disconnected),this._wallet=i,this._publicKey=f,this.emit("connect",f),e.next=58;break;case 54:throw e.prev=54,e.t4=e.catch(0),this.emit("error",e.t4),e.t4;case 58:return e.prev=58,this._connecting=!1,e.finish(58);case 61:case"end":return e.stop()}}),e,this,[[0,54,58,61],[7,13],[16,20],[23,34],[25,,28,32],[41,45]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._wallet)){e.next=17;break}return t.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,n=t.handleDisconnect,e.prev=6,e.next=9,new Promise((function(e,r){var i=setTimeout((function(){return e()}),250);t.handleDisconnect=function(){clearTimeout(i),e(),t._responsePromises=new Map;for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return n.apply(t,o)},t.disconnect().then((function(){clearTimeout(i),e()}),(function(t){clearTimeout(i),"Wallet disconnected"===(null===t||void 0===t?void 0:t.message)?e():r(t)}))}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 14:return e.prev=14,t.handleDisconnect=n,e.finish(14);case 17:this.emit("disconnect");case 18:case"end":return e.stop()}}),e,this,[[6,11,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signTransaction(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signAllTransactions",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.signAllTransactions(t);case 7:if(e.t0=e.sent,e.t0){e.next=10;break}e.t0=t;case 10:return e.abrupt("return",e.t0);case 13:throw e.prev=13,e.t1=e.catch(4),new P(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 16:e.next=22;break;case 18:throw e.prev=18,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 22:case"end":return e.stop()}}),e,this,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"signMessage",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=this._wallet){e.next=4;break}throw new S;case 4:return e.prev=4,e.next=7,n.sign(t,"utf8");case 7:return r=e.sent,i=r.signature,e.abrupt("return",Uint8Array.from(i));case 12:throw e.prev=12,e.t0=e.catch(4),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:e.next=21;break;case 17:throw e.prev=17,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 21:case"end":return e.stop()}}),e,this,[[0,17],[4,12]])})));return function(t){return e.apply(this,arguments)}}()}]),i}(U),ke=["provider"],Ae="Sollet",Ee=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.provider,o=void 0===i?"https://www.sollet.io":i,a=(0,u.Z)(r,ke);return(0,f.Z)(this,n),(e=t.call(this,(0,V.Z)({provider:o},a))).name=Ae,e.url="https://www.sollet.io",e.icon="data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjUzMCIgd2lkdGg9IjUzMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtLTEtMWg1MzJ2NTMyaC01MzJ6IiBmaWxsPSJub25lIi8+PGcgZmlsbD0iIzAwZmZhMyI+PHBhdGggZD0ibTg4Ljg4OTM1IDM3Mi45ODIwMWMzLjE5My0zLjE5IDcuNTIyLTQuOTgyIDEyLjAzNS00Ljk4Mmg0MTYuNDYxYzcuNTg2IDAgMTEuMzg0IDkuMTc0IDYuMDE3IDE0LjUzNmwtODIuMjkxIDgyLjIyNmMtMy4xOTMgMy4xOTEtNy41MjIgNC45ODMtMTIuMDM2IDQuOTgzaC00MTYuNDYwMWMtNy41ODY2IDAtMTEuMzg0NS05LjE3NC02LjAxNzgtMTQuNTM3bDgyLjI5MTktODIuMjI2eiIvPjxwYXRoIGQ9Im04OC44ODkzNSA2NS45ODI1YzMuMTkzLTMuMTkwNCA3LjUyMi00Ljk4MjUgMTIuMDM1LTQuOTgyNWg0MTYuNDYxYzcuNTg2IDAgMTEuMzg0IDkuMTczOSA2LjAxNyAxNC41MzYzbC04Mi4yOTEgODIuMjI2N2MtMy4xOTMgMy4xOS03LjUyMiA0Ljk4Mi0xMi4wMzYgNC45ODJoLTQxNi40NjAxYy03LjU4NjYgMC0xMS4zODQ1LTkuMTc0LTYuMDE3OC0xNC41MzZsODIuMjkxOS04Mi4yMjY1eiIvPjxwYXRoIGQ9Im00NDEuMTExMzUgMjE5LjEwOTVjLTMuMTkzLTMuMTktNy41MjItNC45ODItMTIuMDM2LTQuOTgyaC00MTYuNDYwMWMtNy41ODY2IDAtMTEuMzg0NSA5LjE3My02LjAxNzggMTQuNTM2bDgyLjI5MTkgODIuMjI2YzMuMTkzIDMuMTkgNy41MjIgNC45ODMgMTIuMDM1IDQuOTgzaDQxNi40NjFjNy41ODYgMCAxMS4zODQtOS4xNzQgNi4wMTctMTQuNTM3eiIvPjwvZz48L3N2Zz4=",e}return(0,h.Z)(n)}(xe),Ie="Sollet (Extension)",Se=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name=Ie,e.url="https://chrome.google.com/webstore/detail/sollet/fhmfendgdocmcbmfikdcogofphimnkno",e.icon="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAP50lEQVR4AeyZRZIcMRBFNbQ3MzSZVqalV2ZmuJXZTWZmOoZXZjiBtwapazOU8/9MThRcoEHZEa8zVCBF6P1iN/8r1f0QcKVGGC43/AjAsv9jWLYP1MHnUsP/w/qpcj1IuWH0EnRCN3REV+psHx0CR6d0C1LXYPavjAWAdbgEdOVZdPYJtTCQtnsPo+CG7tThWXU6XCYZ59k0jGhdVKqH93qUTytIFmvvyzcgXZ3N+6NLOqXbgushV1iwHon5pZ1MoE7ZhPY7fkpdCt3Scda5y5zyF2PD76n8IMbgkIYgfKdrdT7ssHAYoBFexyHfQkDXYNY9/5iEC3rNnwRiDDSTdE3nwLm19d9DpYb/wJV2zY8AdUzndM+j/wCwiYkMOqd7BuAG0sCFdvTHwxSd0z3f/H3mQtRpVmPQSV3TPc8Af9mwlzwRoa7pngGwU3+k0L2L98OOQfcu5gkwBjoAhgXAsAAYFgDDAmBYAAwLQEWpkmYKlykWgEGBYmsK2+tueFlz3cvKa15WXPWyTFkOVmDZKqxbi23W171U0v01IBaAnqZUz0unRIpdeMnLosteVkPulnaQnXc7sudJR468SOT060TOvEnk2MtEDjxLZNfDjmy7E2RTK8gqBGLx5bn9l16ZCw5DUMuEoVS3APSAeI+aHuWUtQjSNkIixc6wdw5AsjtdGy/z+17btm3btv3+bdu2bdvXtm3b9+4YSb/zy+ap25WaSTJ3Zie7Vd1VXdnhTuU8fdTnPH3quJJ5cHHVzNpSN5tznslVfFPzfMPwfWb/317jWqr5Zm/ZN+v3eWbG5rp5bFnVnDe5bH73ZNF87LacAIUGERj0GxwAsljx3HiEwJVVjvr+7RMFc/eCaiBEhKupoT/1vGe9zkUjCpB9Zd+MX18z504qm6/em8dkoCHQNL0GggPAWywb/Yor+oVw1MiSWbC9bgmXK6u9f9Y9CTt58j7er896Akh4rdZ9M3ljzRw6rITw0Qr4F70AggOAVj2rnRX4t2eLZulOCT4QloS2HwjmwIeAxBQobK2ybp9nzppQNu+5MQCCrZUa0wFgQFQ+dv79N+XM48uqhiHhMC113u3Bd7b8f/gXp48v8xvRSnIWeewA0M2Vj63/ySOFwMYzpN4ZPtNvZ1VHZ3og6K0yFwLCsl2e+dPTRX4npgkz1SkIHAAkfLz7fz5XxAZL+LErXs9FVbhAE532a8kmRIBrDoR7Flb5zUQO0gQOAJ2u/L8/W7SctHSCl3DtlZte1QsQyUDT8wISA9+EiOH1VwsEDgBtTdvm/+jhAnG6VptufKwgPEut95V9M31TvREiVgKn7bDhJbRJAKr/vlA0x4wqBSHeLXMrZvjqmlm525OmkcloS+MIBBv7PPOBm8lCOg3QttPHqsHb5wau2eMZhr2a41a9gDJhQ80cPKw/kUOqFzOCt04EwXxFeEXD8Lwyf/zvr9yTNyeMKZlJG2oSqKXqTfPfEckf9FV888nbc8okOgC0s/pxoBAQmTxGrQ3hz9xSN798vBDk+hHwG67Zn73TfLs1o8/z/8n4AQj2Db79QME8vKRqKqFWSDQLFgA+4QDQ/up/e6j6yewx5JTFCd8L58VTy+Ty+byEe0A33879AwK0BEAgI2g7l82Gns85ABz4ti0rcOKGmlZcqkQNtv3/L9kXydV3YZMp/D6AALDOnFAOVb5A4ADQ1W3cVzVu8i8fS179tto/aWwgfDaCZEYGxCxp02nxjno/OB0AujsV9hFLy/a38rol/CeWVfmMveoHFKDE98NWSzs5AHR1vqmx0t59Y84o2+c1W/3WTSY8/NLdeex+TzJv2gC6fnbFBqgDQBdXF+neREdLUcFTy6tEC9qE6ZmGOnpUyY4IHAA6trHW6sKeR9O99rBt/8HDSoR6fLanPsovLB/FAaDL6vWGGPVq32Di8i+G6v9tPYxQSO9+5s68KVSVC3AA6MpU8uexpVbyp8lQOnhL3jPvu6n3qVZVAq0OM5SeA0B3phJAw1bJw44HwPJdXia7bfxPfBUlheqeA0BXATByTToArNjtyfPPJFS9Y35FZWLBb9Ksu1RwZwB4bmU6AGwvZLPbJl/ltPFly1dxGqBnSSC7nPsb9+VVqt3zbOVvnigEQt6W98yOwv4JMHeXfLN2r8dOpANAuyvr/MnlRADIQTxxbIltXuUBel6djAZqNd/fmK4iKP1UqTd1dS1jbKWBZWfnbK33eIUhUF3pR2g5MU0SvqsISuldI0zsJl06dp1/bDLoiBEl85KwI6gnqy39qm5b+G43MAyxRmizJWYzSNoBe0tCCO0hEAzB3j0HAISGLSe1y96+ABBXDKKIYM1ez3zhrjw+ROZ1+Q4AnWfaWMlWpi0+GpA/sKvoU+xJJEENYPpqIAeAwVkKTlGmnRJOCgmZDLqGPntnXt28qv0basJxfQF40tM3h5U3KUGg9+UrvrltXoXafJJL7DGoidOBYahUBdOGjQBzFQk4fUOI3luu+ziUmAZIItAsgAFw2SwgDgCD2RQc9EJRWiAWBFEgRLt5t+Y9c/+iqvnbM0Xz4VuCtDNmgqhDvXyDkAXEtYYhJCpxk0EQAwQ5inboOGJNzZw9sUznEU4n0YccSLss3AEge+4fNIEqhVjR6buCo70DUTBobtjn4TzSJgZfECXgAI/iDzmRWRFAuO5ggQCBoL73ltQhnKANEsBgkz4wdC3WfFrC2O2j8ocEE1P7FVkAwfEDcFWS6HN35iFykmMYEWK7DCAR7RDxG/JVP9ie/vPTRRxHNBG/J0sgOIoYagBRzWdMKEPgZAOBa+p28OaNnaYVJQw8RPARYZoAoriKeg0CRxIle4xJ+PQdeXP7/AoFml2jjPGbOJHamVTvP23lJJmIIGxt4ADQY5OAJgAIOG43zamQDrYcvKhaN8yucQPBFvbtB/LUI2g307GEZUEZF5iFEAgfvjXXcN5K1AkgrAgY0rKIJTOBMBlVL+hIJmnFVrYKUxwAsgICjprCt+8/VDBXzahgu639BF2jgNDz7WsEBhXCH7yZrWwLBA4A2QGBq+hdAcW37s8HVG7PrqhB3RIN/aIcg20nmhjUAGrvoZcgcABI6Ovnb1Q0YCCef3fIJXxaCAhSxE3AkAgE+3mBYGfRM99sgO1VNggcALIHgzTD2y02cQGC7iIqfGlJgyDKzhCmSTYJKDIHVAl/7q68tqJdUehgnG+3AME2sTaGeA1yioeWVE2ftQuZlhcIwKhYFdC92WmAoXXABKsV9U3G71N35M0V08tmT8lPtRElEFRDENw8t8L36HsdAIbawROEdVQbf/L2PCwk0cqjliXrSi3z4OePwVYmU+AAMOQiineGyaaXhYWq+YTiFD2UPwDRlTqXnAYY4qHlSy7t47gZ2r+SWUstTfH7J4uirXMAGMqpZ4pGcBR/KOra2MYVOYQGvgPK0BwAUt1sdQnFdA9JKFkAARC8+NI+ziOSqm/pC0gDoDE4kIqE1NscAJLbp7hRMZPQKjMQ2GBYsrOe2LcgEFBP8IokM+A6g5j9BNFs6lC4GZ2spHeqBzDbOkVSy/FkVpYZYE+CzySTWTkA0AtAOTeFmzSJarLVy00lhav4OrMmVopSYBS3NpliySypKnIaICUAWtCw6mbD+y8AZB4dQFMjM9BsCABzt9UxX2m+2wFgkQDg+dG8vLZedRxLpplDEjzj1qWjs2GPAcC2kxp2APD9VjdTmyxDhs9oQ58HBa4DQAcAiBzEkM+Ue0dsJmkBQK0AIaQDQIcAEAjYz8cMZOVU6SAJUr0pAEDI2PhcX6daywFAN/rfzxcpzQYAmXIYrNuXzgmk0eQ1nfktDgBWXA2TWGZx9dvD1c++gH5XQh4A6rtOIxcHADsUvNe6oVklgq6ekUxqLQ1w3OiSA0BnAMhepdrH2VEBvC2f7lALfjOElq/peFvYAUC2Fv6gHtPC9V/fGW4G0YSSxGImsM7cDJdhN36nA4DdtEkxJ1rAPihqwLeDX3SpCCuSj7OTuWLnUP5KF6qCHACkBViFrEhurjj83zYAq152+/8v3QfVTHBQhR2S+jFbwZv6PPP+LhJaOwBYQND5vKeMK1HrT/2eTg/pmPvHbjAh4UNZGC1gCFaTkbT6aVNrozDUAeDNEQAktWYJCDB8XDqtzAlimIWm3D8CRbOp17XaVQdIPd9vnyhS5m3Z/Hjhy/ZP3dSJ7Xe7gVZzZ/qz+ynVomsX7h+yheTfXwUgrIOjyeFT+s3zXHnM87z+svCsYXgGoYtha1rqPo3wpRngLfjyPW03h7iSMG7+pI01ncQRS/jAc8xW7Vz8jYkYs7aGv9BwxsrmP88X6QKiXDs4no7r754sBqePndUADSxi87bVoYmxfQ4LjPHCl9b613PFA1H9riQMZ+lDt+TMI0uqhpG+Pcs2DR3RxmikIpqw1b6Ef+xo2+t3JqDtIgu0ACoZj5sTRJuv8NTcPwIEU909zP2vN3mPHd75KbuD0ViHDEP4HR1j67iCxb0DCIi9qacrVGO4gPy0q9tPmAfEGKJohMMkOxW+A4DtDKqChpuKU3ZHEy6gmk3/wjTdH0nEkw8vqRLr27wAEr4DwEBwAaERNuc8CcACg1S7ZudCj36/HivMY9W/LOAeRviOI6gnXEAkfN57U84cOqwEEbStFaLaQc6ZgJE4oz6BzTMk8mnONaTdi80dEUG8zbGE9RYIRAuK6WHzPHJkCapXEkK20FpmEb3IjDqXfoQ5dFpjtV8wpSwKGKbNE6iOpl5PRxP3dqt7V04jfEBHjiiZm+dUzPCGhli8sx6c5VeoWs5jkytJJNq4yES+sKpmrp5ZMf94tggzKSnm6AEUmTt6jiaOaxP6F1QzgEBgrFQA8/6bcpBKNsBRgB08sN0khH71eMH87NGC+f6DBWhd6EriO8j/K3MIwKLs4YN5xbvuYAmLKWIGTAaCBByvtlLATFLCPMfrat54uz4/lM4PcABIBgaz6YYQr7kTQ/7XnhncNAyDUdhtxQKIIxJmF8QClZiMZAoOjMENOLABd8A5Fhfel/yQigmo8w5ffuPYF38P14pbxzgAxgEwDoBxAIwDYBwAB6CjYZYI7lPuSvViLJDpAqum3Je3qbN4URZDGf/7cc8O8BSXG3uqaZ3ZNe4JwG28qNRFYCoV9wTgWixsAQzOcZ/Ou9dV7svD9KL5A6EJxzjHPQFgF7iZDgXDpxeobXCMa5yLlJSItVAIhjtVBu2aXQCzwzGuxeg+ZT0E9Uy8jAOaC4HJIR/H4Xp0z4OfgI2gfaGBcwgaOBOYUn/k4xbHh85prMRvhzjN3XAfn4j3Qc2q/lh0BCA6nOEOcIlT3P5xveKRLtUQ1LUmA/1bJeVR9Stb/NGBs3CHw61IuJVjMTunAYc7AYfCjdCEjxP9fSV6TX5WfRf1/10gGZzgBkfhqscdDkXCKW7F7Fp8A1/JJyULf6X2AAAAAElFTkSuQmCC",e}return(0,h.Z)(n)}(xe),Te=(0,t.createContext)({});function Me(){return(0,t.useContext)(Te)}var Pe=function(e){var n=e.children,r=e.endpoint,i=e.config,a=void 0===i?{commitment:"confirmed"}:i,s=(0,t.useMemo)((function(){return new o.Connection(r,a)}),[r,a]);return t.createElement(Te.Provider,{value:{connection:s}},n)},Be={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND"},Ce=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i[0],s=i[1],u=i[2];return(e=t.call(this,s)).code=a,e.data=u,e.name="SolanaMobileWalletAdapterError",e}return(0,h.Z)(n)}((0,g.Z)(Error)),Oe=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;(0,f.Z)(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i[0],s=i[1],u=i[2],c=i[3];return(e=t.call(this,u)).code=s,e.data=c,e.jsonRpcMessageId=a,e.name="SolanaMobileWalletAdapterProtocolError",e}return(0,h.Z)(n)}((0,g.Z)(Error));function De(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function Re(e,t){return De(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,crypto.subtle.exportKey("raw",e);case 2:return r=n.sent,n.next=5,crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},t,r);case 5:return i=n.sent,(o=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),o.set(new Uint8Array(i),r.byteLength),n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})))}var Le=4;function ze(e){if(e>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");var t=new ArrayBuffer(Le);return new DataView(t).setUint32(0,e,!1),new Uint8Array(t)}function Ze(){return De(this,void 0,void 0,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}function Ne(){return De(this,void 0,void 0,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"]);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}var Ue,Fe=12;function je(e,t){return De(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o,a,s;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=JSON.stringify(e),i=ze(e.id),o=new Uint8Array(Fe),crypto.getRandomValues(o),n.next=6,crypto.subtle.encrypt(Ve(i,o),t,(new TextEncoder).encode(r));case 6:return a=n.sent,(s=new Uint8Array(i.byteLength+o.byteLength+a.byteLength)).set(new Uint8Array(i),0),s.set(new Uint8Array(o),i.byteLength),s.set(new Uint8Array(a),i.byteLength+o.byteLength),n.abrupt("return",s);case 12:case"end":return n.stop()}}),n)})))}function We(e,t){return De(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o,a,s,u;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.slice(0,Le),i=e.slice(Le,Le+Fe),o=e.slice(Le+Fe),n.next=5,crypto.subtle.decrypt(Ve(r,i),t,o);case 5:if(a=n.sent,s=Ke().decode(a),u=JSON.parse(s),!Object.hasOwnProperty.call(u,"error")){n.next=10;break}throw new Oe(u.id,u.error.code,u.error.message);case 10:return n.abrupt("return",u);case 11:case"end":return n.stop()}}),n)})))}function Ve(e,t){return{additionalData:e,iv:t,name:"AES-GCM",tagLength:128}}function Ke(){return void 0===Ue&&(Ue=new TextDecoder("utf-8")),Ue}function Ge(e,t,n){return De(this,void 0,void 0,(0,c.Z)().mark((function r(){var o,a,s,u,l,f,h;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([crypto.subtle.exportKey("raw",t),crypto.subtle.importKey("raw",e,{name:"ECDH",namedCurve:"P-256"},!1,[])]);case 2:return o=r.sent,a=(0,i.Z)(o,2),s=a[0],u=a[1],r.next=8,crypto.subtle.deriveBits({name:"ECDH",public:u},n,256);case 8:return l=r.sent,r.next=11,crypto.subtle.importKey("raw",l,"HKDF",!1,["deriveKey"]);case 11:return f=r.sent,r.next=14,crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(s),info:new Uint8Array},f,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"]);case 14:return h=r.sent,r.abrupt("return",h);case 16:case"end":return r.stop()}}),r)})))}function He(e){if(e<49152||e>65535)throw new Ce(Be.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,"Association port number must be between 49152 and 65535. ".concat(e," given."),{port:e});return e}function qe(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;i<r;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}var Ye="solana-wallet";function Xe(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Qe(e,t){var n=null;if(t){try{n=new URL(t)}catch(i){}if("https:"!==(null===n||void 0===n?void 0:n.protocol))throw new Ce(Be.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL("".concat(Ye,":/")));var r=e.startsWith("/")?e:[].concat((0,s.Z)(Xe(n.pathname)),(0,s.Z)(Xe(e))).join("/");return new URL(r,n)}function $e(e,t,n){return De(this,void 0,void 0,(0,c.Z)().mark((function r(){var i,o,a,s;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=He(t),r.next=3,crypto.subtle.exportKey("raw",e);case 3:return o=r.sent,a=qe(o),(s=Qe("v1/associate/local",n)).searchParams.set("association",a.replace(/[/+=]/g,(function(e){return{"/":"_","+":"-","=":"."}[e]}))),s.searchParams.set("port","".concat(i)),r.abrupt("return",s);case 9:case"end":return r.stop()}}),r)})))}var Je={Firefox:0,Other:1};var et=null;function tt(e,t){return De(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o,a;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=He(49152+Math.floor(16384*Math.random())),n.next=3,$e(e,r,t);case 3:if("https:"!==(i=n.sent).protocol){n.next=8;break}window.location.assign(i),n.next=26;break;case 8:n.prev=8,o=-1!==navigator.userAgent.indexOf("Firefox/")?Je.Firefox:Je.Other,n.t0=o,n.next=n.t0===Je.Firefox?13:n.t0===Je.Other?15:20;break;case 13:return s=i,null==et&&((et=document.createElement("iframe")).style.display="none",document.body.appendChild(et)),et.contentWindow.location.href=s.toString(),n.abrupt("break",21);case 15:return a=new Promise((function(e,t){function n(){clearTimeout(i),window.removeEventListener("blur",r)}function r(){n(),e()}window.addEventListener("blur",r);var i=setTimeout((function(){n(),t()}),2e3)})),window.location.assign(i),n.next=19,a;case 19:return n.abrupt("break",21);case 20:case 21:n.next=26;break;case 23:throw n.prev=23,n.t1=n.catch(8),new Ce(Be.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.");case 26:return n.abrupt("return",r);case 27:case"end":return n.stop()}var s}),n,null,[[8,23]])})))}var nt={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},rt="com.solana.mobilewalletadapter.v1";function it(){if("undefined"===typeof window||!0!==window.isSecureContext)throw new Ce(Be.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function ot(e){var t;try{t=new URL(e)}catch(n){throw new Ce(Be.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if("https:"!==t.protocol)throw new Ce(Be.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function at(e,t){return De(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o,a,u,l,f,h,d=this;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return it(),n.next=3,Ze();case 3:return r=n.sent,n.next=6,tt(r.publicKey,null===t||void 0===t?void 0:t.baseUri);case 6:return i=n.sent,o="ws://localhost:".concat(i,"/solana-wallet"),u=function(){var e=(0,s.Z)(nt.retryDelayScheduleMs);return function(){return e.length>1?e.shift():e[0]}}(),l=1,f=0,h={__type:"disconnected"},n.abrupt("return",new Promise((function(t,n){var s,p,y,m={},g=function e(){return De(d,void 0,void 0,(0,c.Z)().mark((function t(){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("connecting"===h.__type){t.next=3;break}return console.warn("Expected adapter state to be `connecting` at the moment the websocket opens. "+"Got `".concat(h.__type,"`.")),t.abrupt("return");case 3:return n=h.associationKeypair,s.removeEventListener("open",e),t.next=7,Ne();case 7:return r=t.sent,t.t0=s,t.next=11,Re(r.publicKey,n.privateKey);case 11:t.t1=t.sent,t.t0.send.call(t.t0,t.t1),h={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:r.privateKey};case 14:case"end":return t.stop()}}),t)})))},v=function(e){e.wasClean?h={__type:"disconnected"}:n(new Ce(Be.ERROR_SESSION_CLOSED,"The wallet session dropped unexpectedly (".concat(e.code,": ").concat(e.reason,")."),{closeEvent:e})),p()},b=function(e){return De(d,void 0,void 0,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p(),!(Date.now()-a>=nt.timeoutMs)){e.next=5;break}n(new Ce(Be.ERROR_SESSION_TIMEOUT,"Failed to connect to the wallet websocket on port ".concat(i,"."))),e.next=8;break;case 5:return e.next=7,new Promise((function(e){var t=u();y=window.setTimeout(e,t)}));case 7:w();case 8:case"end":return e.stop()}}),e)})))},_=function(r){return De(d,void 0,void 0,(0,c.Z)().mark((function i(){var o,a,u,d,y,g,v,b;return(0,c.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,r.data.arrayBuffer();case 2:o=i.sent,i.t0=h.__type,i.next="connected"===i.t0?6:"hello_req_sent"===i.t0?30:51;break;case 6:if(i.prev=6,a=o.slice(0,Le),(u=new DataView(a).getUint32(0,!1))===f+1){i.next=11;break}throw new Error("Encrypted message has invalid sequence number");case 11:return f=u,i.next=14,We(o,h.sharedSecret);case 14:d=i.sent,y=m[d.id],delete m[d.id],y.resolve(d.result),i.next=29;break;case 20:if(i.prev=20,i.t1=i.catch(6),!(i.t1 instanceof Oe)){i.next=28;break}g=m[i.t1.jsonRpcMessageId],delete m[i.t1.jsonRpcMessageId],g.reject(i.t1),i.next=29;break;case 28:throw i.t1;case 29:return i.abrupt("break",51);case 30:return i.next=32,Ge(o,h.associationPublicKey,h.ecdhPrivateKey);case 32:return v=i.sent,h={__type:"connected",sharedSecret:v},b=new Proxy({},{get:function(e,t){if(null==e[t]){var n=t.toString().replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())})).toLowerCase();e[t]=function(e){return De(this,void 0,void 0,(0,c.Z)().mark((function r(){var i;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=l++,r.t0=s,r.next=4,je({id:i,jsonrpc:"2.0",method:n,params:null!==e&&void 0!==e?e:{}},v);case 4:return r.t1=r.sent,r.t0.send.call(r.t0,r.t1),r.abrupt("return",new Promise((function(e,n){m[i]={resolve:function(r){switch(t){case"authorize":case"reauthorize":var i=r.wallet_uri_base;if(null!=i)try{ot(i)}catch(o){return void n(o)}}e(r)},reject:n}})));case 7:case"end":return r.stop()}}),r)})))}}return e[t]},defineProperty:function(){return!1},deleteProperty:function(){return!1}}),i.prev=35,i.t2=t,i.next=39,e(b);case 39:i.t3=i.sent,(0,i.t2)(i.t3),i.next=46;break;case 43:i.prev=43,i.t4=i.catch(35),n(i.t4);case 46:return i.prev=46,p(),s.close(),i.finish(46);case 50:return i.abrupt("break",51);case 51:case"end":return i.stop()}}),i,null,[[6,20],[35,43,46,50]])})))},w=function(){p&&p(),h={__type:"connecting",associationKeypair:r},void 0===a&&(a=Date.now()),(s=new WebSocket(o,[rt])).addEventListener("open",g),s.addEventListener("close",v),s.addEventListener("error",b),s.addEventListener("message",_),p=function(){window.clearTimeout(y),s.removeEventListener("open",g),s.removeEventListener("close",v),s.removeEventListener("error",b),s.removeEventListener("message",_)}};w()})));case 13:case"end":return n.stop()}}),n)})))}var st=n(66315);function ut(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function ct(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}function lt(e){var t;return window.btoa((t=String.fromCharCode).call.apply(t,[null].concat((0,s.Z)(e))))}function ft(e){return new Uint8Array(window.atob(e).split("").map((function(e){return e.charCodeAt(0)})))}function ht(e){return lt("version"in e?e.serialize():e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}function dt(e){return"legacy"===o.VersionedMessage.deserializeMessageVersion(e)?o.Transaction.from(e):o.VersionedTransaction.deserialize(e)}function pt(e,t){return ct(this,void 0,void 0,(0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=function(t){var n=new Proxy({},{get:function(e,n){if(null==e[n])switch(n){case"signAndSendTransactions":e[n]=function(e){var n=e.minContextSlot,r=e.transactions,i=ut(e,["minContextSlot","transactions"]);return ct(this,void 0,void 0,(0,c.Z)().mark((function e(){var o,a,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.map(ht),e.next=3,t.signAndSendTransactions(Object.assign(Object.assign(Object.assign({},i),null!=n?{options:{min_context_slot:n}}:null),{payloads:o}));case 3:return a=e.sent,s=a.signatures,u=s.map(ft).map(st.encode),e.abrupt("return",u);case 7:case"end":return e.stop()}}),e)})))};break;case"signMessages":e[n]=function(e){var n=e.payloads,r=ut(e,["payloads"]);return ct(this,void 0,void 0,(0,c.Z)().mark((function e(){var i,o,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map(lt),e.next=3,t.signMessages(Object.assign(Object.assign({},r),{payloads:i}));case 3:return o=e.sent,a=o.signed_payloads,s=a.map(ft),e.abrupt("return",s);case 7:case"end":return e.stop()}}),e)})))};break;case"signTransactions":e[n]=function(e){var n=e.transactions,r=ut(e,["transactions"]);return ct(this,void 0,void 0,(0,c.Z)().mark((function e(){var i,o,a,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.map(ht),e.next=3,t.signTransactions(Object.assign(Object.assign({},r),{payloads:i}));case 3:return o=e.sent,a=o.signed_payloads,s=a.map(ft),u=s.map(dt),e.abrupt("return",u);case 8:case"end":return e.stop()}}),e)})))};break;default:e[n]=t[n]}return e[n]},defineProperty:function(){return!1},deleteProperty:function(){return!1}});return e(n)},n.next=3,at(r,t);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}),n)})))}function yt(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var mt="Mobile Wallet Adapter";function gt(e){var t,n=(t=e,new Uint8Array(window.atob(t).split("").map((function(e){return e.charCodeAt(0)}))));return new o.PublicKey(n)}function vt(e){return"version"in e}var bt=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,f.Z)(this,n),(r=t.call(this)).supportedTransactionVersions=new Set(["legacy",0]),r.name=mt,r.url="https://solanamobile.com/wallets",r.icon="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjI4IiB3aWR0aD0iMjgiIHZpZXdCb3g9Ii0zIDAgMjggMjgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI0RDQjhGRiI+PHBhdGggZD0iTTE3LjQgMTcuNEgxNXYyLjRoMi40di0yLjRabTEuMi05LjZoLTIuNHYyLjRoMi40VjcuOFoiLz48cGF0aCBkPSJNMjEuNiAzVjBoLTIuNHYzaC0zLjZWMGgtMi40djNoLTIuNHY2LjZINC41YTIuMSAyLjEgMCAxIDEgMC00LjJoMi43VjNINC41QTQuNSA0LjUgMCAwIDAgMCA3LjVWMjRoMjEuNnYtNi42aC0yLjR2NC4ySDIuNFYxMS41Yy41LjMgMS4yLjQgMS44LjVoNy41QTYuNiA2LjYgMCAwIDAgMjQgOVYzaC0yLjRabTAgNS43YTQuMiA0LjIgMCAxIDEtOC40IDBWNS40aDguNHYzLjNaIi8+PC9nPjwvc3ZnPg==",r._connecting=!1,r._connectionGeneration=0,r._readyState="undefined"!==typeof window&&window.isSecureContext&&"undefined"!==typeof document&&/android/i.test(navigator.userAgent)?a.Loadable:a.Unsupported,r._authorizationResultCache=e.authorizationResultCache,r._addressSelector=e.addressSelector,r._appIdentity=e.appIdentity,r._cluster=e.cluster,r._onWalletNotFound=e.onWalletNotFound,r._readyState!==a.Unsupported&&r._authorizationResultCache.get().then((function(e){e&&r.declareWalletAsInstalled()})),r}return(0,h.Z)(n,[{key:"publicKey",get:function(){if(null==this._publicKey&&null!=this._selectedAddress)try{this._publicKey=gt(this._selectedAddress)}catch(e){throw new I(e instanceof Error&&(null===e||void 0===e?void 0:e.message)||"Unknown error",e)}return this._publicKey?this._publicKey:null}},{key:"connected",get:function(){return!!this._authorizationResult}},{key:"connecting",get:function(){return this._connecting}},{key:"readyState",get:function(){return this._readyState}},{key:"declareWalletAsInstalled",value:function(){this._readyState!==a.Installed&&this.emit("readyStateChange",this._readyState=a.Installed)}},{key:"runWithGuard",value:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e();case 3:return t.abrupt("return",t.sent);case 6:throw t.prev=6,t.t0=t.catch(0),this.emit("error",t.t0),t.t0;case 10:case"end":return t.stop()}}),t,this,[[0,6]])})))}},{key:"autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED",value:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.autoConnect();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"autoConnect",value:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function e(){var t=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connecting&&!this.connected){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.runWithGuard((function(){return yt(t,void 0,void 0,(0,c.Z)().mark((function e(){var t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._readyState===a.Installed||this._readyState===a.Loadable){e.next=2;break}throw new b;case 2:return this._connecting=!0,e.prev=3,e.next=6,this._authorizationResultCache.get();case 6:(t=e.sent)&&this.handleAuthorizationResult(t),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(3),new x(e.t0 instanceof Error&&e.t0.message||"Unknown error",e.t0);case 13:return e.prev=13,this._connecting=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,10,13,16]])})))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"connect",value:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function e(){var t=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.connecting&&!this.connected){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.runWithGuard((function(){return yt(t,void 0,void 0,(0,c.Z)().mark((function e(){var t,n=this;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._readyState===a.Installed||this._readyState===a.Loadable){e.next=2;break}throw new b;case 2:return this._connecting=!0,e.prev=3,e.next=6,this._authorizationResultCache.get();case 6:if(!(t=e.sent)){e.next=10;break}return this.handleAuthorizationResult(t),e.abrupt("return");case 10:return e.next=12,this.transact((function(e){return yt(n,void 0,void 0,(0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.authorize({cluster:this._cluster,identity:this._appIdentity});case 2:n=t.sent,Promise.all([this._authorizationResultCache.set(n),this.handleAuthorizationResult(n)]);case 4:case"end":return t.stop()}}),t,this)})))}));case 12:e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(3),new x(e.t0 instanceof Error&&e.t0.message||"Unknown error",e.t0);case 17:return e.prev=17,this._connecting=!1,e.finish(17);case 20:case"end":return e.stop()}}),e,this,[[3,14,17,20]])})))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})))}},{key:"handleAuthorizationResult",value:function(e){var t;return yt(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=null==this._authorizationResult||(null===(t=this._authorizationResult)||void 0===t?void 0:t.accounts.length)!==e.accounts.length||this._authorizationResult.accounts.some((function(t,n){return t.address!==e.accounts[n].address})),this._authorizationResult=e,this.declareWalletAsInstalled(),!r){n.next=8;break}return n.next=6,this._addressSelector.select(e.accounts.map((function(e){return e.address})));case 6:(i=n.sent)!==this._selectedAddress&&(this._selectedAddress=i,delete this._publicKey,this.emit("connect",this.publicKey));case 8:case"end":return n.stop()}}),n,this)})))}},{key:"performReauthorization",value:function(e,t){return yt(this,void 0,void 0,(0,c.Z)().mark((function n(){var r;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.reauthorize({auth_token:t});case 3:r=n.sent,Promise.all([this._authorizationResultCache.set(r),this.handleAuthorizationResult(r)]),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(0),this.disconnect(),new k(n.t0 instanceof Error&&(null===n.t0||void 0===n.t0?void 0:n.t0.message)||"Unknown error",n.t0);case 11:case"end":return n.stop()}}),n,this,[[0,7]])})))}},{key:"disconnect",value:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._authorizationResultCache.clear(),this._connecting=!1,this._connectionGeneration++,delete this._authorizationResult,delete this._publicKey,delete this._selectedAddress,this.emit("disconnect");case 7:case"end":return e.stop()}}),e,this)})))}},{key:"transact",value:function(e){var t;return yt(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=null===(t=this._authorizationResult)||void 0===t?void 0:t.wallet_uri_base,i=r?{baseUri:r}:void 0,o=this._connectionGeneration,n.prev=3,n.next=6,pt(e,i);case 6:return n.abrupt("return",n.sent);case 9:if(n.prev=9,n.t0=n.catch(3),this._connectionGeneration===o){n.next=14;break}return n.next=14,new Promise((function(){}));case 14:if(!(n.t0 instanceof Error&&"SolanaMobileWalletAdapterError"===n.t0.name&&"ERROR_WALLET_NOT_FOUND"===n.t0.code)){n.next=17;break}return n.next=17,this._onWalletNotFound(this);case 17:throw n.t0;case 18:case"end":return n.stop()}}),n,this,[[3,9]])})))}},{key:"assertIsAuthorized",value:function(){if(!this._authorizationResult||!this._selectedAddress)throw new S;return{authToken:this._authorizationResult.auth_token,selectedAddress:this._selectedAddress}}},{key:"performSignTransactions",value:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){var n,r,i=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.assertIsAuthorized(),r=n.authToken,t.prev=1,t.next=4,this.transact((function(t){return yt(i,void 0,void 0,(0,c.Z)().mark((function n(){var i;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.performReauthorization(t,r);case 2:return n.next=4,t.signTransactions({transactions:e});case 4:return i=n.sent,n.abrupt("return",i);case 6:case"end":return n.stop()}}),n,this)})))}));case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(1),new P(null===t.t0||void 0===t.t0?void 0:t.t0.message,t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}},{key:"sendTransaction",value:function(e,t,n){return yt(this,void 0,void 0,(0,c.Z)().mark((function r(){var o=this;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.runWithGuard((function(){return yt(o,void 0,void 0,(0,c.Z)().mark((function r(){var o,a,s,u=this;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=this.assertIsAuthorized(),a=o.authToken,s=null===n||void 0===n?void 0:n.minContextSlot,r.prev=2,r.next=5,this.transact((function(r){return yt(u,void 0,void 0,(0,c.Z)().mark((function o(){var u,l,f,h,d,p,y,m,g,v=this;return(0,c.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=function(){var e,r;switch(t.commitment){case"confirmed":case"finalized":case"processed":e=t.commitment;break;default:e="finalized"}switch(null===n||void 0===n?void 0:n.preflightCommitment){case"confirmed":case"finalized":case"processed":r=n.preflightCommitment;break;case void 0:r=e;default:r="finalized"}return("finalized"===r?2:"confirmed"===r?1:0)<("finalized"===e?2:"confirmed"===e?1:0)?r:e},o.next=3,Promise.all([r.getCapabilities(),this.performReauthorization(r,a),vt(e)?null:yt(v,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,o;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.feePayer||(e.feePayer=null!==(r=this.publicKey)&&void 0!==r?r:void 0),null!=e.recentBlockhash){n.next=7;break}return n.next=4,t.getLatestBlockhash({commitment:u()});case 4:i=n.sent,o=i.blockhash,e.recentBlockhash=o;case 7:case"end":return n.stop()}}),n,this)})))]);case 3:if(l=o.sent,f=(0,i.Z)(l,3),h=f[0],f[1],f[2],!h.supports_sign_and_send_transactions){o.next=15;break}return o.next=11,r.signAndSendTransactions({minContextSlot:s,transactions:[e]});case 11:return d=o.sent,o.abrupt("return",d[0]);case 15:return o.next=17,r.signTransactions({transactions:[e]});case 17:if(p=o.sent,y=(0,i.Z)(p,1),!vt(m=y[0])){o.next=26;break}return o.next=23,t.sendTransaction(m);case 23:case 29:return o.abrupt("return",o.sent);case 26:return g=m.serialize(),o.next=29,t.sendRawTransaction(g,Object.assign(Object.assign({},n),{preflightCommitment:u()}));case 30:case"end":return o.stop()}}),o,this)})))}));case 5:return r.abrupt("return",r.sent);case 8:throw r.prev=8,r.t0=r.catch(2),new T(null===r.t0||void 0===r.t0?void 0:r.t0.message,r.t0);case 11:case"end":return r.stop()}}),r,this,[[2,8]])})))}));case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r,this)})))}},{key:"signTransaction",value:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){var n=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runWithGuard((function(){return yt(n,void 0,void 0,(0,c.Z)().mark((function t(){var n,r,o;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.performSignTransactions([e]);case 2:return n=t.sent,r=(0,i.Z)(n,1),o=r[0],t.abrupt("return",o);case 6:case"end":return t.stop()}}),t,this)})))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"signAllTransactions",value:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){var n=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runWithGuard((function(){return yt(n,void 0,void 0,(0,c.Z)().mark((function t(){var n;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.performSignTransactions(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}},{key:"signMessage",value:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){var n=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.runWithGuard((function(){return yt(n,void 0,void 0,(0,c.Z)().mark((function t(){var n,r,o,a=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.assertIsAuthorized(),r=n.authToken,o=n.selectedAddress,t.prev=1,t.next=4,this.transact((function(t){return yt(a,void 0,void 0,(0,c.Z)().mark((function n(){var a,s,u,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.performReauthorization(t,r);case 2:return n.next=4,t.signMessages({addresses:[o],payloads:[e]});case 4:return a=n.sent,s=(0,i.Z)(a,1),u=s[0],l=u.slice(-64),n.abrupt("return",l);case 9:case"end":return n.stop()}}),n,this)})))}));case 4:return t.abrupt("return",t.sent);case 7:throw t.prev=7,t.t0=t.catch(1),new M(null===t.t0||void 0===t.t0?void 0:t.t0.message,t.t0);case 10:case"end":return t.stop()}}),t,this,[[1,7]])})))}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})))}}]),n}(U);var _t="SolanaMobileWalletAdapterDefaultAuthorizationCache";function wt(){var e;try{e=window.localStorage}catch(t){}return{clear:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return");case 2:try{e.removeItem(_t)}catch(t){}case 3:case"end":return n.stop()}}),n)})))},get:function(){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.abrupt("return",JSON.parse(e.getItem(_t))||void 0);case 6:t.prev=6,t.t0=t.catch(2);case 8:case"end":return t.stop()}}),t,null,[[2,6]])})))},set:function(n){return yt(this,void 0,void 0,(0,c.Z)().mark((function r(){return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:try{e.setItem(_t,JSON.stringify(n))}catch(t){}case 3:case"end":return r.stop()}}),r)})))}}}function xt(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"undefined"!==typeof window&&window.location.assign(e.url);case 1:case"end":return t.stop()}}),t)})))}var kt="solana:signAndSendTransaction",At="solana:signTransaction",Et="standard:connect",It="standard:events";var St=function(e){return Et in e.features&&It in e.features&&(kt in e.features||At in e.features)},Tt=n(97326),Mt="solana:signMessage",Pt="solana:mainnet",Bt="solana:devnet",Ct="solana:testnet",Ot="solana:localnet";var Dt="https://api.mainnet-beta.solana.com";function Rt(e){switch(e){case"processed":case"confirmed":case"finalized":case void 0:return e;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}var Lt="standard:disconnect";function zt(e,t){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap,new WeakMap;var Zt,Nt,Ut,Ft,jt,Wt,Vt,Kt,Gt,Ht,qt,Yt,Xt,Qt,$t=n(92812),Jt=["signers"],en=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},tn=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},nn=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r,i=e.wallet;(0,f.Z)(this,n),r=t.call(this),Zt.add((0,Tt.Z)(r)),Nt.set((0,Tt.Z)(r),void 0),Ut.set((0,Tt.Z)(r),void 0),Ft.set((0,Tt.Z)(r),void 0),jt.set((0,Tt.Z)(r),void 0),Wt.set((0,Tt.Z)(r),void 0),Vt.set((0,Tt.Z)(r),void 0),Kt.set((0,Tt.Z)(r),"undefined"===typeof window||"undefined"===typeof document?a.Unsupported:a.Installed),qt.set((0,Tt.Z)(r),(function(e){if(tn((0,Tt.Z)(r),Nt,"f")&&tn((0,Tt.Z)(r),Ut,"f")&&"accounts"in e){var t=tn((0,Tt.Z)(r),Wt,"f").accounts[0];if(!t)return tn((0,Tt.Z)(r),Zt,"m",Ht).call((0,Tt.Z)(r)),r.emit("error",new k),void r.emit("disconnect");if(t!==tn((0,Tt.Z)(r),Nt,"f")){var n;try{n=new o.PublicKey(t.publicKey)}catch(i){return tn((0,Tt.Z)(r),Zt,"m",Ht).call((0,Tt.Z)(r)),r.emit("error",new I(null===i||void 0===i?void 0:i.message)),void r.emit("disconnect")}tn((0,Tt.Z)(r),Zt,"m",Gt).call((0,Tt.Z)(r),t,n),r.emit("connect",n)}}})),en((0,Tt.Z)(r),Wt,i,"f");var s=kt in i.features?i.features[kt].supportedTransactionVersions:i.features[At].supportedTransactionVersions;return en((0,Tt.Z)(r),Vt,zt(s,["legacy"])?null:new Set(s),"f"),en((0,Tt.Z)(r),Nt,null,"f"),en((0,Tt.Z)(r),Ut,null,"f"),en((0,Tt.Z)(r),Ft,!1,"f"),r}return(0,h.Z)(n,[{key:"supportedTransactionVersions",get:function(){return tn(this,Vt,"f")}},{key:"name",get:function(){return tn(this,Wt,"f").name}},{key:"icon",get:function(){return tn(this,Wt,"f").icon}},{key:"url",get:function(){return"https://github.com/solana-labs/wallet-standard"}},{key:"publicKey",get:function(){return tn(this,Ut,"f")}},{key:"connecting",get:function(){return tn(this,Ft,"f")}},{key:"readyState",get:function(){return tn(this,Kt,"f")}},{key:"wallet",get:function(){return tn(this,Wt,"f")}},{key:"standard",get:function(){return!0}},{key:"connect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!this.connected&&!this.connecting){e.next=3;break}return e.abrupt("return");case 3:if(tn(this,Kt,"f")===a.Installed){e.next=5;break}throw new b;case 5:if(en(this,Ft,!0,"f"),tn(this,Wt,"f").accounts.length){e.next=15;break}return e.prev=7,e.next=10,tn(this,Wt,"f").features[Et].connect();case 10:e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(7),new x(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 15:if(tn(this,Wt,"f").accounts.length){e.next=17;break}throw new E;case 17:t=tn(this,Wt,"f").accounts[0],e.prev=18,n=new o.PublicKey(t.publicKey),e.next=25;break;case 22:throw e.prev=22,e.t1=e.catch(18),new I(null===e.t1||void 0===e.t1?void 0:e.t1.message,e.t1);case 25:en(this,jt,tn(this,Wt,"f").features[It].on("change",tn(this,qt,"f")),"f"),tn(this,Zt,"m",Gt).call(this,t,n),this.emit("connect",n),e.next=34;break;case 30:throw e.prev=30,e.t2=e.catch(0),this.emit("error",e.t2),e.t2;case 34:return e.prev=34,en(this,Ft,!1,"f"),e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[0,30,34,37],[7,12],[18,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Lt in tn(this,Wt,"f").features)){e.next=9;break}return e.prev=1,e.next=4,tn(this,Wt,"f").features[Lt].disconnect();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),this.emit("error",new A(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0));case 9:tn(this,Zt,"m",Ht).call(this),this.emit("disconnect");case 11:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendTransaction",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,o,a,l,f,h,d,p,y,m,g,b,_,x,k=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=k.length>2&&void 0!==k[2]?k[2]:{},e.prev=1,o=tn(this,Nt,"f")){e.next=5;break}throw new S;case 5:if(!(kt in tn(this,Wt,"f").features)){e.next=17;break}if(!o.features.includes(kt)){e.next=10;break}a=kt,e.next=15;break;case 10:if(!(At in tn(this,Wt,"f").features)||!o.features.includes(At)){e.next=14;break}a=At,e.next=15;break;case 14:throw new E;case 15:e.next=24;break;case 17:if(!(At in tn(this,Wt,"f").features)){e.next=23;break}if(o.features.includes(At)){e.next=20;break}throw new E;case 20:a=At,e.next=24;break;case 23:throw new w;case 24:if(c=n.rpcEndpoint,l=c.includes(Dt)?Pt:/\bdevnet\b/i.test(c)?Bt:/\btestnet\b/i.test(c)?Ct:/\blocalhost\b/i.test(c)||/\b127\.0\.0\.1\b/.test(c)?Ot:Pt,o.chains.includes(l)){e.next=27;break}throw new T;case 27:if(e.prev=27,f=r.signers,h=(0,u.Z)(r,Jt),!z(t)){e.next=34;break}(null===f||void 0===f?void 0:f.length)&&t.sign(f),d=t.serialize(),e.next=39;break;case 34:return e.next=36,this.prepareTransaction(t,n,h);case 36:t=e.sent,(null===f||void 0===f?void 0:f.length)&&(p=t).partialSign.apply(p,(0,s.Z)(f)),d=new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}));case 39:if(a!==kt){e.next=48;break}return e.next=42,tn(this,Wt,"f").features[kt].signAndSendTransaction({account:o,chain:l,transaction:d,options:{preflightCommitment:Rt(h.preflightCommitment||n.commitment),skipPreflight:h.skipPreflight,maxRetries:h.maxRetries,minContextSlot:h.minContextSlot}});case 42:return y=e.sent,m=(0,i.Z)(y,1),g=m[0],e.abrupt("return",$t.encode(g.signature));case 48:return e.next=50,tn(this,Wt,"f").features[At].signTransaction({account:o,chain:l,transaction:d,options:{preflightCommitment:Rt(h.preflightCommitment||n.commitment),minContextSlot:h.minContextSlot}});case 50:return b=e.sent,_=(0,i.Z)(b,1),x=_[0],e.next=55,n.sendRawTransaction(x.signedTransaction,(0,V.Z)((0,V.Z)({},h),{},{preflightCommitment:Rt(h.preflightCommitment||n.commitment)}));case 55:return e.abrupt("return",e.sent);case 56:e.next=63;break;case 58:if(e.prev=58,e.t0=e.catch(27),!(e.t0 instanceof v)){e.next=62;break}throw e.t0;case 62:throw new T(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 63:e.next=69;break;case 65:throw e.prev=65,e.t1=e.catch(1),this.emit("error",e.t1),e.t1;case 69:case"end":return e.stop()}var c}),e,this,[[1,65],[27,58]])})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(D);Nt=new WeakMap,Ut=new WeakMap,Ft=new WeakMap,jt=new WeakMap,Wt=new WeakMap,Vt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,Zt=new WeakSet,Gt=function(e,t){en(this,Nt,e,"f"),en(this,Ut,t,"f"),null!==e&&void 0!==e&&e.features.includes(At)?(this.signTransaction=tn(this,Zt,"m",Yt),this.signAllTransactions=tn(this,Zt,"m",Xt)):(delete this.signTransaction,delete this.signAllTransactions),null!==e&&void 0!==e&&e.features.includes(Mt)?this.signMessage=tn(this,Zt,"m",Qt):delete this.signMessage},Ht=function(){var e=tn(this,jt,"f");e&&(en(this,jt,void 0,"f"),e()),tn(this,Zt,"m",Gt).call(this,null,null)},Yt=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=tn(this,Nt,"f")){e.next=4;break}throw new S;case 4:if(At in tn(this,Wt,"f").features){e.next=6;break}throw new w;case 6:if(n.features.includes(At)){e.next=8;break}throw new E;case 8:return e.prev=8,e.next=11,tn(this,Wt,"f").features[At].signTransaction({account:n,transaction:z(t)?t.serialize():new Uint8Array(t.serialize({requireAllSignatures:!1,verifySignatures:!1}))});case 11:return r=e.sent,i=r[0].signedTransaction,e.abrupt("return",z(t)?o.VersionedTransaction.deserialize(i):o.Transaction.from(i));case 16:if(e.prev=16,e.t0=e.catch(8),!(e.t0 instanceof v)){e.next=20;break}throw e.t0;case 20:throw new P(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 21:e.next=27;break;case 23:throw e.prev=23,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 27:case"end":return e.stop()}}),e,this,[[0,23],[8,16]])})));return function(t){return e.apply(this,arguments)}}(),Xt=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=tn(this,Nt,"f")){e.next=4;break}throw new S;case 4:if(At in tn(this,Wt,"f").features){e.next=6;break}throw new w;case 6:if(n.features.includes(At)){e.next=8;break}throw new P;case 8:return e.prev=8,e.next=11,(r=tn(this,Wt,"f").features[At]).signTransaction.apply(r,(0,s.Z)(t.map((function(e){return{account:n,transaction:z(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}}))));case 11:return i=e.sent,e.abrupt("return",t.map((function(e,t){var n=i[t].signedTransaction;return z(e)?o.VersionedTransaction.deserialize(n):o.Transaction.from(n)})));case 15:throw e.prev=15,e.t0=e.catch(8),new P(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 18:e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 24:case"end":return e.stop()}}),e,this,[[0,20],[8,15]])})));return function(t){return e.apply(this,arguments)}}(),Qt=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=tn(this,Nt,"f")){e.next=4;break}throw new S;case 4:if(Mt in tn(this,Wt,"f").features){e.next=6;break}throw new w;case 6:if(n.features.includes(Mt)){e.next=8;break}throw new M;case 8:return e.prev=8,e.next=11,tn(this,Wt,"f").features[Mt].signMessage({account:n,message:t});case 11:return r=e.sent,e.abrupt("return",r[0].signature);case 15:throw e.prev=15,e.t0=e.catch(8),new M(null===e.t0||void 0===e.t0?void 0:e.t0.message,e.t0);case 18:e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(0),this.emit("error",e.t1),e.t1;case 24:case"end":return e.stop()}}),e,this,[[0,20],[8,15]])})));return function(t){return e.apply(this,arguments)}}();var rn,on=function(e,t,n,r,i){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!i)throw new TypeError("Private accessor was defined without a setter");if("function"===typeof t?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?i.call(e,n):i?i.value=n:t.set(e,n),n},an=function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"===typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},sn=void 0,un=new Set,cn={};function ln(){if(sn)return sn;if(sn=Object.freeze({register:fn,get:hn,on:dn}),"undefined"===typeof window)return sn;var e=Object.freeze({register:fn});try{window.addEventListener("wallet-standard:register-wallet",(function(t){return(0,t.detail)(e)}))}catch(t){console.error("wallet-standard:register-wallet event listener could not be added\n",t)}try{window.dispatchEvent(new mn(e))}catch(t){console.error("wallet-standard:app-ready event could not be dispatched\n",t)}return sn}function fn(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(n=n.filter((function(e){return!un.has(e)}))).length?(n.forEach((function(e){return un.add(e)})),null===(e=cn.register)||void 0===e||e.forEach((function(e){return pn((function(){return e.apply(void 0,(0,s.Z)(n))}))})),function(){var e;n.forEach((function(e){return un.delete(e)})),null===(e=cn.unregister)||void 0===e||e.forEach((function(e){return pn((function(){return e.apply(void 0,(0,s.Z)(n))}))}))}):function(){}}function hn(){return(0,s.Z)(un)}function dn(e,t){var n;return(null===(n=cn[e])||void 0===n?void 0:n.push(t))||(cn[e]=[t]),function(){var n;cn[e]=null===(n=cn[e])||void 0===n?void 0:n.filter((function(e){return t!==e}))}}function pn(e){try{e()}catch(t){console.error(t)}}var yn,mn=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){var r;return(0,f.Z)(this,n),r=t.call(this,"wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),rn.set((0,Tt.Z)(r),void 0),on((0,Tt.Z)(r),rn,e,"f"),r}return(0,h.Z)(n,[{key:"detail",get:function(){return an(this,rn,"f")}},{key:"type",get:function(){return"wallet-standard:app-ready"}},{key:"preventDefault",value:function(){throw new Error("preventDefault cannot be called")}},{key:"stopImmediatePropagation",value:function(){throw new Error("stopImmediatePropagation cannot be called")}},{key:"stopPropagation",value:function(){throw new Error("stopPropagation cannot be called")}}]),n}((0,g.Z)(Event));function gn(e){var n=vn((function(){return function(){if(sn)return sn;if(sn=ln(),"undefined"===typeof window)return sn;var e=window.navigator.wallets||[];if(!Array.isArray(e))return console.error("window.navigator.wallets is not an array"),sn;var t=sn.register,n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.forEach((function(e){return pn((function(){return e({register:t})}))}))};try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch(r){return console.error("window.navigator.wallets could not be set"),sn}return n.apply(void 0,(0,s.Z)(e)),sn}()})),r=n.get,o=n.on,a=(0,t.useState)((function(){return bn(r())})),u=(0,i.Z)(a,2),c=u[0],l=u[1],f=vn((function(){return new Set}));return(0,t.useEffect)((function(){var e=[o("register",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l((function(e){return[].concat((0,s.Z)(e),(0,s.Z)(bn(t)))}))})),o("unregister",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l((function(e){return e.filter((function(e){return t.some((function(t){return t===e.wallet}))}))}))}))];return function(){return e.forEach((function(e){return e()}))}}),[o]),(0,t.useMemo)((function(){return[].concat((0,s.Z)(c),(0,s.Z)(e.filter((function(e){var t=e.name;return!c.some((function(e){return e.name===t}))||(f.has(t)||(f.add(t),console.warn("".concat(t," was registered as a Standard Wallet. The Wallet Adapter for ").concat(t," can be removed from your app."))),!1)}))))}),[c,e,f])}function vn(e){var n=(0,t.useRef)();return n.current||(n.current={value:e()}),n.current.value}function bn(e){return e.filter(St).map((function(e){return new nn({wallet:e})}))}rn=new WeakMap,function(e){e[e.DESKTOP_WEB=0]="DESKTOP_WEB",e[e.MOBILE_WEB=1]="MOBILE_WEB"}(yn||(yn={}));var _n=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,f.Z)(this,n),(e=t.apply(this,arguments)).name="WalletNotSelectedError",e}return(0,h.Z)(n)}(v),wn=[],xn={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select:function(e){console.error(kn("get","select"))},connect:function(){return Promise.reject(console.error(kn("get","connect")))},disconnect:function(){return Promise.reject(console.error(kn("get","disconnect")))},sendTransaction:function(e,t,n){return Promise.reject(console.error(kn("get","sendTransaction")))},signTransaction:function(e){return Promise.reject(console.error(kn("get","signTransaction")))},signAllTransactions:function(e){return Promise.reject(console.error(kn("get","signAllTransactions")))},signMessage:function(e){return Promise.reject(console.error(kn("get","signMessage")))}};function kn(e,t){return"You have tried to "+" ".concat(e,' "').concat(t,'"')+" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext"}Object.defineProperty(xn,"wallets",{get:function(){return console.error(kn("read","wallets")),wn}}),Object.defineProperty(xn,"wallet",{get:function(){return console.error(kn("read","wallet")),null}}),Object.defineProperty(xn,"publicKey",{get:function(){return console.error(kn("read","publicKey")),null}});var An,En=(0,t.createContext)(xn);function In(){return(0,t.useContext)(En)}function Sn(e){var n=e.children,r=e.wallets,o=e.adapter,u=e.isUnloadingRef,f=e.onAutoConnectRequest,h=e.onConnectError,d=e.onError,p=e.onSelectWallet,y=(0,t.useRef)(!1),m=(0,t.useState)(!1),g=(0,i.Z)(m,2),v=g[0],_=g[1],w=(0,t.useRef)(!1),x=(0,t.useState)(!1),k=(0,i.Z)(x,2),A=k[0],E=k[1],I=(0,t.useState)((function(){var e;return null!==(e=null===o||void 0===o?void 0:o.publicKey)&&void 0!==e?e:null})),T=(0,i.Z)(I,2),M=T[0],P=T[1],B=(0,t.useState)((function(){var e;return null!==(e=null===o||void 0===o?void 0:o.connected)&&void 0!==e&&e})),C=(0,i.Z)(B,2),O=C[0],D=C[1],R=(0,t.useRef)(d);(0,t.useEffect)((function(){return R.current=d,function(){R.current=void 0}}),[d]);var L=(0,t.useRef)((function(e,t){return u.current||(R.current?R.current(e,t):(console.error(e,t),e instanceof b&&"undefined"!==typeof window&&t&&window.open(t.url,"_blank"))),e})),z=(0,t.useState)((function(){return r.map((function(e){return{adapter:e,readyState:e.readyState}})).filter((function(e){return e.readyState!==a.Unsupported}))})),Z=(0,i.Z)(z,2),N=Z[0],U=Z[1];(0,t.useEffect)((function(){function e(e){var t=this;U((function(n){var r=n.findIndex((function(e){return e.adapter===t}));if(-1===r)return n;var i=n[r].adapter;return[].concat((0,s.Z)(n.slice(0,r)),[{adapter:i,readyState:e}],(0,s.Z)(n.slice(r+1))).filter((function(e){return e.readyState!==a.Unsupported}))}))}return U((function(e){return r.map((function(t,n){var r=e[n];return r&&r.adapter===t&&r.readyState===t.readyState?r:{adapter:t,readyState:t.readyState}})).filter((function(e){return e.readyState!==a.Unsupported}))})),r.forEach((function(t){return t.on("readyStateChange",e,t)})),function(){r.forEach((function(t){return t.off("readyStateChange",e,t)}))}}),[o,r]);var F=(0,t.useMemo)((function(){var e;return null!==(e=N.find((function(e){return e.adapter===o})))&&void 0!==e?e:null}),[o,N]);(0,t.useEffect)((function(){if(o){var e=function(e){P(e),y.current=!1,_(!1),D(!0),w.current=!1,E(!1)},t=function(){u.current||(P(null),y.current=!1,_(!1),D(!1),w.current=!1,E(!1))},n=function(e){L.current(e,o)};return o.on("connect",e),o.on("disconnect",t),o.on("error",n),function(){o.off("connect",e),o.off("disconnect",t),o.off("error",n),t()}}}),[o,u]);var j=(0,t.useRef)(!1);(0,t.useEffect)((function(){return function(){j.current=!1}}),[o]),(0,t.useEffect)((function(){j.current||y.current||O||!f||(null===F||void 0===F?void 0:F.readyState)!==a.Installed&&(null===F||void 0===F?void 0:F.readyState)!==a.Loadable||(y.current=!0,_(!0),j.current=!0,(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),h();case 8:return e.prev=8,_(!1),y.current=!1,e.finish(8);case 12:case"end":return e.stop()}}),e,null,[[0,5,8,12]])})))())}),[O,f,h,F]);var W=(0,t.useCallback)(function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n,r){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o){e.next=2;break}throw L.current(new _n);case 2:if(O){e.next=4;break}throw L.current(new S,o);case 4:return e.next=6,o.sendTransaction(t,n,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[o,O]),V=(0,t.useMemo)((function(){return o&&"signTransaction"in o?function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}throw L.current(new S,o);case 2:return e.next=4,o.signTransaction(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0}),[o,O]),K=(0,t.useMemo)((function(){return o&&"signAllTransactions"in o?function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}throw L.current(new S,o);case 2:return e.next=4,o.signAllTransactions(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0}),[o,O]),G=(0,t.useMemo)((function(){return o&&"signMessage"in o?function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}throw L.current(new S,o);case 2:return e.next=4,o.signMessage(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}():void 0}),[o,O]),H=(0,t.useCallback)((0,l.Z)((0,c.Z)().mark((function e(){var t,n;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(y.current||w.current||null!==F&&void 0!==F&&F.adapter.connected)){e.next=2;break}return e.abrupt("return");case 2:if(F){e.next=4;break}throw L.current(new _n);case 4:if(t=F.adapter,(n=F.readyState)===a.Installed||n===a.Loadable){e.next=7;break}throw L.current(new b,t);case 7:return y.current=!0,_(!0),e.prev=9,e.next=12,t.connect();case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(9),h(),e.t0;case 18:return e.prev=18,_(!1),y.current=!1,e.finish(18);case 22:case"end":return e.stop()}}),e,null,[[9,14,18,22]])}))),[h,F]),q=(0,t.useCallback)((0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w.current){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:return w.current=!0,E(!0),e.prev=6,e.next=9,o.disconnect();case 9:return e.prev=9,E(!1),w.current=!1,e.finish(9);case 13:case"end":return e.stop()}}),e,null,[[6,,9,13]])}))),[o]);return t.createElement(En.Provider,{value:{autoConnect:!!f,wallets:N,wallet:F,publicKey:M,connected:O,connecting:v,disconnecting:A,select:p,connect:H,disconnect:q,sendTransaction:W,signTransaction:V,signAllTransactions:K,signMessage:G}},n)}function Tn(e){return function(e){var t=e.adapters,n=e.userAgentString;return t.some((function(e){return e.name!==mt&&e.readyState===a.Installed}))?yn.DESKTOP_WEB:n&&/android/i.test(n)&&!function(e){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(e)}(n)?yn.MOBILE_WEB:yn.DESKTOP_WEB}({adapters:e,userAgentString:function(){var e,t;return void 0===An&&(An=null!==(e=null===(t=globalThis.navigator)||void 0===t?void 0:t.userAgent)&&void 0!==e?e:null),An}()})===yn.MOBILE_WEB}function Mn(){var e=globalThis.location;if(null!=e)return"".concat(e.protocol,"//").concat(e.host)}function Pn(e){var n=e.children,r=e.wallets,o=e.autoConnect,a=e.localStorageKey,u=void 0===a?"walletName":a,l=e.onError,f=Me().connection,h=gn(r),d=(0,t.useMemo)((function(){if(!Tn(h))return null;var e,t=h.find((function(e){return e.name===mt}));return t||new bt({addressSelector:{select:function(e){return yt(this,void 0,void 0,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e[0]);case 1:case"end":return t.stop()}}),t)})))}},appIdentity:{uri:Mn()},authorizationResultCache:wt(),cluster:(e=null===f||void 0===f?void 0:f.rpcEndpoint,e?/devnet/i.test(e)?"devnet":/testnet/i.test(e)?"testnet":"mainnet-beta":"mainnet-beta"),onWalletNotFound:xt})}),[h,null===f||void 0===f?void 0:f.rpcEndpoint]),p=(0,t.useMemo)((function(){return null==d||-1!==h.indexOf(d)?h:[d].concat((0,s.Z)(h))}),[h,d]),y=function(e,n){var r=(0,t.useState)((function(){try{var t=localStorage.getItem(e);if(t)return JSON.parse(t)}catch(r){"undefined"!==typeof window&&console.error(r)}return n})),i=r[0],o=(0,t.useRef)(!0);return(0,t.useEffect)((function(){if(o.current)o.current=!1;else try{null===i?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(i))}catch(t){"undefined"!==typeof window&&console.error(t)}}),[i,e]),r}(u,Tn(h)?mt:null),m=(0,i.Z)(y,2),g=m[0],v=m[1],b=(0,t.useMemo)((function(){var e;return null!==(e=p.find((function(e){return e.name===g})))&&void 0!==e?e:null}),[p,g]),_=(0,t.useCallback)((function(e){g!==e&&(b&&b.name!==mt&&b.disconnect(),v(e))}),[b,v,g]);(0,t.useEffect)((function(){if(null!=b)return b.on("disconnect",e),function(){b.off("disconnect",e)};function e(){k.current||g===mt&&Tn(h)||v(null)}}),[b,h,v,g]);var w=(0,t.useRef)(!1),x=(0,t.useMemo)((function(){if(!0===o&&b)return function(){return w.current?b.connect():b.autoConnect()}}),[b,o]),k=(0,t.useRef)(!1);(0,t.useEffect)((function(){if(g!==mt||!Tn(h))return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)};function e(){k.current=!0}k.current=!1}),[h,g]);var A=(0,t.useCallback)((function(){b&&b.name!==mt&&_(null)}),[b,_]),E=(0,t.useCallback)((function(e){w.current=!0,_(e)}),[_]);return t.createElement(Sn,{wallets:p,adapter:b,isUnloadingRef:k,onAutoConnectRequest:x,onConnectError:A,onError:l,onSelectWallet:E},n)}var Bn={setVisible:function(e){console.error(Cn("call","setVisible"))},visible:!1};function Cn(e,t){return"You have tried to "+" ".concat(e,' "').concat(t,'"')+" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext"}Object.defineProperty(Bn,"visible",{get:function(){return console.error(Cn("read","visible")),!1}});var On=(0,t.createContext)(Bn);function Dn(){return(0,t.useContext)(On)}var Rn=n(54164),Ln=function(e){var n=e.id,r=e.children,i=e.expanded,o=void 0!==i&&i,a=(0,t.useRef)(null),s=(0,t.useRef)(!0);return(0,t.useLayoutEffect)((function(){o?function(){var e=a.current;e&&requestAnimationFrame((function(){e.style.height=e.scrollHeight+"px"}))}():function(){var e=a.current;e&&requestAnimationFrame((function(){e.style.height=e.offsetHeight+"px",e.style.overflow="hidden",requestAnimationFrame((function(){e.style.height="0"}))}))}()}),[o]),(0,t.useLayoutEffect)((function(){var e=a.current;if(e)return s.current&&(t(),s.current=!1),e.addEventListener("transitionend",n),function(){return e.removeEventListener("transitionend",n)};function t(){e&&(e.style.overflow=o?"initial":"hidden",o&&(e.style.height="auto"))}function n(n){e&&n.target===e&&"height"===n.propertyName&&t()}}),[o]),t.createElement("div",{className:"wallet-adapter-collapse",id:n,ref:a,role:"region",style:{height:0,transition:s.current?void 0:"height 250ms ease-out"}},r)},zn=function(e){return t.createElement("button",{className:"wallet-adapter-button ".concat(e.className||""),disabled:e.disabled,style:e.style,onClick:e.onClick,tabIndex:e.tabIndex||0,type:"button"},e.startIcon&&t.createElement("i",{className:"wallet-adapter-button-start-icon"},e.startIcon),e.children,e.endIcon&&t.createElement("i",{className:"wallet-adapter-button-end-icon"},e.endIcon))},Zn=["wallet"],Nn=function(e){var n=e.wallet,r=(0,u.Z)(e,Zn);return n&&t.createElement("img",(0,V.Z)({src:n.adapter.icon,alt:"".concat(n.adapter.name," icon")},r))},Un=function(e){var n=e.handleClick,r=e.tabIndex,i=e.wallet;return t.createElement("li",null,t.createElement(zn,{onClick:n,startIcon:t.createElement(Nn,{wallet:i}),tabIndex:r},i.adapter.name,i.readyState===a.Installed&&t.createElement("span",null,"Detected")))},Fn=function(){return t.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),t.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),t.createElement("g",{clipPath:"url(#clip0_880_5115)"},t.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),t.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),t.createElement("defs",null,t.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#9945FF"}),t.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),t.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),t.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),t.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),t.createElement("stop",{offset:"1",stopColor:"#00D18C"})),t.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#9945FF"}),t.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),t.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),t.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),t.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),t.createElement("stop",{offset:"1",stopColor:"#00D18C"})),t.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#9945FF"}),t.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),t.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),t.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),t.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),t.createElement("stop",{offset:"1",stopColor:"#00D18C"})),t.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},t.createElement("stop",{stopColor:"#9945FF"}),t.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),t.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),t.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),t.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),t.createElement("stop",{offset:"1",stopColor:"#00D18C"})),t.createElement("clipPath",{id:"clip0_880_5115"},t.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"}))))},jn=function(e){var n=e.className,r=void 0===n?"":n,o=e.container,s=void 0===o?"body":o,u=(0,t.useRef)(null),c=In(),l=c.wallets,f=c.select,h=Dn().setVisible,d=(0,t.useState)(!1),p=(0,i.Z)(d,2),m=p[0],g=p[1],v=(0,t.useState)(!1),b=(0,i.Z)(v,2),_=b[0],w=b[1],x=(0,t.useState)(null),k=(0,i.Z)(x,2),A=k[0],E=k[1],I=(0,t.useMemo)((function(){var e,t=[],n=[],r=[],i=(0,y.Z)(l);try{for(i.s();!(e=i.n()).done;){var o=e.value;o.readyState===a.NotDetected?r.push(o):o.readyState===a.Loadable?n.push(o):o.readyState===a.Installed&&t.push(o)}}catch(c){i.e(c)}finally{i.f()}var s=[],u=[];return t.length?(s=t,u=[].concat(n,r)):n.length?(s=n,u=r):u=r,[s,u]}),[l]),S=(0,i.Z)(I,2),T=S[0],M=S[1],P=(0,t.useCallback)((function(){w(!1),setTimeout((function(){return h(!1)}),150)}),[h]),B=(0,t.useCallback)((function(e){e.preventDefault(),P()}),[P]),C=(0,t.useCallback)((function(e,t){f(t),B(e)}),[f,B]),O=(0,t.useCallback)((function(){return g(!m)}),[m]),D=(0,t.useCallback)((function(e){var t=u.current;if(t){var n=t.querySelectorAll("button"),r=n[0],i=n[n.length-1];e.shiftKey?document.activeElement===r&&(i.focus(),e.preventDefault()):document.activeElement===i&&(r.focus(),e.preventDefault())}}),[u]);return(0,t.useLayoutEffect)((function(){var e=function(e){"Escape"===e.key?P():"Tab"===e.key&&D(e)},t=window.getComputedStyle(document.body).overflow;return setTimeout((function(){return w(!0)}),0),document.body.style.overflow="hidden",window.addEventListener("keydown",e,!1),function(){document.body.style.overflow=t,window.removeEventListener("keydown",e,!1)}}),[P,D]),(0,t.useLayoutEffect)((function(){return E(document.querySelector(s))}),[s]),A&&(0,Rn.createPortal)(t.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:"wallet-adapter-modal ".concat(_&&"wallet-adapter-modal-fade-in"," ").concat(r),ref:u,role:"dialog"},t.createElement("div",{className:"wallet-adapter-modal-container"},t.createElement("div",{className:"wallet-adapter-modal-wrapper"},t.createElement("button",{onClick:B,className:"wallet-adapter-modal-button-close"},t.createElement("svg",{width:"14",height:"14"},t.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),T.length?t.createElement(t.Fragment,null,t.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),t.createElement("ul",{className:"wallet-adapter-modal-list"},T.map((function(e){return t.createElement(Un,{key:e.adapter.name,handleClick:function(t){return C(t,e.adapter.name)},wallet:e})})),M.length?t.createElement(Ln,{expanded:m,id:"wallet-adapter-modal-collapse"},M.map((function(e){return t.createElement(Un,{key:e.adapter.name,handleClick:function(t){return C(t,e.adapter.name)},tabIndex:m?0:-1,wallet:e})}))):null),M.length?t.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:O,tabIndex:0},t.createElement("span",null,m?"Less ":"More ","options"),t.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:"".concat(m?"wallet-adapter-modal-list-more-icon-rotate":"")},t.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):t.createElement(t.Fragment,null,t.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),t.createElement("div",{className:"wallet-adapter-modal-middle"},t.createElement(Fn,null)),M.length?t.createElement(t.Fragment,null,t.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:O,tabIndex:0},t.createElement("span",null,m?"Hide ":"Already have a wallet? View ","options"),t.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:"".concat(m?"wallet-adapter-modal-list-more-icon-rotate":"")},t.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),t.createElement(Ln,{expanded:m,id:"wallet-adapter-modal-collapse"},t.createElement("ul",{className:"wallet-adapter-modal-list"},M.map((function(e){return t.createElement(Un,{key:e.adapter.name,handleClick:function(t){return C(t,e.adapter.name)},tabIndex:m?0:-1,wallet:e})}))))):null))),t.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:B})),A)},Wn=["children"],Vn=function(e){var n=e.children,r=(0,u.Z)(e,Wn),o=(0,t.useState)(!1),a=(0,i.Z)(o,2),s=a[0],c=a[1];return t.createElement(On.Provider,{value:{visible:s,setVisible:c}},n,s&&t.createElement(jn,(0,V.Z)({},r)))},Kn=n.p+"static/media/ohr2.9a19ab9d0e5de8ecbd48.png",Gn=["children","disabled","onClick"],Hn=function(e){var n=e.children,r=e.disabled,i=e.onClick,o=(0,u.Z)(e,Gn),a=In(),s=a.wallet,c=a.connect,l=a.connecting,f=a.connected,h=(0,t.useCallback)((function(e){i&&i(e),e.defaultPrevented||c().catch((function(){}))}),[i,c]),d=(0,t.useMemo)((function(){return n||(l?"Connecting ...":f?"Connected":s?"Connect":"Connect Wallet")}),[n,l,f,s]);return t.createElement(zn,(0,V.Z)({className:"wallet-adapter-button-trigger",disabled:r||!s||l||f,startIcon:s?t.createElement(Nn,{wallet:s}):void 0,onClick:h},o),d)},qn=["children","onClick"],Yn=function(e){var n=e.children,r=void 0===n?"Select Wallet":n,i=e.onClick,o=(0,u.Z)(e,qn),a=Dn(),s=a.visible,c=a.setVisible,l=(0,t.useCallback)((function(e){i&&i(e),e.defaultPrevented||c(!s)}),[i,c,s]);return t.createElement(zn,(0,V.Z)({className:"wallet-adapter-button-trigger",onClick:l},o),r)},Xn=["children"],Qn=function(e){var n=e.children,r=(0,u.Z)(e,Xn),o=In(),a=o.publicKey,s=o.wallet,f=o.disconnect,h=Dn().setVisible,d=(0,t.useState)(!1),p=(0,i.Z)(d,2),y=p[0],m=p[1],g=(0,t.useState)(!1),v=(0,i.Z)(g,2),b=v[0],_=v[1],w=(0,t.useRef)(null),x=(0,t.useMemo)((function(){return null===a||void 0===a?void 0:a.toBase58()}),[a]),k=(0,t.useMemo)((function(){return n||(s&&x?x.slice(0,4)+".."+x.slice(-4):null)}),[n,s,x]),A=(0,t.useCallback)((0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x){e.next=5;break}return e.next=3,navigator.clipboard.writeText(x);case 3:m(!0),setTimeout((function(){return m(!1)}),400);case 5:case"end":return e.stop()}}),e)}))),[x]),E=(0,t.useCallback)((function(){_(!0)}),[]),I=(0,t.useCallback)((function(){_(!1)}),[]),S=(0,t.useCallback)((function(){h(!0),I()}),[h,I]);return(0,t.useEffect)((function(){var e=function(e){var t=w.current;t&&!t.contains(e.target)&&I()};return document.addEventListener("mousedown",e),document.addEventListener("touchstart",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("touchstart",e)}}),[w,I]),s?x?t.createElement("div",{className:"wallet-adapter-dropdown"},t.createElement(zn,(0,V.Z)({"aria-expanded":b,className:"wallet-adapter-button-trigger",style:(0,V.Z)({pointerEvents:b?"none":"auto"},r.style),onClick:E,startIcon:t.createElement(Nn,{wallet:s})},r),k),t.createElement("ul",{"aria-label":"dropdown-list",className:"wallet-adapter-dropdown-list ".concat(b&&"wallet-adapter-dropdown-list-active"),ref:w,role:"menu"},t.createElement("li",{onClick:A,className:"wallet-adapter-dropdown-list-item",role:"menuitem"},y?"Copied":"Copy address"),t.createElement("li",{onClick:S,className:"wallet-adapter-dropdown-list-item",role:"menuitem"},"Change wallet"),t.createElement("li",{onClick:f,className:"wallet-adapter-dropdown-list-item",role:"menuitem"},"Disconnect"))):t.createElement(Hn,(0,V.Z)({},r),n):t.createElement(Yn,(0,V.Z)({},r),n)},$n=n(80184);var Jn=function(e){var t=e.ear;return(0,$n.jsxs)("div",{className:"central-inner-container",children:[(0,$n.jsx)("h1",{className:"app-title",children:"\xf8hr"}),(0,$n.jsx)("h1",{className:"app-title-top",children:"\xf8hr"}),(0,$n.jsx)("button",{className:"huge-ear",children:(0,$n.jsx)("img",{src:t})})]})};var er=function(e){var n=e.recording,r=e.recUrl,o=(0,t.useState)(10),a=(0,i.Z)(o,2),s=a[0],u=a[1];return(0,t.useEffect)((function(){u(10)}),[r]),(0,t.useEffect)((function(){var e;return n&&s>0&&(e=setTimeout((function(){u((function(e){return e-1}))}),1e3)),function(){return clearTimeout(e)}}),[n,s]),(0,t.useEffect)((function(){n||u(s)}),[n]),(0,$n.jsxs)("div",{className:"timer",children:[" ",s]})},tr=function(e){var n=e.ear,r=e.setVisualisationView,o=e.onRecorded,a=(0,t.useState)(!1),s=(0,i.Z)(a,2),u=s[0],f=s[1],h=(0,t.useState)(!1),d=(0,i.Z)(h,2),p=d[0],y=d[1],m=(0,t.useState)(null),g=(0,i.Z)(m,2),v=g[0],b=g[1],_=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,navigator.getUserMedia&&console.log("RECORDING STARTED"),n=new MediaRecorder(t),r=[],n.ondataavailable=function(e){r.push(e.data)},n.onstop=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("RECORDING STOPPED"),n=new Blob(r,{type:"audio/wav; codecs=0"}),i=URL.createObjectURL(n),o(n),b(i),f(!1),y(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.start(),setTimeout((function(){n.stop()}),3e3);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v&&new Audio(v).play();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,$n.jsxs)($n.Fragment,{children:[(0,$n.jsxs)("div",{className:"central-inner-container",children:[(0,$n.jsx)(er,{recording:u,recUrl:v}),(0,$n.jsx)("h1",{className:"app-title",children:"\xf8hr"}),(0,$n.jsx)("h1",{className:"app-title-top",children:"\xf8hr"}),(0,$n.jsx)("button",{className:p?"huge-ear":"huge-ear rec",disabled:p,onClick:_,children:(0,$n.jsx)("img",{src:n})}),(0,$n.jsx)("p",{className:"text",children:"press and hold the ear to record a sound"})]}),p?(0,$n.jsxs)("div",{className:"btn-group btn-group-vertical grupped",children:[(0,$n.jsx)("button",{className:"btn",onClick:w,children:"play"}),(0,$n.jsx)("button",{className:"btn",onClick:function(){window.confirm("Are you sure you want to discard your audio?")&&(y(!1),b(null))},children:"discard"}),(0,$n.jsx)("button",{className:"btn",onClick:function(){r(!0),y(!1)},children:"continue"})]}):null]})},nr=function(){In();return(0,$n.jsx)("div",{className:"flex justify-center\t",children:(0,$n.jsx)(Qn,{className:"wallet-button glowing-border"})})},rr=n(83373),ir=n.n(rr);ir().accessToken="pk.eyJ1Ijoibm9hbWllMjIiLCJhIjoiY2xmMmoxZjYwMGowdjN5cG5vMXJzY2J4eCJ9.R1-JKFMkvmsuDf7Mk-CoNg";var or=function(){var e=(0,t.useRef)(null),n=(0,t.useRef)(null),r=(0,t.useState)(-70.9),o=(0,i.Z)(r,2),a=o[0],s=o[1],u=(0,t.useState)(42.35),c=(0,i.Z)(u,2),l=c[0],f=c[1],h=(0,t.useState)(1.25),d=(0,i.Z)(h,2),p=d[0],y=d[1];return ir().accessToken="pk.eyJ1Ijoibm9hbWllMjIiLCJhIjoiY2xmMmoxZjYwMGowdjN5cG5vMXJzY2J4eCJ9.R1-JKFMkvmsuDf7Mk-CoNg",(0,t.useEffect)((function(){n.current||(n.current=new(ir().Map)({container:e.current,style:"mapbox://styles/mapbox/dark-v10",center:[a,l],zoom:p}))})),(0,t.useEffect)((function(){n.current&&n.current.on("move",(function(){s(n.current.getCenter().lng.toFixed(4)),f(n.current.getCenter().lat.toFixed(4)),y(n.current.getZoom().toFixed(2))}))})),(0,$n.jsx)("div",{className:"map",children:(0,$n.jsx)("div",{ref:e,className:"map-container m-box"})})};var ar=function(){return(0,$n.jsxs)("div",{className:"navbar bg-base-100",children:[(0,$n.jsxs)("div",{className:"flex-1",children:[(0,$n.jsx)("label",{htmlFor:"my-modal-5",className:"btn btn-ghost normal-case text-xl",children:"NFT map"}),(0,$n.jsx)("input",{type:"checkbox",id:"my-modal-5",className:"modal-toggle"}),(0,$n.jsx)("label",{htmlFor:"my-modal-5",className:"modal cursor-pointer",children:(0,$n.jsx)("label",{className:"relative",htmlFor:"",children:(0,$n.jsx)(or,{})})})]}),(0,$n.jsx)("div",{className:"flex-none gap-2",children:(0,$n.jsx)("div",{className:"dropdown dropdown-end",children:(0,$n.jsx)(nr,{className:"btn btn-active"})})})]})};for(var sr=function(){return(0,$n.jsxs)("div",{className:"navbar bg-base-100",children:[(0,$n.jsxs)("div",{className:"flex-1",children:[(0,$n.jsx)("label",{htmlFor:"my-modal-4",className:"btn btn-ghost normal-case text-xl",children:"how it works"}),(0,$n.jsx)("input",{type:"checkbox",id:"my-modal-4",className:"modal-toggle"}),(0,$n.jsx)("label",{htmlFor:"my-modal-4",className:"modal cursor-pointer",children:(0,$n.jsx)("label",{className:"modal-box relative",htmlFor:"",children:(0,$n.jsxs)("div",{className:"py-4",children:[(0,$n.jsx)("h1",{children:"Inspired to capture a moment?"}),(0,$n.jsxs)("ol",{children:[(0,$n.jsx)("li",{children:"1. Hold the ohr button"}),(0,$n.jsx)("li",{children:"2. Listen, continue or re-record."}),(0,$n.jsx)("li",{children:"3. Do you want to add your location?"}),(0,$n.jsx)("li",{children:"4. A visual is generated."}),(0,$n.jsx)("li",{children:"5. Mint your NFT!"})]})]})})})]}),(0,$n.jsx)("div",{className:"flex-none gap-2",children:(0,$n.jsx)("div",{className:"flex-1",children:(0,$n.jsx)("a",{className:"btn btn-ghost text-xl fa-brands fa-twitter blue",href:"https://twitter.com/ohr_xyz",target:"_blank",rel:"noopener noreferrer"})})})]})},ur=function(e){var t=e.x,n=e.y,r=e.xx,i=e.yy;return(0,$n.jsx)("div",{children:(0,$n.jsxs)("div",{className:"dropdown dropdown-left dropdown-end",children:[(0,$n.jsx)("button",{tabIndex:0,className:"btn btn-ghost blue",onClick:function(){"geolocation"in navigator?navigator.geolocation.getCurrentPosition((function(e){t(e.coords.latitude),n(e.coords.longitude)}),(function(e){console.error(e)})):console.error("Geolocation is not supported")},children:"+ location"}),r&&i?(0,$n.jsx)("ul",{tabIndex:0,className:"dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52",children:(0,$n.jsxs)("li",{children:[" ",(0,$n.jsxs)("p",{children:["Location ",r,", ",i," was added."]})]})}):null]})})},cr=n(48972),lr=n.n(cr),fr=(n(75090),n(19778)),hr=n(11752),dr=n(61120),pr=n(4942),yr=n(80518),mr=n.n(yr),gr={},vr={byteLength:function(e){var t=Er(e),n=t[0],r=t[1];return 3*(n+r)/4-r},toByteArray:function(e){var t,n,r=Er(e),i=r[0],o=r[1],a=new wr(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=_r[e.charCodeAt(n)]<<18|_r[e.charCodeAt(n+1)]<<12|_r[e.charCodeAt(n+2)]<<6|_r[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=_r[e.charCodeAt(n)]<<2|_r[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=_r[e.charCodeAt(n)]<<10|_r[e.charCodeAt(n+1)]<<4|_r[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},fromByteArray:function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(Ir(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(br[t>>2]+br[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(br[t>>10]+br[t>>4&63]+br[t<<2&63]+"="));return i.join("")}},br=[],_r=[],wr="undefined"!==typeof Uint8Array?Uint8Array:Array,xr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kr=0,Ar=xr.length;kr<Ar;++kr)br[kr]=xr[kr],_r[xr.charCodeAt(kr)]=kr;function Er(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function Ir(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(br[(i=r)>>18&63]+br[i>>12&63]+br[i>>6&63]+br[63&i]);return o.join("")}_r["-".charCodeAt(0)]=62,_r["_".charCodeAt(0)]=63;var Sr={read:function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,l=-7,f=n?i-1:0,h=n?-1:1,d=e[t+f];for(f+=h,o=d&(1<<-l)-1,d>>=-l,l+=s;l>0;o=256*o+e[t+f],f+=h,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,r),o-=c}return(d?-1:1)*a*Math.pow(2,o-r)},write:function(e,t,n,r,i,o){var a,s,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+d]=255&s,d+=p,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[n+d]=255&a,d+=p,a/=256,c-=8);e[n+d-p]|=128*y}};!function(e){var t=vr,n=Sr,r="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=function(e){+e!=e&&(e=0);return a.alloc(+e)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function o(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,a.prototype),t}function a(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return s(e,t,n)}function s(e,t,n){if("string"===typeof e)return function(e,t){"string"===typeof t&&""!==t||(t="utf8");if(!a.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|g(e,t),r=o(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){var t=new Uint8Array(e);return y(t.buffer,t.byteOffset,t.byteLength)}return l(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return y(e,t,n);if("undefined"!==typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return y(e,t,n);if("number"===typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return a.from(r,t,n);var i=function(e){if(a.isBuffer(e)){var t=0|m(e.length),n=o(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!==typeof e.length||$(e.length)?o(0):l(e);if("Buffer"===e.type&&Array.isArray(e.data))return l(e.data)}(e);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof e[Symbol.toPrimitive])return a.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|m(e))}function l(e){for(var t=e.length<0?0:0|m(e.length),n=o(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function y(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,a.prototype),r}function m(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function g(e,t){if(a.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!==typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Y(e).length;default:if(i)return r?-1:q(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,n);case"utf8":case"utf-8":return T(this,t,n);case"ascii":return P(this,t,n);case"latin1":case"binary":return B(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function b(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function _(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),$(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function c(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(c(e,o)===c(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===u)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,h=0;h<u;h++)if(c(e,o+h)!==c(t,h)){f=!1;break}if(f)return o}return-1}function x(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o,a=t.length;for(r>a/2&&(r=a/2),o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if($(s))return o;e[n+o]=s}return o}function k(e,t,n,r){return X(q(t,e.length-n),e,n,r)}function A(e,t,n,r){return X(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function E(e,t,n,r){return X(Y(t),e,n,r)}function I(e,t,n,r){return X(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,n,r){return 0===n&&r===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(n,r))}function T(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o=e[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=n){var u=void 0,c=void 0,l=void 0,f=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:128===(192&(u=e[i+1]))&&(f=(31&o)<<6|63&u)>127&&(a=f);break;case 3:u=e[i+1],c=e[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c)>2047&&(f<55296||f>57343)&&(a=f);break;case 4:u=e[i+1],c=e[i+2],l=e[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l)>65535&&f<1114112&&(a=f)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return function(e){var t=e.length;if(t<=M)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=M));return n}(r)}e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(n){return!1}}(),a.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}}),a.poolSize=8192,a.from=function(e,t,n){return s(e,t,n)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array),a.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?o(e):void 0!==t?"string"===typeof n?o(e).fill(t,n):o(e).fill(t):o(e)}(e,t,n)},a.allocUnsafe=function(e){return c(e)},a.allocUnsafeSlow=function(e){return c(e)},a.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==a.prototype},a.compare=function(e,t){if(Q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=a.from(t,t.offset,t.byteLength)),!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(Q(o,Uint8Array))i+o.length>r.length?(a.isBuffer(o)||(o=a.from(o)),o.copy(r,i)):Uint8Array.prototype.set.call(r,o,i);else{if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)b(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},a.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?T(this,0,e):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(e,t,n,r,i){if(Q(e,Uint8Array)&&(e=a.from(e,e.offset,e.byteLength)),!a.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),u=Math.min(o,s),c=this.slice(r,i),l=e.slice(t,n),f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],s=l[f];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return _(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return _(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,e,t,n);case"utf8":case"utf-8":return k(this,e,t,n);case"ascii":case"latin1":case"binary":return A(this,e,t,n);case"base64":return E(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var M=4096;function P(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function C(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=J[e[o]];return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r,i){V(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,n}function z(e,t,n,r,i){V(t,r,i,e,n,7);var o=Number(t&BigInt(4294967295));e[n+7]=o,o>>=8,e[n+6]=o,o>>=8,e[n+5]=o,o>>=8,e[n+4]=o;var a=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=a,a>>=8,e[n+2]=a,a>>=8,e[n+1]=a,a>>=8,e[n]=a,n+8}function Z(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function N(e,t,r,i,o){return t=+t,r>>>=0,o||Z(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function U(e,t,r,i,o){return t=+t,r>>>=0,o||Z(e,0,r,8),n.write(e,t,r,i,52,8),r+8}a.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,a.prototype),r},a.prototype.readUintLE=a.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},a.prototype.readUintBE=a.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUint8=a.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readBigUInt64LE=ee((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);var r=t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24),i=this[++e]+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+n*Math.pow(2,24);return BigInt(r)+(BigInt(i)<<BigInt(32))})),a.prototype.readBigUInt64BE=ee((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);var r=t*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e],i=this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),a.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},a.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readBigInt64LE=ee((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);var r=this[e+4]+this[e+5]*Math.pow(2,8)+this[e+6]*Math.pow(2,16)+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+this[++e]*Math.pow(2,8)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,24))})),a.prototype.readBigInt64BE=ee((function(e){K(e>>>=0,"offset");var t=this[e],n=this[e+7];void 0!==t&&void 0!==n||G(e,this.length-8);var r=(t<<24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*Math.pow(2,24)+this[++e]*Math.pow(2,16)+this[++e]*Math.pow(2,8)+n)})),a.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),n.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),n.read(this,e,!1,52,8)},a.prototype.writeUintLE=a.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},a.prototype.writeUint8=a.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigUInt64LE=ee((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeBigUInt64BE=ee((function(e){return z(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},a.prototype.writeBigInt64LE=ee((function(e){return L(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeBigInt64BE=ee((function(e){return z(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),a.prototype.writeFloatLE=function(e,t,n){return N(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return N(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(!a.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},a.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e?e&=255:"boolean"===typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:a.from(e,r),u=s.length;if(0===u)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=s[o%u]}return this};var F={};function j(e,t,n){F[e]=function(n){(0,d.Z)(i,n);var r=(0,p.Z)(i);function i(){var n;return(0,f.Z)(this,i),n=r.call(this),Object.defineProperty((0,Tt.Z)(n),"message",{value:t.apply((0,Tt.Z)(n),arguments),writable:!0,configurable:!0}),n.name="".concat(n.name," [").concat(e,"]"),n.stack,delete n.name,n}return(0,h.Z)(i,[{key:"code",get:function(){return e},set:function(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(e,"]: ").concat(this.message)}}]),i}(n)}function W(e){for(var t="",n=e.length,r="-"===e[0]?1:0;n>=r+4;n-=3)t="_".concat(e.slice(n-3,n)).concat(t);return"".concat(e.slice(0,n)).concat(t)}function V(e,t,n,r,i,o){if(e>n||e<t){var a,s="bigint"===typeof t?"n":"";throw a=o>3?0===t||t===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat(8*(o+1)).concat(s):">= -(2".concat(s," ** ").concat(8*(o+1)-1).concat(s,") and < 2 ** ")+"".concat(8*(o+1)-1).concat(s):">= ".concat(t).concat(s," and <= ").concat(n).concat(s),new F.ERR_OUT_OF_RANGE("value",a,e)}!function(e,t,n){K(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||G(t,e.length-(n+1))}(r,i,o)}function K(e,t){if("number"!==typeof e)throw new F.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,n){if(Math.floor(e)!==e)throw K(e,n),new F.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new F.ERR_BUFFER_OUT_OF_BOUNDS;throw new F.ERR_OUT_OF_RANGE(n||"offset",">= ".concat(n?1:0," and <= ").concat(t),e)}j("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?"".concat(e," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"}),RangeError),j("ERR_INVALID_ARG_TYPE",(function(e,t){return'The "'.concat(e,'" argument must be of type number. Received type ').concat(typeof t)}),TypeError),j("ERR_OUT_OF_RANGE",(function(e,t,n){var r='The value of "'.concat(e,'" is out of range.'),i=n;return Number.isInteger(n)&&Math.abs(n)>Math.pow(2,32)?i=W(String(n)):"bigint"===typeof n&&(i=String(n),(n>Math.pow(BigInt(2),BigInt(32))||n<-Math.pow(BigInt(2),BigInt(32)))&&(i=W(i)),i+="n"),r+=" It must be ".concat(t,". Received ").concat(i)}),RangeError);var H=/[^+/0-9A-Za-z-_]/g;function q(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(H,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function X(e,t,n,r){var i;for(i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function $(e){return e!==e}var J=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}();function ee(e){return"undefined"===typeof BigInt?te:e}function te(){throw new Error("BigInt not supported")}}(gr);var Tr="undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},Mr="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};function Pr(e,t){var n={seen:[],stylize:Cr};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),Lr(t)?n.showHidden=t:t&&function(e,t){if(!t||!Fr(t))return e;var n=Object.keys(t),r=n.length;for(;r--;)e[n[r]]=t[n[r]]}(n,t),Nr(n.showHidden)&&(n.showHidden=!1),Nr(n.depth)&&(n.depth=2),Nr(n.colors)&&(n.colors=!1),Nr(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Br),Or(n,e,n.depth)}function Br(e,t){var n=Pr.styles[t];return n?"\x1b["+Pr.colors[n][0]+"m"+e+"\x1b["+Pr.colors[n][1]+"m":e}function Cr(e,t){return e}function Or(e,t,n){if(e.customInspect&&t&&Vr(t.inspect)&&t.inspect!==Pr&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return Zr(r)||(r=Or(e,r,n)),r}var i=function(e,t){if(Nr(t))return e.stylize("undefined","undefined");if(Zr(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}if(r=t,"number"===typeof r)return e.stylize(""+t,"number");var r;if(Lr(t))return e.stylize(""+t,"boolean");if(zr(t))return e.stylize("null","null")}(e,t);if(i)return i;var o=Object.keys(t),a=function(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(t)),Wr(t)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return Dr(t);if(0===o.length){if(Vr(t)){var s=t.name?": "+t.name:"";return e.stylize("[Function"+s+"]","special")}if(Ur(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(jr(t))return e.stylize(Date.prototype.toString.call(t),"date");if(Wr(t))return Dr(t)}var u,c,l="",f=!1,h=["{","}"];(u=t,Array.isArray(u)&&(f=!0,h=["[","]"]),Vr(t))&&(l=" [Function"+(t.name?": "+t.name:"")+"]");return Ur(t)&&(l=" "+RegExp.prototype.toString.call(t)),jr(t)&&(l=" "+Date.prototype.toUTCString.call(t)),Wr(t)&&(l=" "+Dr(t)),0!==o.length||f&&0!=t.length?n<0?Ur(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special"):(e.seen.push(t),c=f?function(e,t,n,r,i){for(var o=[],a=0,s=t.length;a<s;++a)Hr(t,String(a))?o.push(Rr(e,t,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(Rr(e,t,n,r,i,!0))})),o}(e,t,n,a,o):o.map((function(r){return Rr(e,t,n,a,r,f)})),e.seen.pop(),function(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);if(r>60)return n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1];return n[0]+t+" "+e.join(", ")+" "+n[1]}(c,l,h)):h[0]+l+h[1]}function Dr(e){return"["+Error.prototype.toString.call(e)+"]"}function Rr(e,t,n,r,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),Hr(r,i)||(a="["+i+"]"),s||(e.seen.indexOf(u.value)<0?(s=zr(n)?Or(e,u.value,null):Or(e,u.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),Nr(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function Lr(e){return"boolean"===typeof e}function zr(e){return null===e}function Zr(e){return"string"===typeof e}function Nr(e){return void 0===e}function Ur(e){return Fr(e)&&"[object RegExp]"===Gr(e)}function Fr(e){return"object"===typeof e&&null!==e}function jr(e){return Fr(e)&&"[object Date]"===Gr(e)}function Wr(e){return Fr(e)&&("[object Error]"===Gr(e)||e instanceof Error)}function Vr(e){return"function"===typeof e}function Kr(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function Gr(e){return Object.prototype.toString.call(e)}function Hr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function qr(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}Pr.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Pr.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var Yr,Xr=Object.prototype.hasOwnProperty,Qr=Object.keys||function(e){var t=[];for(var n in e)Xr.call(e,n)&&t.push(n);return t},$r=Array.prototype.slice;function Jr(){return"undefined"!==typeof Yr?Yr:Yr="foo"===function(){}.name}function ei(e){return Object.prototype.toString.call(e)}function ti(e){return!gr.isBuffer(e)&&("function"===typeof Tr.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}function ni(e,t){e||ui(e,!0,t,"==",ci)}var ri=/\s*function\s+([^\(\s]*)\s*/;function ii(e){if(Vr(e)){if(Jr())return e.name;var t=e.toString().match(ri);return t&&t[1]}}function oi(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return ai(si(e.actual),128)+" "+e.operator+" "+ai(si(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||ui;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=ii(t),o=r.indexOf("\n"+i);if(o>=0){var a=r.indexOf("\n",o+1);r=r.substring(a+1)}this.stack=r}}}function ai(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function si(e){if(Jr()||!Vr(e))return Pr(e);var t=ii(e);return"[Function"+(t?": "+t:"")+"]"}function ui(e,t,n,r,i){throw new oi({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function ci(e,t){e||ui(e,!0,t,"==",ci)}function li(e,t,n,r){if(e===t)return!0;if(gr.isBuffer(e)&&gr.isBuffer(t))return 0===qr(e,t);if(jr(e)&&jr(t))return e.getTime()===t.getTime();if(Ur(e)&&Ur(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(ti(e)&&ti(t)&&ei(e)===ei(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===qr(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(gr.isBuffer(e)!==gr.isBuffer(t))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(e);return-1!==i&&i===r.expected.indexOf(t)||(r.actual.push(e),r.expected.push(t),function(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(Kr(e)||Kr(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=fi(e),o=fi(t);if(i&&!o||!i&&o)return!1;if(i)return li(e=$r.call(e),t=$r.call(t),n);var a,s,u=Qr(e),c=Qr(t);if(u.length!==c.length)return!1;for(u.sort(),c.sort(),s=u.length-1;s>=0;s--)if(u[s]!==c[s])return!1;for(s=u.length-1;s>=0;s--)if(!li(e[a=u[s]],t[a],n,r))return!1;return!0}(e,t,n,r))}return n?e===t:e==t}function fi(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function hi(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(n){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function di(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=function(e){var t;try{e()}catch(n){t=n}return t}(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&ui(i,n,"Missing expected exception"+r);var o="string"===typeof r,a=!e&&i&&!n;if((!e&&Wr(i)&&o&&hi(i,n)||a)&&ui(i,n,"Got unwanted exception"+r),e&&i&&n&&!hi(i,n)||!e&&i)throw i}ni.AssertionError=oi,Mr(oi,Error),ni.fail=ui,ni.ok=ci,ni.equal=function e(t,n,r){t!=n&&ui(t,n,r,"==",e)},ni.notEqual=function e(t,n,r){t==n&&ui(t,n,r,"!=",e)},ni.deepEqual=function e(t,n,r){li(t,n,!1)||ui(t,n,r,"deepEqual",e)},ni.deepStrictEqual=function e(t,n,r){li(t,n,!0)||ui(t,n,r,"deepStrictEqual",e)},ni.notDeepEqual=function e(t,n,r){li(t,n,!1)&&ui(t,n,r,"notDeepEqual",e)},ni.notDeepStrictEqual=function e(t,n,r){li(t,n,!0)&&ui(t,n,r,"notDeepStrictEqual",e)},ni.strictEqual=function e(t,n,r){t!==n&&ui(t,n,r,"===",e)},ni.notStrictEqual=function e(t,n,r){t===n&&ui(t,n,r,"!==",e)},ni.throws=function(e,t,n){di(!0,e,t,n)},ni.doesNotThrow=function(e,t,n){di(!1,e,t,n)},ni.ifError=function(e){if(e)throw e};var pi={},yi=function(){function e(t,n){if((0,f.Z)(this,e),!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=n}return(0,h.Z)(e,[{key:"makeDestinationObject",value:function(){return{}}},{key:"decode",value:function(e,t){throw new Error("Layout is abstract")}},{key:"encode",value:function(e,t,n){throw new Error("Layout is abstract")}},{key:"getSpan",value:function(e,t){if(0>this.span)throw new RangeError("indeterminate span");return this.span}},{key:"replicate",value:function(e){var t=Object.create(this.constructor.prototype);return Object.assign(t,this),t.property=e,t}},{key:"fromArray",value:function(e){}}]),e}();function mi(e,t){return t.property?e+"["+t.property+"]":e}pi.Layout=yi,pi.nameWithProperty=mi,pi.bindConstructorLayout=function(e,t){if("function"!==typeof e)throw new TypeError("Class must be constructor");if(e.hasOwnProperty("layout_"))throw new Error("Class is already bound to a layout");if(!(t&&t instanceof yi))throw new TypeError("layout must be a Layout");if(t.hasOwnProperty("boundConstructor_"))throw new Error("layout is already bound to a constructor");e.layout_=t,t.boundConstructor_=e,t.makeDestinationObject=function(){return new e},Object.defineProperty(e.prototype,"encode",{value:function(e,n){return t.encode(this,e,n)},writable:!0}),Object.defineProperty(e,"decode",{value:function(e,n){return t.decode(e,n)},writable:!0})};var gi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"isCount",value:function(){throw new Error("ExternalLayout is abstract")}}]),n}(yi),vi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),void 0===e&&(e=1),!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");return(i=t.call(this,-1,r)).elementSpan=e,i}return(0,h.Z)(n,[{key:"isCount",value:function(){return!0}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.length-t;return Math.floor(n/this.elementSpan)}},{key:"encode",value:function(e,t,n){return 0}}]),n}(gi),bi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;if((0,f.Z)(this,n),!(e instanceof yi))throw new TypeError("layout must be a Layout");if(void 0===r)r=0;else if(!Number.isInteger(r))throw new TypeError("offset must be integer or undefined");return(o=t.call(this,e.span,i||e.property)).layout=e,o.offset=r,o}return(0,h.Z)(n,[{key:"isCount",value:function(){return this.layout instanceof _i||this.layout instanceof wi}},{key:"decode",value:function(e,t){return void 0===t&&(t=0),this.layout.decode(e,t+this.offset)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),this.layout.encode(e,t,n+this.offset)}}]),n}(gi),_i=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntLE(e,n,this.span),this.span}}]),n}(yi),wi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readUIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeUIntBE(e,n,this.span),this.span}}]),n}(yi),xi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntLE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntLE(e,n,this.span),this.span}}]),n}(yi),ki=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),6<(i=t.call(this,e,r)).span)throw new RangeError("span must not exceed 6 bytes");return i}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readIntBE(t,this.span)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeIntBE(e,n,this.span),this.span}}]),n}(yi),Ai=Math.pow(2,32);function Ei(e){var t=Math.floor(e/Ai);return{hi32:t,lo32:e-t*Ai}}function Ii(e,t){return e*Ai+t}var Si=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Ii(e.readUInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ei(e);return t.writeUInt32LE(r.lo32,n),t.writeUInt32LE(r.hi32,n+4),8}}]),n}(yi),Ti=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Ii(e.readUInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ei(e);return t.writeUInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(yi),Mi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=e.readUInt32LE(t);return Ii(e.readInt32LE(t+4),n)}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ei(e);return t.writeUInt32LE(r.lo32,n),t.writeInt32LE(r.hi32,n+4),8}}]),n}(yi),Pi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),Ii(e.readInt32BE(t),e.readUInt32BE(t+4))}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=Ei(e);return t.writeInt32BE(r.hi32,n),t.writeUInt32BE(r.lo32,n+4),8}}]),n}(yi),Bi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,4,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatLE(e,n),4}}]),n}(yi),Ci=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,4,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readFloatBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeFloatBE(e,n),4}}]),n}(yi),Oi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleLE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleLE(e,n),8}}]),n}(yi),Di=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,8,e)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return void 0===t&&(t=0),e.readDoubleBE(t)}},{key:"encode",value:function(e,t,n){return void 0===n&&(n=0),t.writeDoubleBE(e,n),8}}]),n}(yi),Ri=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;if((0,f.Z)(this,n),!(e instanceof yi))throw new TypeError("elementLayout must be a Layout");if(!(r instanceof gi&&r.isCount()||Number.isInteger(r)&&0<=r))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");var a=-1;return!(r instanceof gi)&&0<e.span&&(a=r*e.span),(o=t.call(this,a,i)).elementLayout=e,o.count=r,o}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0,r=this.count;if(r instanceof gi&&(r=r.decode(e,t)),0<this.elementLayout.span)n=r*this.elementLayout.span;else for(var i=0;i<r;)n+=this.elementLayout.getSpan(e,t+n),++i;return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=[],r=0,i=this.count;for(i instanceof gi&&(i=i.decode(e,t));r<i;)n.push(this.elementLayout.decode(e,t)),t+=this.elementLayout.getSpan(e,t),r+=1;return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.elementLayout,i=e.reduce((function(e,i){return e+r.encode(i,t,n+e)}),0);return this.count instanceof gi&&this.count.encode(e.length,t,n),i}}]),n}(yi),Li=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;if((0,f.Z)(this,n),!Array.isArray(e)||!e.reduce((function(e,t){return e&&t instanceof yi}),!0))throw new TypeError("fields must be array of Layout instances");"boolean"===typeof r&&void 0===i&&(i=r,r=void 0);var a,s=(0,y.Z)(e);try{for(s.s();!(a=s.n()).done;){var u=a.value;if(0>u.span&&void 0===u.property)throw new Error("fields cannot contain unnamed variable-length layout")}}catch(l){s.e(l)}finally{s.f()}var c=-1;try{c=e.reduce((function(e,t){return e+t.getSpan()}),0)}catch(h){}return(o=t.call(this,c,r)).fields=e,o.decodePrefixes=!!i,o}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;try{n=this.fields.reduce((function(n,r){var i=r.getSpan(e,t);return t+=i,n+i}),0)}catch(r){throw new RangeError("indeterminate span")}return n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n,r=this.makeDestinationObject(),i=(0,y.Z)(this.fields);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(void 0!==o.property&&(r[o.property]=o.decode(e,t)),t+=o.getSpan(e,t),this.decodePrefixes&&e.length===t)break}}catch(a){i.e(a)}finally{i.f()}return r}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r,i=n,o=0,a=0,s=(0,y.Z)(this.fields);try{for(s.s();!(r=s.n()).done;){var u=r.value,c=u.span;if(a=0<c?c:0,void 0!==u.property){var l=e[u.property];void 0!==l&&(a=u.encode(l,t,n),0>c&&(c=u.getSpan(t,n)))}o=n,n+=c}}catch(f){s.e(f)}finally{s.f()}return o+a-i}},{key:"fromArray",value:function(e){var t,n=this.makeDestinationObject(),r=(0,y.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;void 0!==i.property&&0<e.length&&(n[i.property]=e.shift())}}catch(o){r.e(o)}finally{r.f()}return n}},{key:"layoutFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,y.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}},{key:"offsetOf",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=0,r=(0,y.Z)(this.fields);try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}catch(o){r.e(o)}finally{r.f()}}}]),n}(yi),zi=function(){function e(t){(0,f.Z)(this,e),this.property=t}return(0,h.Z)(e,[{key:"decode",value:function(){throw new Error("UnionDiscriminator is abstract")}},{key:"encode",value:function(){throw new Error("UnionDiscriminator is abstract")}}]),e}(),Zi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),!(e instanceof gi&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");return(i=t.call(this,r||e.property||"variant")).layout=e,i}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return this.layout.decode(e,t)}},{key:"encode",value:function(e,t,n){return this.layout.encode(e,t,n)}}]),n}(zi),Ni=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;(0,f.Z)(this,n);var a=e instanceof _i||e instanceof wi;if(a)e=new Zi(new bi(e));else if(e instanceof gi&&e.isCount())e=new Zi(e);else if(!(e instanceof zi))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===r&&(r=null),!(null===r||r instanceof yi))throw new TypeError("defaultLayout must be null or a Layout");if(null!==r){if(0>r.span)throw new Error("defaultLayout must have constant span");void 0===r.property&&(r=r.replicate("content"))}var s=-1;r&&0<=(s=r.span)&&a&&(s+=e.layout.span),(o=t.call(this,s,i)).discriminator=e,o.usesPrefixDiscriminator=a,o.defaultLayout=r,o.registry={};var u=o.defaultGetSourceVariant.bind((0,Tt.Z)(o));return o.getSourceVariant=function(e){return u(e)},o.configGetSourceVariant=function(e){u=e.bind(this)},o}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=this.getVariant(e,t);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(e,t)}},{key:"defaultGetSourceVariant",value:function(e){if(e.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&e.hasOwnProperty(this.defaultLayout.property))return;var t=this.registry[e[this.discriminator.property]];if(t&&(!t.layout||e.hasOwnProperty(t.property)))return t}else for(var n in this.registry){var r=this.registry[n];if(e.hasOwnProperty(r.property))return r}throw new Error("unable to infer src variant")}},{key:"decode",value:function(e,t){var n;void 0===t&&(t=0);var r=this.discriminator,i=r.decode(e,t),o=this.registry[i];if(void 0===o){var a=0;o=this.defaultLayout,this.usesPrefixDiscriminator&&(a=r.layout.span),(n=this.makeDestinationObject())[r.property]=i,n[o.property]=this.defaultLayout.decode(e,t+a)}else n=o.decode(e,t);return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.getSourceVariant(e);if(void 0===r){var i=this.discriminator,o=this.defaultLayout,a=0;return this.usesPrefixDiscriminator&&(a=i.layout.span),i.encode(e[i.property],t,n),a+o.encode(e[o.property],t,n+a)}return r.encode(e,t,n)}},{key:"addVariant",value:function(e,t,n){var r=new Ui(this,e,t,n);return this.registry[e]=r,r}},{key:"getVariant",value:function(e,t){var n=e;return gr.Buffer.isBuffer(e)&&(void 0===t&&(t=0),n=this.discriminator.decode(e,t)),this.registry[n]}}]),n}(yi),Ui=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i,o){var a;if((0,f.Z)(this,n),!(e instanceof Ni))throw new TypeError("union must be a Union");if(!Number.isInteger(r)||0>r)throw new TypeError("variant must be a (non-negative) integer");if("string"===typeof i&&void 0===o&&(o=i,i=null),i){if(!(i instanceof yi))throw new TypeError("layout must be a Layout");if(null!==e.defaultLayout&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!==typeof o)throw new TypeError("variant must have a String property")}var s=e.span;return 0>e.span&&0<=(s=i?i.span:0)&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span),(a=t.call(this,s,o)).union=e,a.variant=r,a.layout=i||null,a}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(0<=this.span)return this.span;void 0===t&&(t=0);var n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(e,t+n)}},{key:"decode",value:function(e,t){var n=this.makeDestinationObject();if(void 0===t&&(t=0),this!==this.union.getVariant(e,t))throw new Error("variant mismatch");var r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(e,t+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!e.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,t,n);var i=r;if(this.layout&&(this.layout.encode(e[this.property],t,n+r),i+=this.layout.getSpan(t,n+r),0<=this.union.span&&i>this.union.span))throw new Error("encoded variant overruns containing union");return i}},{key:"fromArray",value:function(e){if(this.layout)return this.layout.fromArray(e)}}]),n}(yi);function Fi(e){return 0>e&&(e+=4294967296),e}var ji=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r,i){var o;if((0,f.Z)(this,n),!(e instanceof _i||e instanceof wi))throw new TypeError("word must be a UInt or UIntBE layout");if("string"===typeof r&&void 0===i&&(i=r,r=void 0),4<e.span)throw new RangeError("word cannot exceed 32 bits");(o=t.call(this,e.span,i)).word=e,o.msb=!!r,o.fields=[];var a=0;return o._packedSetValue=function(e){return a=Fi(e),this},o._packedGetValue=function(){return a},o}return(0,h.Z)(n,[{key:"decode",value:function(e,t){var n=this.makeDestinationObject();void 0===t&&(t=0);var r=this.word.decode(e,t);this._packedSetValue(r);var i,o=(0,y.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;void 0!==a.property&&(n[a.property]=a.decode(r))}}catch(s){o.e(s)}finally{o.f()}return n}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0);var r=this.word.decode(t,n);this._packedSetValue(r);var i,o=(0,y.Z)(this.fields);try{for(o.s();!(i=o.n()).done;){var a=i.value;if(void 0!==a.property){var s=e[a.property];void 0!==s&&a.encode(s)}}}catch(u){o.e(u)}finally{o.f()}return this.word.encode(this._packedGetValue(),t,n)}},{key:"addField",value:function(e,t){var n=new Wi(this,e,t);return this.fields.push(n),n}},{key:"addBoolean",value:function(e){var t=new Vi(this,e);return this.fields.push(t),t}},{key:"fieldFor",value:function(e){if("string"!==typeof e)throw new TypeError("property must be string");var t,n=(0,y.Z)(this.fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.property===e)return r}}catch(i){n.e(i)}finally{n.f()}}}]),n}(yi),Wi=function(){function e(t,n,r){if((0,f.Z)(this,e),!(t instanceof ji))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");var i=8*t.span,o=t.fields.reduce((function(e,t){return e+t.bits}),0);if(n+o>i)throw new Error("bits too long for span remainder ("+(i-o)+" of "+i+" remain)");this.container=t,this.bits=n,this.valueMask=(1<<n)-1,32===n&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=i-o-n),this.wordMask=Fi(this.valueMask<<this.start),this.property=r}return(0,h.Z)(e,[{key:"decode",value:function(){return Fi(this.container._packedGetValue()&this.wordMask)>>>this.start}},{key:"encode",value:function(e){if(!Number.isInteger(e)||e!==Fi(e&this.valueMask))throw new TypeError(mi("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);var t=this.container._packedGetValue(),n=Fi(e<<this.start);this.container._packedSetValue(Fi(t&~this.wordMask)|n)}}]),e}(),Vi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){return(0,f.Z)(this,n),t.call(this,e,1,r)}return(0,h.Z)(n,[{key:"decode",value:function(e,t){return!!Wi.prototype.decode.call(this,e,t)}},{key:"encode",value:function(e){return"boolean"===typeof e&&(e=+e),Wi.prototype.encode.call(this,e)}}]),n}(Wi),Ki=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),!(e instanceof gi&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");var o=-1;return e instanceof gi||(o=e),(i=t.call(this,o,r)).length=e,i}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){var n=this.span;return 0>n&&(n=this.length.decode(e,t)),n}},{key:"decode",value:function(e,t){void 0===t&&(t=0);var n=this.span;return 0>n&&(n=this.length.decode(e,t)),e.slice(t,t+n)}},{key:"encode",value:function(e,t,n){var r=this.length;if(this.length instanceof gi&&(r=e.length),!gr.Buffer.isBuffer(e)||r!==e.length)throw new TypeError(mi("Blob.encode",this)+" requires (length "+r+") Buffer as src");if(n+r>t.length)throw new RangeError("encoding overruns Buffer");return t.write(e.toString("hex"),n,r,"hex"),this.length instanceof gi&&this.length.encode(r,t,n),r}}]),n}(yi),Gi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e){return(0,f.Z)(this,n),t.call(this,-1,e)}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(!gr.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");void 0===t&&(t=0);for(var n=t;n<e.length&&0!==e[n];)n+=1;return 1+n-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);return e.slice(t,t+r-1).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new gr.Buffer(e,"utf8"),i=r.length;if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),t[n+i]=0,i+1}}]),n}(yi),Hi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;if((0,f.Z)(this,n),"string"===typeof e&&void 0===r&&(r=e,e=void 0),void 0===e)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");return(i=t.call(this,-1,r)).maxSpan=e,i}return(0,h.Z)(n,[{key:"getSpan",value:function(e,t){if(!gr.Buffer.isBuffer(e))throw new TypeError("b must be a Buffer");return void 0===t&&(t=0),e.length-t}},{key:"decode",value:function(e,t,n){void 0===t&&(t=0);var r=this.getSpan(e,t);if(0<=this.maxSpan&&this.maxSpan<r)throw new RangeError("text length exceeds maxSpan");return e.slice(t,t+r).toString("utf-8")}},{key:"encode",value:function(e,t,n){void 0===n&&(n=0),"string"!==typeof e&&(e=e.toString());var r=new gr.Buffer(e,"utf8"),i=r.length;if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");if(n+i>t.length)throw new RangeError("encoding overruns Buffer");return r.copy(t,n),i}}]),n}(yi),qi=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;return(0,f.Z)(this,n),(i=t.call(this,0,r)).value=e,i}return(0,h.Z)(n,[{key:"decode",value:function(e,t,n){return this.value}},{key:"encode",value:function(e,t,n){return 0}}]),n}(yi);pi.ExternalLayout=gi,pi.GreedyCount=vi,pi.OffsetLayout=bi,pi.UInt=_i,pi.UIntBE=wi,pi.Int=xi,pi.IntBE=ki,pi.Float=Bi,pi.FloatBE=Ci,pi.Double=Oi,pi.DoubleBE=Di,pi.Sequence=Ri,pi.Structure=Li,pi.UnionDiscriminator=zi,pi.UnionLayoutDiscriminator=Zi,pi.Union=Ni,pi.VariantLayout=Ui,pi.BitStructure=ji,pi.BitField=Wi,pi.Boolean=Vi,pi.Blob=Ki,pi.CString=Gi,pi.UTF8=Hi,pi.Constant=qi,pi.greedy=function(e,t){return new vi(e,t)},pi.offset=function(e,t,n){return new bi(e,t,n)};var Yi=pi.u8=function(e){return new _i(1,e)};pi.u16=function(e){return new _i(2,e)},pi.u24=function(e){return new _i(3,e)};var Xi=pi.u32=function(e){return new _i(4,e)};pi.u40=function(e){return new _i(5,e)},pi.u48=function(e){return new _i(6,e)},pi.nu64=function(e){return new Si(e)},pi.u16be=function(e){return new wi(2,e)},pi.u24be=function(e){return new wi(3,e)},pi.u32be=function(e){return new wi(4,e)},pi.u40be=function(e){return new wi(5,e)},pi.u48be=function(e){return new wi(6,e)},pi.nu64be=function(e){return new Ti(e)},pi.s8=function(e){return new xi(1,e)},pi.s16=function(e){return new xi(2,e)},pi.s24=function(e){return new xi(3,e)},pi.s32=function(e){return new xi(4,e)},pi.s40=function(e){return new xi(5,e)},pi.s48=function(e){return new xi(6,e)},pi.ns64=function(e){return new Mi(e)},pi.s16be=function(e){return new ki(2,e)},pi.s24be=function(e){return new ki(3,e)},pi.s32be=function(e){return new ki(4,e)},pi.s40be=function(e){return new ki(5,e)},pi.s48be=function(e){return new ki(6,e)},pi.ns64be=function(e){return new Pi(e)},pi.f32=function(e){return new Bi(e)},pi.f32be=function(e){return new Ci(e)},pi.f64=function(e){return new Oi(e)},pi.f64be=function(e){return new Di(e)};var Qi=pi.struct=function(e,t,n){return new Li(e,t,n)};pi.bits=function(e,t,n){return new ji(e,t,n)},pi.seq=function(e,t,n){return new Ri(e,t,n)},pi.union=function(e,t,n){return new Ni(e,t,n)},pi.unionLayoutDiscriminator=function(e,t){return new Zi(e,t)};var $i=pi.blob=function(e,t){return new Ki(e,t)};pi.cstr=function(e){return new Gi(e)},pi.utf8=function(e,t){return new Hi(e,t)},pi.const=function(e,t){return new qi(e,t)};var Ji=function(){return $i(32,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"publicKey")},eo=function(){return $i(8,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"uint64")};function to(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];return(0,o.sendAndConfirmTransaction)(t,n,i,{skipPreflight:!1})}var no=new o.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),ro=new o.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),io="Failed to find account",oo="Invalid account owner";function ao(e){return gr.Buffer.from(e.toBuffer())}var so=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,f.Z)(this,n),t.apply(this,arguments)}return(0,h.Z)(n,[{key:"toBuffer",value:function(){var e=(0,hr.Z)((0,dr.Z)(n.prototype),"toArray",this).call(this).reverse(),t=gr.Buffer.from(e);if(8===t.length)return t;ni(t.length<8,"u64 too large");var r=gr.Buffer.alloc(8);return t.copy(r),r}}],[{key:"fromBuffer",value:function(e){return ni(8===e.length,"Invalid buffer length: ".concat(e.length)),new n((0,s.Z)(e).reverse().map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),16)}}]),n}(mr());function uo(e){return"publicKey"in e}var co,lo={MintTokens:0,FreezeAccount:1,AccountOwner:2,CloseAccount:3},fo=new o.PublicKey("So11111111111111111111111111111111111111112"),ho=Qi([Xi("mintAuthorityOption"),Ji("mintAuthority"),eo("supply"),Yi("decimals"),Yi("isInitialized"),Xi("freezeAuthorityOption"),Ji("freezeAuthority")]),po=Qi([Ji("mint"),Ji("owner"),eo("amount"),Xi("delegateOption"),Ji("delegate"),Yi("state"),Xi("isNativeOption"),eo("isNative"),eo("delegatedAmount"),Xi("closeAuthorityOption"),Ji("closeAuthority")]),yo=Qi([Yi("m"),Yi("n"),Yi("is_initialized"),Ji("signer1"),Ji("signer2"),Ji("signer3"),Ji("signer4"),Ji("signer5"),Ji("signer6"),Ji("signer7"),Ji("signer8"),Ji("signer9"),Ji("signer10"),Ji("signer11")]),mo=function(){function e(t,n,r,i){(0,f.Z)(this,e),(0,pr.Z)(this,"connection",void 0),(0,pr.Z)(this,"publicKey",void 0),(0,pr.Z)(this,"programId",void 0),(0,pr.Z)(this,"associatedProgramId",void 0),(0,pr.Z)(this,"payer",void 0),Object.assign(this,{connection:t,publicKey:n,programId:r,payer:i,associatedProgramId:ro})}return(0,h.Z)(e,[{key:"createAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){var r,i,a,s;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(this.connection);case 2:return r=t.sent,i=o.Keypair.generate(),(a=new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:i.publicKey,lamports:r,space:po.span,programId:this.programId})),s=this.publicKey,a.add(e.createInitAccountInstruction(this.programId,s,i.publicKey,n)),t.next=10,to("createAccount and InitializeAccount",this.connection,a,this.payer,i);case 10:return t.abrupt("return",i.publicKey);case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return r=t.sent,t.abrupt("return",this.createAssociatedTokenAccountInternal(n,r));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInternal",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,to("CreateAssociatedTokenAccount",this.connection,(new o.Transaction).add(e.createAssociatedTokenAccountInstruction(this.associatedProgramId,this.programId,this.publicKey,r,n,this.payer.publicKey)),this.payer);case 2:return t.abrupt("return",r);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getOrCreateAssociatedAccountInfo",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){var r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAssociatedTokenAddress(this.associatedProgramId,this.programId,this.publicKey,n);case 2:return r=t.sent,t.prev=3,t.next=6,this.getAccountInfo(r);case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(3),t.t0.message!==io&&t.t0.message!==oo){t.next=24;break}return t.prev=12,t.next=15,this.createAssociatedTokenAccountInternal(n,r);case 15:t.next=19;break;case 17:t.prev=17,t.t1=t.catch(12);case 19:return t.next=21,this.getAccountInfo(r);case 21:return t.abrupt("return",t.sent);case 24:throw t.t0;case 25:case"end":return t.stop()}}),t,this,[[3,9],[12,17]])})));return function(e){return t.apply(this,arguments)}}()},{key:"createMultisig",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r){var i,a,s,u,l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=o.Keypair.generate(),t.next=3,e.getMinBalanceRentForExemptMultisig(this.connection);case 3:return a=t.sent,(s=new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:this.payer.publicKey,newAccountPubkey:i.publicKey,lamports:a,space:yo.span,programId:this.programId})),u=[{pubkey:i.publicKey,isSigner:!1,isWritable:!0},{pubkey:o.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],r.forEach((function(e){return u.push({pubkey:e,isSigner:!1,isWritable:!1})})),l=Qi([Yi("instruction"),Yi("m")]),f=gr.Buffer.alloc(l.span),l.encode({instruction:2,m:n},f),s.add({keys:u,programId:this.programId,data:f}),t.next=14,to("createAccount and InitializeMultisig",this.connection,s,this.payer,i);case 14:return t.abrupt("return",i.publicKey);case 15:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"getMintInfo",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(this.publicKey);case 2:if(null!==(t=e.sent)){e.next=5;break}throw new Error("Failed to find mint account");case 5:if(t.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid mint owner: ".concat(JSON.stringify(t.owner)));case 7:if(t.data.length==ho.span){e.next=9;break}throw new Error("Invalid mint size");case 9:return n=gr.Buffer.from(t.data),0===(r=ho.decode(n)).mintAuthorityOption?r.mintAuthority=null:r.mintAuthority=new o.PublicKey(r.mintAuthority),r.supply=so.fromBuffer(r.supply),r.isInitialized=0!=r.isInitialized,0===r.freezeAuthorityOption?r.freezeAuthority=null:r.freezeAuthority=new o.PublicKey(r.freezeAuthority),e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAccountInfo",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n){var r,i,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t,n);case 2:if(null!==(r=e.sent)){e.next=5;break}throw new Error(io);case 5:if(r.owner.equals(this.programId)){e.next=7;break}throw new Error(oo);case 7:if(r.data.length==po.span){e.next=9;break}throw new Error("Invalid account size");case 9:if(i=gr.Buffer.from(r.data),(a=po.decode(i)).address=t,a.mint=new o.PublicKey(a.mint),a.owner=new o.PublicKey(a.owner),a.amount=so.fromBuffer(a.amount),0===a.delegateOption?(a.delegate=null,a.delegatedAmount=new so):(a.delegate=new o.PublicKey(a.delegate),a.delegatedAmount=so.fromBuffer(a.delegatedAmount)),a.isInitialized=0!==a.state,a.isFrozen=2===a.state,1===a.isNativeOption?(a.rentExemptReserve=so.fromBuffer(a.isNative),a.isNative=!0):(a.rentExemptReserve=null,a.isNative=!1),0===a.closeAuthorityOption?a.closeAuthority=null:a.closeAuthority=new o.PublicKey(a.closeAuthority),a.mint.equals(this.publicKey)){e.next=22;break}throw new Error("Invalid account mint: ".concat(JSON.stringify(a.mint)," !== ").concat(JSON.stringify(this.publicKey)));case 22:return e.abrupt("return",a);case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMultisigInfo",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connection.getAccountInfo(t);case 2:if(null!==(n=e.sent)){e.next=5;break}throw new Error("Failed to find multisig");case 5:if(n.owner.equals(this.programId)){e.next=7;break}throw new Error("Invalid multisig owner");case 7:if(n.data.length==yo.span){e.next=9;break}throw new Error("Invalid multisig size");case 9:return r=gr.Buffer.from(n.data),(i=yo.decode(r)).signer1=new o.PublicKey(i.signer1),i.signer2=new o.PublicKey(i.signer2),i.signer3=new o.PublicKey(i.signer3),i.signer4=new o.PublicKey(i.signer4),i.signer5=new o.PublicKey(i.signer5),i.signer6=new o.PublicKey(i.signer6),i.signer7=new o.PublicKey(i.signer7),i.signer8=new o.PublicKey(i.signer8),i.signer9=new o.PublicKey(i.signer9),i.signer10=new o.PublicKey(i.signer10),i.signer11=new o.PublicKey(i.signer11),e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u){var l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(i)?(l=i.publicKey,f=[i]):(l=i,f=a),t.next=3,to.apply(void 0,["Transfer",this.connection,(new o.Transaction).add(e.createTransferInstruction(this.programId,n,r,l,a,u)),this.payer].concat((0,s.Z)(f)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"approve",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u){var l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(i)?(l=i.publicKey,f=[i]):(l=i,f=a),t.next=3,to.apply(void 0,["Approve",this.connection,(new o.Transaction).add(e.createApproveInstruction(this.programId,n,r,l,a,u)),this.payer].concat((0,s.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"revoke",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i){var a,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(a=r.publicKey,u=[r]):(a=r,u=i),t.next=3,to.apply(void 0,["Revoke",this.connection,(new o.Transaction).add(e.createRevokeInstruction(this.programId,n,a,i)),this.payer].concat((0,s.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"setAuthority",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u){var l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(a)?(l=a.publicKey,f=[a]):(l=a,f=u),t.next=3,to.apply(void 0,["SetAuthority",this.connection,(new o.Transaction).add(e.createSetAuthorityInstruction(this.programId,n,r,i,l,u)),this.payer].concat((0,s.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"mintTo",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a){var u,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(u=r.publicKey,l=[r]):(u=r,l=i),t.next=3,to.apply(void 0,["MintTo",this.connection,(new o.Transaction).add(e.createMintToInstruction(this.programId,this.publicKey,n,u,i,a)),this.payer].concat((0,s.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"burn",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a){var u,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(u=r.publicKey,l=[r]):(u=r,l=i),t.next=3,to.apply(void 0,["Burn",this.connection,(new o.Transaction).add(e.createBurnInstruction(this.programId,this.publicKey,n,u,i,a)),this.payer].concat((0,s.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"closeAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a){var u,l;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(i)?(u=i.publicKey,l=[i]):(u=i,l=a),t.next=3,to.apply(void 0,["CloseAccount",this.connection,(new o.Transaction).add(e.createCloseAccountInstruction(this.programId,n,r,u,a)),this.payer].concat((0,s.Z)(l)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i){return t.apply(this,arguments)}}()},{key:"freezeAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i){var a,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(a=r.publicKey,u=[r]):(a=r,u=i),t.next=3,to.apply(void 0,["FreezeAccount",this.connection,(new o.Transaction).add(e.createFreezeAccountInstruction(this.programId,n,this.publicKey,a,i)),this.payer].concat((0,s.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"thawAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i){var a,u;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(a=r.publicKey,u=[r]):(a=r,u=i),t.next=3,to.apply(void 0,["ThawAccount",this.connection,(new o.Transaction).add(e.createThawAccountInstruction(this.programId,n,this.publicKey,a,i)),this.payer].concat((0,s.Z)(u)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"transferChecked",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u,l){var f,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(i)?(f=i.publicKey,h=[i]):(f=i,h=a),t.next=3,to.apply(void 0,["TransferChecked",this.connection,(new o.Transaction).add(e.createTransferCheckedInstruction(this.programId,n,this.publicKey,r,f,a,u,l)),this.payer].concat((0,s.Z)(h)));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"approveChecked",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u,l){var f,h;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(i)?(f=i.publicKey,h=[i]):(f=i,h=a),t.next=3,to.apply(void 0,["ApproveChecked",this.connection,(new o.Transaction).add(e.createApproveCheckedInstruction(this.programId,n,this.publicKey,r,f,a,u,l)),this.payer].concat((0,s.Z)(h)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"mintToChecked",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u){var l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(l=r.publicKey,f=[r]):(l=r,f=i),t.next=3,to.apply(void 0,["MintToChecked",this.connection,(new o.Transaction).add(e.createMintToCheckedInstruction(this.programId,this.publicKey,n,l,i,a,u)),this.payer].concat((0,s.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"burnChecked",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,u){var l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return uo(r)?(l=r.publicKey,f=[r]):(l=r,f=i),t.next=3,to.apply(void 0,["BurnChecked",this.connection,(new o.Transaction).add(e.createBurnCheckedInstruction(this.programId,this.publicKey,n,l,i,a,u)),this.payer].concat((0,s.Z)(f)));case 3:case"end":return t.stop()}}),t,this)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"syncNative",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,to("SyncNative",this.connection,(new o.Transaction).add(e.createSyncNativeInstruction(this.programId,n)),this.payer);case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"getMinBalanceRentForExemptMint",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(ho.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptAccount",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(po.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMinBalanceRentForExemptMultisig",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(yo.span);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMint",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,s,u){var l,f,h,d;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=o.Keypair.generate(),f=new e(n,l.publicKey,u,r),t.next=4,e.getMinBalanceRentForExemptMint(n);case 4:return h=t.sent,(d=new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:r.publicKey,newAccountPubkey:l.publicKey,lamports:h,space:ho.span,programId:u})),d.add(e.createInitMintInstruction(u,l.publicKey,s,i,a)),t.next=10,to("createAccount and InitializeMint",n,d,r,l);case 10:return t.abrupt("return",f);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o,a){return t.apply(this,arguments)}}()},{key:"createWrappedNativeAccount",value:function(){var t=(0,l.Z)((0,c.Z)().mark((function t(n,r,i,a,s){var u,l,f;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMinBalanceRentForExemptAccount(n);case 2:return u=t.sent,l=o.Keypair.generate(),(f=new o.Transaction).add(o.SystemProgram.createAccount({fromPubkey:a.publicKey,newAccountPubkey:l.publicKey,lamports:u,space:po.span,programId:r})),f.add(o.SystemProgram.transfer({fromPubkey:a.publicKey,toPubkey:l.publicKey,lamports:s})),f.add(e.createInitAccountInstruction(r,fo,l.publicKey,i)),t.next=10,to("createAccount, transfer, and initializeAccount",n,f,a,l);case 10:return t.abrupt("return",l.publicKey);case 11:case"end":return t.stop()}}),t)})));return function(e,n,r,i,o){return t.apply(this,arguments)}}()},{key:"createInitMintInstruction",value:function(e,t,n,r,i){var a=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:o.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],s=Qi([Yi("instruction"),Yi("decimals"),Ji("mintAuthority"),Yi("option"),Ji("freezeAuthority")]),u=gr.Buffer.alloc(1024),c=s.encode({instruction:0,decimals:n,mintAuthority:ao(r),option:null===i?0:1,freezeAuthority:ao(i||new o.PublicKey(0))},u);return u=u.slice(0,c),new o.TransactionInstruction({keys:a,programId:e,data:u})}},{key:"createInitAccountInstruction",value:function(e,t,n,r){var i=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],a=Qi([Yi("instruction")]),s=gr.Buffer.alloc(a.span);return a.encode({instruction:1},s),new o.TransactionInstruction({keys:i,programId:e,data:s})}},{key:"createTransferInstruction",value:function(e,t,n,r,i,a){var s=Qi([Yi("instruction"),eo("amount")]),u=gr.Buffer.alloc(s.span);s.encode({instruction:3,amount:new so(a).toBuffer()},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createApproveInstruction",value:function(e,t,n,r,i,a){var s=Qi([Yi("instruction"),eo("amount")]),u=gr.Buffer.alloc(s.span);s.encode({instruction:4,amount:new so(a).toBuffer()},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createRevokeInstruction",value:function(e,t,n,r){var i=Qi([Yi("instruction")]),a=gr.Buffer.alloc(i.span);i.encode({instruction:5},a);var s=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===r.length?s.push({pubkey:n,isSigner:!0,isWritable:!1}):(s.push({pubkey:n,isSigner:!1,isWritable:!1}),r.forEach((function(e){return s.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:s,programId:e,data:a})}},{key:"createSetAuthorityInstruction",value:function(e,t,n,r,i,a){var s=Qi([Yi("instruction"),Yi("authorityType"),Yi("option"),Ji("newAuthority")]),u=gr.Buffer.alloc(1024),c=s.encode({instruction:6,authorityType:lo[r],option:null===n?0:1,newAuthority:ao(n||new o.PublicKey(0))},u);u=u.slice(0,c);var l=[{pubkey:t,isSigner:!1,isWritable:!0}];return 0===a.length?l.push({pubkey:i,isSigner:!0,isWritable:!1}):(l.push({pubkey:i,isSigner:!1,isWritable:!1}),a.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:l,programId:e,data:u})}},{key:"createMintToInstruction",value:function(e,t,n,r,i,a){var s=Qi([Yi("instruction"),eo("amount")]),u=gr.Buffer.alloc(s.span);s.encode({instruction:7,amount:new so(a).toBuffer()},u);var c=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createBurnInstruction",value:function(e,t,n,r,i,a){var s=Qi([Yi("instruction"),eo("amount")]),u=gr.Buffer.alloc(s.span);s.encode({instruction:8,amount:new so(a).toBuffer()},u);var c=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?c.push({pubkey:r,isSigner:!0,isWritable:!1}):(c.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return c.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:c,programId:e,data:u})}},{key:"createCloseAccountInstruction",value:function(e,t,n,r,i){var a=Qi([Yi("instruction")]),s=gr.Buffer.alloc(a.span);a.encode({instruction:9},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createFreezeAccountInstruction",value:function(e,t,n,r,i){var a=Qi([Yi("instruction")]),s=gr.Buffer.alloc(a.span);a.encode({instruction:10},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createThawAccountInstruction",value:function(e,t,n,r,i){var a=Qi([Yi("instruction")]),s=gr.Buffer.alloc(a.span);a.encode({instruction:11},s);var u=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1}];return 0===i.length?u.push({pubkey:r,isSigner:!0,isWritable:!1}):(u.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return u.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:u,programId:e,data:s})}},{key:"createTransferCheckedInstruction",value:function(e,t,n,r,i,a,s,u){var c=Qi([Yi("instruction"),eo("amount"),Yi("decimals")]),l=gr.Buffer.alloc(c.span);c.encode({instruction:12,amount:new so(s).toBuffer(),decimals:u},l);var f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!0}];return 0===a.length?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),a.forEach((function(e){return f.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:f,programId:e,data:l})}},{key:"createApproveCheckedInstruction",value:function(e,t,n,r,i,a,s,u){var c=Qi([Yi("instruction"),eo("amount"),Yi("decimals")]),l=gr.Buffer.alloc(c.span);c.encode({instruction:13,amount:new so(s).toBuffer(),decimals:u},l);var f=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:r,isSigner:!1,isWritable:!1}];return 0===a.length?f.push({pubkey:i,isSigner:!0,isWritable:!1}):(f.push({pubkey:i,isSigner:!1,isWritable:!1}),a.forEach((function(e){return f.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:f,programId:e,data:l})}},{key:"createMintToCheckedInstruction",value:function(e,t,n,r,i,a,s){var u=Qi([Yi("instruction"),eo("amount"),Yi("decimals")]),c=gr.Buffer.alloc(u.span);u.encode({instruction:14,amount:new so(a).toBuffer(),decimals:s},c);var l=[{pubkey:t,isSigner:!1,isWritable:!0},{pubkey:n,isSigner:!1,isWritable:!0}];return 0===i.length?l.push({pubkey:r,isSigner:!0,isWritable:!1}):(l.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createBurnCheckedInstruction",value:function(e,t,n,r,i,a,s){var u=Qi([Yi("instruction"),eo("amount"),Yi("decimals")]),c=gr.Buffer.alloc(u.span);u.encode({instruction:15,amount:new so(a).toBuffer(),decimals:s},c);var l=[{pubkey:n,isSigner:!1,isWritable:!0},{pubkey:t,isSigner:!1,isWritable:!0}];return 0===i.length?l.push({pubkey:r,isSigner:!0,isWritable:!1}):(l.push({pubkey:r,isSigner:!1,isWritable:!1}),i.forEach((function(e){return l.push({pubkey:e.publicKey,isSigner:!0,isWritable:!1})}))),new o.TransactionInstruction({keys:l,programId:e,data:c})}},{key:"createSyncNativeInstruction",value:function(e,t){var n=Qi([Yi("instruction")]),r=gr.Buffer.alloc(n.span);n.encode({instruction:17},r);var i=[{pubkey:t,isSigner:!1,isWritable:!0}];return new o.TransactionInstruction({keys:i,programId:e,data:r})}},{key:"getAssociatedTokenAddress",value:function(){var e=(0,l.Z)((0,c.Z)().mark((function e(t,n,r,i){var a=arguments;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>4&&void 0!==a[4]&&a[4]||o.PublicKey.isOnCurve(i.toBuffer())){e.next=3;break}throw new Error("Owner cannot sign: ".concat(i.toString()));case 3:return e.next=5,o.PublicKey.findProgramAddress([i.toBuffer(),n.toBuffer(),r.toBuffer()],t);case 5:return e.abrupt("return",e.sent[0]);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"createAssociatedTokenAccountInstruction",value:function(e,t,n,r,i,a){var s=gr.Buffer.alloc(0),u=[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:r,isSigner:!1,isWritable:!0},{pubkey:i,isSigner:!1,isWritable:!1},{pubkey:n,isSigner:!1,isWritable:!1},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:t,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}];return new o.TransactionInstruction({keys:u,programId:e,data:s})}}]),e}(),go=n(90261),vo=n(73340),bo=n(53604),_o=n(17398),wo=n(33258),xo=n(19778).Buffer;function ko(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(t){o(t)}}function s(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}!function(e){e.USD="usd",e.EUR="eur",e.AR="ar",e.SOL="sol"}(co||(co={}));var Ao;"object"==typeof self?self.FormData:window.FormData,Math.pow(10,9),Math.pow(10,12);!function(e){e[e.MainnetBeta=101]="MainnetBeta",e[e.Testnet=102]="Testnet",e[e.Devnet=103]="Devnet"}(Ao||(Ao={}));var Eo={devnet:{endpoint:(0,o.clusterApiUrl)("devnet"),ChainId:Ao.Devnet},"mainnet-beta":{endpoint:"https://api.metaplex.solana.com/",ChainId:Ao.MainnetBeta},"mainnet-beta (Solana)":{endpoint:"https://api.mainnet-beta.solana.com",ChainId:Ao.MainnetBeta},"mainnet-beta (Serum)":{endpoint:"https://solana-api.projectserum.com/",ChainId:Ao.MainnetBeta},testnet:{endpoint:(0,o.clusterApiUrl)("testnet"),ChainId:Ao.Testnet}},Io=(o.Connection,function(){function e(t){(0,f.Z)(this,e),this.payer=t}return(0,h.Z)(e,[{key:"signTransaction",value:function(e){return ko(this,void 0,void 0,(0,c.Z)().mark((function t(){return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.partialSign(this.payer),t.abrupt("return",e);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"signAllTransactions",value:function(e){return ko(this,void 0,void 0,(0,c.Z)().mark((function t(){var n=this;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.map((function(e){return e.partialSign(n.payer),e})));case 1:case"end":return t.stop()}}),t)})))}},{key:"publicKey",get:function(){return this.payer.publicKey}}]),e}()),So=function(e){return ko(void 0,void 0,void 0,(0,c.Z)().mark((function t(){var n,r;return(0,c.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,lr().get(e);case 3:return n=t.sent,r=n.data,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t.catch(0),new Error("unable to get metadata json from url ".concat(e));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))},To=(vo.Transaction,function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,f.Z)(this,n);var a=e.feePayer,s=r.newAccountPubkey,u=r.lamports,c=r.decimals,l=r.owner,h=r.freezeAuthority;return(i=t.call(this,e)).add(o.SystemProgram.createAccount({fromPubkey:a,newAccountPubkey:s,lamports:u,space:ho.span,programId:no})),i.add(mo.createInitMintInstruction(no,s,null!==c&&void 0!==c?c:0,null!==l&&void 0!==l?l:a,null!==h&&void 0!==h?h:a)),i}return(0,h.Z)(n)}(vo.Transaction)),Mo=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,f.Z)(this,n);var a=e.feePayer,s=r.newAccountPubkey,u=r.lamports,c=r.mint,l=r.owner;return(i=t.call(this,e)).add(o.SystemProgram.createAccount({fromPubkey:a,newAccountPubkey:s,lamports:u,space:po.span,programId:no})),i.add(mo.createInitAccountInstruction(no,c,s,null!==l&&void 0!==l?l:a)),i}return(0,h.Z)(n)}(vo.Transaction),Po=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,f.Z)(this,n);var a=e.feePayer,s=r.associatedTokenAddress,u=r.walletAddress,c=r.splTokenMintAddress;return(i=t.call(this,e)).add(new o.TransactionInstruction({keys:[{pubkey:a,isSigner:!0,isWritable:!0},{pubkey:s,isSigner:!1,isWritable:!0},{pubkey:null!==u&&void 0!==u?u:a,isSigner:!1,isWritable:!1},{pubkey:c,isSigner:!1,isWritable:!1},{pubkey:o.SystemProgram.programId,isSigner:!1,isWritable:!1},{pubkey:no,isSigner:!1,isWritable:!1},{pubkey:o.SYSVAR_RENT_PUBKEY,isSigner:!1,isWritable:!1}],programId:ro,data:fr.Buffer.from([])})),i}return(0,h.Z)(n)}(vo.Transaction),Bo=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(e,r){var i;(0,f.Z)(this,n);var o=e.feePayer,a=r.mint,s=r.dest,u=r.authority,c=r.amount;return(i=t.call(this,e)).add(mo.createMintToInstruction(no,a,s,null!==u&&void 0!==u?u:o,[],new(mr())(c).toNumber())),i}return(0,h.Z)(n)}(vo.Transaction);function Co(e,t){return ko(this,void 0,void 0,(0,c.Z)().mark((function n(){var r,i,a,s,u,l;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=o.Keypair.generate(),n.next=3,e.getMinimumBalanceForRentExemption(ho.span);case 3:return i=n.sent,a=new To({feePayer:t},{newAccountPubkey:r.publicKey,lamports:i}),n.next=7,mo.getAssociatedTokenAddress(ro,no,r.publicKey,t);case 7:return s=n.sent,u=new Po({feePayer:t},{associatedTokenAddress:s,splTokenMintAddress:r.publicKey}),l=new Bo({feePayer:t},{mint:r.publicKey,dest:s,amount:1}),n.abrupt("return",{mint:r,createMintTx:a,createAssociatedTokenAccountTx:u,mintToTx:l,recipient:s});case 11:case"end":return n.stop()}}),n)})))}function Oo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return ko(this,void 0,void 0,(0,c.Z)().mark((function r(){var i,a,s,u;return(0,c.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i=o.Keypair.generate(),r.next=3,e.getMinimumBalanceForRentExemption(po.span);case 3:return a=r.sent,s=new Mo({feePayer:t},{newAccountPubkey:i.publicKey,lamports:n+a,mint:fo}),u=(new vo.Transaction).add(mo.createCloseAccountInstruction(no,i.publicKey,t,t,[])),r.abrupt("return",{account:i,createTokenAccountTx:s,closeTokenAccountTx:u});case 7:case"end":return r.stop()}}),r)})))}function Do(e){var t=e.authority,n=void 0===t?o.Keypair.generate():t,r=e.account,i=e.owner,a=e.amount;return{authority:n,createApproveTx:(new o.Transaction).add(mo.createApproveInstruction(no,r,n.publicKey,i,[],a)),createRevokeTx:(new o.Transaction).add(mo.createRevokeInstruction(no,r,i,[]))}}var Ro=function(e){var t=e.connection,n=e.wallet,r=e.txs,i=e.signers,o=void 0===i?[]:i,a=e.options;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var i,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=vo.Transaction.fromCombined(r,{feePayer:n.publicKey}),e.next=3,t.getRecentBlockhash();case 3:return i.recentBlockhash=e.sent.blockhash,o.length&&(u=i).partialSign.apply(u,(0,s.Z)(o)),e.next=7,n.signTransaction(i);case 7:return i=e.sent,e.abrupt("return",t.sendRawTransaction(i.serialize(),a));case 9:case"end":return e.stop()}}),e)})))},Lo=function(){function e(t){var n=t.beforeTransactions,r=void 0===n?[]:n,i=t.transactions,o=t.afterTransactions,a=void 0===o?[]:o;(0,f.Z)(this,e),this.signers=[],this.beforeTransactions=r,this.transactions=i,this.afterTransactions=a}return(0,h.Z)(e,[{key:"addSigner",value:function(e){this.signers.push(e)}},{key:"addBeforeTransaction",value:function(e){this.beforeTransactions.push(e)}},{key:"addTransaction",value:function(e){this.transactions.push(e)}},{key:"addAfterTransaction",value:function(e){this.afterTransactions.push(e)}},{key:"toTransactions",value:function(){return[].concat((0,s.Z)(this.beforeTransactions),(0,s.Z)(this.transactions),(0,s.Z)(this.afterTransactions))}},{key:"toInstructions",value:function(){return this.toTransactions().flatMap((function(e){return e.instructions}))}}]),e}(),zo=function(e){var t=e.connection,n=e.wallet,r=e.auction,i=e.bidderPotToken,a=e.destAccount;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b,_;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.publicKey,e.next=3,bo.AuctionManager.getPDA(r);case 3:return u=e.sent,e.next=6,bo.AuctionManager.load(t,u);case 6:return l=e.sent,e.next=9,l.getAuction(t);case 9:return f=e.sent,h=f.data.tokenMint,d=new o.PublicKey(h),p=new o.PublicKey(l.data.vault),e.next=15,wo.AuctionExtended.getPDA(p);case 15:return y=e.sent,e.next=18,wo.BidderPot.getPDA(r,s);case 18:return m=e.sent,e.next=21,wo.BidderMetadata.getPDA(r,s);case 21:return g=e.sent,e.next=24,t.getMinimumBalanceForRentExemption(po.span);case 24:return v=e.sent,e.next=27,Zo({destAccount:a,bidder:s,accountRentExempt:v,bidderPot:m,bidderPotToken:i,bidderMeta:g,auction:r,auctionExtended:y,auctionTokenMint:d,vault:p});case 27:return b=e.sent,e.next=30,Ro({connection:t,wallet:n,txs:b.toTransactions(),signers:b.signers});case 30:return _=e.sent,e.abrupt("return",{txId:_});case 32:case"end":return e.stop()}}),e)})))},Zo=function(e){var t=e.destAccount,n=e.bidder,r=e.accountRentExempt,i=e.bidderPot,a=e.bidderPotToken,s=e.bidderMeta,u=e.auction,l=e.auctionExtended,f=e.auctionTokenMint,h=e.vault;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var d,p,y,m,g;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d=new Lo({transactions:[]}),t||(p=o.Keypair.generate(),y=new Mo({feePayer:n},{newAccountPubkey:p.publicKey,lamports:r,mint:fo}),m=(new vo.Transaction).add(mo.createCloseAccountInstruction(no,p.publicKey,n,n,[])),d.addTransaction(y),d.addAfterTransaction(m),d.addSigner(p),t=p.publicKey),g=new wo.CancelBid({feePayer:n},{bidder:n,bidderToken:t,bidderPot:i,bidderPotToken:a,bidderMeta:s,auction:u,auctionExtended:l,tokenMint:f,resource:h}),d.addTransaction(g),e.abrupt("return",d);case 5:case"end":return e.stop()}}),e)})))},No=function(e){var t=e.connection,n=e.wallet,r=e.amount,i=e.auction,a=e.bidderPotToken;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P,B;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.publicKey,e.next=3,t.getMinimumBalanceForRentExemption(po.span);case 3:return u=e.sent,e.next=6,bo.AuctionManager.getPDA(i);case 6:return l=e.sent,e.next=9,bo.AuctionManager.load(t,l);case 9:return f=e.sent,e.next=12,f.getAuction(t);case 12:return h=e.sent,d=h.data.tokenMint,p=new o.PublicKey(d),y=new o.PublicKey(f.data.vault),e.next=18,wo.AuctionExtended.getPDA(y);case 18:return m=e.sent,e.next=21,wo.BidderPot.getPDA(i,s);case 21:return g=e.sent,e.next=24,wo.BidderMetadata.getPDA(i,s);case 24:if(v=e.sent,b=new Lo({transactions:[]}),!a){e.next=32;break}return e.next=29,Zo({destAccount:null,bidder:s,accountRentExempt:u,bidderPot:g,bidderPotToken:a,bidderMeta:v,auction:i,auctionExtended:m,auctionTokenMint:p,vault:y});case 29:b=e.sent,e.next=37;break;case 32:_=o.Keypair.generate(),w=new Mo({feePayer:s},{newAccountPubkey:_.publicKey,lamports:u,mint:p,owner:i}),b.addSigner(_),b.addTransaction(w),a=_.publicKey;case 37:return e.next=39,Oo(t,s,r.toNumber()+2*u);case 39:return x=e.sent,k=x.account,A=x.createTokenAccountTx,E=x.closeTokenAccountTx,b.addTransaction(A),b.addAfterTransaction(E),b.addSigner(k),I=Do({account:k.publicKey,owner:s,amount:r.toNumber()}),S=I.authority,T=I.createApproveTx,M=I.createRevokeTx,b.addTransaction(T),b.addAfterTransaction(M),b.addSigner(S),P=new wo.PlaceBid({feePayer:s},{bidder:s,bidderToken:k.publicKey,bidderPot:g,bidderPotToken:a,bidderMeta:v,auction:i,auctionExtended:m,tokenMint:p,transferAuthority:S.publicKey,amount:r,resource:y}),b.addTransaction(P),e.next=54,Ro({connection:t,wallet:n,txs:b.toTransactions(),signers:b.signers});case 54:return B=e.sent,e.abrupt("return",{txId:B,bidderPotToken:a,bidderMeta:v});case 56:case"end":return e.stop()}}),e)})))},Uo=function(e){var t=e.connection,n=e.wallet,r=e.store,a=e.auction;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.publicKey,e.next=3,t.getMinimumBalanceForRentExemption(po.span);case 3:return u=e.sent,e.next=6,bo.AuctionManager.getPDA(a);case 6:return l=e.sent,e.next=9,bo.AuctionManager.load(t,l);case 9:return f=e.sent,e.next=12,go.Vault.load(t,f.data.vault);case 12:return h=e.sent,d=new o.PublicKey(h.data.fractionMint),e.next=16,wo.AuctionExtended.getPDA(h.pubkey);case 16:return p=e.sent,e.next=19,h.getSafetyDepositBoxes(t);case 19:return y=e.sent,m=(0,i.Z)(y,1),g=m[0],v=new o.PublicKey(g.data.tokenMint),b=new o.PublicKey(g.data.store),e.next=26,wo.BidderMetadata.getPDA(a,s);case 26:return _=e.sent,e.next=29,jo(a,_);case 29:return w=e.sent,e.next=32,bo.SafetyDepositConfig.getPDA(l,g.pubkey);case 32:return x=e.sent,e.next=35,go.Vault.getPDA(h.pubkey);case 35:return k=e.sent,e.next=38,_o.Metadata.getPDA(v);case 38:return A=e.sent,e.next=41,Fo({accountRentExempt:u,tokenMint:v,bidder:s,bidderMeta:_,store:r,vault:h.pubkey,auction:a,auctionExtended:p,auctionManager:l,fractionMint:d,safetyDepositTokenStore:b,safetyDeposit:g.pubkey,bidRedemption:w,safetyDepositConfig:x,transferAuthority:k,metadata:A});case 41:return E=e.sent,e.next=44,Ro({connection:t,wallet:n,txs:E.toTransactions(),signers:E.signers});case 44:return I=e.sent,e.abrupt("return",{txId:I});case 46:case"end":return e.stop()}}),e)})))},Fo=function(e){var t=e.accountRentExempt,n=e.bidder,r=e.tokenMint,i=e.store,a=e.vault,s=e.auction,u=e.auctionManager,l=e.auctionExtended,f=e.bidRedemption,h=e.bidderMeta,d=e.safetyDepositTokenStore,p=e.safetyDeposit,y=e.fractionMint,m=e.safetyDepositConfig,g=e.transferAuthority,v=e.metadata;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var b,_,w,x,k;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b=new Lo({transactions:[]}),_=o.Keypair.generate(),w=new Mo({feePayer:n},{newAccountPubkey:_.publicKey,lamports:t,mint:r}),b.addSigner(_),b.addTransaction(w),x=new bo.RedeemFullRightsTransferBid({feePayer:n},{store:i,vault:a,auction:s,auctionManager:u,bidRedemption:f,bidMetadata:h,safetyDepositTokenStore:d,destination:_.publicKey,safetyDeposit:p,fractionMint:y,bidder:n,safetyDepositConfig:m,auctionExtended:l,transferAuthority:g,newAuthority:n,masterMetadata:v}),b.addTransaction(x),k=new _o.UpdatePrimarySaleHappenedViaToken({feePayer:n},{metadata:v,owner:n,tokenAccount:_.publicKey}),b.addTransaction(k),e.abrupt("return",b);case 10:case"end":return e.stop()}}),e)})))},jo=function(e,t){return ko(void 0,void 0,void 0,(0,c.Z)().mark((function n(){return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.PublicKey.findProgramAddress([xo.from(bo.MetaplexProgram.PREFIX),e.toBuffer(),t.toBuffer()],bo.MetaplexProgram.PUBKEY);case 2:return n.abrupt("return",n.sent[0]);case 3:case"end":return n.stop()}}),n)})))},Wo=function(e){var t=e.connection,n=e.wallet,r=e.store,a=e.auction;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P,B,C,O,D,R,L,z,Z,N,U,F,j,W,V;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.publicKey,e.next=3,wo.Auction.load(t,a);case 3:return u=e.sent,l=u.data.bidState,e.next=7,bo.AuctionManager.getPDA(a);case 7:return f=e.sent,e.next=10,bo.AuctionManager.load(t,f);case 10:return h=e.sent,e.next=13,go.Vault.load(t,h.data.vault);case 13:return d=e.sent,e.next=16,wo.AuctionExtended.getPDA(d.pubkey);case 16:return p=e.sent,e.next=19,d.getSafetyDepositBoxes(t);case 19:return y=e.sent,m=(0,i.Z)(y,1),g=m[0],v=new o.PublicKey(g.data.tokenMint),b=new o.PublicKey(g.data.store),e.next=26,wo.BidderMetadata.getPDA(a,s);case 26:return _=e.sent,e.next=29,jo(a,_);case 29:return w=e.sent,e.next=32,bo.SafetyDepositConfig.getPDA(f,g.pubkey);case 32:return x=e.sent,e.next=35,Co(t,n.publicKey);case 35:return k=e.sent,A=k.mint,E=k.createMintTx,I=k.createAssociatedTokenAccountTx,S=k.mintToTx,T=k.recipient,M=A.publicKey,e.next=44,_o.Metadata.getPDA(M);case 44:return P=e.sent,e.next=47,_o.Edition.getPDA(M);case 47:return B=e.sent,e.next=50,_o.Metadata.getPDA(v);case 50:return C=e.sent,e.next=53,_o.MasterEdition.getPDA(v);case 53:return O=e.sent,e.next=56,_o.MasterEdition.load(t,O);case 56:return D=e.sent,e.next=59,bo.PrizeTrackingTicket.getPDA(f,v);case 59:return R=e.sent,e.prev=60,e.next=63,bo.PrizeTrackingTicket.load(t,R);case 63:L=e.sent,e.next=69;break;case 66:e.prev=66,e.t0=e.catch(60),L=null;case 69:return z=l.getWinnerIndex(s.toBase58())||0,Z=Ko(z),N=(null===L||void 0===L?void 0:L.data.supplySnapshot)||D.data.supply,U=N.add(Z),e.next=75,_o.EditionMarker.getPDA(v,U);case 75:return F=e.sent,e.prev=76,e.next=79,_o.EditionMarker.load(t,F);case 79:if(j=e.sent,!j.data.editionTaken(U.toNumber())){e.next=83;break}throw new Error("The edition is already taken");case 83:e.next=87;break;case 85:e.prev=85,e.t1=e.catch(76);case 87:return e.next=89,Vo({bidder:s,bidderMeta:_,store:r,vault:d.pubkey,destination:T,auction:a,auctionExtended:p,auctionManager:f,safetyDepositTokenStore:b,safetyDeposit:g.pubkey,bidRedemption:w,safetyDepositConfig:x,metadata:C,newMint:M,newMetadata:P,newEdition:B,masterEdition:O,editionMarker:F,prizeTrackingTicket:R,editionOffset:Z,winIndex:new(mr())(z)});case 89:return(W=e.sent).addSigner(A),W.addBeforeTransaction(E),W.addBeforeTransaction(I),W.addBeforeTransaction(S),e.next=96,Ro({connection:t,wallet:n,txs:W.toTransactions(),signers:W.signers});case 96:return V=e.sent,e.abrupt("return",{txId:V});case 98:case"end":return e.stop()}}),e,null,[[60,66],[76,85]])})))},Vo=function(e){var t=e.bidder,n=e.destination,r=e.store,i=e.vault,o=e.auction,a=e.auctionManager,s=e.auctionExtended,u=e.bidRedemption,l=e.bidderMeta,f=e.safetyDepositTokenStore,h=e.safetyDeposit,d=e.safetyDepositConfig,p=e.metadata,y=e.newMint,m=e.newMetadata,g=e.newEdition,v=e.masterEdition,b=e.editionMarker,_=e.prizeTrackingTicket,w=e.winIndex,x=e.editionOffset;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var k,A,E;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k=new Lo({transactions:[]}),A=new bo.RedeemPrintingV2Bid({feePayer:t},{store:r,vault:i,auction:o,auctionManager:a,bidRedemption:u,bidMetadata:l,safetyDepositTokenStore:f,destination:n,safetyDeposit:h,bidder:t,safetyDepositConfig:d,auctionExtended:s,newMint:y,newEdition:g,newMetadata:m,metadata:p,masterEdition:v,editionMark:b,prizeTrackingTicket:_,winIndex:w,editionOffset:x}),k.addTransaction(A),E=new _o.UpdatePrimarySaleHappenedViaToken({feePayer:t},{metadata:m,owner:t,tokenAccount:n}),k.addTransaction(E),e.abrupt("return",k);case 6:case"end":return e.stop()}}),e)})))};function Ko(e){return new(mr())(1).add(new(mr())(e))}var Go=function(e){var t=e.connection,n=e.wallet,r=e.store,a=e.auction;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P,B,C,O,D,R,L,z,Z,N,U,F,j,W,V,K,G,H,q,Y,X,Q,$,J,ee,te,ne,re,ie;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new Lo({transactions:[]}),u=new Lo({transactions:[]}),l=n.publicKey,e.next=5,wo.Auction.load(t,a);case 5:return f=e.sent,h=f.data,d=h.bidState,p=h.tokenMint,e.next=11,bo.AuctionManager.getPDA(a);case 11:return y=e.sent,e.next=14,bo.AuctionManager.load(t,y);case 14:return m=e.sent,e.next=17,go.Vault.load(t,m.data.vault);case 17:return g=e.sent,e.next=20,wo.AuctionExtended.getPDA(g.pubkey);case 20:return v=e.sent,e.next=23,g.getSafetyDepositBoxes(t);case 23:return b=e.sent,_=(0,i.Z)(b,1),w=_[0],x=new o.PublicKey(w.data.tokenMint),k=new o.PublicKey(w.data.store),e.next=30,wo.BidderMetadata.getPDA(a,l);case 30:return A=e.sent,e.next=33,jo(a,A);case 33:return E=e.sent,e.next=36,bo.SafetyDepositConfig.getPDA(y,w.pubkey);case 36:return I=e.sent,e.next=39,bo.SafetyDepositConfig.load(t,I);case 39:return S=e.sent,T=S.data.participationConfig.fixedPrice,M=new o.PublicKey(m.data.acceptPayment),e.next=44,Co(t,n.publicKey);case 44:return P=e.sent,B=P.mint,C=P.createMintTx,O=P.createAssociatedTokenAccountTx,D=P.mintToTx,R=P.recipient,s.addSigner(B),s.addTransaction(C),s.addTransaction(O),s.addTransaction(D),L=B.publicKey,e.next=57,_o.Metadata.getPDA(L);case 57:return z=e.sent,e.next=60,_o.Edition.getPDA(L);case 60:return Z=e.sent,e.next=63,_o.Metadata.getPDA(x);case 63:return N=e.sent,e.next=66,_o.MasterEdition.getPDA(x);case 66:return U=e.sent,e.next=69,_o.MasterEdition.load(t,U);case 69:return F=e.sent,e.next=72,bo.PrizeTrackingTicket.getPDA(y,x);case 72:return j=e.sent,W=d.getWinnerIndex(l.toBase58()),V=F.data.supply.add(new(mr())(1)),e.next=77,_o.EditionMarker.getPDA(x,V);case 77:if(K=e.sent,p!==fo.toBase58()){e.next=91;break}return e.next=81,Oo(t,l,T.toNumber());case 81:H=e.sent,q=H.account,Y=H.createTokenAccountTx,X=H.closeTokenAccountTx,G=q.publicKey,s.addTransaction(Y),s.addSigner(q),u.addAfterTransaction(X),e.next=94;break;case 91:return e.next=93,mo.getAssociatedTokenAddress(ro,no,new o.PublicKey(p),l);case 93:G=e.sent;case 94:return Q=Do({account:G,owner:l,amount:T.toNumber()}),$=Q.authority,J=Q.createApproveTx,ee=Q.createRevokeTx,u.addTransaction(J),u.addAfterTransaction(ee),u.addSigner($),te=new bo.RedeemParticipationBidV3({feePayer:l},{store:r,vault:g.pubkey,auction:a,auctionManager:y,bidRedemption:E,bidMetadata:A,safetyDepositTokenStore:k,destination:R,safetyDeposit:w.pubkey,bidder:l,safetyDepositConfig:I,auctionExtended:v,newMint:L,newEdition:Z,newMetadata:z,metadata:N,masterEdition:U,editionMark:K,prizeTrackingTicket:j,winIndex:null!==W?new(mr())(W):null,transferAuthority:$.publicKey,tokenPaymentAccount:G,acceptPaymentAccount:M}),u.addTransaction(te),ne=new _o.UpdatePrimarySaleHappenedViaToken({feePayer:l},{metadata:z,owner:l,tokenAccount:R}),u.addTransaction(ne),e.next=104,Ro({connection:t,wallet:n,txs:s.toTransactions(),signers:s.signers});case 104:return re=e.sent,e.next=107,t.confirmTransaction(re,"finalized");case 107:return e.next=109,Ro({connection:t,wallet:n,txs:u.toTransactions(),signers:u.signers});case 109:return ie=e.sent,e.abrupt("return",{txIds:[re,ie]});case 111:case"end":return e.stop()}}),e)})))};function Ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.nonWinningConstraint,r=t.winnerConstraint!==bo.WinningConstraint.NoParticipationPrize,i=n!==bo.NonWinningConstraint.NoParticipationPrize;return null===e&&i||null!==e&&r}var qo=function(e){var t=e.connection,n=e.wallet,r=e.store,i=e.auction,a=e.bidderPotToken;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f,h,d,p,y,m,g,v,b;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.publicKey,e.next=3,bo.AuctionManager.getPDA(i);case 3:return u=e.sent,e.next=6,bo.AuctionManager.load(t,u);case 6:return l=e.sent,f=new o.PublicKey(l.data.vault),e.next=10,wo.Auction.load(t,i);case 10:return h=e.sent,d=h.data.tokenMint,p=new o.PublicKey(l.data.acceptPayment),e.next=15,wo.AuctionExtended.getPDA(f);case 15:return y=e.sent,m=new o.PublicKey(d),e.next=19,wo.BidderPot.getPDA(i,s);case 19:return g=e.sent,e.next=22,Yo({auctionTokenMint:m,bidder:s,store:r,vault:f,auction:i,auctionExtended:y,auctionManager:u,acceptPayment:p,bidderPot:g,bidderPotToken:a});case 22:return v=e.sent,e.next=25,Ro({connection:t,wallet:n,txs:v.toTransactions(),signers:v.signers});case 25:return b=e.sent,e.abrupt("return",{txId:b});case 27:case"end":return e.stop()}}),e)})))},Yo=function(e){var t=e.bidder,n=e.auctionTokenMint,r=e.store,i=e.vault,o=e.auction,a=e.auctionManager,s=e.auctionExtended,u=e.acceptPayment,l=e.bidderPot,f=e.bidderPotToken;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var h,d;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=new Lo({transactions:[]}),d=new bo.ClaimBid({feePayer:t},{store:r,vault:i,auction:o,auctionExtended:s,auctionManager:a,bidder:t,tokenMint:n,acceptPayment:u,bidderPot:l,bidderPotToken:f}),h.addTransaction(d),e.abrupt("return",h);case 4:case"end":return e.stop()}}),e)})))},Xo=Object.freeze({__proto__:null,addTokensToVault:function(e){var t=e.connection,n=e.wallet,r=e.vault,i=e.nfts;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,s,u,l,f,h,d,p,m,g,v,b,_,w,x,k;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={feePayer:n.publicKey},s=[],e.next=4,go.Vault.getPDA(r);case 4:return u=e.sent,e.next=7,t.getMinimumBalanceForRentExemption(po.span);case 7:l=e.sent,f=(0,y.Z)(i),e.prev=9,f.s();case 11:if((h=f.n()).done){e.next=32;break}return d=h.value,p=new Lo({transactions:[]}),e.next=16,go.SafetyDepositBox.getPDA(r,d.tokenMint);case 16:return m=e.sent,g=o.Keypair.generate(),v=new Mo(a,{newAccountPubkey:g.publicKey,lamports:l,mint:d.tokenMint,owner:u}),p.addTransaction(v),p.addSigner(g),b=Do({account:d.tokenAccount,owner:n.publicKey,amount:d.amount.toNumber()}),_=b.authority,w=b.createApproveTx,p.addTransaction(w),p.addSigner(_),x=new go.AddTokenToInactiveVault(a,{vault:r,vaultAuthority:n.publicKey,tokenAccount:d.tokenAccount,tokenStoreAccount:g.publicKey,transferAuthority:_.publicKey,safetyDepositBox:m,amount:d.amount}),p.addTransaction(x),e.next=28,Ro({connection:t,wallet:n,txs:p.transactions,signers:p.signers});case 28:k=e.sent,s.push({txId:k,tokenStoreAccount:g.publicKey,tokenMint:d.tokenMint,tokenAccount:d.tokenAccount});case 30:e.next=11;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(9),f.e(e.t0);case 37:return e.prev=37,f.f(),e.finish(37);case 40:return e.abrupt("return",{safetyDepositTokenStores:s});case 41:case"end":return e.stop()}}),e,null,[[9,34,37,40]])})))},sendTransaction:Ro,initStore:function(e){var t=e.connection,n=e.wallet,r=e.isPublic,i=void 0===r||r;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var r,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bo.Store.getPDA(n.publicKey);case 2:return r=e.sent,a=new bo.SetStore({feePayer:n.publicKey},{admin:new o.PublicKey(n.publicKey),store:r,isPublic:i}),e.next=6,Ro({connection:t,wallet:n,txs:[a]});case 6:return s=e.sent,e.abrupt("return",{storeId:r,txId:s});case 8:case"end":return e.stop()}}),e)})))},initStoreV2:function(e){var t=e.connection,n=e.wallet,r=e.settingsUri,i=void 0===r?null:r,a=e.isPublic,s=void 0===a||a;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var r,a,u,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bo.Store.getPDA(n.publicKey);case 2:return r=e.sent,e.next=5,bo.StoreConfig.getPDA(r);case 5:return a=e.sent,u=new bo.SetStoreV2({feePayer:n.publicKey},{admin:new o.PublicKey(n.publicKey),store:r,config:a,isPublic:s,settingsUri:i}),e.next=9,Ro({connection:t,wallet:n,txs:[u]});case 9:return l=e.sent,e.abrupt("return",{storeId:r,configId:a,txId:l});case 11:case"end":return e.stop()}}),e)})))},mintNFT:function(e){var t=e.connection,n=e.wallet,r=e.uri,i=e.maxSupply;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var o,a,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Co(t,n.publicKey);case 2:return o=e.sent,a=o.mint,u=o.createMintTx,l=o.createAssociatedTokenAccountTx,f=o.mintToTx,e.next=9,_o.Metadata.getPDA(a.publicKey);case 9:return h=e.sent,e.next=12,_o.MasterEdition.getPDA(a.publicKey);case 12:return d=e.sent,e.next=15,So(r);case 15:return p=e.sent,y=p.name,m=p.symbol,g=p.seller_fee_basis_points,v=p.properties.creators,b=v.reduce((function(e,t){var r=t.address,i=t.share,o=r===n.publicKey.toString(),a=new _o.Creator({address:r,share:i,verified:o});return e=[].concat((0,s.Z)(e),[a])}),[]),_=new _o.MetadataDataData({name:y,symbol:m,uri:r,sellerFeeBasisPoints:g,creators:b}),w=new _o.CreateMetadata({feePayer:n.publicKey},{metadata:h,metadataData:_,updateAuthority:n.publicKey,mint:a.publicKey,mintAuthority:n.publicKey}),x=new _o.CreateMasterEdition({feePayer:n.publicKey},{edition:d,metadata:h,updateAuthority:n.publicKey,mint:a.publicKey,mintAuthority:n.publicKey,maxSupply:i||0===i?new(mr())(i):null}),e.next=26,Ro({connection:t,signers:[a],txs:[u,w,l,f,x],wallet:n});case 26:return k=e.sent,e.abrupt("return",{txId:k,mint:a.publicKey,metadata:h,edition:d});case 28:case"end":return e.stop()}}),e)})))},mintEditionFromMaster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connection,n=e.wallet,r=e.masterEditionMint,i=e.updateAuthority;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var o,a,s,u,l,f,h,d,p,y,m,g,v,b,_,w;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.MasterEdition.getPDA(r);case 2:return o=e.sent,e.next=5,_o.Metadata.getPDA(r);case 5:return a=e.sent,e.next=8,vo.Account.getInfo(t,o);case 8:return s=e.sent,u=new _o.MasterEdition(o,s).data,l=u.supply.add(new(mr())(1)),e.next=13,Co(t,n.publicKey);case 13:return f=e.sent,h=f.mint,d=f.createMintTx,p=f.createAssociatedTokenAccountTx,y=f.mintToTx,e.next=20,mo.getAssociatedTokenAddress(ro,no,r,n.publicKey);case 20:return m=e.sent,e.next=23,_o.Metadata.getPDA(h.publicKey);case 23:return g=e.sent,e.next=26,_o.EditionMarker.getPDA(r,l);case 26:return v=e.sent,e.next=29,_o.Edition.getPDA(h.publicKey);case 29:return b=e.sent,_=new _o.MintNewEditionFromMasterEditionViaToken({feePayer:n.publicKey},{edition:b,metadata:g,updateAuthority:null!==i&&void 0!==i?i:n.publicKey,mint:h.publicKey,mintAuthority:n.publicKey,masterEdition:o,masterMetadata:a,editionMarker:v,tokenOwner:n.publicKey,tokenAccount:m,editionValue:l}),e.next=33,Ro({connection:t,signers:[h],txs:[d,p,y,_],wallet:n});case 33:return w=e.sent,e.abrupt("return",{txId:w,mint:h.publicKey,metadata:g,edition:b});case 35:case"end":return e.stop()}}),e)})))},createMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connection,n=e.wallet,r=e.editionMint,i=e.metadataData,o=e.updateAuthority;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.Metadata.getPDA(r);case 2:return a=e.sent,s=new _o.CreateMetadata({feePayer:n.publicKey},{metadata:a,metadataData:i,updateAuthority:null!==o&&void 0!==o?o:n.publicKey,mint:r,mintAuthority:n.publicKey}),e.abrupt("return",Ro({connection:t,signers:[],txs:[s],wallet:n}));case 5:case"end":return e.stop()}}),e)})))},createMasterEdition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connection,n=e.wallet,r=e.editionMint,i=e.updateAuthority,o=e.maxSupply;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.Metadata.getPDA(r);case 2:return a=e.sent,e.next=5,_o.MasterEdition.getPDA(r);case 5:return s=e.sent,u=new _o.CreateMasterEdition({feePayer:n.publicKey},{edition:s,metadata:a,updateAuthority:null!==i&&void 0!==i?i:n.publicKey,mint:r,mintAuthority:n.publicKey,maxSupply:o}),e.abrupt("return",Ro({connection:t,signers:[],txs:[u],wallet:n}));case 8:case"end":return e.stop()}}),e)})))},signMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connection,n=e.wallet,r=e.editionMint,i=e.signer;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var o,a;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.Metadata.getPDA(r);case 2:return o=e.sent,a=new _o.SignMetadata({feePayer:n.publicKey},{metadata:o,creator:i?i.publicKey:n.publicKey}),e.next=6,Ro({connection:t,signers:i?[i]:[],txs:[a],wallet:n});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))},updateMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.connection,n=e.wallet,r=e.editionMint,i=e.newMetadataData,o=e.newUpdateAuthority,a=e.primarySaleHappened;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_o.Metadata.getPDA(r);case 2:return s=e.sent,u=new _o.UpdateMetadata({feePayer:n.publicKey},{metadata:s,updateAuthority:n.publicKey,metadataData:i,newUpdateAuthority:o,primarySaleHappened:a}),e.abrupt("return",Ro({connection:t,signers:[],txs:[u],wallet:n}));case 5:case"end":return e.stop()}}),e)})))},cancelBid:zo,getCancelBidTransactions:Zo,placeBid:No,redeemFullRightsTransferBid:Uo,getRedeemFRTBidTransactions:Fo,getBidRedemptionPDA:jo,redeemPrintingV2Bid:Wo,getRedeemPrintingV2BidTransactions:Vo,getEditionOffset:Ko,redeemParticipationBidV3:Go,isEligibleForParticipationPrize:Ho,claimBid:qo,getClaimBidTransactions:Yo,instantSale:function(e){var t=e.connection,n=e.wallet,r=e.store,o=e.auction;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M,P,B,C,O,D,R,L,z,Z;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],e.next=3,bo.AuctionManager.getPDA(o);case 3:return u=e.sent,e.next=6,bo.AuctionManager.load(t,u);case 6:return l=e.sent,e.next=9,go.Vault.load(t,l.data.vault);case 9:return f=e.sent,e.next=12,wo.AuctionExtended.getPDA(f.pubkey);case 12:return h=e.sent,e.next=15,wo.AuctionExtended.load(t,h);case 15:return d=e.sent,p=d.data.instantSalePrice,e.next=19,f.getSafetyDepositBoxes(t);case 19:return y=e.sent,m=(0,i.Z)(y,1),g=m[0],e.next=24,bo.SafetyDepositConfig.getPDA(u,g.pubkey);case 24:return v=e.sent,e.next=27,bo.SafetyDepositConfig.load(t,v);case 27:return b=e.sent,_=b.data,w=_.winningConfigType,x=_.participationConfig,e.next=33,No({connection:t,wallet:n,amount:p,auction:o});case 33:return k=e.sent,A=k.txId,E=k.bidderPotToken,a.push(A),e.next=39,t.confirmTransaction(A,"finalized");case 39:return e.next=41,wo.Auction.load(t,o);case 41:if(I=e.sent,S=I.data.bidState,T=S.getWinnerIndex(n.publicKey.toBase58()),!(null!==T)){e.next=69;break}e.t0=w,e.next=e.t0===bo.WinningConfigType.FullRightsTransfer?49:e.t0===bo.WinningConfigType.PrintingV2?55:61;break;case 49:return e.next=51,Uo({connection:t,wallet:n,store:r,auction:o});case 51:return M=e.sent,P=M.txId,a.push(P),e.abrupt("break",62);case 55:return e.next=57,Wo({connection:t,wallet:n,store:r,auction:o});case 57:return B=e.sent,C=B.txId,a.push(C),e.abrupt("break",62);case 61:throw new Error("".concat(w," winning type isn't supported yet"));case 62:return e.next=64,qo({connection:t,wallet:n,store:r,auction:o,bidderPotToken:E});case 64:O=e.sent,D=O.txId,a.push(D),e.next=74;break;case 69:return e.next=71,zo({connection:t,wallet:n,auction:o,bidderPotToken:E});case 71:R=e.sent,L=R.txId,a.push(L);case 74:if(!Ho(T,x)){e.next=81;break}return e.next=78,Go({connection:t,wallet:n,store:r,auction:o});case 78:z=e.sent,(Z=z.txIds).push.apply(Z,(0,s.Z)(Z));case 81:return e.abrupt("return",{txIds:a});case 82:case"end":return e.stop()}}),e)})))},burnToken:function(e){var t=e.connection,n=e.wallet,r=e.token,i=e.mint,o=e.amount,a=e.owner,s=e.close,u=void 0===s||s;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=new vo.Transaction({feePayer:n.publicKey}).add(mo.createBurnInstruction(no,i,r,null!==a&&void 0!==a?a:n.publicKey,[],o)),u&&s.add(mo.createCloseAccountInstruction(no,r,n.publicKey,null!==a&&void 0!==a?a:n.publicKey,[])),e.next=4,Ro({connection:t,wallet:n,txs:[s]});case 4:return l=e.sent,e.abrupt("return",{txId:l});case 6:case"end":return e.stop()}}),e)})))},sendToken:function(e){var t=e.connection,n=e.wallet,r=e.source,i=e.destination,o=e.mint,a=e.amount;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var s,u,l,f;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[],e.next=3,mo.getAssociatedTokenAddress(ro,no,o,i);case 3:return u=e.sent,l={feePayer:n.publicKey},e.prev=5,e.next=8,vo.Account.load(t,u);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),s.push(new Po(l,{associatedTokenAddress:u,splTokenMintAddress:o,walletAddress:i}));case 13:return s.push(new vo.Transaction(l).add(mo.createTransferInstruction(no,r,u,n.publicKey,[],a))),e.next=16,Ro({connection:t,wallet:n,txs:s});case 16:return f=e.sent,e.abrupt("return",{txId:f});case 18:case"end":return e.stop()}}),e,null,[[5,10]])})))},prepareTokenAccountAndMintTxs:Co,createWrappedAccountTxs:Oo,createApproveTxs:Do,closeVault:function(e){var t=e.connection,n=e.wallet,r=e.vault,i=e.priceMint;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,s,u,l,f,h,d,p,y,m,g,v,b,_,w,x,k,A,E,I,S,T,M;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(po.span);case 2:return a=e.sent,e.next=5,go.Vault.getPDA(r);case 5:return s=e.sent,u=new Lo({transactions:[]}),l={feePayer:n.publicKey},e.next=10,go.Vault.load(t,r);case 10:return f=e.sent,h=f.data,d=h.fractionMint,p=h.fractionTreasury,y=h.redeemTreasury,m=h.pricingLookupAddress,g=new o.PublicKey(d),v=new o.PublicKey(p),b=new o.PublicKey(y),_=new o.PublicKey(m),w=new go.ActivateVault(l,{vault:r,numberOfShares:new(mr())(0),fractionMint:g,fractionTreasury:v,fractionMintAuthority:s,vaultAuthority:n.publicKey}),u.addTransaction(w),x=o.Keypair.generate(),k=new Mo(l,{newAccountPubkey:x.publicKey,lamports:a,mint:g,owner:n.publicKey}),u.addTransaction(k),u.addSigner(x),A=o.Keypair.generate(),E=new Mo(l,{newAccountPubkey:A.publicKey,lamports:a,mint:i,owner:n.publicKey}),u.addTransaction(E),u.addSigner(A),I=o.Keypair.generate(),S=function(e){return(new vo.Transaction).add(mo.createApproveInstruction(no,e.publicKey,I.publicKey,n.publicKey,[],0))},u.addTransaction(S(A)),u.addTransaction(S(x)),u.addSigner(I),T=new go.CombineVault(l,{vault:r,outstandingShareTokenAccount:x.publicKey,payingTokenAccount:A.publicKey,fractionMint:g,fractionTreasury:v,redeemTreasury:b,burnAuthority:s,externalPriceAccount:_,transferAuthority:I.publicKey,vaultAuthority:n.publicKey,newVaultAuthority:n.publicKey}),u.addTransaction(T),e.next=39,Ro({connection:t,signers:u.signers,txs:u.transactions,wallet:n});case 39:return M=e.sent,e.abrupt("return",{txId:M});case 41:case"end":return e.stop()}}),e)})))},createExternalPriceAccount:function(e){var t=e.connection,n=e.wallet;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var r,i,a,s,u,l,f,h;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Lo({transactions:[]}),i={feePayer:n.publicKey},e.next=4,t.getMinimumBalanceForRentExemption(go.Vault.MAX_EXTERNAL_ACCOUNT_SIZE);case 4:return a=e.sent,s=o.Keypair.generate(),u=new go.ExternalPriceAccountData({pricePerShare:new(mr())(0),priceMint:fo.toBase58(),allowedToCombine:!0}),l=(new vo.Transaction).add(o.SystemProgram.createAccount({fromPubkey:n.publicKey,newAccountPubkey:s.publicKey,lamports:a,space:go.Vault.MAX_EXTERNAL_ACCOUNT_SIZE,programId:go.VaultProgram.PUBKEY})),r.addTransaction(l),r.addSigner(s),f=new go.UpdateExternalPriceAccount(i,{externalPriceAccount:s.publicKey,externalPriceAccountData:u}),r.addTransaction(f),e.next=14,Ro({connection:t,signers:r.signers,txs:r.transactions,wallet:n});case 14:return h=e.sent,e.abrupt("return",{txId:h,externalPriceAccount:s.publicKey,priceMint:fo});case 16:case"end":return e.stop()}}),e)})))},createVault:function(e){var t=e.connection,n=e.wallet,r=e.priceMint,i=void 0===r?fo:r,a=e.externalPriceAccount;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var r,s,u,l,f,h,d,p,y,m,g,v,b,_,w;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMinimumBalanceForRentExemption(po.span);case 2:return r=e.sent,e.next=5,t.getMinimumBalanceForRentExemption(ho.span);case 5:return s=e.sent,e.next=8,t.getMinimumBalanceForRentExemption(go.Vault.MAX_VAULT_SIZE);case 8:return u=e.sent,l=o.Keypair.generate(),e.next=12,go.Vault.getPDA(l.publicKey);case 12:return f=e.sent,h=new Lo({transactions:[]}),d=o.Keypair.generate(),p=new To({feePayer:n.publicKey},{newAccountPubkey:d.publicKey,lamports:s,owner:f,freezeAuthority:f}),h.addTransaction(p),h.addSigner(d),y=o.Keypair.generate(),m=new Mo({feePayer:n.publicKey},{newAccountPubkey:y.publicKey,lamports:r,mint:i,owner:f}),h.addTransaction(m),h.addSigner(y),g=o.Keypair.generate(),v=new Mo({feePayer:n.publicKey},{newAccountPubkey:g.publicKey,lamports:r,mint:d.publicKey,owner:f}),h.addTransaction(v),h.addSigner(g),b=(new vo.Transaction).add(o.SystemProgram.createAccount({fromPubkey:n.publicKey,newAccountPubkey:l.publicKey,lamports:u,space:go.Vault.MAX_VAULT_SIZE,programId:go.VaultProgram.PUBKEY})),h.addTransaction(b),h.addSigner(l),_=new go.InitVault({feePayer:n.publicKey},{vault:l.publicKey,vaultAuthority:n.publicKey,fractionalTreasury:g.publicKey,pricingLookupAddress:a,redeemTreasury:y.publicKey,fractionalMint:d.publicKey,allowFurtherShareCreation:!0}),h.addTransaction(_),e.next=33,Ro({connection:t,signers:h.signers,txs:h.transactions,wallet:n});case 33:return w=e.sent,e.abrupt("return",{txId:w,vault:l.publicKey,fractionMint:d.publicKey,redeemTreasury:y.publicKey,fractionTreasury:g.publicKey});case 35:case"end":return e.stop()}}),e)})))},initAuction:function(e){var t=e.connection,n=e.wallet,r=e.vault,o=e.auctionSettings;return ko(void 0,void 0,void 0,(0,c.Z)().mark((function e(){var a,s,u,l,f,h,d,p;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={feePayer:n.publicKey},e.next=3,Promise.all([wo.Auction.getPDA(r),wo.AuctionExtended.getPDA(r)]);case 3:return s=e.sent,u=(0,i.Z)(s,2),l=u[0],f=u[1],h=new wo.CreateAuctionArgs(Object.assign(Object.assign({},o),{authority:n.publicKey.toBase58(),resource:r.toBase58()})),d=new wo.CreateAuction(a,{args:h,auction:l,creator:n.publicKey,auctionExtended:f}),e.next=11,Ro({connection:t,signers:[],txs:[d],wallet:n});case 11:return p=e.sent,e.abrupt("return",{txId:p,auction:l});case 13:case"end":return e.stop()}}),e)})))}}),Qo=window.env,$o=function(e){var r=e.setVisualisationView,a=e.blob,s=(0,t.useState)(null),u=(0,i.Z)(s,2),f=u[0],h=u[1],d=(0,t.useState)(null),p=(0,i.Z)(d,2),y=p[0],m=p[1],g=Me().connection,v=In(),b=v.publicKey,_=(v.sendTransaction,n(96322)),w=(n(66315),(0,t.useState)(null)),x=(0,i.Z)(w,2),k=x[0],A=x[1],E=(0,t.useState)(null),I=(0,i.Z)(E,2),T=I[0],M=I[1],P=(0,t.useRef)(),B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.x,r=e.y,i=e.w,o=e.h,a=t.backgroundColor,s=void 0===a?"skyblue":a;T.beginPath(),T.fillStyle=s,T.fillRect(n,r,i,o)};function C(){return(C=(0,l.Z)((0,c.Z)().mark((function e(){var t,n,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b){e.next=2;break}throw new S;case 2:return g.getBalance(b).then((function(e){console.log(e/o.LAMPORTS_PER_SOL,"lamp sol")})),t=Qo.SOLANA_PRIVATE_KEY,n=t.slice(0,32),r=_.Keypair.fromSeed(Uint8Array.from(n)),e.next=8,Xo.mintNFT({connection:g,wallet:new Io(o.Keypair.fromSecretKey(r.secretKey)),uri:"https://www.arweave.net/1r-ImuiIxFl18UQolAoBnwLDMVcjkVAHruhtsaBpA7U?ext=json",maxSupply:1}).catch((function(e){return console.error(e)}));case 8:e.sent;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,t.useEffect)((function(){function e(){return e=(0,l.Z)((0,c.Z)().mark((function e(t){var n,r,i,o,a,s;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=URL.createObjectURL(t),r=new AudioContext,e.next=4,fetch(n);case 4:return i=e.sent,e.next=7,i.arrayBuffer();case 7:return o=e.sent,e.next=10,r.decodeAudioData(o);case 10:a=e.sent,s=a.getChannelData(0),A(s);case 13:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}var t=P.current;t.width=t.clientWidth,t.height=t.clientHeight,M(t.getContext("2d")),function(t){e.apply(this,arguments)}(a)}),[]),(0,t.useEffect)((function(){function e(e){var t=e.toString(16);return 1==t.length?"0"+t:t}if(k){for(var t=[],n=2e3;n<=2020;n++){var r=(a=Math.floor(1e8*Math.abs(k[n]))%256,s=Math.floor(1e10*Math.abs(k[n]))%256,u=Math.floor(1e12*Math.abs(k[n]))%256,"#"+e(a)+e(s)+e(u));t.push(r)}console.log(t);for(var i=0;i<30;i++)for(var o=0;o<30;o++){B({x:20*i,y:20*o,w:20,h:20},{backgroundColor:t[(i+30*o)%t.length]})}}var a,s,u}),[k]);return(0,$n.jsxs)("div",{className:"central-inner-container",children:[(0,$n.jsx)("div",{className:"CanvasVisual",children:(0,$n.jsx)("canvas",{ref:P,height:"500",width:"500"})}),(0,$n.jsxs)("div",{className:"vis-btns",children:[(0,$n.jsx)(ur,{x:h,y:m,xx:f,yy:y}),(0,$n.jsx)("button",{className:"btn btn-ghost big",onClick:function(){return C.apply(this,arguments)},children:"mint NFT"}),(0,$n.jsx)("button",{className:"btn btn-ghost",onClick:function(){r(!1)},children:"back"})]})]})},Jo=function(){var e=In(),n=(0,t.useState)(!1),r=(0,i.Z)(n,2),o=r[0],a=r[1],s=(0,t.useState)(null),u=(0,i.Z)(s,2),c=u[0],l=u[1];return(0,$n.jsxs)("div",{className:"grad",children:[(0,$n.jsx)(ar,{}),(0,$n.jsx)("div",{className:"central-outer-container",children:e.publicKey?o?(0,$n.jsx)($o,{setVisualisationView:a,blob:c}):(0,$n.jsx)(tr,{ear:Kn,setVisualisationView:a,onRecorded:function(e){l(e)}}):(0,$n.jsx)(Jn,{ear:Kn})}),(0,$n.jsx)(sr,{})]})};n(89752);var ea=function(){var n=e.Devnet,r=(0,t.useMemo)((function(){return(0,o.clusterApiUrl)(n)}),[n]),a=(0,t.useState)(!1),s=(0,i.Z)(a,2),u=(s[0],s[1],(0,t.useMemo)((function(){return[new W,new H,new X,new $({solNetwork:n}),new te,new we,new Se,new Ee]}),[n]));return In(),(0,$n.jsx)(Pe,{endpoint:r,children:(0,$n.jsx)(Pn,{wallets:u,children:(0,$n.jsx)(Vn,{children:(0,$n.jsx)("div",{className:"App",children:(0,$n.jsx)(Jo,{})})})})})};window.Buffer=window.Buffer||fr.Buffer,r.createRoot(document.getElementById("root")).render((0,$n.jsx)(ea,{}))}()}();
//# sourceMappingURL=main.210e6334.js.map